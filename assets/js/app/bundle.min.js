(function(){function h(a,o,s){function u(r,e){if(!o[r]){if(!a[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(l)return l(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var n=o[r]={exports:{}};a[r][0].call(n.exports,function(e){var t=a[r][1][e];return u(t||e)},n,n.exports,h,a,o,s)}return o[r].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}return h})()({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/display");var h=e("@pixi/utils");var n={accessible:false,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:false,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:true,renderId:-1};i.DisplayObject.mixin(n);var a=9;var o=100;var s=0;var u=0;var l=2;var c=1;var f=-1e3;var d=-1e3;var p=2;var v=function(){function e(e){this._hookDiv=null;if(h.isMobile.tablet||h.isMobile.phone){this.createTouchHook()}var t=document.createElement("div");t.style.width=o+"px";t.style.height=o+"px";t.style.position="absolute";t.style.top=s+"px";t.style.left=u+"px";t.style.zIndex=l.toString();this.div=t;this.pool=[];this.renderId=0;this.debug=false;this.renderer=e;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this._isActive=false;this._isMobileAccessibility=false;this.androidUpdateCount=0;this.androidUpdateFrequency=500;window.addEventListener("keydown",this._onKeyDown,false)}Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:false,configurable:true});e.prototype.createTouchHook=function(){var e=this;var t=document.createElement("button");t.style.width=c+"px";t.style.height=c+"px";t.style.position="absolute";t.style.top=f+"px";t.style.left=d+"px";t.style.zIndex=p.toString();t.style.backgroundColor="#FF0000";t.title="select to enable accessability for this content";t.addEventListener("focus",function(){e._isMobileAccessibility=true;e.activate();e.destroyTouchHook()});document.body.appendChild(t);this._hookDiv=t};e.prototype.destroyTouchHook=function(){if(!this._hookDiv){return}document.body.removeChild(this._hookDiv);this._hookDiv=null};e.prototype.activate=function(){if(this._isActive){return}this._isActive=true;window.document.addEventListener("mousemove",this._onMouseMove,true);window.removeEventListener("keydown",this._onKeyDown,false);this.renderer.on("postrender",this.update,this);if(this.renderer.view.parentNode){this.renderer.view.parentNode.appendChild(this.div)}};e.prototype.deactivate=function(){if(!this._isActive||this._isMobileAccessibility){return}this._isActive=false;window.document.removeEventListener("mousemove",this._onMouseMove,true);window.addEventListener("keydown",this._onKeyDown,false);this.renderer.off("postrender",this.update);if(this.div.parentNode){this.div.parentNode.removeChild(this.div)}};e.prototype.updateAccessibleObjects=function(e){if(!e.visible||!e.accessibleChildren){return}if(e.accessible&&e.interactive){if(!e._accessibleActive){this.addChild(e)}e.renderId=this.renderId}var t=e.children;for(var r=0;r<t.length;r++){this.updateAccessibleObjects(t[r])}};e.prototype.update=function(){var e=performance.now();if(h.isMobile.android.device&&e<this.androidUpdateCount){return}this.androidUpdateCount=e+this.androidUpdateFrequency;if(!this.renderer.renderingToScreen){return}if(this.renderer._lastObjectRendered){this.updateAccessibleObjects(this.renderer._lastObjectRendered)}var t=this.renderer.view.getBoundingClientRect();var r=this.renderer.resolution;var i=t.width/this.renderer.width*r;var n=t.height/this.renderer.height*r;var a=this.div;a.style.left=t.left+"px";a.style.top=t.top+"px";a.style.width=this.renderer.width+"px";a.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId){s._accessibleActive=false;h.removeItems(this.children,o,1);this.div.removeChild(s._accessibleDiv);this.pool.push(s._accessibleDiv);s._accessibleDiv=null;o--}else{a=s._accessibleDiv;var u=s.hitArea;var l=s.worldTransform;if(s.hitArea){a.style.left=(l.tx+u.x*l.a)*i+"px";a.style.top=(l.ty+u.y*l.d)*n+"px";a.style.width=u.width*l.a*i+"px";a.style.height=u.height*l.d*n+"px"}else{u=s.getBounds();this.capHitArea(u);a.style.left=u.x*i+"px";a.style.top=u.y*n+"px";a.style.width=u.width*i+"px";a.style.height=u.height*n+"px";if(a.title!==s.accessibleTitle&&s.accessibleTitle!==null){a.title=s.accessibleTitle}if(a.getAttribute("aria-label")!==s.accessibleHint&&s.accessibleHint!==null){a.setAttribute("aria-label",s.accessibleHint)}}if(s.accessibleTitle!==a.title||s.tabIndex!==a.tabIndex){a.title=s.accessibleTitle;a.tabIndex=s.tabIndex;if(this.debug){this.updateDebugHTML(a)}}}}this.renderId++};e.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex};e.prototype.capHitArea=function(e){if(e.x<0){e.width+=e.x;e.x=0}if(e.y<0){e.height+=e.y;e.y=0}if(e.x+e.width>this.renderer.width){e.width=this.renderer.width-e.x}if(e.y+e.height>this.renderer.height){e.height=this.renderer.height-e.y}};e.prototype.addChild=function(e){var t=this.pool.pop();if(!t){t=document.createElement("button");t.style.width=o+"px";t.style.height=o+"px";t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent";t.style.position="absolute";t.style.zIndex=l.toString();t.style.borderStyle="none";if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){t.setAttribute("aria-live","off")}else{t.setAttribute("aria-live","polite")}if(navigator.userAgent.match(/rv:.*Gecko\//)){t.setAttribute("aria-relevant","additions")}else{t.setAttribute("aria-relevant","text")}t.addEventListener("click",this._onClick.bind(this));t.addEventListener("focus",this._onFocus.bind(this));t.addEventListener("focusout",this._onFocusOut.bind(this))}t.style.pointerEvents=e.accessiblePointerEvents;t.type=e.accessibleType;if(e.accessibleTitle&&e.accessibleTitle!==null){t.title=e.accessibleTitle}else if(!e.accessibleHint||e.accessibleHint===null){t.title="displayObject "+e.tabIndex}if(e.accessibleHint&&e.accessibleHint!==null){t.setAttribute("aria-label",e.accessibleHint)}if(this.debug){this.updateDebugHTML(t)}e._accessibleActive=true;e._accessibleDiv=t;t.displayObject=e;this.children.push(e);this.div.appendChild(e._accessibleDiv);e._accessibleDiv.tabIndex=e.tabIndex};e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData);t.dispatchEvent(e.target.displayObject,"pointertap",t.eventData);t.dispatchEvent(e.target.displayObject,"tap",t.eventData)};e.prototype._onFocus=function(e){if(!e.target.getAttribute("aria-live")){e.target.setAttribute("aria-live","assertive")}var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)};e.prototype._onFocusOut=function(e){if(!e.target.getAttribute("aria-live")){e.target.setAttribute("aria-live","polite")}var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)};e.prototype._onKeyDown=function(e){if(e.keyCode!==a){return}this.activate()};e.prototype._onMouseMove=function(e){if(e.movementX===0&&e.movementY===0){return}this.deactivate()};e.prototype.destroy=function(){this.destroyTouchHook();this.div=null;window.document.removeEventListener("mousemove",this._onMouseMove,true);window.removeEventListener("keydown",this._onKeyDown);this.pool=null;this.children=null;this.renderer=null};return e}();r.AccessibilityManager=v;r.accessibleTarget=n},{"@pixi/display":5,"@pixi/utils":34}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/display");var a=e("@pixi/core");var n=function(){function n(t){var r=this;t=Object.assign({forceCanvas:false},t);this.renderer=a.autoDetectRenderer(t);this.stage=new i.Container;n._plugins.forEach(function(e){e.init.call(r,t)})}n.registerPlugin=function(e){n._plugins.push(e)};n.prototype.render=function(){this.renderer.render(this.stage)};Object.defineProperty(n.prototype,"view",{get:function(){return this.renderer.view},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:false,configurable:true});n.prototype.destroy=function(e,t){var r=this;var i=n._plugins.slice(0);i.reverse();i.forEach(function(e){e.destroy.call(r)});this.stage.destroy(t);this.stage=null;this.renderer.destroy(e);this.renderer=null};return n}();n._plugins=[];var o=function(){function e(){}e.init=function(e){var a=this;Object.defineProperty(this,"resizeTo",{set:function(e){window.removeEventListener("resize",this.queueResize);this._resizeTo=e;if(e){window.addEventListener("resize",this.queueResize);this.resize()}},get:function(){return this._resizeTo}});this.queueResize=function(){if(!a._resizeTo){return}a.cancelResize();a._resizeId=requestAnimationFrame(function(){return a.resize()})};this.cancelResize=function(){if(a._resizeId){cancelAnimationFrame(a._resizeId);a._resizeId=null}};this.resize=function(){if(!a._resizeTo){return}a.cancelResize();var e;var t;if(a._resizeTo===window){e=window.innerWidth;t=window.innerHeight}else{var r=a._resizeTo,i=r.clientWidth,n=r.clientHeight;e=i;t=n}a.renderer.resize(e,t)};this._resizeId=null;this._resizeTo=null;this.resizeTo=e.resizeTo||null};e.destroy=function(){this.cancelResize();this.cancelResize=null;this.queueResize=null;this.resizeTo=null;this.resize=null};return e}();n.registerPlugin(o);r.Application=n},{"@pixi/core":4,"@pixi/display":5}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});(function(e){e[e["WEBGL_LEGACY"]=0]="WEBGL_LEGACY";e[e["WEBGL"]=1]="WEBGL";e[e["WEBGL2"]=2]="WEBGL2"})(r.ENV||(r.ENV={}));(function(e){e[e["UNKNOWN"]=0]="UNKNOWN";e[e["WEBGL"]=1]="WEBGL";e[e["CANVAS"]=2]="CANVAS"})(r.RENDERER_TYPE||(r.RENDERER_TYPE={}));(function(e){e[e["COLOR"]=16384]="COLOR";e[e["DEPTH"]=256]="DEPTH";e[e["STENCIL"]=1024]="STENCIL"})(r.BUFFER_BITS||(r.BUFFER_BITS={}));(function(e){e[e["NORMAL"]=0]="NORMAL";e[e["ADD"]=1]="ADD";e[e["MULTIPLY"]=2]="MULTIPLY";e[e["SCREEN"]=3]="SCREEN";e[e["OVERLAY"]=4]="OVERLAY";e[e["DARKEN"]=5]="DARKEN";e[e["LIGHTEN"]=6]="LIGHTEN";e[e["COLOR_DODGE"]=7]="COLOR_DODGE";e[e["COLOR_BURN"]=8]="COLOR_BURN";e[e["HARD_LIGHT"]=9]="HARD_LIGHT";e[e["SOFT_LIGHT"]=10]="SOFT_LIGHT";e[e["DIFFERENCE"]=11]="DIFFERENCE";e[e["EXCLUSION"]=12]="EXCLUSION";e[e["HUE"]=13]="HUE";e[e["SATURATION"]=14]="SATURATION";e[e["COLOR"]=15]="COLOR";e[e["LUMINOSITY"]=16]="LUMINOSITY";e[e["NORMAL_NPM"]=17]="NORMAL_NPM";e[e["ADD_NPM"]=18]="ADD_NPM";e[e["SCREEN_NPM"]=19]="SCREEN_NPM";e[e["NONE"]=20]="NONE";e[e["SRC_OVER"]=0]="SRC_OVER";e[e["SRC_IN"]=21]="SRC_IN";e[e["SRC_OUT"]=22]="SRC_OUT";e[e["SRC_ATOP"]=23]="SRC_ATOP";e[e["DST_OVER"]=24]="DST_OVER";e[e["DST_IN"]=25]="DST_IN";e[e["DST_OUT"]=26]="DST_OUT";e[e["DST_ATOP"]=27]="DST_ATOP";e[e["ERASE"]=26]="ERASE";e[e["SUBTRACT"]=28]="SUBTRACT";e[e["XOR"]=29]="XOR"})(r.BLEND_MODES||(r.BLEND_MODES={}));(function(e){e[e["POINTS"]=0]="POINTS";e[e["LINES"]=1]="LINES";e[e["LINE_LOOP"]=2]="LINE_LOOP";e[e["LINE_STRIP"]=3]="LINE_STRIP";e[e["TRIANGLES"]=4]="TRIANGLES";e[e["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP";e[e["TRIANGLE_FAN"]=6]="TRIANGLE_FAN"})(r.DRAW_MODES||(r.DRAW_MODES={}));(function(e){e[e["RGBA"]=6408]="RGBA";e[e["RGB"]=6407]="RGB";e[e["ALPHA"]=6406]="ALPHA";e[e["LUMINANCE"]=6409]="LUMINANCE";e[e["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA";e[e["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT";e[e["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL"})(r.FORMATS||(r.FORMATS={}));(function(e){e[e["TEXTURE_2D"]=3553]="TEXTURE_2D";e[e["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP";e[e["TEXTURE_2D_ARRAY"]=35866]="TEXTURE_2D_ARRAY";e[e["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";e[e["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";e[e["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";e[e["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";e[e["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";e[e["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(r.TARGETS||(r.TARGETS={}));(function(e){e[e["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE";e[e["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT";e[e["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5";e[e["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4";e[e["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1";e[e["FLOAT"]=5126]="FLOAT";e[e["HALF_FLOAT"]=36193]="HALF_FLOAT"})(r.TYPES||(r.TYPES={}));(function(e){e[e["NEAREST"]=0]="NEAREST";e[e["LINEAR"]=1]="LINEAR"})(r.SCALE_MODES||(r.SCALE_MODES={}));(function(e){e[e["CLAMP"]=33071]="CLAMP";e[e["REPEAT"]=10497]="REPEAT";e[e["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT"})(r.WRAP_MODES||(r.WRAP_MODES={}));(function(e){e[e["OFF"]=0]="OFF";e[e["POW2"]=1]="POW2";e[e["ON"]=2]="ON"})(r.MIPMAP_MODES||(r.MIPMAP_MODES={}));(function(e){e[e["NPM"]=0]="NPM";e[e["UNPACK"]=1]="UNPACK";e[e["PMA"]=2]="PMA";e[e["NO_PREMULTIPLIED_ALPHA"]=0]="NO_PREMULTIPLIED_ALPHA";e[e["PREMULTIPLY_ON_UPLOAD"]=1]="PREMULTIPLY_ON_UPLOAD";e[e["PREMULTIPLY_ALPHA"]=2]="PREMULTIPLY_ALPHA"})(r.ALPHA_MODES||(r.ALPHA_MODES={}));(function(e){e[e["NO"]=0]="NO";e[e["YES"]=1]="YES";e[e["AUTO"]=2]="AUTO";e[e["BLEND"]=0]="BLEND";e[e["CLEAR"]=1]="CLEAR";e[e["BLIT"]=2]="BLIT"})(r.CLEAR_MODES||(r.CLEAR_MODES={}));(function(e){e[e["AUTO"]=0]="AUTO";e[e["MANUAL"]=1]="MANUAL"})(r.GC_MODES||(r.GC_MODES={}));(function(e){e["LOW"]="lowp";e["MEDIUM"]="mediump";e["HIGH"]="highp"})(r.PRECISION||(r.PRECISION={}));(function(e){e[e["NONE"]=0]="NONE";e[e["SCISSOR"]=1]="SCISSOR";e[e["STENCIL"]=2]="STENCIL";e[e["SPRITE"]=3]="SPRITE"})(r.MASK_TYPES||(r.MASK_TYPES={}));(function(e){e[e["NONE"]=0]="NONE";e[e["LOW"]=2]="LOW";e[e["MEDIUM"]=4]="MEDIUM";e[e["HIGH"]=8]="HIGH"})(r.MSAA_QUALITY||(r.MSAA_QUALITY={}))},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var m=e("@pixi/settings");var y=e("@pixi/constants");var _=e("@pixi/utils");var n=e("@pixi/runner");var i=e("@pixi/ticker");var l=e("@pixi/math");m.settings.PREFER_ENV=_.isMobile.any?y.ENV.WEBGL:y.ENV.WEBGL2;m.settings.STRICT_TEXTURE_CACHE=false;var o=[];function g(e,t){if(!e){return null}var r="";if(typeof e==="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);if(i){r=i[1].toLowerCase()}}for(var n=o.length-1;n>=0;--n){var a=o[n];if(a.test&&a.test(e,r)){return new a(e,t)}}throw new Error("Unrecognized source type to auto-detect Resource")}var a=function(e,t){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return a(e,t)};function c(e,t){a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var b=function(){function e(e,t){if(e===void 0){e=0}if(t===void 0){t=0}this._width=e;this._height=t;this.destroyed=false;this.internal=false;this.onResize=new n.Runner("setRealSize");this.onUpdate=new n.Runner("update");this.onError=new n.Runner("onError")}e.prototype.bind=function(e){this.onResize.add(e);this.onUpdate.add(e);this.onError.add(e);if(this._width||this._height){this.onResize.emit(this._width,this._height)}};e.prototype.unbind=function(e){this.onResize.remove(e);this.onUpdate.remove(e);this.onError.remove(e)};e.prototype.resize=function(e,t){if(e!==this._width||t!==this._height){this._width=e;this._height=t;this.onResize.emit(e,t)}};Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:false,configurable:true});e.prototype.update=function(){if(!this.destroyed){this.onUpdate.emit()}};e.prototype.load=function(){return Promise.resolve(this)};Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:false,configurable:true});e.prototype.style=function(e,t,r){return false};e.prototype.dispose=function(){};e.prototype.destroy=function(){if(!this.destroyed){this.destroyed=true;this.dispose();this.onError.removeAll();this.onError=null;this.onResize.removeAll();this.onResize=null;this.onUpdate.removeAll();this.onUpdate=null}};e.test=function(e,t){return false};return e}();var s=function(o){c(e,o);function e(e,t){var r=this;var i=t||{},n=i.width,a=i.height;if(!n||!a){throw new Error("BufferResource width or height invalid")}r=o.call(this,n,a)||this;r.data=e;return r}e.prototype.upload=function(e,t,r){var i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===y.ALPHA_MODES.UNPACK);if(r.width===t.width&&r.height===t.height){i.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data)}else{r.width=t.width;r.height=t.height;i.texImage2D(t.target,0,r.internalFormat,t.width,t.height,0,t.format,r.type,this.data)}return true};e.prototype.dispose=function(){this.data=null};e.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array};return e}(b);var u={scaleMode:y.SCALE_MODES.NEAREST,format:y.FORMATS.RGBA,alphaMode:y.ALPHA_MODES.NPM};var d=function(v){c(o,v);function o(e,t){if(e===void 0){e=null}if(t===void 0){t=null}var r=v.call(this)||this;t=t||{};var i=t.alphaMode,n=t.mipmap,a=t.anisotropicLevel,o=t.scaleMode,s=t.width,u=t.height,l=t.wrapMode,h=t.format,c=t.type,f=t.target,d=t.resolution,p=t.resourceOptions;if(e&&!(e instanceof b)){e=g(e,p);e.internal=true}r.width=s||0;r.height=u||0;r.resolution=d||m.settings.RESOLUTION;r.mipmap=n!==undefined?n:m.settings.MIPMAP_TEXTURES;r.anisotropicLevel=a!==undefined?a:m.settings.ANISOTROPIC_LEVEL;r.wrapMode=l||m.settings.WRAP_MODE;r.scaleMode=o!==undefined?o:m.settings.SCALE_MODE;r.format=h||y.FORMATS.RGBA;r.type=c||y.TYPES.UNSIGNED_BYTE;r.target=f||y.TARGETS.TEXTURE_2D;r.alphaMode=i!==undefined?i:y.ALPHA_MODES.UNPACK;if(t.premultiplyAlpha!==undefined){r.premultiplyAlpha=t.premultiplyAlpha}r.uid=_.uid();r.touched=0;r.isPowerOfTwo=false;r._refreshPOT();r._glTextures={};r.dirtyId=0;r.dirtyStyleId=0;r.cacheId=null;r.valid=s>0&&u>0;r.textureCacheIds=[];r.destroyed=false;r.resource=null;r._batchEnabled=0;r._batchLocation=0;r.parentTextureArray=null;r.setResource(e);return r}Object.defineProperty(o.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:false,configurable:true});Object.defineProperty(o.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:false,configurable:true});o.prototype.setStyle=function(e,t){var r;if(e!==undefined&&e!==this.scaleMode){this.scaleMode=e;r=true}if(t!==undefined&&t!==this.mipmap){this.mipmap=t;r=true}if(r){this.dirtyStyleId++}return this};o.prototype.setSize=function(e,t,r){this.resolution=r||this.resolution;this.width=e;this.height=t;this._refreshPOT();this.update();return this};o.prototype.setRealSize=function(e,t,r){this.resolution=r||this.resolution;this.width=e/this.resolution;this.height=t/this.resolution;this._refreshPOT();this.update();return this};o.prototype._refreshPOT=function(){this.isPowerOfTwo=_.isPow2(this.realWidth)&&_.isPow2(this.realHeight)};o.prototype.setResolution=function(e){var t=this.resolution;if(t===e){return this}this.resolution=e;if(this.valid){this.width=this.width*t/e;this.height=this.height*t/e;this.emit("update",this)}this._refreshPOT();return this};o.prototype.setResource=function(e){if(this.resource===e){return this}if(this.resource){throw new Error("Resource can be set only once")}e.bind(this);this.resource=e;return this};o.prototype.update=function(){if(!this.valid){if(this.width>0&&this.height>0){this.valid=true;this.emit("loaded",this);this.emit("update",this)}}else{this.dirtyId++;this.dirtyStyleId++;this.emit("update",this)}};o.prototype.onError=function(e){this.emit("error",this,e)};o.prototype.destroy=function(){if(this.resource){this.resource.unbind(this);if(this.resource.internal){this.resource.destroy()}this.resource=null}if(this.cacheId){delete _.BaseTextureCache[this.cacheId];delete _.TextureCache[this.cacheId];this.cacheId=null}this.dispose();o.removeFromCache(this);this.textureCacheIds=null;this.destroyed=true};o.prototype.dispose=function(){this.emit("dispose",this)};o.prototype.castToBaseTexture=function(){return this};o.from=function(e,t,r){if(r===void 0){r=m.settings.STRICT_TEXTURE_CACHE}var i=typeof e==="string";var n=null;if(i){n=e}else{if(!e._pixiId){e._pixiId="pixiid_"+_.uid()}n=e._pixiId}var a=_.BaseTextureCache[n];if(i&&r&&!a){throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.')}if(!a){a=new o(e,t);a.cacheId=n;o.addToCache(a,n)}return a};o.fromBuffer=function(e,t,r,i){e=e||new Float32Array(t*r*4);var n=new s(e,{width:t,height:r});var a=e instanceof Float32Array?y.TYPES.FLOAT:y.TYPES.UNSIGNED_BYTE;return new o(n,Object.assign(u,i||{width:t,height:r,type:a}))};o.addToCache=function(e,t){if(t){if(e.textureCacheIds.indexOf(t)===-1){e.textureCacheIds.push(t)}if(_.BaseTextureCache[t]){console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry")}_.BaseTextureCache[t]=e}};o.removeFromCache=function(e){if(typeof e==="string"){var t=_.BaseTextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);if(r>-1){t.textureCacheIds.splice(r,1)}delete _.BaseTextureCache[e];return t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i){delete _.BaseTextureCache[e.textureCacheIds[i]]}e.textureCacheIds.length=0;return e}return null};o._globalBatch=0;return o}(_.EventEmitter);var h=function(u){c(e,u);function e(e,t){var r=this;var i=t||{},n=i.width,a=i.height;r=u.call(this,n,a)||this;r.items=[];r.itemDirtyIds=[];for(var o=0;o<e;o++){var s=new d;r.items.push(s);r.itemDirtyIds.push(-2)}r.length=e;r._load=null;r.baseTexture=null;return r}e.prototype.initFromArray=function(e,t){for(var r=0;r<this.length;r++){if(!e[r]){continue}if(e[r].castToBaseTexture){this.addBaseTextureAt(e[r].castToBaseTexture(),r)}else if(e[r]instanceof b){this.addResourceAt(e[r],r)}else{this.addResourceAt(g(e[r],t),r)}}};e.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++){this.items[e].destroy()}this.items=null;this.itemDirtyIds=null;this._load=null};e.prototype.addResourceAt=function(e,t){if(!this.items[t]){throw new Error("Index "+t+" is out of bounds")}if(e.valid&&!this.valid){this.resize(e.width,e.height)}this.items[t].setResource(e);return this};e.prototype.bind=function(e){if(this.baseTexture!==null){throw new Error("Only one base texture per TextureArray is allowed")}u.prototype.bind.call(this,e);for(var t=0;t<this.length;t++){this.items[t].parentTextureArray=e;this.items[t].on("update",e.update,e)}};e.prototype.unbind=function(e){u.prototype.unbind.call(this,e);for(var t=0;t<this.length;t++){this.items[t].parentTextureArray=null;this.items[t].off("update",e.update,e)}};e.prototype.load=function(){var i=this;if(this._load){return this._load}var e=this.items.map(function(e){return e.resource}).filter(function(e){return e});var t=e.map(function(e){return e.load()});this._load=Promise.all(t).then(function(){var e=i.items[0],t=e.realWidth,r=e.realHeight;i.resize(t,r);return Promise.resolve(i)});return this._load};return e}(b);var f=function(u){c(e,u);function e(e,t){var r=this;var i=t||{},n=i.width,a=i.height;var o;var s;if(Array.isArray(e)){o=e;s=e.length}else{s=e}r=u.call(this,s,{width:n,height:a})||this;if(o){r.initFromArray(o,t)}return r}e.prototype.addBaseTextureAt=function(e,t){if(e.resource){this.addResourceAt(e.resource,t)}else{throw new Error("ArrayResource does not support RenderTexture")}return this};e.prototype.bind=function(e){u.prototype.bind.call(this,e);e.target=y.TARGETS.TEXTURE_2D_ARRAY};e.prototype.upload=function(e,t,r){var i=this,n=i.length,a=i.itemDirtyIds,o=i.items;var s=e.gl;if(r.dirtyId<0){s.texImage3D(s.TEXTURE_2D_ARRAY,0,t.format,this._width,this._height,n,0,t.format,t.type,null)}for(var u=0;u<n;u++){var l=o[u];if(a[u]<l.dirtyId){a[u]=l.dirtyId;if(l.valid){s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,u,l.resource.width,l.resource.height,1,t.format,t.type,l.resource.source)}}}return true};return e}(h);var p=function(a){c(e,a);function e(e){var t=this;var r=e;var i=r.naturalWidth||r.videoWidth||r.width;var n=r.naturalHeight||r.videoHeight||r.height;t=a.call(this,i,n)||this;t.source=e;t.noSubImage=false;return t}e.crossOrigin=function(e,t,r){if(r===undefined&&t.indexOf("data:")!==0){e.crossOrigin=_.determineCrossOrigin(t)}else if(r!==false){e.crossOrigin=typeof r==="string"?r:"anonymous"}};e.prototype.upload=function(e,t,r,i){var n=e.gl;var a=t.realWidth;var o=t.realHeight;i=i||this.source;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===y.ALPHA_MODES.UNPACK);if(!this.noSubImage&&t.target===n.TEXTURE_2D&&r.width===a&&r.height===o){n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.format,t.type,i)}else{r.width=a;r.height=o;n.texImage2D(t.target,0,t.format,t.format,t.type,i)}return true};e.prototype.update=function(){if(this.destroyed){return}var e=this.source;var t=e.naturalWidth||e.videoWidth||e.width;var r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r);a.prototype.update.call(this)};e.prototype.dispose=function(){this.source=null};return e}(b);var v=function(e){c(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.test=function(e){var t=window.OffscreenCanvas;if(t&&e instanceof t){return true}return e instanceof HTMLCanvasElement};return t}(p);var x=function(l){c(h,l);function h(e,t){var r=this;var i=t||{},n=i.width,a=i.height,o=i.autoLoad,s=i.linkBaseTexture;if(e&&e.length!==h.SIDES){throw new Error("Invalid length. Got "+e.length+", expected 6")}r=l.call(this,6,{width:n,height:a})||this;for(var u=0;u<h.SIDES;u++){r.items[u].target=y.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+u}r.linkBaseTexture=s!==false;if(e){r.initFromArray(e,t)}if(o!==false){r.load()}return r}h.prototype.bind=function(e){l.prototype.bind.call(this,e);e.target=y.TARGETS.TEXTURE_CUBE_MAP};h.prototype.addBaseTextureAt=function(e,t,r){if(r===undefined){r=this.linkBaseTexture}if(!this.items[t]){throw new Error("Index "+t+" is out of bounds")}if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(e.resource){this.addResourceAt(e.resource,t)}else{throw new Error("CubeResource does not support copying of renderTexture.")}}else{e.target=y.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+t;e.parentTextureArray=this.baseTexture;this.items[t]=e}if(e.valid&&!this.valid){this.resize(e.realWidth,e.realHeight)}this.items[t]=e;return this};h.prototype.upload=function(e,t,r){var i=this.itemDirtyIds;for(var n=0;n<h.SIDES;n++){var a=this.items[n];if(i[n]<a.dirtyId){if(a.valid&&a.resource){a.resource.upload(e,a,r);i[n]=a.dirtyId}else if(i[n]<-1){e.gl.texImage2D(a.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null);i[n]=-1}}}return true};h.test=function(e){return Array.isArray(e)&&e.length===h.SIDES};h.SIDES=6;return h}(h);var w=function(s){c(e,s);function e(e,t){var r=this;t=t||{};if(!(e instanceof HTMLImageElement)){var i=new Image;p.crossOrigin(i,e,t.crossorigin);i.src=e;e=i}r=s.call(this,e)||this;if(!e.complete&&!!r._width&&!!r._height){r._width=0;r._height=0}r.url=e.src;r._process=null;r.preserveBitmap=false;r.createBitmap=(t.createBitmap!==undefined?t.createBitmap:m.settings.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap;r.alphaMode=typeof t.alphaMode==="number"?t.alphaMode:null;if(t.premultiplyAlpha!==undefined){r.premultiplyAlpha=t.premultiplyAlpha}r.bitmap=null;r._load=null;if(t.autoLoad!==false){r.load()}return r}e.prototype.load=function(e){var n=this;if(this._load){return this._load}if(e!==undefined){this.createBitmap=e}this._load=new Promise(function(e,t){var r=n.source;n.url=r.src;var i=function(){if(n.destroyed){return}r.onload=null;r.onerror=null;n.resize(r.width,r.height);n._load=null;if(n.createBitmap){e(n.process())}else{e(n)}};if(r.complete&&r.src){i()}else{r.onload=i;r.onerror=function(e){t(e);n.onError.emit(e)}}});return this._load};e.prototype.process=function(){var t=this;var e=this.source;if(this._process!==null){return this._process}if(this.bitmap!==null||!window.createImageBitmap){return Promise.resolve(this)}this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===y.ALPHA_MODES.UNPACK?"premultiply":"none"}).then(function(e){if(t.destroyed){return Promise.reject()}t.bitmap=e;t.update();t._process=null;return Promise.resolve(t)});return this._process};e.prototype.upload=function(e,t,r){if(typeof this.alphaMode==="number"){t.alphaMode=this.alphaMode}if(!this.createBitmap){return s.prototype.upload.call(this,e,t,r)}if(!this.bitmap){this.process();if(!this.bitmap){return false}}s.prototype.upload.call(this,e,t,r,this.bitmap);if(!this.preserveBitmap){var i=true;var n=t._glTextures;for(var a in n){var o=n[a];if(o!==r&&o.dirtyId!==t.dirtyId){i=false;break}}if(i){if(this.bitmap.close){this.bitmap.close()}this.bitmap=null}}return true};e.prototype.dispose=function(){this.source.onload=null;this.source.onerror=null;s.prototype.dispose.call(this);if(this.bitmap){this.bitmap.close();this.bitmap=null}this._process=null;this._load=null};e.test=function(e){return typeof e==="string"||e instanceof HTMLImageElement};return e}(p);var E=function(i){c(n,i);function n(e,t){var r=this;t=t||{};r=i.call(this,document.createElement("canvas"))||this;r._width=0;r._height=0;r.svg=e;r.scale=t.scale||1;r._overrideWidth=t.width;r._overrideHeight=t.height;r._resolve=null;r._crossorigin=t.crossorigin;r._load=null;if(t.autoLoad!==false){r.load()}return r}n.prototype.load=function(){var t=this;if(this._load){return this._load}this._load=new Promise(function(e){t._resolve=function(){t.resize(t.source.width,t.source.height);e(t)};if(/^\<svg/.test(t.svg.trim())){if(!btoa){throw new Error("Your browser doesn't support base64 conversions.")}t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()});return this._load};n.prototype._loadSvg=function(){var a=this;var o=new Image;p.crossOrigin(o,this.svg,this._crossorigin);o.src=this.svg;o.onerror=function(e){if(!a._resolve){return}o.onerror=null;a.onError.emit(e)};o.onload=function(){if(!a._resolve){return}var e=o.width;var t=o.height;if(!e||!t){throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.")}var r=e*a.scale;var i=t*a.scale;if(a._overrideWidth||a._overrideHeight){r=a._overrideWidth||a._overrideHeight/t*e;i=a._overrideHeight||a._overrideWidth/e*t}r=Math.round(r);i=Math.round(i);var n=a.source;n.width=r;n.height=i;n._pixiId="canvas_"+_.uid();n.getContext("2d").drawImage(o,0,0,e,t,0,0,r,i);a._resolve();a._resolve=null}};n.getSize=function(e){var t=n.SVG_SIZE.exec(e);var r={};if(t){r[t[1]]=Math.round(parseFloat(t[3]));r[t[5]]=Math.round(parseFloat(t[7]))}return r};n.prototype.dispose=function(){i.prototype.dispose.call(this);this._resolve=null;this._crossorigin=null};n.test=function(e,t){return t==="svg"||typeof e==="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e==="string"&&e.indexOf("<svg")===0};n.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;return n}(p);var S=function(f){c(d,f);function d(e,t){var r=this;t=t||{};if(!(e instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto");i.setAttribute("webkit-playsinline","");i.setAttribute("playsinline","");if(typeof e==="string"){e=[e]}var n=e[0].src||e[0];p.crossOrigin(i,n,t.crossorigin);for(var a=0;a<e.length;++a){var o=document.createElement("source");var s=e[a],u=s.src,l=s.mime;u=u||e[a];var h=u.split("?").shift().toLowerCase();var c=h.substr(h.lastIndexOf(".")+1);l=l||d.MIME_TYPES[c]||"video/"+c;o.src=u;o.type=l;i.appendChild(o)}e=i}r=f.call(this,e)||this;r.noSubImage=true;r._autoUpdate=true;r._isConnectedToTicker=false;r._updateFPS=t.updateFPS||0;r._msToNextUpdate=0;r.autoPlay=t.autoPlay!==false;r._load=null;r._resolve=null;r._onCanPlay=r._onCanPlay.bind(r);r._onError=r._onError.bind(r);if(t.autoLoad!==false){r.load()}return r}d.prototype.update=function(e){if(e===void 0){e=0}if(!this.destroyed){var t=i.Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t);if(!this._updateFPS||this._msToNextUpdate<=0){f.prototype.update.call(this);this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0}}};d.prototype.load=function(){var t=this;if(this._load){return this._load}var r=this.source;if((r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height){r.complete=true}r.addEventListener("play",this._onPlayStart.bind(this));r.addEventListener("pause",this._onPlayStop.bind(this));if(!this._isSourceReady()){r.addEventListener("canplay",this._onCanPlay);r.addEventListener("canplaythrough",this._onCanPlay);r.addEventListener("error",this._onError,true)}else{this._onCanPlay()}this._load=new Promise(function(e){if(t.valid){e(t)}else{t._resolve=e;r.load()}});return this._load};d.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,true);this.onError.emit(e)};d.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===false&&e.ended===false&&e.readyState>2};d.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4};d.prototype._onPlayStart=function(){if(!this.valid){this._onCanPlay()}if(this.autoUpdate&&!this._isConnectedToTicker){i.Ticker.shared.add(this.update,this);this._isConnectedToTicker=true}};d.prototype._onPlayStop=function(){if(this._isConnectedToTicker){i.Ticker.shared.remove(this.update,this);this._isConnectedToTicker=false}};d.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay);e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight);if(!t&&this._resolve){this._resolve(this);this._resolve=null}if(this._isSourcePlaying()){this._onPlayStart()}else if(this.autoPlay){e.play()}};d.prototype.dispose=function(){if(this._isConnectedToTicker){i.Ticker.shared.remove(this.update,this)}var e=this.source;if(e){e.removeEventListener("error",this._onError,true);e.pause();e.src="";e.load()}f.prototype.dispose.call(this)};Object.defineProperty(d.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){if(e!==this._autoUpdate){this._autoUpdate=e;if(!this._autoUpdate&&this._isConnectedToTicker){i.Ticker.shared.remove(this.update,this);this._isConnectedToTicker=false}else if(this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()){i.Ticker.shared.add(this.update,this);this._isConnectedToTicker=true}}},enumerable:false,configurable:true});Object.defineProperty(d.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){if(e!==this._updateFPS){this._updateFPS=e}},enumerable:false,configurable:true});d.test=function(e,t){return e instanceof HTMLVideoElement||d.TYPES.indexOf(t)>-1};d.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];d.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};return d}(p);var T=function(e){c(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.test=function(e){return!!window.createImageBitmap&&e instanceof ImageBitmap};return t}(p);o.push(w,T,v,S,E,s,x,f);var P={Resource:b,BaseImageResource:p,INSTALLED:o,autoDetectResource:g,AbstractMultiResource:h,ArrayResource:f,BufferResource:s,CanvasResource:v,CubeResource:x,ImageResource:w,SVGResource:E,VideoResource:S,ImageBitmapResource:T};var A=function(){function e(e){this.renderer=e}e.prototype.destroy=function(){this.renderer=null};return e}();var I=function(e){c(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.upload=function(e,t,r){var i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===y.ALPHA_MODES.UNPACK);if(r.width===t.width&&r.height===t.height){i.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data)}else{r.width=t.width;r.height=t.height;i.texImage2D(t.target,0,e.context.webGLVersion===1?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,t.width,t.height,0,t.format,t.type,this.data)}return true};return t}(s);var O=function(){function e(e,t){this.width=Math.ceil(e||100);this.height=Math.ceil(t||100);this.stencil=false;this.depth=false;this.dirtyId=0;this.dirtyFormat=0;this.dirtySize=0;this.depthTexture=null;this.colorTextures=[];this.glFramebuffers={};this.disposeRunner=new n.Runner("disposeFramebuffer");this.multisample=y.MSAA_QUALITY.NONE}Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:false,configurable:true});e.prototype.addColorTexture=function(e,t){if(e===void 0){e=0}this.colorTextures[e]=t||new d(null,{scaleMode:y.SCALE_MODES.NEAREST,resolution:1,mipmap:y.MIPMAP_MODES.OFF,width:this.width,height:this.height});this.dirtyId++;this.dirtyFormat++;return this};e.prototype.addDepthTexture=function(e){this.depthTexture=e||new d(new I(null,{width:this.width,height:this.height}),{scaleMode:y.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:y.MIPMAP_MODES.OFF,format:y.FORMATS.DEPTH_COMPONENT,type:y.TYPES.UNSIGNED_SHORT});this.dirtyId++;this.dirtyFormat++;return this};e.prototype.enableDepth=function(){this.depth=true;this.dirtyId++;this.dirtyFormat++;return this};e.prototype.enableStencil=function(){this.stencil=true;this.dirtyId++;this.dirtyFormat++;return this};e.prototype.resize=function(e,t){e=Math.ceil(e);t=Math.ceil(t);if(e===this.width&&t===this.height){return}this.width=e;this.height=t;this.dirtyId++;this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r];var n=i.resolution;i.setSize(e/n,t/n)}if(this.depthTexture){var n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}};e.prototype.dispose=function(){this.disposeRunner.emit(this,false)};e.prototype.destroyDepthTexture=function(){if(this.depthTexture){this.depthTexture.destroy();this.depthTexture=null;++this.dirtyId;++this.dirtyFormat}};return e}();var M=function(l){c(e,l);function e(e){var t=this;if(typeof e==="number"){var r=arguments[0];var i=arguments[1];var n=arguments[2];var a=arguments[3];e={width:r,height:i,scaleMode:n,resolution:a}}t=l.call(this,null,e)||this;var o=e||{},s=o.width,u=o.height;t.mipmap=0;t.width=Math.ceil(s)||100;t.height=Math.ceil(u)||100;t.valid=true;t.clearColor=[0,0,0,0];t.framebuffer=new O(t.width*t.resolution,t.height*t.resolution).addColorTexture(0,t);t.maskStack=[];t.filterStack=[{}];return t}e.prototype.resize=function(e,t){e=Math.ceil(e);t=Math.ceil(t);this.framebuffer.resize(e*this.resolution,t*this.resolution)};e.prototype.dispose=function(){this.framebuffer.dispose();l.prototype.dispose.call(this)};e.prototype.destroy=function(){l.prototype.destroy.call(this);this.framebuffer.destroyDepthTexture();this.framebuffer=null};return e}(d);var C=function(){function e(){this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1;this.uvsFloat32=new Float32Array(8)}e.prototype.set=function(e,t,r){var i=t.width;var n=t.height;if(r){var a=e.width/2/i;var o=e.height/2/n;var s=e.x/i+a;var u=e.y/n+o;r=l.groupD8.add(r,l.groupD8.NW);this.x0=s+a*l.groupD8.uX(r);this.y0=u+o*l.groupD8.uY(r);r=l.groupD8.add(r,2);this.x1=s+a*l.groupD8.uX(r);this.y1=u+o*l.groupD8.uY(r);r=l.groupD8.add(r,2);this.x2=s+a*l.groupD8.uX(r);this.y2=u+o*l.groupD8.uY(r);r=l.groupD8.add(r,2);this.x3=s+a*l.groupD8.uX(r);this.y3=u+o*l.groupD8.uY(r)}else{this.x0=e.x/i;this.y0=e.y/n;this.x1=(e.x+e.width)/i;this.y1=e.y/n;this.x2=(e.x+e.width)/i;this.y2=(e.y+e.height)/n;this.x3=e.x/i;this.y3=(e.y+e.height)/n}this.uvsFloat32[0]=this.x0;this.uvsFloat32[1]=this.y0;this.uvsFloat32[2]=this.x1;this.uvsFloat32[3]=this.y1;this.uvsFloat32[4]=this.x2;this.uvsFloat32[5]=this.y2;this.uvsFloat32[6]=this.x3;this.uvsFloat32[7]=this.y3};return e}();var D=new C;var R=function(s){c(u,s);function u(e,t,r,i,n,a){var o=s.call(this)||this;o.noFrame=false;if(!t){o.noFrame=true;t=new l.Rectangle(0,0,1,1)}if(e instanceof u){e=e.baseTexture}o.baseTexture=e;o._frame=t;o.trim=i;o.valid=false;o._uvs=D;o.uvMatrix=null;o.orig=r||t;o._rotate=Number(n||0);if(n===true){o._rotate=2}else if(o._rotate%2!==0){throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually")}o.defaultAnchor=a?new l.Point(a.x,a.y):new l.Point(0,0);o._updateID=0;o.textureCacheIds=[];if(!e.valid){e.once("loaded",o.onBaseTextureUpdated,o)}else if(o.noFrame){if(e.valid){o.onBaseTextureUpdated(e)}}else{o.frame=t}if(o.noFrame){e.on("update",o.onBaseTextureUpdated,o)}return o}u.prototype.update=function(){if(this.baseTexture.resource){this.baseTexture.resource.update()}};u.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid){return}this._frame.width=e.width;this._frame.height=e.height;this.valid=true;this.updateUvs()}else{this.frame=this._frame}this.emit("update",this)};u.prototype.destroy=function(e){if(this.baseTexture){if(e){var t=this.baseTexture;if(t&&t.url&&_.TextureCache[t.url]){u.removeFromCache(t.url)}this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this);this.baseTexture.off("update",this.onBaseTextureUpdated,this);this.baseTexture=null}this._frame=null;this._uvs=null;this.trim=null;this.orig=null;this.valid=false;u.removeFromCache(this);this.textureCacheIds=null};u.prototype.clone=function(){return new u(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)};u.prototype.updateUvs=function(){if(this._uvs===D){this._uvs=new C}this._uvs.set(this._frame,this.baseTexture,this.rotate);this._updateID++};u.from=function(e,t,r){if(t===void 0){t={}}if(r===void 0){r=m.settings.STRICT_TEXTURE_CACHE}var i=typeof e==="string";var n=null;if(i){n=e}else{if(!e._pixiId){e._pixiId="pixiid_"+_.uid()}n=e._pixiId}var a=_.TextureCache[n];if(i&&r&&!a){throw new Error('The cacheId "'+n+'" does not exist in TextureCache.')}if(!a){if(!t.resolution){t.resolution=_.getResolutionOfUrl(e)}a=new u(new d(e,t));a.baseTexture.cacheId=n;d.addToCache(a.baseTexture,n);u.addToCache(a,n)}return a};u.fromURL=function(e,t){var r=Object.assign({autoLoad:false},t===null||t===void 0?void 0:t.resourceOptions);var i=u.from(e,Object.assign({resourceOptions:r},t),false);var n=i.baseTexture.resource;if(i.baseTexture.valid){return Promise.resolve(i)}return n.load().then(function(){return Promise.resolve(i)})};u.fromBuffer=function(e,t,r,i){return new u(d.fromBuffer(e,t,r,i))};u.fromLoader=function(e,t,r){var i=new w(e);i.url=t;var n=new d(i,{scaleMode:m.settings.SCALE_MODE,resolution:_.getResolutionOfUrl(t)});var a=new u(n);if(!r){r=t}d.addToCache(a.baseTexture,r);u.addToCache(a,r);if(r!==t){d.addToCache(a.baseTexture,t);u.addToCache(a,t)}return a};u.addToCache=function(e,t){if(t){if(e.textureCacheIds.indexOf(t)===-1){e.textureCacheIds.push(t)}if(_.TextureCache[t]){console.warn("Texture added to the cache with an id ["+t+"] that already had an entry")}_.TextureCache[t]=e}};u.removeFromCache=function(e){if(typeof e==="string"){var t=_.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);if(r>-1){t.textureCacheIds.splice(r,1)}delete _.TextureCache[e];return t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i){if(_.TextureCache[e.textureCacheIds[i]]===e){delete _.TextureCache[e.textureCacheIds[i]]}}e.textureCacheIds.length=0;return e}return null};Object.defineProperty(u.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:false,configurable:true});Object.defineProperty(u.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e;this.noFrame=false;var t=e.x,r=e.y,i=e.width,n=e.height;var a=t+i>this.baseTexture.width;var o=r+n>this.baseTexture.height;if(a||o){var s=a&&o?"and":"or";var u="X: "+t+" + "+i+" = "+(t+i)+" > "+this.baseTexture.width;var l="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+s+" "+l))}this.valid=i&&n&&this.baseTexture.valid;if(!this.trim&&!this.rotate){this.orig=e}if(this.valid){this.updateUvs()}},enumerable:false,configurable:true});Object.defineProperty(u.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e;if(this.valid){this.updateUvs()}},enumerable:false,configurable:true});Object.defineProperty(u.prototype,"width",{get:function(){return this.orig.width},enumerable:false,configurable:true});Object.defineProperty(u.prototype,"height",{get:function(){return this.orig.height},enumerable:false,configurable:true});u.prototype.castToBaseTexture=function(){return this.baseTexture};return u}(_.EventEmitter);function L(){var e=document.createElement("canvas");e.width=16;e.height=16;var t=e.getContext("2d");t.fillStyle="white";t.fillRect(0,0,16,16);return new R(new d(new v(e)))}function N(e){e.destroy=function e(){};e.on=function e(){};e.once=function e(){};e.emit=function e(){}}R.EMPTY=new R(new d);N(R.EMPTY);N(R.EMPTY.baseTexture);R.WHITE=L();N(R.WHITE);N(R.WHITE.baseTexture);var k=function(u){c(t,u);function t(e,t){var r=this;var i=null;if(!(e instanceof M)){var n=arguments[1];var a=arguments[2];var o=arguments[3];var s=arguments[4];console.warn("Please use RenderTexture.create("+n+", "+a+") instead of the ctor directly.");i=arguments[0];t=null;e=new M({width:n,height:a,scaleMode:o,resolution:s})}r=u.call(this,e,t)||this;r.legacyRenderer=i;r.valid=true;r.filterFrame=null;r.filterPoolKey=null;r.updateUvs();return r}Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:false,configurable:true});t.prototype.resize=function(e,t,r){if(r===void 0){r=true}e=Math.ceil(e);t=Math.ceil(t);this.valid=e>0&&t>0;this._frame.width=this.orig.width=e;this._frame.height=this.orig.height=t;if(r){this.baseTexture.resize(e,t)}this.updateUvs()};t.prototype.setResolution=function(e){var t=this.baseTexture;if(t.resolution===e){return}t.setResolution(e);this.resize(t.width,t.height,false)};t.create=function(e){if(typeof e==="number"){e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}}return new t(new M(e))};return t}(R);var F=function(){function a(e){this.texturePool={};this.textureOptions=e||{};this.enableFullScreen=false;this._pixelsWidth=0;this._pixelsHeight=0}a.prototype.createTexture=function(e,t){var r=new M(Object.assign({width:e,height:t,resolution:1},this.textureOptions));return new k(r)};a.prototype.getOptimalTexture=function(e,t,r){if(r===void 0){r=1}var i=a.SCREEN_KEY;e*=r;t*=r;if(!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight){e=_.nextPow2(e);t=_.nextPow2(t);i=(e&65535)<<16|t&65535}if(!this.texturePool[i]){this.texturePool[i]=[]}var n=this.texturePool[i].pop();if(!n){n=this.createTexture(e,t)}n.filterPoolKey=i;n.setResolution(r);return n};a.prototype.getFilterTexture=function(e,t){var r=this.getOptimalTexture(e.width,e.height,t||e.resolution);r.filterFrame=e.filterFrame;return r};a.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null;this.texturePool[t].push(e)};a.prototype.returnFilterTexture=function(e){this.returnTexture(e)};a.prototype.clear=function(e){e=e!==false;if(e){for(var t in this.texturePool){var r=this.texturePool[t];if(r){for(var i=0;i<r.length;i++){r[i].destroy(true)}}}}this.texturePool={}};a.prototype.setScreenSize=function(e){if(e.width===this._pixelsWidth&&e.height===this._pixelsHeight){return}var t=a.SCREEN_KEY;var r=this.texturePool[t];this.enableFullScreen=e.width>0&&e.height>0;if(r){for(var i=0;i<r.length;i++){r[i].destroy(true)}}this.texturePool[t]=[];this._pixelsWidth=e.width;this._pixelsHeight=e.height};a.SCREEN_KEY="screen";return a}();var B=function(){function a(e,t,r,i,n,a,o){if(t===void 0){t=0}if(r===void 0){r=false}if(i===void 0){i=5126}this.buffer=e;this.size=t;this.normalized=r;this.type=i;this.stride=n;this.start=a;this.instance=o}a.prototype.destroy=function(){this.buffer=null};a.from=function(e,t,r,i,n){return new a(e,t,r,i,n)};return a}();var j=0;var U=function(){function t(e,t,r){if(t===void 0){t=true}if(r===void 0){r=false}this.data=e||new Float32Array(1);this._glBuffers={};this._updateID=0;this.index=r;this.static=t;this.id=j++;this.disposeRunner=new n.Runner("disposeBuffer")}t.prototype.update=function(e){this.data=e||this.data;this._updateID++};t.prototype.dispose=function(){this.disposeRunner.emit(this,false)};t.prototype.destroy=function(){this.dispose();this.data=null};t.from=function(e){if(e instanceof Array){e=new Float32Array(e)}return new t(e)};return t}();function H(e){if(e.BYTES_PER_ELEMENT===4){if(e instanceof Float32Array){return"Float32Array"}else if(e instanceof Uint32Array){return"Uint32Array"}return"Int32Array"}else if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array){return"Uint16Array"}}else if(e.BYTES_PER_ELEMENT===1){if(e instanceof Uint8Array){return"Uint8Array"}}return null}var G={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function z(e,t){var r=0;var i=0;var n={};for(var a=0;a<e.length;a++){i+=t[a];r+=e[a].length}var o=new ArrayBuffer(r*4);var s=null;var u=0;for(var a=0;a<e.length;a++){var l=t[a];var h=e[a];var c=H(h);if(!n[c]){n[c]=new G[c](o)}s=n[c];for(var f=0;f<h.length;f++){var d=(f/l|0)*i+u;var p=f%l;s[d+p]=h[f]}u+=l}return new Float32Array(o)}var X={5126:4,5123:2,5121:1};var W=0;var Y={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};var q=function(){function p(e,t){if(e===void 0){e=[]}if(t===void 0){t={}}this.buffers=e;this.indexBuffer=null;this.attributes=t;this.glVertexArrayObjects={};this.id=W++;this.instanced=false;this.instanceCount=1;this.disposeRunner=new n.Runner("disposeGeometry");this.refCount=0}p.prototype.addAttribute=function(e,t,r,i,n,a,o,s){if(r===void 0){r=0}if(i===void 0){i=false}if(s===void 0){s=false}if(!t){throw new Error("You must pass a buffer when creating an attribute")}if(!(t instanceof U)){if(t instanceof Array){t=new Float32Array(t)}t=new U(t)}var u=e.split("|");if(u.length>1){for(var l=0;l<u.length;l++){this.addAttribute(u[l],t,r,i,n)}return this}var h=this.buffers.indexOf(t);if(h===-1){this.buffers.push(t);h=this.buffers.length-1}this.attributes[e]=new B(h,r,i,n,a,o,s);this.instanced=this.instanced||s;return this};p.prototype.getAttribute=function(e){return this.attributes[e]};p.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]};p.prototype.addIndex=function(e){if(!(e instanceof U)){if(e instanceof Array){e=new Uint16Array(e)}e=new U(e)}e.index=true;this.indexBuffer=e;if(this.buffers.indexOf(e)===-1){this.buffers.push(e)}return this};p.prototype.getIndex=function(){return this.indexBuffer};p.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer){return this}var e=[];var t=[];var r=new U;var i;for(i in this.attributes){var n=this.attributes[i];var a=this.buffers[n.buffer];e.push(a.data);t.push(n.size*X[n.type]/4);n.buffer=0}r.data=z(e,t);for(i=0;i<this.buffers.length;i++){if(this.buffers[i]!==this.indexBuffer){this.buffers[i].destroy()}}this.buffers=[r];if(this.indexBuffer){this.buffers.push(this.indexBuffer)}return this};p.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];var r=this.buffers[t.buffer];return r.data.length/(t.stride/4||t.size)}return 0};p.prototype.dispose=function(){this.disposeRunner.emit(this,false)};p.prototype.destroy=function(){this.dispose();this.buffers=null;this.indexBuffer=null;this.attributes=null};p.prototype.clone=function(){var e=new p;for(var t=0;t<this.buffers.length;t++){e.buffers[t]=new U(this.buffers[t].data.slice(0))}for(var t in this.attributes){var r=this.attributes[t];e.attributes[t]=new B(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}if(this.indexBuffer){e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)];e.indexBuffer.index=true}return e};p.merge=function(e){var t=new p;var r=[];var i=[];var n=[];var a;for(var o=0;o<e.length;o++){a=e[o];for(var s=0;s<a.buffers.length;s++){i[s]=i[s]||0;i[s]+=a.buffers[s].data.length;n[s]=0}}for(var o=0;o<a.buffers.length;o++){r[o]=new Y[H(a.buffers[o].data)](i[o]);t.buffers[o]=new U(r[o])}for(var o=0;o<e.length;o++){a=e[o];for(var s=0;s<a.buffers.length;s++){r[s].set(a.buffers[s].data,n[s]);n[s]+=a.buffers[s].data.length}}t.attributes=a.attributes;if(a.indexBuffer){t.indexBuffer=t.buffers[a.buffers.indexOf(a.indexBuffer)];t.indexBuffer.index=true;var u=0;var l=0;var h=0;var c=0;for(var o=0;o<a.buffers.length;o++){if(a.buffers[o]!==a.indexBuffer){c=o;break}}for(var o in a.attributes){var f=a.attributes[o];if((f.buffer|0)===c){l+=f.size*X[f.type]/4}}for(var o=0;o<e.length;o++){var d=e[o].indexBuffer.data;for(var s=0;s<d.length;s++){t.indexBuffer.data[s+h]+=u}u+=a.buffers[c].data.length/l;h+=d.length}}return t};return p}();var V=function(t){c(e,t);function e(){var e=t.call(this)||this;e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]);return e}return e}(q);var $=function(t){c(e,t);function e(){var e=t.call(this)||this;e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]);e.uvs=new Float32Array([0,0,1,0,1,1,0,1]);e.vertexBuffer=new U(e.vertices);e.uvBuffer=new U(e.uvs);e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]);return e}e.prototype.map=function(e,t){var r=0;var i=0;this.uvs[0]=r;this.uvs[1]=i;this.uvs[2]=r+t.width/e.width;this.uvs[3]=i;this.uvs[4]=r+t.width/e.width;this.uvs[5]=i+t.height/e.height;this.uvs[6]=r;this.uvs[7]=i+t.height/e.height;r=t.x;i=t.y;this.vertices[0]=r;this.vertices[1]=i;this.vertices[2]=r+t.width;this.vertices[3]=i;this.vertices[4]=r+t.width;this.vertices[5]=i+t.height;this.vertices[6]=r;this.vertices[7]=i+t.height;this.invalidate();return this};e.prototype.invalidate=function(){this.vertexBuffer._updateID++;this.uvBuffer._updateID++;return this};return e}(q);var K=0;var Q=function(){function i(e,t){this.uniforms=e;this.group=true;this.syncUniforms={};this.dirtyId=0;this.id=K++;this.static=!!t}i.prototype.update=function(){this.dirtyId++};i.prototype.add=function(e,t,r){this.uniforms[e]=new i(t,r)};i.from=function(e,t){return new i(e,t)};return i}();var Z=function(){function e(){this.renderTexture=null;this.target=null;this.legacy=false;this.resolution=1;this.sourceFrame=new l.Rectangle;this.destinationFrame=new l.Rectangle;this.filters=[]}e.prototype.clear=function(){this.target=null;this.filters=null;this.renderTexture=null};return e}();var J=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.defaultFilterStack=[{}];t.texturePool=new F;t.texturePool.setScreenSize(e.view);t.statePool=[];t.quad=new V;t.quadUv=new $;t.tempRect=new l.Rectangle;t.activeState={};t.globalUniforms=new Q({outputFrame:t.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},true);t.forceClear=false;t.useMaxPadding=false;return t}e.prototype.push=function(e,t){var r=this.renderer;var i=this.defaultFilterStack;var n=this.statePool.pop()||new Z;var a=t[0].resolution;var o=t[0].padding;var s=t[0].autoFit;var u=t[0].legacy;for(var l=1;l<t.length;l++){var h=t[l];a=Math.min(a,h.resolution);o=this.useMaxPadding?Math.max(o,h.padding):o+h.padding;s=s&&h.autoFit;u=u||h.legacy}if(i.length===1){this.defaultFilterStack[0].renderTexture=r.renderTexture.current}i.push(n);n.resolution=a;n.legacy=u;n.target=e;n.sourceFrame.copyFrom(e.filterArea||e.getBounds(true));n.sourceFrame.pad(o);if(s){n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame)}n.sourceFrame.ceil(a);n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,a);n.filters=t;n.destinationFrame.width=n.renderTexture.width;n.destinationFrame.height=n.renderTexture.height;var c=this.tempRect;c.width=n.sourceFrame.width;c.height=n.sourceFrame.height;n.renderTexture.filterFrame=n.sourceFrame;r.renderTexture.bind(n.renderTexture,n.sourceFrame,c);r.renderTexture.clear()};e.prototype.pop=function(){var e=this.defaultFilterStack;var t=e.pop();var r=t.filters;this.activeState=t;var i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame;i.resolution=t.resolution;var n=i.inputSize;var a=i.inputPixel;var o=i.inputClamp;n[0]=t.destinationFrame.width;n[1]=t.destinationFrame.height;n[2]=1/n[0];n[3]=1/n[1];a[0]=n[0]*t.resolution;a[1]=n[1]*t.resolution;a[2]=1/a[0];a[3]=1/a[1];o[0]=.5*a[2];o[1]=.5*a[3];o[2]=t.sourceFrame.width*n[2]-.5*a[2];o[3]=t.sourceFrame.height*n[3]-.5*a[3];if(t.legacy){var s=i.filterArea;s[0]=t.destinationFrame.width;s[1]=t.destinationFrame.height;s[2]=t.sourceFrame.x;s[3]=t.sourceFrame.y;i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=e[e.length-1];if(t.renderTexture.framebuffer.multisample>1){this.renderer.framebuffer.blit()}if(r.length===1){r[0].apply(this,t.renderTexture,u.renderTexture,y.CLEAR_MODES.BLEND,t);this.returnFilterTexture(t.renderTexture)}else{var l=t.renderTexture;var h=this.getOptimalFilterTexture(l.width,l.height,t.resolution);h.filterFrame=l.filterFrame;var c=0;for(c=0;c<r.length-1;++c){r[c].apply(this,l,h,y.CLEAR_MODES.CLEAR,t);var f=l;l=h;h=f}r[c].apply(this,l,u.renderTexture,y.CLEAR_MODES.BLEND,t);this.returnFilterTexture(l);this.returnFilterTexture(h)}t.clear();this.statePool.push(t)};e.prototype.bindAndClear=function(e,t){if(t===void 0){t=y.CLEAR_MODES.CLEAR}if(e&&e.filterFrame){var r=this.tempRect;r.width=e.filterFrame.width;r.height=e.filterFrame.height;this.renderer.renderTexture.bind(e,e.filterFrame,r)}else{this.renderer.renderTexture.bind(e)}if(typeof t==="boolean"){t=t?y.CLEAR_MODES.CLEAR:y.CLEAR_MODES.BLEND;_.deprecation("5.2.1","Use CLEAR_MODES when using clear applyFilter option")}if(t===y.CLEAR_MODES.CLEAR||t===y.CLEAR_MODES.BLIT&&this.forceClear){this.renderer.renderTexture.clear()}};e.prototype.applyFilter=function(e,t,r,i){var n=this.renderer;this.bindAndClear(r,i);e.uniforms.uSampler=t;e.uniforms.filterGlobals=this.globalUniforms;n.state.set(e.state);n.shader.bind(e);if(e.legacy){this.quadUv.map(t._frame,t.filterFrame);n.geometry.bind(this.quadUv);n.geometry.draw(y.DRAW_MODES.TRIANGLES)}else{n.geometry.bind(this.quad);n.geometry.draw(y.DRAW_MODES.TRIANGLE_STRIP)}};e.prototype.calculateSpriteMatrix=function(e,t){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame;var a=t._texture.orig;var o=e.set(n.width,0,0,n.height,i.x,i.y);var s=t.worldTransform.copyTo(l.Matrix.TEMP_MATRIX);s.invert();o.prepend(s);o.scale(1/a.width,1/a.height);o.translate(t.anchor.x,t.anchor.y);return o};e.prototype.destroy=function(){this.texturePool.clear(false)};e.prototype.getOptimalFilterTexture=function(e,t,r){if(r===void 0){r=1}return this.texturePool.getOptimalTexture(e,t,r)};e.prototype.getFilterTexture=function(e,t){if(typeof e==="number"){var r=e;e=t;t=r}e=e||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution);i.filterFrame=e.filterFrame;return i};e.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)};e.prototype.emptyPool=function(){this.texturePool.clear(true)};e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)};return e}(A);var ee=function(){function e(e){this.renderer=e}e.prototype.flush=function(){};e.prototype.destroy=function(){this.renderer=null};e.prototype.start=function(){};e.prototype.stop=function(){this.flush()};e.prototype.render=function(e){};return e}();var te=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.emptyRenderer=new ee(e);t.currentRenderer=t.emptyRenderer;return t}e.prototype.setObjectRenderer=function(e){if(this.currentRenderer===e){return}this.currentRenderer.stop();this.currentRenderer=e;this.currentRenderer.start()};e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)};e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)};e.prototype.copyBoundTextures=function(e,t){var r=this.renderer.texture.boundTextures;for(var i=t-1;i>=0;--i){e[i]=r[i]||null;if(e[i]){e[i]._batchLocation=i}}};e.prototype.boundArray=function(e,t,r,i){var n=e.elements,a=e.ids,o=e.count;var s=0;for(var u=0;u<o;u++){var l=n[u];var h=l._batchLocation;if(h>=0&&h<i&&t[h]===l){a[u]=h;continue}while(s<i){var c=t[s];if(c&&c._batchEnabled===r&&c._batchLocation===s){s++;continue}a[u]=s;l._batchLocation=s;t[s]=l;break}}};return e}(A);var re=0;var ie=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.webGLVersion=1;t.extensions={};t.supports={uint32Indices:false};t.handleContextLost=t.handleContextLost.bind(t);t.handleContextRestored=t.handleContextRestored.bind(t);e.view.addEventListener("webglcontextlost",t.handleContextLost,false);e.view.addEventListener("webglcontextrestored",t.handleContextRestored,false);return t}Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:false,configurable:true});e.prototype.contextChange=function(e){this.gl=e;this.renderer.gl=e;this.renderer.CONTEXT_UID=re++;if(e.isContextLost()&&e.getExtension("WEBGL_lose_context")){e.getExtension("WEBGL_lose_context").restoreContext()}};e.prototype.initFromContext=function(e){this.gl=e;this.validateContext(e);this.renderer.gl=e;this.renderer.CONTEXT_UID=re++;this.renderer.runners.contextChange.emit(e)};e.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)};e.prototype.createContext=function(e,t){var r;if(m.settings.PREFER_ENV>=y.ENV.WEBGL2){r=e.getContext("webgl2",t)}if(r){this.webGLVersion=2}else{this.webGLVersion=1;r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r){throw new Error("This browser does not support WebGL. Try using the canvas renderer")}}this.gl=r;this.getExtensions();return this.gl};e.prototype.getExtensions=function(){var e=this.gl;if(this.webGLVersion===1){Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")})}else if(this.webGLVersion===2){Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})}};e.prototype.handleContextLost=function(e){e.preventDefault()};e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)};e.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener("webglcontextlost",this.handleContextLost);e.removeEventListener("webglcontextrestored",this.handleContextRestored);this.gl.useProgram(null);if(this.extensions.loseContext){this.extensions.loseContext.loseContext()}};e.prototype.postrender=function(){if(this.renderer.renderingToScreen){this.gl.flush()}};e.prototype.validateContext=function(e){var t=e.getContextAttributes();var r="WebGL2RenderingContext"in window&&e instanceof window.WebGL2RenderingContext;if(r){this.webGLVersion=2}if(!t.stencil){console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}var i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i;if(!i){console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};return e}(A);var ne=function(){function e(e){this.framebuffer=e;this.stencil=null;this.dirtyId=0;this.dirtyFormat=0;this.dirtySize=0;this.multisample=y.MSAA_QUALITY.NONE;this.msaaBuffer=null;this.blitFramebuffer=null}return e}();var ae=new l.Rectangle;var oe=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.managedFramebuffers=[];t.unknownFramebuffer=new O(10,10);t.msaaSamples=null;return t}e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.current=this.unknownFramebuffer;this.viewport=new l.Rectangle;this.hasMRT=true;this.writeDepthTexture=true;this.disposeAll(true);if(this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers;var r=this.renderer.context.extensions.depthTexture;if(m.settings.PREFER_ENV===y.ENV.WEBGL_LEGACY){t=null;r=null}if(t){e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}}else{this.hasMRT=false;e.drawBuffers=function(){}}if(!r){this.writeDepthTexture=false}}else{this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}};e.prototype.bind=function(e,t){var r=this.gl;if(e){var i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);if(this.current!==e){this.current=e;r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)}if(i.dirtyId!==e.dirtyId){i.dirtyId=e.dirtyId;if(i.dirtyFormat!==e.dirtyFormat){i.dirtyFormat=e.dirtyFormat;this.updateFramebuffer(e)}else if(i.dirtySize!==e.dirtySize){i.dirtySize=e.dirtySize;this.resizeFramebuffer(e)}}for(var n=0;n<e.colorTextures.length;n++){var a=e.colorTextures[n];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture){this.renderer.texture.unbind(e.depthTexture)}if(t){this.setViewport(t.x,t.y,t.width,t.height)}else{this.setViewport(0,0,e.width,e.height)}}else{if(this.current){this.current=null;r.bindFramebuffer(r.FRAMEBUFFER,null)}if(t){this.setViewport(t.x,t.y,t.width,t.height)}else{this.setViewport(0,0,this.renderer.width,this.renderer.height)}}};e.prototype.setViewport=function(e,t,r,i){var n=this.viewport;if(n.width!==r||n.height!==i||n.x!==e||n.y!==t){n.x=e;n.y=t;n.width=r;n.height=i;this.gl.viewport(e,t,r,i)}};Object.defineProperty(e.prototype,"size",{get:function(){if(this.current){return{x:0,y:0,width:this.current.width,height:this.current.height}}return{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:false,configurable:true});e.prototype.clear=function(e,t,r,i,n){if(n===void 0){n=y.BUFFER_BITS.COLOR|y.BUFFER_BITS.DEPTH}var a=this.gl;a.clearColor(e,t,r,i);a.clear(n)};e.prototype.initFramebuffer=function(e){var t=this.gl;var r=new ne(t.createFramebuffer());r.multisample=this.detectSamples(e.multisample);e.glFramebuffers[this.CONTEXT_UID]=r;this.managedFramebuffers.push(e);e.disposeRunner.add(this);return r};e.prototype.resizeFramebuffer=function(e){var t=this.gl;var r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){t.bindRenderbuffer(t.RENDERBUFFER,r.stencil);t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height)}var i=e.colorTextures;for(var n=0;n<i.length;n++){this.renderer.texture.bind(i[n],0)}if(e.depthTexture){this.renderer.texture.bind(e.depthTexture,0)}};e.prototype.updateFramebuffer=function(e){var t=this.gl;var r=e.glFramebuffers[this.CONTEXT_UID];var i=e.colorTextures;var n=i.length;if(!t.drawBuffers){n=Math.min(n,1)}if(r.multisample>1){r.msaaBuffer=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer);t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,e.width,e.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,r.msaaBuffer)}var a=[];for(var o=0;o<n;o++){if(o===0&&r.multisample>1){continue}var s=e.colorTextures[o];var u=s.parentTextureArray||s;this.renderer.texture.bind(u,0);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o,s.target,u._glTextures[this.CONTEXT_UID].texture,0);a.push(t.COLOR_ATTACHMENT0+o)}if(a.length>1){t.drawBuffers(a)}if(e.depthTexture){var l=this.writeDepthTexture;if(l){var h=e.depthTexture;this.renderer.texture.bind(h,0);t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}}if(!r.stencil&&(e.stencil||e.depth)){r.stencil=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r.stencil);t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height);if(!e.depthTexture){t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,r.stencil)}}};e.prototype.detectSamples=function(e){var t=this.msaaSamples;var r=y.MSAA_QUALITY.NONE;if(e<=1||t===null){return r}for(var i=0;i<t.length;i++){if(t[i]<=e){r=t[i];break}}if(r===1){r=y.MSAA_QUALITY.NONE}return r};e.prototype.blit=function(e,t,r){var i=this,n=i.current,a=i.renderer,o=i.gl,s=i.CONTEXT_UID;if(a.context.webGLVersion!==2){return}if(!n){return}var u=n.glFramebuffers[s];if(!u){return}if(!e){if(u.multisample<=1){return}if(!u.blitFramebuffer){u.blitFramebuffer=new O(n.width,n.height);u.blitFramebuffer.addColorTexture(0,n.colorTextures[0])}e=u.blitFramebuffer;e.width=n.width;e.height=n.height}if(!t){t=ae;t.width=n.width;t.height=n.height}if(!r){r=t}var l=t.width===r.width&&t.height===r.height;this.bind(e);o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer);o.blitFramebuffer(t.x,t.y,t.width,t.height,r.x,r.y,r.width,r.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)};e.prototype.disposeFramebuffer=function(e,t){var r=e.glFramebuffers[this.CONTEXT_UID];var i=this.gl;if(!r){return}delete e.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(e);if(n>=0){this.managedFramebuffers.splice(n,1)}e.disposeRunner.remove(this);if(!t){i.deleteFramebuffer(r.framebuffer);if(r.stencil){i.deleteRenderbuffer(r.stencil)}}};e.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++){this.disposeFramebuffer(t[r],e)}};e.prototype.forceStencil=function(){var e=this.current;if(!e){return}var t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil){return}e.enableStencil();var r=e.width;var i=e.height;var n=this.gl;var a=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,a);n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r,i);t.stencil=a;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,a)};e.prototype.reset=function(){this.current=this.unknownFramebuffer;this.viewport=new l.Rectangle};return e}(A);var se=function(){function e(e){this.buffer=e||null;this.updateID=-1;this.byteLength=-1;this.refCount=0}return e}();var ue={5126:4,5123:2,5121:1};var le=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t._activeGeometry=null;t._activeVao=null;t.hasVao=true;t.hasInstance=true;t.canUseUInt32ElementIndex=false;t.managedGeometries={};t.managedBuffers={};return t}e.prototype.contextChange=function(){this.disposeAll(true);var e=this.gl=this.renderer.gl;var t=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID;if(t.webGLVersion!==2){var r=this.renderer.context.extensions.vertexArrayObject;if(m.settings.PREFER_ENV===y.ENV.WEBGL_LEGACY){r=null}if(r){e.createVertexArray=function(){return r.createVertexArrayOES()};e.bindVertexArray=function(e){return r.bindVertexArrayOES(e)};e.deleteVertexArray=function(e){return r.deleteVertexArrayOES(e)}}else{this.hasVao=false;e.createVertexArray=function(){return null};e.bindVertexArray=function(){return null};e.deleteVertexArray=function(){return null}}}if(t.webGLVersion!==2){var a=e.getExtension("ANGLE_instanced_arrays");if(a){e.vertexAttribDivisor=function(e,t){return a.vertexAttribDivisorANGLE(e,t)};e.drawElementsInstanced=function(e,t,r,i,n){return a.drawElementsInstancedANGLE(e,t,r,i,n)};e.drawArraysInstanced=function(e,t,r,i){return a.drawArraysInstancedANGLE(e,t,r,i)}}else{this.hasInstance=false}}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex};e.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var r=this.gl;var i=e.glVertexArrayObjects[this.CONTEXT_UID];if(!i){this.managedGeometries[e.id]=e;e.disposeRunner.add(this);e.glVertexArrayObjects[this.CONTEXT_UID]=i={}}var n=i[t.program.id]||this.initGeometryVao(e,t.program);this._activeGeometry=e;if(this._activeVao!==n){this._activeVao=n;if(this.hasVao){r.bindVertexArray(n)}else{this.activateVao(e,t.program)}}this.updateBuffers()};e.prototype.reset=function(){this.unbind()};e.prototype.updateBuffers=function(){var e=this._activeGeometry;var t=this.gl;for(var r=0;r<e.buffers.length;r++){var i=e.buffers[r];var n=i._glBuffers[this.CONTEXT_UID];if(i._updateID!==n.updateID){n.updateID=i._updateID;var a=i.index?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;t.bindBuffer(a,n.buffer);this._boundBuffer=n;if(n.byteLength>=i.data.byteLength){t.bufferSubData(a,0,i.data)}else{var o=i.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=i.data.byteLength;t.bufferData(a,i.data,o)}}}};e.prototype.checkCompatibility=function(e,t){var r=e.attributes;var i=t.attributeData;for(var n in i){if(!r[n]){throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')}}};e.prototype.getSignature=function(e,t){var r=e.attributes;var i=t.attributeData;var n=["g",e.id];for(var a in r){if(i[a]){n.push(a)}}return n.join("-")};e.prototype.initGeometryVao=function(e,t){this.checkCompatibility(e,t);var r=this.gl;var i=this.CONTEXT_UID;var n=this.getSignature(e,t);var a=e.glVertexArrayObjects[this.CONTEXT_UID];var o=a[n];if(o){a[t.id]=o;return o}var s=e.buffers;var u=e.attributes;var l={};var h={};for(var c in s){l[c]=0;h[c]=0}for(var c in u){if(!u[c].size&&t.attributeData[c]){u[c].size=t.attributeData[c].size}else if(!u[c].size){console.warn("PIXI Geometry attribute '"+c+"' size cannot be determined (likely the bound shader does not have the attribute)")}l[u[c].buffer]+=u[c].size*ue[u[c].type]}for(var c in u){var f=u[c];var d=f.size;if(f.stride===undefined){if(l[f.buffer]===d*ue[f.type]){f.stride=0}else{f.stride=l[f.buffer]}}if(f.start===undefined){f.start=h[f.buffer];h[f.buffer]+=d*ue[f.type]}}o=r.createVertexArray();r.bindVertexArray(o);for(var p=0;p<s.length;p++){var v=s[p];if(!v._glBuffers[i]){v._glBuffers[i]=new se(r.createBuffer());this.managedBuffers[v.id]=v;v.disposeRunner.add(this)}v._glBuffers[i].refCount++}this.activateVao(e,t);this._activeVao=o;a[t.id]=o;a[n]=o;return o};e.prototype.disposeBuffer=function(e,t){if(!this.managedBuffers[e.id]){return}delete this.managedBuffers[e.id];var r=e._glBuffers[this.CONTEXT_UID];var i=this.gl;e.disposeRunner.remove(this);if(!r){return}if(!t){i.deleteBuffer(r.buffer)}delete e._glBuffers[this.CONTEXT_UID]};e.prototype.disposeGeometry=function(e,t){if(!this.managedGeometries[e.id]){return}delete this.managedGeometries[e.id];var r=e.glVertexArrayObjects[this.CONTEXT_UID];var i=this.gl;var n=e.buffers;e.disposeRunner.remove(this);if(!r){return}for(var a=0;a<n.length;a++){var o=n[a]._glBuffers[this.CONTEXT_UID];o.refCount--;if(o.refCount===0&&!t){this.disposeBuffer(n[a],t)}}if(!t){for(var s in r){if(s[0]==="g"){var u=r[s];if(this._activeVao===u){this.unbind()}i.deleteVertexArray(u)}}}delete e.glVertexArrayObjects[this.CONTEXT_UID]};e.prototype.disposeAll=function(e){var t=Object.keys(this.managedGeometries);for(var r=0;r<t.length;r++){this.disposeGeometry(this.managedGeometries[t[r]],e)}t=Object.keys(this.managedBuffers);for(var r=0;r<t.length;r++){this.disposeBuffer(this.managedBuffers[t[r]],e)}};e.prototype.activateVao=function(e,t){var r=this.gl;var i=this.CONTEXT_UID;var n=e.buffers;var a=e.attributes;if(e.indexBuffer){r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[i].buffer)}var o=null;for(var s in a){var u=a[s];var l=n[u.buffer];var h=l._glBuffers[i];if(t.attributeData[s]){if(o!==h){r.bindBuffer(r.ARRAY_BUFFER,h.buffer);o=h}var c=t.attributeData[s].location;r.enableVertexAttribArray(c);r.vertexAttribPointer(c,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start);if(u.instance){if(this.hasInstance){r.vertexAttribDivisor(c,1)}else{throw new Error("geometry error, GPU Instancing is not supported on this device")}}}}};e.prototype.draw=function(e,t,r,i){var n=this.gl;var a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT;var s=o===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;if(o===2||o===4&&this.canUseUInt32ElementIndex){if(a.instanced){n.drawElementsInstanced(e,t||a.indexBuffer.data.length,s,(r||0)*o,i||1)}else{n.drawElements(e,t||a.indexBuffer.data.length,s,(r||0)*o)}}else{console.warn("unsupported index buffer type: uint32")}}else if(a.instanced){n.drawArraysInstanced(e,r,t||a.getSize(),i||1)}else{n.drawArrays(e,r,t||a.getSize())}return this};e.prototype.unbind=function(){this.gl.bindVertexArray(null);this._activeVao=null;this._activeGeometry=null};return e}(A);var he=function(){function e(e){if(e===void 0){e=null}this.type=y.MASK_TYPES.NONE;this.autoDetect=true;this.maskObject=e||null;this.pooled=false;this.isMaskData=true;this._stencilCounter=0;this._scissorCounter=0;this._scissorRect=null;this._target=null}e.prototype.reset=function(){if(this.pooled){this.maskObject=null;this.type=y.MASK_TYPES.NONE;this.autoDetect=true}this._target=null};e.prototype.copyCountersOrReset=function(e){if(e){this._stencilCounter=e._stencilCounter;this._scissorCounter=e._scissorCounter;this._scissorRect=e._scissorRect}else{this._stencilCounter=0;this._scissorCounter=0;this._scissorRect=null}};return e}();function ce(e,t,r){var i=e.createShader(t);e.shaderSource(i,r);e.compileShader(i);return i}function fe(e,t,r,i){var n=ce(e,e.VERTEX_SHADER,t);var a=ce(e,e.FRAGMENT_SHADER,r);var o=e.createProgram();e.attachShader(o,n);e.attachShader(o,a);if(i){for(var s in i){e.bindAttribLocation(o,i[s],s)}}e.linkProgram(o);if(!e.getProgramParameter(o,e.LINK_STATUS)){if(!e.getShaderParameter(n,e.COMPILE_STATUS)){console.warn(t);console.error(e.getShaderInfoLog(n))}if(!e.getShaderParameter(a,e.COMPILE_STATUS)){console.warn(r);console.error(e.getShaderInfoLog(a))}console.error("Pixi.js Error: Could not initialize shader.");console.error("gl.VALIDATE_STATUS",e.getProgramParameter(o,e.VALIDATE_STATUS));console.error("gl.getError()",e.getError());if(e.getProgramInfoLog(o)!==""){console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(o))}e.deleteProgram(o);o=null}e.deleteShader(n);e.deleteShader(a);return o}function de(e){var t=new Array(e);for(var r=0;r<t.length;r++){t[r]=false}return t}function pe(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return false;case"bvec2":return de(2*t);case"bvec3":return de(3*t);case"bvec4":return de(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ve={};var me=ve;function ge(){if(me===ve||me&&me.isContextLost()){var e=document.createElement("canvas");var t=void 0;if(m.settings.PREFER_ENV>=y.ENV.WEBGL2){t=e.getContext("webgl2",{})}if(!t){t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{});if(!t){t=null}else{t.getExtension("WEBGL_draw_buffers")}}me=t}return me}var ye;function _e(){if(!ye){ye=y.PRECISION.MEDIUM;var e=ge();if(e){if(e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);ye=t.precision?y.PRECISION.HIGH:y.PRECISION.MEDIUM}}}return ye}function be(e,t,r){if(e.substring(0,9)!=="precision"){var i=t;if(t===y.PRECISION.HIGH&&r!==y.PRECISION.HIGH){i=y.PRECISION.MEDIUM}return"precision "+i+" float;\n"+e}else if(r!==y.PRECISION.HIGH&&e.substring(0,15)==="precision highp"){return e.replace("precision highp","precision mediump")}return e}var xe={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function we(e){return xe[e]}var Ee=null;var Se={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Te(e,t){if(!Ee){var r=Object.keys(Se);Ee={};for(var i=0;i<r.length;++i){var n=r[i];Ee[e[n]]=Se[n]}}return Ee[t]}var Pe=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return e.type==="mat3"&&e.size===1&&t.a!==undefined},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '}},{test:function(e,t){return e.type==="vec2"&&e.size===1&&t.x!==undefined},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return e.type==="vec4"&&e.size===1&&t.width!==undefined},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}];var Ae={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"};var Ie={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Oe(e,t){var r=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var i in e.uniforms){var n=t[i];if(!n){if(e.uniforms[i].group){r.push('\n                    renderer.shader.syncUniformGroup(uv["'+i+'"], syncData);\n                ')}continue}var a=e.uniforms[i];var o=false;for(var s=0;s<Pe.length;s++){if(Pe[s].test(n,a)){r.push(Pe[s].code(i,a));o=true;break}}if(!o){var u=n.size===1?Ae:Ie;var l=u[n.type].replace("location",'ud["'+i+'"].location');r.push('\n            cv = ud["'+i+'"].value;\n            v = uv["'+i+'"];\n            '+l+";")}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}var Me=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Ce(e){var t="";for(var r=0;r<e;++r){if(r>0){t+="\nelse "}if(r<e-1){t+="if(test == "+r+".0){}"}}return t}function De(e,t){if(e===0){throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`")}var r=t.createShader(t.FRAGMENT_SHADER);while(true){var i=Me.replace(/%forloop%/gi,Ce(e));t.shaderSource(r,i);t.compileShader(r);if(!t.getShaderParameter(r,t.COMPILE_STATUS)){e=e/2|0}else{break}}return e}var Re;function Le(){if(typeof Re==="boolean"){return Re}try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Re=e({a:"b"},"a","b")===true}catch(e){Re=false}return Re}var Ne="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}";var ke="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n";var Fe=0;var Be={};var je=function(){function a(e,t,r){if(r===void 0){r="pixi-shader"}this.id=Fe++;this.vertexSrc=e||a.defaultVertexSrc;this.fragmentSrc=t||a.defaultFragmentSrc;this.vertexSrc=this.vertexSrc.trim();this.fragmentSrc=this.fragmentSrc.trim();if(this.vertexSrc.substring(0,8)!=="#version"){r=r.replace(/\s+/g,"-");if(Be[r]){Be[r]++;r+="-"+Be[r]}else{Be[r]=1}this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc;this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc;this.vertexSrc=be(this.vertexSrc,m.settings.PRECISION_VERTEX,y.PRECISION.HIGH);this.fragmentSrc=be(this.fragmentSrc,m.settings.PRECISION_FRAGMENT,_e())}this.extractData(this.vertexSrc,this.fragmentSrc);this.glPrograms={};this.syncUniforms=null}a.prototype.extractData=function(e,t){var r=ge();if(r){var i=fe(r,e,t);this.attributeData=this.getAttributeData(i,r);this.uniformData=this.getUniformData(i,r);r.deleteProgram(i)}else{this.uniformData={};this.attributeData={}}};a.prototype.getAttributeData=function(e,t){var r={};var i=[];var n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(var a=0;a<n;a++){var o=t.getActiveAttrib(e,a);var s=Te(t,o.type);var u={type:s,name:o.name,size:we(s),location:0};r[o.name]=u;i.push(u)}i.sort(function(e,t){return e.name>t.name?1:-1});for(var a=0;a<i.length;a++){i[a].location=a}return r};a.prototype.getUniformData=function(e,t){var r={};var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(var n=0;n<i;n++){var a=t.getActiveUniform(e,n);var o=a.name.replace(/\[.*?\]$/,"");var s=a.name.match(/\[.*?\]$/);var u=Te(t,a.type);r[o]={type:u,size:a.size,isArray:s,value:pe(u,a.size)}}return r};Object.defineProperty(a,"defaultVertexSrc",{get:function(){return ke},enumerable:false,configurable:true});Object.defineProperty(a,"defaultFragmentSrc",{get:function(){return Ne},enumerable:false,configurable:true});a.from=function(e,t,r){var i=e+t;var n=_.ProgramCache[i];if(!n){_.ProgramCache[i]=n=new a(e,t,r)}return n};return a}();var Ue=function(){function n(e,t){this.program=e;if(t){if(t instanceof Q){this.uniformGroup=t}else{this.uniformGroup=new Q(t)}}else{this.uniformGroup=new Q({})}for(var r in e.uniformData){if(this.uniformGroup.uniforms[r]instanceof Array){this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r])}}}n.prototype.checkUniformExists=function(e,t){if(t.uniforms[e]){return true}for(var r in t.uniforms){var i=t.uniforms[r];if(i.group){if(this.checkUniformExists(e,i)){return true}}}return false};n.prototype.destroy=function(){this.uniformGroup=null};Object.defineProperty(n.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:false,configurable:true});n.from=function(e,t,r){var i=je.from(e,t);return new n(i,r)};return n}();var He=0;var Ge=1;var ze=2;var Xe=3;var We=4;var Ye=function(){function t(){this.data=0;this.blendMode=y.BLEND_MODES.NORMAL;this.polygonOffset=0;this.blend=true}Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<He)},set:function(e){if(!!(this.data&1<<He)!==e){this.data^=1<<He}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<Ge)},set:function(e){if(!!(this.data&1<<Ge)!==e){this.data^=1<<Ge}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<ze)},set:function(e){if(!!(this.data&1<<ze)!==e){this.data^=1<<ze}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<Xe)},set:function(e){if(!!(this.data&1<<Xe)!==e){this.data^=1<<Xe}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<We)},set:function(e){if(!!(this.data&1<<We)!==e){this.data^=1<<We}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==y.BLEND_MODES.NONE;this._blendMode=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e;this._polygonOffset=e},enumerable:false,configurable:true});t.for2d=function(){var e=new t;e.depthTest=false;e.blend=true;return e};return t}();var qe="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";var Ve="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n";var $e=function(a){c(o,a);function o(e,t,r){var i=this;var n=je.from(e||o.defaultVertexSrc,t||o.defaultFragmentSrc);i=a.call(this,n,r)||this;i.padding=0;i.resolution=m.settings.FILTER_RESOLUTION;i.enabled=true;i.autoFit=true;i.legacy=!!i.program.attributeData.aTextureCoord;i.state=new Ye;return i}o.prototype.apply=function(e,t,r,i,n){e.applyFilter(this,t,r,i)};Object.defineProperty(o.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:false,configurable:true});Object.defineProperty(o,"defaultVertexSrc",{get:function(){return qe},enumerable:false,configurable:true});Object.defineProperty(o,"defaultFragmentSrc",{get:function(){return Ve},enumerable:false,configurable:true});return o}(Ue);var Ke="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n";var Qe="varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n";var Ze=new l.Matrix;var Je=function(){function e(e,t){this._texture=e;this.mapCoord=new l.Matrix;this.uClampFrame=new Float32Array(4);this.uClampOffset=new Float32Array(2);this._textureID=-1;this._updateID=0;this.clampOffset=0;this.clampMargin=typeof t==="undefined"?.5:t;this.isSimple=false}Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e;this._textureID=-1},enumerable:false,configurable:true});e.prototype.multiplyUvs=function(e,t){if(t===undefined){t=e}var r=this.mapCoord;for(var i=0;i<e.length;i+=2){var n=e[i];var a=e[i+1];t[i]=n*r.a+a*r.c+r.tx;t[i+1]=n*r.b+a*r.d+r.ty}return t};e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid){return false}if(!e&&this._textureID===t._updateID){return false}this._textureID=t._updateID;this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=t.orig;var n=t.trim;if(n){Ze.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height);this.mapCoord.append(Ze)}var a=t.baseTexture;var o=this.uClampFrame;var s=this.clampMargin/a.resolution;var u=this.clampOffset;o[0]=(t._frame.x+s+u)/a.width;o[1]=(t._frame.y+s+u)/a.height;o[2]=(t._frame.x+t._frame.width-s+u)/a.width;o[3]=(t._frame.y+t._frame.height-s+u)/a.height;this.uClampOffset[0]=u/a.realWidth;this.uClampOffset[1]=u/a.realHeight;this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&t.rotate===0;return true};return e}();var et=function(i){c(e,i);function e(e){var t=this;var r=new l.Matrix;t=i.call(this,Ke,Qe)||this;e.renderable=false;t.maskSprite=e;t.maskMatrix=r;return t}e.prototype.apply=function(e,t,r,i){var n=this.maskSprite;var a=n._texture;if(!a.valid){return}if(!a.uvMatrix){a.uvMatrix=new Je(a,0)}a.uvMatrix.update();this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1;this.uniforms.mask=a;this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(a.uvMatrix.mapCoord);this.uniforms.alpha=n.worldAlpha;this.uniforms.maskClamp=a.uvMatrix.uClampFrame;e.applyFilter(this,t,r,i)};return e}($e);var tt=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.enableScissor=false;t.alphaMaskPool=[];t.maskDataPool=[];t.maskStack=[];t.alphaMaskIndex=0;return t}e.prototype.setMaskStack=function(e){this.maskStack=e;this.renderer.scissor.setMaskStack(e);this.renderer.stencil.setMaskStack(e)};e.prototype.push=function(e,t){var r=t;if(!r.isMaskData){var i=this.maskDataPool.pop()||new he;i.pooled=true;i.maskObject=t;r=i}if(r.autoDetect){this.detect(r)}r.copyCountersOrReset(this.maskStack[this.maskStack.length-1]);r._target=e;switch(r.type){case y.MASK_TYPES.SCISSOR:this.maskStack.push(r);this.renderer.scissor.push(r);break;case y.MASK_TYPES.STENCIL:this.maskStack.push(r);this.renderer.stencil.push(r);break;case y.MASK_TYPES.SPRITE:r.copyCountersOrReset(null);this.pushSpriteMask(r);this.maskStack.push(r);break;default:break}};e.prototype.pop=function(e){var t=this.maskStack.pop();if(!t||t._target!==e){return}switch(t.type){case y.MASK_TYPES.SCISSOR:this.renderer.scissor.pop();break;case y.MASK_TYPES.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case y.MASK_TYPES.SPRITE:this.popSpriteMask();break;default:break}t.reset();if(t.pooled){this.maskDataPool.push(t)}};e.prototype.detect=function(e){var t=e.maskObject;if(t.isSprite){e.type=y.MASK_TYPES.SPRITE;return}e.type=y.MASK_TYPES.STENCIL;if(this.enableScissor&&t.isFastRect&&t.isFastRect()){var r=t.worldTransform;var i=Math.atan2(r.b,r.a);var n=Math.atan2(r.d,r.c);i=Math.round(i*(180/Math.PI)*100);n=Math.round(n*(180/Math.PI)*100)-i;i=(i%9e3+9e3)%9e3;n=(n%18e3+18e3)%18e3;if(i===0&&n===9e3){e.type=y.MASK_TYPES.SCISSOR}}};e.prototype.pushSpriteMask=function(e){var t=e.maskObject;var r=e._target;var i=this.alphaMaskPool[this.alphaMaskIndex];if(!i){i=this.alphaMaskPool[this.alphaMaskIndex]=[new et(t)]}i[0].resolution=this.renderer.resolution;i[0].maskSprite=t;var n=r.filterArea;r.filterArea=t.getBounds(true);this.renderer.filter.push(r,i);r.filterArea=n;this.alphaMaskIndex++};e.prototype.popSpriteMask=function(){this.renderer.filter.pop();this.alphaMaskIndex--};return e}(A);var rt=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.maskStack=[];t.glConst=0;return t}e.prototype.getStackLength=function(){return this.maskStack.length};e.prototype.setMaskStack=function(e){var t=this.renderer.gl;var r=this.getStackLength();this.maskStack=e;var i=this.getStackLength();if(i!==r){if(i===0){t.disable(this.glConst)}else{t.enable(this.glConst);this._useCurrent()}}};e.prototype._useCurrent=function(){};e.prototype.destroy=function(){r.prototype.destroy.call(this);this.maskStack=null};return e}(A);var it=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.glConst=WebGLRenderingContext.SCISSOR_TEST;return t}e.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];if(e){return e._scissorCounter}return 0};e.prototype.push=function(e){var t=e.maskObject;t.renderable=true;var r=e._scissorRect;var i=t.getBounds(true);var n=this.renderer.gl;t.renderable=false;if(r){i.fit(r)}else{n.enable(n.SCISSOR_TEST)}e._scissorCounter++;e._scissorRect=i;this._useCurrent()};e.prototype.pop=function(){var e=this.renderer.gl;if(this.getStackLength()>0){this._useCurrent()}else{e.disable(e.SCISSOR_TEST)}};e.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect;var t=this.renderer.renderTexture.current;var r=this.renderer.projection,i=r.transform,n=r.sourceFrame,a=r.destinationFrame;var o=t?t.resolution:this.renderer.resolution;var s=(e.x-n.x)*o+a.x;var u=(e.y-n.y)*o+a.y;var l=e.width*o;var h=e.height*o;if(i){s+=i.tx*o;u+=i.ty*o}if(!t){u=this.renderer.height-h-u}this.renderer.gl.scissor(s,u,l,h)};return e}(rt);var nt=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.glConst=WebGLRenderingContext.STENCIL_TEST;return t}e.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];if(e){return e._stencilCounter}return 0};e.prototype.push=function(e){var t=e.maskObject;var r=this.renderer.gl;var i=e._stencilCounter;if(i===0){this.renderer.framebuffer.forceStencil();r.enable(r.STENCIL_TEST)}e._stencilCounter++;r.colorMask(false,false,false,false);r.stencilFunc(r.EQUAL,i,this._getBitwiseMask());r.stencilOp(r.KEEP,r.KEEP,r.INCR);t.renderable=true;t.render(this.renderer);this.renderer.batch.flush();t.renderable=false;this._useCurrent()};e.prototype.pop=function(e){var t=this.renderer.gl;if(this.getStackLength()===0){t.disable(t.STENCIL_TEST);t.clear(t.STENCIL_BUFFER_BIT);t.clearStencil(0)}else{t.colorMask(false,false,false,false);t.stencilOp(t.KEEP,t.KEEP,t.DECR);e.renderable=true;e.render(this.renderer);this.renderer.batch.flush();e.renderable=false;this._useCurrent()}};e.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(true,true,true,true);e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask());e.stencilOp(e.KEEP,e.KEEP,e.KEEP)};e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1};return e}(rt);var at=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.destinationFrame=null;t.sourceFrame=null;t.defaultFrame=null;t.projectionMatrix=new l.Matrix;t.transform=null;return t}e.prototype.update=function(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame;this.sourceFrame=t||this.sourceFrame||e;this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i);if(this.transform){this.projectionMatrix.append(this.transform)}var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix;n.globalUniforms.update();if(n.shader.shader){n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}};e.prototype.calculateProjection=function(e,t,r,i){var n=this.projectionMatrix;var a=!i?1:-1;n.identity();n.a=1/t.width*2;n.d=a*(1/t.height*2);n.tx=-1-t.x*n.a;n.ty=-a-t.y*n.d};e.prototype.setTransform=function(e){};return e}(A);var ot=new l.Rectangle;var st=new l.Rectangle;var ut=new l.Rectangle;var lt=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.clearColor=e._backgroundColorRgba;t.defaultMaskStack=[];t.current=null;t.sourceFrame=new l.Rectangle;t.destinationFrame=new l.Rectangle;return t}e.prototype.bind=function(e,t,r){if(e===void 0){e=null}var i=this.renderer;this.current=e;var n;var a;var o;if(e){n=e.baseTexture;o=n.resolution;if(!t){ot.width=e.frame.width;ot.height=e.frame.height;t=ot}if(!r){st.x=e.frame.x;st.y=e.frame.y;st.width=t.width;st.height=t.height;r=st}a=n.framebuffer}else{o=i.resolution;if(!t){ot.width=i.screen.width;ot.height=i.screen.height;t=ot}if(!r){r=ot;r.width=t.width;r.height=t.height}}ut.x=r.x*o;ut.y=r.y*o;ut.width=r.width*o;ut.height=r.height*o;this.renderer.framebuffer.bind(a,ut);this.renderer.projection.update(r,t,o,!a);if(e){this.renderer.mask.setMaskStack(n.maskStack)}else{this.renderer.mask.setMaskStack(this.defaultMaskStack)}this.sourceFrame.copyFrom(t);this.destinationFrame.copyFrom(r)};e.prototype.clear=function(e,t){if(this.current){e=e||this.current.baseTexture.clearColor}else{e=e||this.clearColor}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t)};e.prototype.resize=function(){this.bind(null)};e.prototype.reset=function(){this.bind(null)};return e}(A);var ht=function(){function e(){}return e}();var ct=function(){function e(e,t){this.program=e;this.uniformData=t;this.uniformGroups={}}e.prototype.destroy=function(){this.uniformData=null;this.uniformGroups=null;this.program=null};return e}();var ft=0;var dt={textureCount:0};var pt=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.destroyed=false;t.systemCheck();t.gl=null;t.shader=null;t.program=null;t.cache={};t.id=ft++;return t}e.prototype.systemCheck=function(){if(!Le()){throw new Error("Current environment does not allow unsafe-eval, "+"please use @pixi/unsafe-eval module to enable support.")}};e.prototype.contextChange=function(e){this.gl=e;this.reset()};e.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var r=e.program;var i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);this.shader=e;if(this.program!==r){this.program=r;this.gl.useProgram(i.program)}if(!t){dt.textureCount=0;this.syncUniformGroup(e.uniformGroup,dt)}return i};e.prototype.setUniforms=function(e){var t=this.shader.program;var r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)};e.prototype.syncUniformGroup=function(e,t){var r=this.getglProgram();if(!e.static||e.dirtyId!==r.uniformGroups[e.id]){r.uniformGroups[e.id]=e.dirtyId;this.syncUniforms(e,r,t)}};e.prototype.syncUniforms=function(e,t,r){var i=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);i(t.uniformData,e.uniforms,this.renderer,r)};e.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData);if(!this.cache[t]){this.cache[t]=Oe(e,this.shader.program.uniformData)}e.syncUniforms[this.shader.program.id]=this.cache[t];return e.syncUniforms[this.shader.program.id]};e.prototype.getSignature=function(e,t){var r=e.uniforms;var i=[];for(var n in r){i.push(n);if(t[n]){i.push(t[n].type)}}return i.join("-")};e.prototype.getglProgram=function(){if(this.shader){return this.shader.program.glPrograms[this.renderer.CONTEXT_UID]}return null};e.prototype.generateShader=function(e){var t=this.gl;var r=e.program;var i={};for(var n in r.attributeData){i[n]=r.attributeData[n].location}var a=fe(t,r.vertexSrc,r.fragmentSrc,i);var o={};for(var n in r.uniformData){var s=r.uniformData[n];o[n]={location:t.getUniformLocation(a,n),value:pe(s.type,s.size)}}var u=new ct(a,o);r.glPrograms[this.renderer.CONTEXT_UID]=u;return u};e.prototype.reset=function(){this.program=null;this.shader=null};e.prototype.destroy=function(){this.destroyed=true};return e}(A);function vt(e,t){if(t===void 0){t=[]}t[y.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.ADD]=[e.ONE,e.ONE];t[y.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.NONE]=[0,0];t[y.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE];t[y.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.SRC_IN]=[e.DST_ALPHA,e.ZERO];t[y.BLEND_MODES.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO];t[y.BLEND_MODES.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE];t[y.BLEND_MODES.DST_IN]=[e.ZERO,e.SRC_ALPHA];t[y.BLEND_MODES.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA];t[y.BLEND_MODES.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA];t[y.BLEND_MODES.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD];return t}var mt=0;var gt=1;var yt=2;var _t=3;var bt=4;var xt=function(r){c(t,r);function t(e){var t=r.call(this,e)||this;t.gl=null;t.stateId=0;t.polygonOffset=0;t.blendMode=y.BLEND_MODES.NONE;t._blendEq=false;t.map=[];t.map[mt]=t.setBlend;t.map[gt]=t.setOffset;t.map[yt]=t.setCullFace;t.map[_t]=t.setDepthTest;t.map[bt]=t.setFrontFace;t.checks=[];t.defaultState=new Ye;t.defaultState.blend=true;return t}t.prototype.contextChange=function(e){this.gl=e;this.blendModes=vt(e);this.set(this.defaultState);this.reset()};t.prototype.set=function(e){e=e||this.defaultState;if(this.stateId!==e.data){var t=this.stateId^e.data;var r=0;while(t){if(t&1){this.map[r].call(this,!!(e.data&1<<r))}t=t>>1;r++}this.stateId=e.data}for(var r=0;r<this.checks.length;r++){this.checks[r](this,e)}};t.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++){this.map[t].call(this,!!(e.data&1<<t))}for(var t=0;t<this.checks.length;t++){this.checks[t](this,e)}this.stateId=e.data};t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e);this.gl[e?"enable":"disable"](this.gl.BLEND)};t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e);this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)};t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)};t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)};t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])};t.prototype.setBlendMode=function(e){if(e===this.blendMode){return}this.blendMode=e;var t=this.blendModes[e];var r=this.gl;if(t.length===2){r.blendFunc(t[0],t[1])}else{r.blendFuncSeparate(t[0],t[1],t[2],t[3])}if(t.length===6){this._blendEq=true;r.blendEquationSeparate(t[4],t[5])}else if(this._blendEq){this._blendEq=false;r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD)}};t.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)};t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,false);this.forceState(this.defaultState);this._blendEq=true;this.blendMode=-1;this.setBlendMode(0)};t.prototype.updateCheck=function(e,t){var r=this.checks.indexOf(e);if(t&&r===-1){this.checks.push(e)}else if(!t&&r!==-1){this.checks.splice(r,1)}};t.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)};t.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)};return t}(A);var wt=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.count=0;t.checkCount=0;t.maxIdle=m.settings.GC_MAX_IDLE;t.checkCountMax=m.settings.GC_MAX_CHECK_COUNT;t.mode=m.settings.GC_MODE;return t}e.prototype.postrender=function(){if(!this.renderer.renderingToScreen){return}this.count++;if(this.mode===y.GC_MODES.MANUAL){return}this.checkCount++;if(this.checkCount>this.checkCountMax){this.checkCount=0;this.run()}};e.prototype.run=function(){var e=this.renderer.texture;var t=e.managedTextures;var r=false;for(var i=0;i<t.length;i++){var n=t[i];if(!n.framebuffer&&this.count-n.touched>this.maxIdle){e.destroyTexture(n,true);t[i]=null;r=true}}if(r){var a=0;for(var i=0;i<t.length;i++){if(t[i]!==null){t[a++]=t[i]}}t.length=a}};e.prototype.unload=function(e){var t;var r=this.renderer.texture;if((t=e._texture)===null||t===void 0?void 0:t.framebuffer){r.destroyTexture(e._texture)}for(var i=e.children.length-1;i>=0;i--){this.unload(e.children[i])}};return e}(A);var Et=function(){function e(e){this.texture=e;this.width=-1;this.height=-1;this.dirtyId=-1;this.dirtyStyleId=-1;this.mipmap=false;this.wrapMode=33071;this.type=6408;this.internalFormat=5121}return e}();var St=function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.boundTextures=[];t.currentLocation=-1;t.managedTextures=[];t._unknownBoundTextures=false;t.unknownTexture=new d;return t}e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.webGLVersion=this.renderer.context.webGLVersion;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++){this.boundTextures[r]=null}this.emptyTextures={};var i=new Et(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4));this.emptyTextures[e.TEXTURE_2D]=i;this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Et(e.createTexture());e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++){e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null)}e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var r=0;r<this.boundTextures.length;r++){this.bind(null,r)}};e.prototype.bind=function(e,t){if(t===void 0){t=0}var r=this.gl;if(e){e=e.castToBaseTexture();if(e.parentTextureArray){return}if(e.valid){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);if(this.boundTextures[t]!==e){if(this.currentLocation!==t){this.currentLocation=t;r.activeTexture(r.TEXTURE0+t)}r.bindTexture(e.target,i.texture)}if(i.dirtyId!==e.dirtyId){if(this.currentLocation!==t){this.currentLocation=t;r.activeTexture(r.TEXTURE0+t)}this.updateTexture(e)}this.boundTextures[t]=e}}else{if(this.currentLocation!==t){this.currentLocation=t;r.activeTexture(r.TEXTURE0+t)}r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture);this.boundTextures[t]=null}};e.prototype.reset=function(){this._unknownBoundTextures=true;this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++){this.boundTextures[e]=this.unknownTexture}};e.prototype.unbind=function(e){var t=this,r=t.gl,i=t.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=false;for(var n=0;n<i.length;n++){if(i[n]===this.unknownTexture){this.bind(null,n)}}}for(var n=0;n<i.length;n++){if(i[n]===e){if(this.currentLocation!==n){r.activeTexture(r.TEXTURE0+n);this.currentLocation=n}r.bindTexture(e.target,this.emptyTextures[e.target].texture);i[n]=null}}};e.prototype.initTexture=function(e){var t=new Et(this.gl.createTexture());t.dirtyId=-1;e._glTextures[this.CONTEXT_UID]=t;this.managedTextures.push(e);e.on("dispose",this.destroyTexture,this);return t};e.prototype.initTextureType=function(e,t){t.internalFormat=e.format;t.type=e.type;if(this.webGLVersion!==2){return}var r=this.renderer.gl;if(e.type===r.FLOAT&&e.format===r.RGBA){t.internalFormat=r.RGBA32F}if(e.type===y.TYPES.HALF_FLOAT){t.type=r.HALF_FLOAT}if(t.type===r.HALF_FLOAT&&e.format===r.RGBA){t.internalFormat=r.RGBA16F}};e.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(!t){return}var r=this.renderer;this.initTextureType(e,t);if(e.resource&&e.resource.upload(r,e,t));else{var i=e.realWidth;var n=e.realHeight;var a=r.gl;if(t.width!==i||t.height!==n||t.dirtyId<0){t.width=i;t.height=n;a.texImage2D(e.target,0,t.internalFormat,i,n,0,e.format,t.type,null)}}if(e.dirtyStyleId!==t.dirtyStyleId){this.updateTextureStyle(e)}t.dirtyId=e.dirtyId};e.prototype.destroyTexture=function(e,t){var r=this.gl;e=e.castToBaseTexture();if(e._glTextures[this.CONTEXT_UID]){this.unbind(e);r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture);e.off("dispose",this.destroyTexture,this);delete e._glTextures[this.CONTEXT_UID];if(!t){var i=this.managedTextures.indexOf(e);if(i!==-1){_.removeItems(this.managedTextures,i,1)}}}};e.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];if(!t){return}if((e.mipmap===y.MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo){t.mipmap=false}else{t.mipmap=e.mipmap>=1}if(this.webGLVersion!==2&&!e.isPowerOfTwo){t.wrapMode=y.WRAP_MODES.CLAMP}else{t.wrapMode=e.wrapMode}if(e.resource&&e.resource.style(this.renderer,e,t));else{this.setStyle(e,t)}t.dirtyStyleId=e.dirtyStyleId};e.prototype.setStyle=function(e,t){var r=this.gl;if(t.mipmap){r.generateMipmap(e.target)}r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode);r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode);if(t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===y.SCALE_MODES.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===y.SCALE_MODES.LINEAR){var n=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else{r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===y.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST)}r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===y.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST)};return e}(A);var Tt={FilterSystem:J,BatchSystem:te,ContextSystem:ie,FramebufferSystem:oe,GeometrySystem:le,MaskSystem:tt,ScissorSystem:it,StencilSystem:nt,ProjectionSystem:at,RenderTextureSystem:lt,ShaderSystem:pt,StateSystem:xt,TextureGCSystem:wt,TextureSystem:St};var Pt=new l.Matrix;var At=function(i){c(e,i);function e(e,t){if(e===void 0){e=y.RENDERER_TYPE.UNKNOWN}var r=i.call(this)||this;t=Object.assign({},m.settings.RENDER_OPTIONS,t);if(t.roundPixels){m.settings.ROUND_PIXELS=t.roundPixels;_.deprecation("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)}r.options=t;r.type=e;r.screen=new l.Rectangle(0,0,t.width,t.height);r.view=t.view||document.createElement("canvas");r.resolution=t.resolution||m.settings.RESOLUTION;r.transparent=t.transparent;r.autoDensity=t.autoDensity||t.autoResize||false;r.preserveDrawingBuffer=t.preserveDrawingBuffer;r.clearBeforeRender=t.clearBeforeRender;r._backgroundColor=0;r._backgroundColorRgba=[0,0,0,0];r._backgroundColorString="#000000";r.backgroundColor=t.backgroundColor||r._backgroundColor;r._lastObjectRendered=null;r.plugins={};return r}e.prototype.initPlugins=function(e){for(var t in e){this.plugins[t]=new e[t](this)}};Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:false,configurable:true});e.prototype.resize=function(e,t){this.screen.width=e;this.screen.height=t;this.view.width=e*this.resolution;this.view.height=t*this.resolution;if(this.autoDensity){this.view.style.width=e+"px";this.view.style.height=t+"px"}this.emit("resize",e,t)};e.prototype.generateTexture=function(e,t,r,i){i=i||e.getLocalBounds(null,true);if(i.width===0){i.width=1}if(i.height===0){i.height=1}var n=k.create({width:i.width|0,height:i.height|0,scaleMode:t,resolution:r});Pt.tx=-i.x;Pt.ty=-i.y;this.render(e,n,false,Pt,!!e.parent);return n};e.prototype.destroy=function(e){for(var t in this.plugins){this.plugins[t].destroy();this.plugins[t]=null}if(e&&this.view.parentNode){this.view.parentNode.removeChild(this.view)}var r=this;r.plugins=null;r.type=y.RENDERER_TYPE.UNKNOWN;r.view=null;r.screen=null;r._tempDisplayObjectParent=null;r.options=null;this._backgroundColorRgba=null;this._backgroundColorString=null;this._lastObjectRendered=null};Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e;this._backgroundColorString=_.hex2string(e);_.hex2rgb(e,this._backgroundColorRgba)},enumerable:false,configurable:true});return e}(_.EventEmitter);var It=function(r){c(i,r);function i(e){var t=r.call(this,y.RENDERER_TYPE.WEBGL,e)||this;e=t.options;t.gl=null;t.CONTEXT_UID=0;t.runners={destroy:new n.Runner("destroy"),contextChange:new n.Runner("contextChange"),reset:new n.Runner("reset"),update:new n.Runner("update"),postrender:new n.Runner("postrender"),prerender:new n.Runner("prerender"),resize:new n.Runner("resize")};t.globalUniforms=new Q({projectionMatrix:new l.Matrix},true);t.addSystem(tt,"mask").addSystem(ie,"context").addSystem(xt,"state").addSystem(pt,"shader").addSystem(St,"texture").addSystem(le,"geometry").addSystem(oe,"framebuffer").addSystem(it,"scissor").addSystem(nt,"stencil").addSystem(at,"projection").addSystem(wt,"textureGC").addSystem(J,"filter").addSystem(lt,"renderTexture").addSystem(te,"batch");t.initPlugins(i.__plugins);if(e.context){t.context.initFromContext(e.context)}else{t.context.initFromOptions({alpha:!!t.transparent,antialias:e.antialias,premultipliedAlpha:t.transparent&&t.transparent!=="notMultiplied",stencil:true,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:t.options.powerPreference})}t.renderingToScreen=true;_.sayHello(t.context.webGLVersion===2?"WebGL 2":"WebGL 1");t.resize(t.options.width,t.options.height);return t}i.create=function(e){if(_.isWebGLSupported()){return new i(e)}throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')};i.prototype.addSystem=function(e,t){if(!t){t=e.name}var r=new e(this);if(this[t]){throw new Error('Whoops! The name "'+t+'" is already in use')}this[t]=r;for(var i in this.runners){this.runners[i].add(r)}return this};i.prototype.render=function(e,t,r,i,n){this.renderingToScreen=!t;this.runners.prerender.emit();this.emit("prerender");this.projection.transform=i;if(this.context.isLost){return}if(!t){this._lastObjectRendered=e}if(!n){var a=e.enableTempParent();e.updateTransform();e.disableTempParent(a)}this.renderTexture.bind(t);this.batch.currentRenderer.start();if(r!==undefined?r:this.clearBeforeRender){this.renderTexture.clear()}e.render(this);this.batch.currentRenderer.flush();if(t){t.baseTexture.update()}this.runners.postrender.emit();this.projection.transform=null;this.emit("postrender")};i.prototype.resize=function(e,t){r.prototype.resize.call(this,e,t);this.runners.resize.emit(e,t)};i.prototype.reset=function(){this.runners.reset.emit();return this};i.prototype.clear=function(){this.renderTexture.bind();this.renderTexture.clear()};i.prototype.destroy=function(e){this.runners.destroy.emit();for(var t in this.runners){this.runners[t].destroy()}r.prototype.destroy.call(this,e);this.gl=null};i.registerPlugin=function(e,t){i.__plugins=i.__plugins||{};i.__plugins[e]=t};return i}(At);function Ot(e){return It.create(e)}var Mt="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}";var Ct="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";var Dt=function(){function e(){this.texArray=null;this.blend=0;this.type=y.DRAW_MODES.TRIANGLES;this.start=0;this.size=0;this.data=null}return e}();var Rt=function(){function e(){this.elements=[];this.ids=[];this.count=0}e.prototype.clear=function(){for(var e=0;e<this.count;e++){this.elements[e]=null}this.count=0};return e}();var Lt=function(){function e(e){this.rawBinaryData=new ArrayBuffer(e);this.uint32View=new Uint32Array(this.rawBinaryData);this.float32View=new Float32Array(this.rawBinaryData)}Object.defineProperty(e.prototype,"int8View",{get:function(){if(!this._int8View){this._int8View=new Int8Array(this.rawBinaryData)}return this._int8View},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"uint8View",{get:function(){if(!this._uint8View){this._uint8View=new Uint8Array(this.rawBinaryData)}return this._uint8View},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"int16View",{get:function(){if(!this._int16View){this._int16View=new Int16Array(this.rawBinaryData)}return this._int16View},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"uint16View",{get:function(){if(!this._uint16View){this._uint16View=new Uint16Array(this.rawBinaryData)}return this._uint16View},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"int32View",{get:function(){if(!this._int32View){this._int32View=new Int32Array(this.rawBinaryData)}return this._int32View},enumerable:false,configurable:true});e.prototype.view=function(e){return this[e+"View"]};e.prototype.destroy=function(){this.rawBinaryData=null;this._int8View=null;this._uint8View=null;this._int16View=null;this._uint16View=null;this._int32View=null;this.uint32View=null;this.float32View=null};e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}};return e}();var Nt=function(r){c(g,r);function g(e){var t=r.call(this,e)||this;t.shaderGenerator=null;t.geometryClass=null;t.vertexSize=null;t.state=Ye.for2d();t.size=m.settings.SPRITE_BATCH_SIZE*4;t._vertexCount=0;t._indexCount=0;t._bufferedElements=[];t._bufferedTextures=[];t._bufferSize=0;t._shader=null;t._packedGeometries=[];t._packedGeometryPoolSize=2;t._flushId=0;t._aBuffers={};t._iBuffers={};t.MAX_TEXTURES=1;t.renderer.on("prerender",t.onPrerender,t);e.runners.contextChange.add(t);t._dcIndex=0;t._aIndex=0;t._iIndex=0;t._attributeBuffer=null;t._indexBuffer=null;t._tempBoundTextures=[];return t}g.prototype.contextChange=function(){var e=this.renderer.gl;if(m.settings.PREFER_ENV===y.ENV.WEBGL_LEGACY){this.MAX_TEXTURES=1}else{this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),m.settings.SPRITE_MAX_TEXTURES);this.MAX_TEXTURES=De(this.MAX_TEXTURES,e)}this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++){this._packedGeometries[t]=new this.geometryClass}this.initFlushBuffers()};g.prototype.initFlushBuffers=function(){var e=g._drawCallPool,t=g._textureArrayPool;var r=this.size/4;var i=Math.floor(r/this.MAX_TEXTURES)+1;while(e.length<r){e.push(new Dt)}while(t.length<i){t.push(new Rt)}for(var n=0;n<this.MAX_TEXTURES;n++){this._tempBoundTextures[n]=null}};g.prototype.onPrerender=function(){this._flushId=0};g.prototype.render=function(e){if(!e._texture.valid){return}if(this._vertexCount+e.vertexData.length/2>this.size){this.flush()}this._vertexCount+=e.vertexData.length/2;this._indexCount+=e.indices.length;this._bufferedTextures[this._bufferSize]=e._texture.baseTexture;this._bufferedElements[this._bufferSize++]=e};g.prototype.buildTexturesAndDrawCalls=function(){var e=this,t=e._bufferedTextures,r=e.MAX_TEXTURES;var i=g._textureArrayPool;var n=this.renderer.batch;var a=this._tempBoundTextures;var o=this.renderer.textureGC.count;var s=++d._globalBatch;var u=0;var l=i[0];var h=0;n.copyBoundTextures(a,r);for(var c=0;c<this._bufferSize;++c){var f=t[c];t[c]=null;if(f._batchEnabled===s){continue}if(l.count>=r){n.boundArray(l,a,s,r);this.buildDrawCalls(l,h,c);h=c;l=i[++u];++s}f._batchEnabled=s;f.touched=o;l.elements[l.count++]=f}if(l.count>0){n.boundArray(l,a,s,r);this.buildDrawCalls(l,h,this._bufferSize);++u;++s}for(var c=0;c<a.length;c++){a[c]=null}d._globalBatch=s};g.prototype.buildDrawCalls=function(e,t,r){var i=this,n=i._bufferedElements,a=i._attributeBuffer,o=i._indexBuffer,s=i.vertexSize;var u=g._drawCallPool;var l=this._dcIndex;var h=this._aIndex;var c=this._iIndex;var f=u[l];f.start=this._iIndex;f.texArray=e;for(var d=t;d<r;++d){var p=n[d];var v=p._texture.baseTexture;var m=_.premultiplyBlendMode[v.alphaMode?1:0][p.blendMode];n[d]=null;if(t<d&&f.blend!==m){f.size=c-f.start;t=d;f=u[++l];f.texArray=e;f.start=c}this.packInterleavedGeometry(p,a,o,h,c);h+=p.vertexData.length/2*s;c+=p.indices.length;f.blend=m}if(t<r){f.size=c-f.start;++l}this._dcIndex=l;this._aIndex=h;this._iIndex=c};g.prototype.bindAndClearTexArray=function(e){var t=this.renderer.texture;for(var r=0;r<e.count;r++){t.bind(e.elements[r],e.ids[r]);e.elements[r]=null}e.count=0};g.prototype.updateGeometry=function(){var e=this,t=e._packedGeometries,r=e._attributeBuffer,i=e._indexBuffer;if(!m.settings.CAN_UPLOAD_SAME_BUFFER){if(this._packedGeometryPoolSize<=this._flushId){this._packedGeometryPoolSize++;t[this._flushId]=new this.geometryClass}t[this._flushId]._buffer.update(r.rawBinaryData);t[this._flushId]._indexBuffer.update(i);this.renderer.geometry.bind(t[this._flushId]);this.renderer.geometry.updateBuffers();this._flushId++}else{t[this._flushId]._buffer.update(r.rawBinaryData);t[this._flushId]._indexBuffer.update(i);this.renderer.geometry.updateBuffers()}};g.prototype.drawBatches=function(){var e=this._dcIndex;var t=this.renderer,r=t.gl,i=t.state;var n=g._drawCallPool;var a=null;for(var o=0;o<e;o++){var s=n[o],u=s.texArray,l=s.type,h=s.size,c=s.start,f=s.blend;if(a!==u){a=u;this.bindAndClearTexArray(u)}this.state.blendMode=f;i.set(this.state);r.drawElements(l,h,r.UNSIGNED_SHORT,c*2)}};g.prototype.flush=function(){if(this._vertexCount===0){return}this._attributeBuffer=this.getAttributeBuffer(this._vertexCount);this._indexBuffer=this.getIndexBuffer(this._indexCount);this._aIndex=0;this._iIndex=0;this._dcIndex=0;this.buildTexturesAndDrawCalls();this.updateGeometry();this.drawBatches();this._bufferSize=0;this._vertexCount=0;this._indexCount=0};g.prototype.start=function(){this.renderer.state.set(this.state);this.renderer.shader.bind(this._shader);if(m.settings.CAN_UPLOAD_SAME_BUFFER){this.renderer.geometry.bind(this._packedGeometries[this._flushId])}};g.prototype.stop=function(){this.flush()};g.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++){if(this._packedGeometries[e]){this._packedGeometries[e].destroy()}}this.renderer.off("prerender",this.onPrerender,this);this._aBuffers=null;this._iBuffers=null;this._packedGeometries=null;this._attributeBuffer=null;this._indexBuffer=null;if(this._shader){this._shader.destroy();this._shader=null}r.prototype.destroy.call(this)};g.prototype.getAttributeBuffer=function(e){var t=_.nextPow2(Math.ceil(e/8));var r=_.log2(t);var i=t*8;if(this._aBuffers.length<=r){this._iBuffers.length=r+1}var n=this._aBuffers[i];if(!n){this._aBuffers[i]=n=new Lt(i*this.vertexSize*4)}return n};g.prototype.getIndexBuffer=function(e){var t=_.nextPow2(Math.ceil(e/12));var r=_.log2(t);var i=t*12;if(this._iBuffers.length<=r){this._iBuffers.length=r+1}var n=this._iBuffers[r];if(!n){this._iBuffers[r]=n=new Uint16Array(i)}return n};g.prototype.packInterleavedGeometry=function(e,t,r,i,n){var a=t.uint32View,o=t.float32View;var s=i/this.vertexSize;var u=e.uvs;var l=e.indices;var h=e.vertexData;var c=e._texture.baseTexture._batchLocation;var f=Math.min(e.worldAlpha,1);var d=f<1&&e._texture.baseTexture.alphaMode?_.premultiplyTint(e._tintRGB,f):e._tintRGB+(f*255<<24);for(var p=0;p<h.length;p+=2){o[i++]=h[p];o[i++]=h[p+1];o[i++]=u[p];o[i++]=u[p+1];a[i++]=d;o[i++]=c}for(var p=0;p<l.length;p++){r[n++]=s+l[p]}};g._drawCallPool=[];g._textureArrayPool=[];return g}(ee);var kt=function(){function e(e,t){this.vertexSrc=e;this.fragTemplate=t;this.programCache={};this.defaultGroupCache={};if(t.indexOf("%count%")<0){throw new Error('Fragment template must contain "%count%".')}if(t.indexOf("%forloop%")<0){throw new Error('Fragment template must contain "%forloop%".')}}e.prototype.generateShader=function(e){if(!this.programCache[e]){var t=new Int32Array(e);for(var r=0;r<e;r++){t[r]=r}this.defaultGroupCache[e]=Q.from({uSamplers:t},true);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+e);i=i.replace(/%forloop%/gi,this.generateSampleSrc(e));this.programCache[e]=new je(this.vertexSrc,i)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new l.Matrix,default:this.defaultGroupCache[e]};return new Ue(this.programCache[e],n)};e.prototype.generateSampleSrc=function(e){var t="";t+="\n";t+="\n";for(var r=0;r<e;r++){if(r>0){t+="\nelse "}if(r<e-1){t+="if(vTextureId < "+r+".5)"}t+="\n{";t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);";t+="\n}"}t+="\n";t+="\n";return t};return e}();var Ft=function(r){c(e,r);function e(e){if(e===void 0){e=false}var t=r.call(this)||this;t._buffer=new U(null,e,false);t._indexBuffer=new U(null,e,true);t.addAttribute("aVertexPosition",t._buffer,2,false,y.TYPES.FLOAT).addAttribute("aTextureCoord",t._buffer,2,false,y.TYPES.FLOAT).addAttribute("aColor",t._buffer,4,true,y.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",t._buffer,1,true,y.TYPES.FLOAT).addIndex(t._indexBuffer);return t}return e}(q);var Bt="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n";var jt="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";var Ut=function(){function e(){}e.create=function(e){var t=Object.assign({vertex:Bt,fragment:jt,geometryClass:Ft,vertexSize:6},e),i=t.vertex,n=t.fragment,a=t.vertexSize,o=t.geometryClass;return function(r){c(e,r);function e(e){var t=r.call(this,e)||this;t.shaderGenerator=new kt(i,n);t.geometryClass=o;t.vertexSize=a;return t}return e}(Nt)};Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Bt},enumerable:false,configurable:true});Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return jt},enumerable:false,configurable:true});return e}();var Ht=Ut.create();r.AbstractBatchRenderer=Nt;r.AbstractRenderer=At;r.Attribute=B;r.BaseRenderTexture=M;r.BaseTexture=d;r.BatchDrawCall=Dt;r.BatchGeometry=Ft;r.BatchPluginFactory=Ut;r.BatchRenderer=Ht;r.BatchShaderGenerator=kt;r.BatchTextureArray=Rt;r.Buffer=U;r.Filter=$e;r.FilterState=Z;r.Framebuffer=O;r.GLFramebuffer=ne;r.GLProgram=ct;r.GLTexture=Et;r.Geometry=q;r.IGLUniformData=ht;r.MaskData=he;r.ObjectRenderer=ee;r.Program=je;r.Quad=V;r.QuadUv=$;r.RenderTexture=k;r.RenderTexturePool=F;r.Renderer=It;r.Shader=Ue;r.SpriteMaskFilter=et;r.State=Ye;r.System=A;r.Texture=R;r.TextureMatrix=Je;r.TextureUvs=C;r.UniformGroup=Q;r.ViewableBuffer=Lt;r.autoDetectRenderer=Ot;r.checkMaxIfStatementsInShader=De;r.defaultFilterVertex=Ct;r.defaultVertex=Mt;r.resources=P;r.systems=Tt;r.uniformParsers=Pe},{"@pixi/constants":3,"@pixi/math":16,"@pixi/runner":25,"@pixi/settings":26,"@pixi/ticker":33,"@pixi/utils":34}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/settings");var o=e("@pixi/math");var s=e("@pixi/utils");i.settings.SORTABLE_CHILDREN=false;var u=function(){function e(){this.minX=Infinity;this.minY=Infinity;this.maxX=-Infinity;this.maxY=-Infinity;this.rect=null;this.updateID=-1}e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY};e.prototype.clear=function(){this.minX=Infinity;this.minY=Infinity;this.maxX=-Infinity;this.maxY=-Infinity};e.prototype.getRectangle=function(e){if(this.minX>this.maxX||this.minY>this.maxY){return o.Rectangle.EMPTY}e=e||new o.Rectangle(0,0,1,1);e.x=this.minX;e.y=this.minY;e.width=this.maxX-this.minX;e.height=this.maxY-this.minY;return e};e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x);this.maxX=Math.max(this.maxX,e.x);this.minY=Math.min(this.minY,e.y);this.maxY=Math.max(this.maxY,e.y)};e.prototype.addQuad=function(e){var t=this.minX;var r=this.minY;var i=this.maxX;var n=this.maxY;var a=e[0];var o=e[1];t=a<t?a:t;r=o<r?o:r;i=a>i?a:i;n=o>n?o:n;a=e[2];o=e[3];t=a<t?a:t;r=o<r?o:r;i=a>i?a:i;n=o>n?o:n;a=e[4];o=e[5];t=a<t?a:t;r=o<r?o:r;i=a>i?a:i;n=o>n?o:n;a=e[6];o=e[7];t=a<t?a:t;r=o<r?o:r;i=a>i?a:i;n=o>n?o:n;this.minX=t;this.minY=r;this.maxX=i;this.maxY=n};e.prototype.addFrame=function(e,t,r,i,n){this.addFrameMatrix(e.worldTransform,t,r,i,n)};e.prototype.addFrameMatrix=function(e,t,r,i,n){var a=e.a;var o=e.b;var s=e.c;var u=e.d;var l=e.tx;var h=e.ty;var c=this.minX;var f=this.minY;var d=this.maxX;var p=this.maxY;var v=a*t+s*r+l;var m=o*t+u*r+h;c=v<c?v:c;f=m<f?m:f;d=v>d?v:d;p=m>p?m:p;v=a*i+s*r+l;m=o*i+u*r+h;c=v<c?v:c;f=m<f?m:f;d=v>d?v:d;p=m>p?m:p;v=a*t+s*n+l;m=o*t+u*n+h;c=v<c?v:c;f=m<f?m:f;d=v>d?v:d;p=m>p?m:p;v=a*i+s*n+l;m=o*i+u*n+h;c=v<c?v:c;f=m<f?m:f;d=v>d?v:d;p=m>p?m:p;this.minX=c;this.minY=f;this.maxX=d;this.maxY=p};e.prototype.addVertexData=function(e,t,r){var i=this.minX;var n=this.minY;var a=this.maxX;var o=this.maxY;for(var s=t;s<r;s+=2){var u=e[s];var l=e[s+1];i=u<i?u:i;n=l<n?l:n;a=u>a?u:a;o=l>o?l:o}this.minX=i;this.minY=n;this.maxX=a;this.maxY=o};e.prototype.addVertices=function(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)};e.prototype.addVerticesMatrix=function(e,t,r,i,n,a){if(n===void 0){n=0}if(a===void 0){a=n}var o=e.a;var s=e.b;var u=e.c;var l=e.d;var h=e.tx;var c=e.ty;var f=this.minX;var d=this.minY;var p=this.maxX;var v=this.maxY;for(var m=r;m<i;m+=2){var g=t[m];var y=t[m+1];var _=o*g+u*y+h;var b=l*y+s*g+c;f=Math.min(f,_-n);p=Math.max(p,_+n);d=Math.min(d,b-a);v=Math.max(v,b+a)}this.minX=f;this.minY=d;this.maxX=p;this.maxY=v};e.prototype.addBounds=function(e){var t=this.minX;var r=this.minY;var i=this.maxX;var n=this.maxY;this.minX=e.minX<t?e.minX:t;this.minY=e.minY<r?e.minY:r;this.maxX=e.maxX>i?e.maxX:i;this.maxY=e.maxY>n?e.maxY:n};e.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX;var i=e.minY>t.minY?e.minY:t.minY;var n=e.maxX<t.maxX?e.maxX:t.maxX;var a=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=n&&i<=a){var o=this.minX;var s=this.minY;var u=this.maxX;var l=this.maxY;this.minX=r<o?r:o;this.minY=i<s?i:s;this.maxX=n>u?n:u;this.maxY=a>l?a:l}};e.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)};e.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x;var i=e.minY>t.y?e.minY:t.y;var n=e.maxX<t.x+t.width?e.maxX:t.x+t.width;var a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=n&&i<=a){var o=this.minX;var s=this.minY;var u=this.maxX;var l=this.maxY;this.minX=r<o?r:o;this.minY=i<s?i:s;this.maxX=n>u?n:u;this.maxY=a>l?a:l}};e.prototype.pad=function(e,t){if(e===void 0){e=0}if(t===void 0){t=e}if(!this.isEmpty()){this.minX-=e;this.maxX+=e;this.minY-=t;this.maxY+=t}};e.prototype.addFramePad=function(e,t,r,i,n,a){e-=n;t-=a;r+=n;i+=a;this.minX=this.minX<e?this.minX:e;this.maxX=this.maxX>r?this.maxX:r;this.minY=this.minY<t?this.minY:t;this.maxY=this.maxY>i?this.maxY:i};return e}();var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function a(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var l=function(t){a(n,t);function n(){var e=t.call(this)||this;e.tempDisplayObjectParent=null;e.transform=new o.Transform;e.alpha=1;e.visible=true;e.renderable=true;e.parent=null;e.worldAlpha=1;e._lastSortedIndex=0;e._zIndex=0;e.filterArea=null;e.filters=null;e._enabledFilters=null;e._bounds=new u;e._localBounds=null;e._boundsID=0;e._boundsRect=null;e._localBoundsRect=null;e._mask=null;e._destroyed=false;e.isSprite=false;e.isMask=false;return e}n.mixin=function(e){var t=Object.keys(e);for(var r=0;r<t.length;++r){var i=t[r];Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e,i))}};n.prototype._recursivePostUpdateTransform=function(){if(this.parent){this.parent._recursivePostUpdateTransform();this.transform.updateTransform(this.parent.transform)}else{this.transform.updateTransform(this._tempDisplayObjectParent.transform)}};n.prototype.updateTransform=function(){this._boundsID++;this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha};n.prototype.getBounds=function(e,t){if(!e){if(!this.parent){this.parent=this._tempDisplayObjectParent;this.updateTransform();this.parent=null}else{this._recursivePostUpdateTransform();this.updateTransform()}}if(this._bounds.updateID!==this._boundsID){this.calculateBounds();this._bounds.updateID=this._boundsID}if(!t){if(!this._boundsRect){this._boundsRect=new o.Rectangle}t=this._boundsRect}return this._bounds.getRectangle(t)};n.prototype.getLocalBounds=function(e){if(!e){if(!this._localBoundsRect){this._localBoundsRect=new o.Rectangle}e=this._localBoundsRect}if(!this._localBounds){this._localBounds=new u}var t=this.transform;var r=this.parent;this.parent=null;this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds;var n=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(false,e);this.parent=r;this.transform=t;this._bounds=i;this._bounds.updateID+=this._boundsID-n;return a};n.prototype.toGlobal=function(e,t,r){if(r===void 0){r=false}if(!r){this._recursivePostUpdateTransform();if(!this.parent){this.parent=this._tempDisplayObjectParent;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}}return this.worldTransform.apply(e,t)};n.prototype.toLocal=function(e,t,r,i){if(t){e=t.toGlobal(e,r,i)}if(!i){this._recursivePostUpdateTransform();if(!this.parent){this.parent=this._tempDisplayObjectParent;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}}return this.worldTransform.applyInverse(e,r)};n.prototype.setParent=function(e){if(!e||!e.addChild){throw new Error("setParent: Argument must be a Container")}e.addChild(this);return e};n.prototype.setTransform=function(e,t,r,i,n,a,o,s,u){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=1}if(i===void 0){i=1}if(n===void 0){n=0}if(a===void 0){a=0}if(o===void 0){o=0}if(s===void 0){s=0}if(u===void 0){u=0}this.position.x=e;this.position.y=t;this.scale.x=!r?1:r;this.scale.y=!i?1:i;this.rotation=n;this.skew.x=a;this.skew.y=o;this.pivot.x=s;this.pivot.y=u;return this};n.prototype.destroy=function(e){if(this.parent){this.parent.removeChild(this)}this.removeAllListeners();this.transform=null;this.parent=null;this._bounds=null;this._mask=null;this.filters=null;this.filterArea=null;this.hitArea=null;this.interactive=false;this.interactiveChildren=false;this._destroyed=true};Object.defineProperty(n.prototype,"_tempDisplayObjectParent",{get:function(){if(this.tempDisplayObjectParent===null){this.tempDisplayObjectParent=new h}return this.tempDisplayObjectParent},enumerable:false,configurable:true});n.prototype.enableTempParent=function(){var e=this.parent;this.parent=this._tempDisplayObjectParent;return e};n.prototype.disableTempParent=function(e){this.parent=e};Object.defineProperty(n.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"angle",{get:function(){return this.transform.rotation*o.RAD_TO_DEG},set:function(e){this.transform.rotation=e*o.DEG_TO_RAD},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e;if(this.parent){this.parent.sortDirty=true}},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible){return false}e=e.parent}while(e);return true},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var t=this._mask.maskObject||this._mask;t.renderable=true;t.isMask=false}this._mask=e;if(this._mask){var t=this._mask.maskObject||this._mask;t.renderable=false;t.isMask=true}},enumerable:false,configurable:true});return n}(s.EventEmitter);var h=function(t){a(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.sortDirty=null;return e}return e}(l);l.prototype.displayObjectUpdateTransform=l.prototype.updateTransform;function c(e,t){if(e.zIndex===t.zIndex){return e._lastSortedIndex-t._lastSortedIndex}return e.zIndex-t.zIndex}var f=function(o){a(e,o);function e(){var e=o.call(this)||this;e.children=[];e.sortableChildren=i.settings.SORTABLE_CHILDREN;e.sortDirty=false;return e}e.prototype.onChildrenChange=function(e){};e.prototype.addChild=function(){var e=arguments;var t=[];for(var r=0;r<arguments.length;r++){t[r]=e[r]}if(t.length>1){for(var i=0;i<t.length;i++){this.addChild(t[i])}}else{var n=t[0];if(n.parent){n.parent.removeChild(n)}n.parent=this;this.sortDirty=true;n.transform._parentID=-1;this.children.push(n);this._boundsID++;this.onChildrenChange(this.children.length-1);this.emit("childAdded",n,this,this.children.length-1);n.emit("added",this)}return t[0]};e.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length){throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)}if(e.parent){e.parent.removeChild(e)}e.parent=this;this.sortDirty=true;e.transform._parentID=-1;this.children.splice(t,0,e);this._boundsID++;this.onChildrenChange(t);e.emit("added",this);this.emit("childAdded",e,this,t);return e};e.prototype.swapChildren=function(e,t){if(e===t){return}var r=this.getChildIndex(e);var i=this.getChildIndex(t);this.children[r]=t;this.children[i]=e;this.onChildrenChange(r<i?r:i)};e.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(t===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return t};e.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length){throw new Error("The index "+t+" supplied is out of bounds "+this.children.length)}var r=this.getChildIndex(e);s.removeItems(this.children,r,1);this.children.splice(t,0,e);this.onChildrenChange(t)};e.prototype.getChildAt=function(e){if(e<0||e>=this.children.length){throw new Error("getChildAt: Index ("+e+") does not exist.")}return this.children[e]};e.prototype.removeChild=function(){var e=arguments;var t=[];for(var r=0;r<arguments.length;r++){t[r]=e[r]}if(t.length>1){for(var i=0;i<t.length;i++){this.removeChild(t[i])}}else{var n=t[0];var a=this.children.indexOf(n);if(a===-1){return null}n.parent=null;n.transform._parentID=-1;s.removeItems(this.children,a,1);this._boundsID++;this.onChildrenChange(a);n.emit("removed",this);this.emit("childRemoved",n,this,a)}return t[0]};e.prototype.removeChildAt=function(e){var t=this.getChildAt(e);t.parent=null;t.transform._parentID=-1;s.removeItems(this.children,e,1);this._boundsID++;this.onChildrenChange(e);t.emit("removed",this);this.emit("childRemoved",t,this,e);return t};e.prototype.removeChildren=function(e,t){if(e===void 0){e=0}if(t===void 0){t=this.children.length}var r=e;var i=t;var n=i-r;var a;if(n>0&&n<=i){a=this.children.splice(r,n);for(var o=0;o<a.length;++o){a[o].parent=null;if(a[o].transform){a[o].transform._parentID=-1}}this._boundsID++;this.onChildrenChange(e);for(var o=0;o<a.length;++o){a[o].emit("removed",this);this.emit("childRemoved",a[o],this,o)}return a}else if(n===0&&this.children.length===0){return[]}throw new RangeError("removeChildren: numeric values are outside the acceptable range.")};e.prototype.sortChildren=function(){var e=false;for(var t=0,r=this.children.length;t<r;++t){var i=this.children[t];i._lastSortedIndex=t;if(!e&&i.zIndex!==0){e=true}}if(e&&this.children.length>1){this.children.sort(c)}this.sortDirty=false};e.prototype.updateTransform=function(){if(this.sortableChildren&&this.sortDirty){this.sortChildren()}this._boundsID++;this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];if(r.visible){r.updateTransform()}}};e.prototype.calculateBounds=function(){this._bounds.clear();this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(!t.visible||!t.renderable){continue}t.calculateBounds();if(t._mask){var r=t._mask.maskObject||t._mask;r.calculateBounds();this._bounds.addBoundsMask(t._bounds,r._bounds)}else if(t.filterArea){this._bounds.addBoundsArea(t._bounds,t.filterArea)}else{this._bounds.addBounds(t._bounds)}}this._bounds.updateID=this._boundsID};e.prototype.getLocalBounds=function(e,t){if(t===void 0){t=false}var r=o.prototype.getLocalBounds.call(this,e);if(!t){for(var i=0,n=this.children.length;i<n;++i){var a=this.children[i];if(a.visible){a.updateTransform()}}}return r};e.prototype._calculateBounds=function(){};e.prototype.render=function(e){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}if(this._mask||this.filters&&this.filters.length){this.renderAdvanced(e)}else{this._render(e);for(var t=0,r=this.children.length;t<r;++t){this.children[t].render(e)}}};e.prototype.renderAdvanced=function(e){e.batch.flush();var t=this.filters;var r=this._mask;if(t){if(!this._enabledFilters){this._enabledFilters=[]}this._enabledFilters.length=0;for(var i=0;i<t.length;i++){if(t[i].enabled){this._enabledFilters.push(t[i])}}if(this._enabledFilters.length){e.filter.push(this,this._enabledFilters)}}if(r){e.mask.push(this,this._mask)}this._render(e);for(var i=0,n=this.children.length;i<n;i++){this.children[i].render(e)}e.batch.flush();if(r){e.mask.pop(this)}if(t&&this._enabledFilters&&this._enabledFilters.length){e.filter.pop()}};e.prototype._render=function(e){};e.prototype.destroy=function(e){o.prototype.destroy.call(this);this.sortDirty=false;var t=typeof e==="boolean"?e:e&&e.children;var r=this.removeChildren(0,this.children.length);if(t){for(var i=0;i<r.length;++i){r[i].destroy(e)}}};Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;if(t!==0){this.scale.x=e/t}else{this.scale.x=1}this._width=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;if(t!==0){this.scale.y=e/t}else{this.scale.y=1}this._height=e},enumerable:false,configurable:true});return e}(l);f.prototype.containerUpdateTransform=f.prototype.updateTransform;r.Bounds=u;r.Container=f;r.DisplayObject=l;r.TemporaryDisplayObject=h},{"@pixi/math":16,"@pixi/settings":26,"@pixi/utils":34}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var v=e("@pixi/utils");var i=e("@pixi/math");var m=e("@pixi/core");var g=new i.Rectangle;var y=4;var n=function(){function p(e){this.renderer=e;e.extract=this}p.prototype.image=function(e,t,r){var i=new Image;i.src=this.base64(e,t,r);return i};p.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)};p.prototype.canvas=function(e){var t=this.renderer;var r;var i;var n=false;var a;var o=false;if(e){if(e instanceof m.RenderTexture){a=e}else{a=this.renderer.generateTexture(e);o=true}}if(a){r=a.baseTexture.resolution;i=a.frame;n=false;t.renderTexture.bind(a)}else{r=this.renderer.resolution;n=true;i=g;i.width=this.renderer.width;i.height=this.renderer.height;t.renderTexture.bind(null)}var s=Math.floor(i.width*r+1e-4);var u=Math.floor(i.height*r+1e-4);var l=new v.CanvasRenderTarget(s,u,1);var h=new Uint8Array(y*s*u);var c=t.gl;c.readPixels(i.x*r,i.y*r,s,u,c.RGBA,c.UNSIGNED_BYTE,h);var f=l.context.getImageData(0,0,s,u);p.arrayPostDivide(h,f.data);l.context.putImageData(f,0,0);if(n){var d=new v.CanvasRenderTarget(l.width,l.height,1);d.context.scale(1,-1);d.context.drawImage(l.canvas,0,-u);l.destroy();l=d}if(o){a.destroy(true)}return l.canvas};p.prototype.pixels=function(e){var t=this.renderer;var r;var i;var n;var a=false;if(e){if(e instanceof m.RenderTexture){n=e}else{n=this.renderer.generateTexture(e);a=true}}if(n){r=n.baseTexture.resolution;i=n.frame;t.renderTexture.bind(n)}else{r=t.resolution;i=g;i.width=t.width;i.height=t.height;t.renderTexture.bind(null)}var o=i.width*r;var s=i.height*r;var u=new Uint8Array(y*o*s);var l=t.gl;l.readPixels(i.x*r,i.y*r,o,s,l.RGBA,l.UNSIGNED_BYTE,u);if(a){n.destroy(true)}p.arrayPostDivide(u,u);return u};p.prototype.destroy=function(){this.renderer.extract=null;this.renderer=null};p.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var i=t[r+3]=e[r+3];if(i!==0){t[r]=Math.round(Math.min(e[r]*255/i,255));t[r+1]=Math.round(Math.min(e[r+1]*255/i,255));t[r+2]=Math.round(Math.min(e[r+2]*255/i,255))}else{t[r]=e[r];t[r+1]=e[r+1];t[r+2]=e[r+2]}}};return p}();r.Extract=n},{"@pixi/core":4,"@pixi/math":16,"@pixi/utils":34}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/core");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function a(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var o="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n";var s=function(r){a(e,r);function e(e){if(e===void 0){e=1}var t=r.call(this,i.defaultVertex,o,{uAlpha:1})||this;t.alpha=e;return t}Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:false,configurable:true});return e}(i.Filter);r.AlphaFilter=s},{"@pixi/core":4}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/core");var l=e("@pixi/settings");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function o(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var u="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";function h(e,t){var r=Math.ceil(e/2);var i=u;var n="";var a;if(t){a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);"}else{a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);"}for(var o=0;o<e;o++){var s=a.replace("%index%",o.toString());s=s.replace("%sampleIndex%",o-(r-1)+".0");n+=s;n+="\n"}i=i.replace("%blur%",n);i=i.replace("%size%",e.toString());return i}var c={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]};var f=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");function d(e){var t=c[e];var r=t.length;var i=f;var n="";var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";var o;for(var s=0;s<e;s++){var u=a.replace("%index%",s.toString());o=s;if(s>=r){o=e-s-1}u=u.replace("%value%",t[o].toString());n+=u;n+="\n"}i=i.replace("%blur%",n);i=i.replace("%size%",e.toString());return i}var a;(function(e){e[e["WEBGL_LEGACY"]=0]="WEBGL_LEGACY";e[e["WEBGL"]=1]="WEBGL";e[e["WEBGL2"]=2]="WEBGL2"})(a||(a={}));var s;(function(e){e[e["UNKNOWN"]=0]="UNKNOWN";e[e["WEBGL"]=1]="WEBGL";e[e["CANVAS"]=2]="CANVAS"})(s||(s={}));var p;(function(e){e[e["COLOR"]=16384]="COLOR";e[e["DEPTH"]=256]="DEPTH";e[e["STENCIL"]=1024]="STENCIL"})(p||(p={}));var v;(function(e){e[e["NORMAL"]=0]="NORMAL";e[e["ADD"]=1]="ADD";e[e["MULTIPLY"]=2]="MULTIPLY";e[e["SCREEN"]=3]="SCREEN";e[e["OVERLAY"]=4]="OVERLAY";e[e["DARKEN"]=5]="DARKEN";e[e["LIGHTEN"]=6]="LIGHTEN";e[e["COLOR_DODGE"]=7]="COLOR_DODGE";e[e["COLOR_BURN"]=8]="COLOR_BURN";e[e["HARD_LIGHT"]=9]="HARD_LIGHT";e[e["SOFT_LIGHT"]=10]="SOFT_LIGHT";e[e["DIFFERENCE"]=11]="DIFFERENCE";e[e["EXCLUSION"]=12]="EXCLUSION";e[e["HUE"]=13]="HUE";e[e["SATURATION"]=14]="SATURATION";e[e["COLOR"]=15]="COLOR";e[e["LUMINOSITY"]=16]="LUMINOSITY";e[e["NORMAL_NPM"]=17]="NORMAL_NPM";e[e["ADD_NPM"]=18]="ADD_NPM";e[e["SCREEN_NPM"]=19]="SCREEN_NPM";e[e["NONE"]=20]="NONE";e[e["SRC_OVER"]=0]="SRC_OVER";e[e["SRC_IN"]=21]="SRC_IN";e[e["SRC_OUT"]=22]="SRC_OUT";e[e["SRC_ATOP"]=23]="SRC_ATOP";e[e["DST_OVER"]=24]="DST_OVER";e[e["DST_IN"]=25]="DST_IN";e[e["DST_OUT"]=26]="DST_OUT";e[e["DST_ATOP"]=27]="DST_ATOP";e[e["ERASE"]=26]="ERASE";e[e["SUBTRACT"]=28]="SUBTRACT";e[e["XOR"]=29]="XOR"})(v||(v={}));var m;(function(e){e[e["POINTS"]=0]="POINTS";e[e["LINES"]=1]="LINES";e[e["LINE_LOOP"]=2]="LINE_LOOP";e[e["LINE_STRIP"]=3]="LINE_STRIP";e[e["TRIANGLES"]=4]="TRIANGLES";e[e["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP";e[e["TRIANGLE_FAN"]=6]="TRIANGLE_FAN"})(m||(m={}));var g;(function(e){e[e["RGBA"]=6408]="RGBA";e[e["RGB"]=6407]="RGB";e[e["ALPHA"]=6406]="ALPHA";e[e["LUMINANCE"]=6409]="LUMINANCE";e[e["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA";e[e["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT";e[e["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL"})(g||(g={}));var y;(function(e){e[e["TEXTURE_2D"]=3553]="TEXTURE_2D";e[e["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP";e[e["TEXTURE_2D_ARRAY"]=35866]="TEXTURE_2D_ARRAY";e[e["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";e[e["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";e[e["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";e[e["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";e[e["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";e[e["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(y||(y={}));var _;(function(e){e[e["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE";e[e["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT";e[e["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5";e[e["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4";e[e["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1";e[e["FLOAT"]=5126]="FLOAT";e[e["HALF_FLOAT"]=36193]="HALF_FLOAT"})(_||(_={}));var b;(function(e){e[e["NEAREST"]=0]="NEAREST";e[e["LINEAR"]=1]="LINEAR"})(b||(b={}));var x;(function(e){e[e["CLAMP"]=33071]="CLAMP";e[e["REPEAT"]=10497]="REPEAT";e[e["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT"})(x||(x={}));var w;(function(e){e[e["OFF"]=0]="OFF";e[e["POW2"]=1]="POW2";e[e["ON"]=2]="ON"})(w||(w={}));var E;(function(e){e[e["NPM"]=0]="NPM";e[e["UNPACK"]=1]="UNPACK";e[e["PMA"]=2]="PMA";e[e["NO_PREMULTIPLIED_ALPHA"]=0]="NO_PREMULTIPLIED_ALPHA";e[e["PREMULTIPLY_ON_UPLOAD"]=1]="PREMULTIPLY_ON_UPLOAD";e[e["PREMULTIPLY_ALPHA"]=2]="PREMULTIPLY_ALPHA"})(E||(E={}));var S;(function(e){e[e["NO"]=0]="NO";e[e["YES"]=1]="YES";e[e["AUTO"]=2]="AUTO";e[e["BLEND"]=0]="BLEND";e[e["CLEAR"]=1]="CLEAR";e[e["BLIT"]=2]="BLIT"})(S||(S={}));var T;(function(e){e[e["AUTO"]=0]="AUTO";e[e["MANUAL"]=1]="MANUAL"})(T||(T={}));var P;(function(e){e["LOW"]="lowp";e["MEDIUM"]="mediump";e["HIGH"]="highp"})(P||(P={}));var A;(function(e){e[e["NONE"]=0]="NONE";e[e["SCISSOR"]=1]="SCISSOR";e[e["STENCIL"]=2]="STENCIL";e[e["SPRITE"]=3]="SPRITE"})(A||(A={}));var I;(function(e){e[e["NONE"]=0]="NONE";e[e["LOW"]=2]="LOW";e[e["MEDIUM"]=4]="MEDIUM";e[e["HIGH"]=8]="HIGH"})(I||(I={}));var O=function(u){o(e,u);function e(e,t,r,i,n){if(t===void 0){t=8}if(r===void 0){r=4}if(i===void 0){i=l.settings.FILTER_RESOLUTION}if(n===void 0){n=5}var a=this;var o=h(n,e);var s=d(n);a=u.call(this,o,s)||this;a.horizontal=e;a.resolution=i;a._quality=0;a.quality=r;a.blur=t;return a}e.prototype.apply=function(e,t,r,i){if(r){if(this.horizontal){this.uniforms.strength=1/r.width*(r.width/t.width)}else{this.uniforms.strength=1/r.height*(r.height/t.height)}}else{if(this.horizontal){this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width)}else{this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height)}}this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(this.passes===1){e.applyFilter(this,t,r,i)}else{var n=e.getFilterTexture();var a=e.renderer;var o=t;var s=n;this.state.blend=false;e.applyFilter(this,o,s,S.CLEAR);for(var u=1;u<this.passes-1;u++){e.bindAndClear(o,S.BLIT);this.uniforms.uSampler=s;var l=s;s=o;o=l;a.shader.bind(this);a.geometry.draw(5)}this.state.blend=true;e.applyFilter(this,s,r,i);e.returnFilterTexture(n)}};Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2;this.strength=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e;this.passes=e},enumerable:false,configurable:true});return e}(i.Filter);var M=function(a){o(e,a);function e(e,t,r,i){if(e===void 0){e=8}if(t===void 0){t=4}if(r===void 0){r=l.settings.FILTER_RESOLUTION}if(i===void 0){i=5}var n=a.call(this)||this;n.blurXFilter=new O(true,e,t,r,i);n.blurYFilter=new O(false,e,t,r,i);n.resolution=r;n.quality=t;n.blur=e;n.repeatEdgePixels=false;return n}e.prototype.apply=function(e,t,r,i){var n=Math.abs(this.blurXFilter.strength);var a=Math.abs(this.blurYFilter.strength);if(n&&a){var o=e.getFilterTexture();this.blurXFilter.apply(e,t,o,S.CLEAR);this.blurYFilter.apply(e,o,r,i);e.returnFilterTexture(o)}else if(a){this.blurYFilter.apply(e,t,r,i)}else{this.blurXFilter.apply(e,t,r,i)}};e.prototype.updatePadding=function(){if(this._repeatEdgePixels){this.padding=0}else{this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}};Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e;this.updatePadding()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e;this.updatePadding()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e;this.updatePadding()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e;this.updatePadding()},enumerable:false,configurable:true});return e}(i.Filter);r.BlurFilter=M;r.BlurFilterPass=O},{"@pixi/core":4,"@pixi/settings":26}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/core");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function a(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var o="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n";var s=function(r){a(e,r);function e(){var e=this;var t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};e=r.call(this,i.defaultFilterVertex,o,t)||this;e.alpha=1;return e}e.prototype._loadMatrix=function(e,t){if(t===void 0){t=false}var r=e;if(t){this._multiply(r,this.uniforms.m,e);r=this._colorMatrix(r)}this.uniforms.m=r};e.prototype._multiply=function(e,t,r){e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15];e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16];e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17];e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18];e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4];e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15];e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16];e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17];e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18];e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9];e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15];e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16];e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17];e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18];e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14];e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15];e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16];e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17];e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18];e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19];return e};e.prototype._colorMatrix=function(e){var t=new Float32Array(e);t[4]/=255;t[9]/=255;t[14]/=255;t[19]/=255;return t};e.prototype.brightness=function(e,t){var r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)};e.prototype.greyscale=function(e,t){var r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)};e.prototype.blackAndWhite=function(e){var t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e);var i=Math.sin(e);var n=Math.sqrt;var a=1/3;var o=n(a);var s=r+(1-r)*a;var u=a*(1-r)-o*i;var l=a*(1-r)+o*i;var h=a*(1-r)+o*i;var c=r+a*(1-r);var f=a*(1-r)-o*i;var d=a*(1-r)-o*i;var p=a*(1-r)+o*i;var v=r+a*(1-r);var m=[s,u,l,0,0,h,c,f,0,0,d,p,v,0,0,0,0,0,1,0];this._loadMatrix(m,t)};e.prototype.contrast=function(e,t){var r=(e||0)+1;var i=-.5*(r-1);var n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,t)};e.prototype.saturate=function(e,t){if(e===void 0){e=0}var r=e*2/3+1;var i=(r-1)*-.5;var n=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(n,t)};e.prototype.desaturate=function(){this.saturate(-1)};e.prototype.negative=function(e){var t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.sepia=function(e){var t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.technicolor=function(e){var t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.polaroid=function(e){var t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.toBGR=function(e){var t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.kodachrome=function(e){var t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.browni=function(e){var t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.vintage=function(e){var t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.colorTone=function(e,t,r,i,n){e=e||.2;t=t||.15;r=r||16770432;i=i||3375104;var a=(r>>16&255)/255;var o=(r>>8&255)/255;var s=(r&255)/255;var u=(i>>16&255)/255;var l=(i>>8&255)/255;var h=(i&255)/255;var c=[.3,.59,.11,0,0,a,o,s,e,0,u,l,h,t,0,a-u,o-l,s-h,0,0];this._loadMatrix(c,n)};e.prototype.night=function(e,t){e=e||.1;var r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)};e.prototype.predator=function(e,t){var r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)};e.prototype.lsd=function(e){var t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)};e.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,false)};Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:false,configurable:true});return e}(i.Filter);s.prototype.grayscale=s.prototype.greyscale;r.ColorMatrixFilter=s},{"@pixi/core":4}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/core");var a=e("@pixi/math");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function o(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var s="varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n";var u="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n";var l=function(n){o(e,n);function e(e,t){var r=this;var i=new a.Matrix;e.renderable=false;r=n.call(this,u,s,{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this;r.maskSprite=e;r.maskMatrix=i;if(t===null||t===undefined){t=20}r.scale=new a.Point(t,t);return r}e.prototype.apply=function(e,t,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x;this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform;var a=Math.sqrt(n.a*n.a+n.b*n.b);var o=Math.sqrt(n.c*n.c+n.d*n.d);if(a!==0&&o!==0){this.uniforms.rotation[0]=n.a/a;this.uniforms.rotation[1]=n.b/a;this.uniforms.rotation[2]=n.c/o;this.uniforms.rotation[3]=n.d/o}e.applyFilter(this,t,r,i)};Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:false,configurable:true});return e}(i.Filter);r.DisplacementFilter=l},{"@pixi/core":4,"@pixi/math":16}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/core");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function a(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var o="\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n";var s='varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n';var u=function(e){a(t,e);function t(){return e.call(this,o,s)||this}return t}(i.Filter);r.FXAAFilter=u},{"@pixi/core":4}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("@pixi/core");var i=function(e,t){i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return i(e,t)};function a(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var o="precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n";var s=function(i){a(e,i);function e(e,t){if(e===void 0){e=.5}if(t===void 0){t=Math.random()}var r=i.call(this,n.defaultFilterVertex,o,{uNoise:0,uSeed:0})||this;r.noise=e;r.seed=t;return r}Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:false,configurable:true});return e}(n.Filter);r.NoiseFilter=s},{"@pixi/core":4}],13:[function(e,t,te){"use strict";Object.defineProperty(te,"__esModule",{value:true});var v=e("@pixi/core");var re=e("@pixi/math");var c=e("@pixi/utils");var _=e("@pixi/constants");var i=e("@pixi/display");(function(e){e["MITER"]="miter";e["BEVEL"]="bevel";e["ROUND"]="round"})(te.LINE_JOIN||(te.LINE_JOIN={}));(function(e){e["BUTT"]="butt";e["ROUND"]="round";e["SQUARE"]="square"})(te.LINE_CAP||(te.LINE_CAP={}));var ie={adaptive:true,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(t===void 0){t=20}if(!this.adaptive||!e||isNaN(e)){return t}var r=Math.ceil(e/this.maxLength);if(r<this.minSegments){r=this.minSegments}else if(r>this.maxSegments){r=this.maxSegments}return r}};var n=function(){function t(){this.color=16777215;this.alpha=1;this.texture=v.Texture.WHITE;this.matrix=null;this.visible=false;this.reset()}t.prototype.clone=function(){var e=new t;e.color=this.color;e.alpha=this.alpha;e.texture=this.texture;e.matrix=this.matrix;e.visible=this.visible;return e};t.prototype.reset=function(){this.color=16777215;this.alpha=1;this.texture=v.Texture.WHITE;this.matrix=null;this.visible=false};t.prototype.destroy=function(){this.texture=null;this.matrix=null};return t}();var a=function(e,t){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return a(e,t)};function o(e,t){a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var s={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var r=e.points;var i=e.holes;var n=t.points;var a=t.indices;if(r.length>=6){var o=[];for(var s=0;s<i.length;s++){var u=i[s];o.push(r.length/2);r=r.concat(u.points)}var l=c.earcut(r,o,2);if(!l){return}var h=n.length/2;for(var s=0;s<l.length;s+=3){a.push(l[s]+h);a.push(l[s+1]+h);a.push(l[s+2]+h)}for(var s=0;s<r.length;s++){n.push(r[s])}}}};var r={build:function(e){var t=e.shape;var r=e.points;var i=t.x;var n=t.y;var a;var o;r.length=0;if(e.type===re.SHAPES.CIRC){a=t.radius;o=t.radius}else{var s=e.shape;a=s.width;o=s.height}if(a===0||o===0){return}var u=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(a+o));u/=2.3;var l=Math.PI*2/u;for(var h=0;h<u-.5;h++){r.push(i+Math.sin(-l*h)*a,n+Math.cos(-l*h)*o)}r.push(r[0],r[1])},triangulate:function(e,t){var r=e.points;var i=t.points;var n=t.indices;var a=i.length/2;var o=a;var s=e.shape;var u=e.matrix;var l=s.x;var h=s.y;i.push(e.matrix?u.a*l+u.c*h+u.tx:l,e.matrix?u.b*l+u.d*h+u.ty:h);for(var c=0;c<r.length;c+=2){i.push(r[c],r[c+1]);n.push(a++,o,a)}}};var u={build:function(e){var t=e.shape;var r=t.x;var i=t.y;var n=t.width;var a=t.height;var o=e.points;o.length=0;o.push(r,i,r+n,i,r+n,i+a,r,i+a)},triangulate:function(e,t){var r=e.points;var i=t.points;var n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]);t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function g(e,t,r){var i=t-e;return e+i*r}function l(e,t,r,i,n,a,o){if(o===void 0){o=[]}var s=20;var u=o;var l=0;var h=0;var c=0;var f=0;var d=0;var p=0;for(var v=0,m=0;v<=s;++v){m=v/s;l=g(e,r,m);h=g(t,i,m);c=g(r,n,m);f=g(i,a,m);d=g(l,c,m);p=g(h,f,m);u.push(d,p)}return u}var h={build:function(e){var t=e.shape;var r=e.points;var i=t.x;var n=t.y;var a=t.width;var o=t.height;var s=Math.max(0,Math.min(t.radius,Math.min(a,o)/2));r.length=0;if(!s){r.push(i,n,i+a,n,i+a,n+o,i,n+o)}else{l(i,n+s,i,n,i+s,n,r);l(i+a-s,n,i+a,n,i+a,n+s,r);l(i+a,n+o-s,i+a,n+o,i+a-s,n+o,r);l(i+s,n+o,i,n+o,i,n+o-s,r)}},triangulate:function(e,t){var r=e.points;var i=t.points;var n=t.indices;var a=i.length/2;var o=c.earcut(r,null,2);for(var s=0,u=o.length;s<u;s+=3){n.push(o[s]+a);n.push(o[s+1]+a);n.push(o[s+2]+a)}for(var s=0,u=r.length;s<u;s++){i.push(r[s],r[++s])}}};function ne(e,t,r,i,n,a,o,s){var u=e-r*n;var l=t-i*n;var h=e+r*a;var c=t+i*a;var f;var d;if(o){f=i;d=-r}else{f=-i;d=r}var p=u+f;var v=l+d;var m=h+f;var g=c+d;s.push(p,v);s.push(m,g);return 2}function ae(e,t,r,i,n,a,o,s){var u=r-e;var l=i-t;var h=Math.atan2(u,l);var c=Math.atan2(n-e,a-t);if(s&&h<c){h+=Math.PI*2}else if(!s&&h>c){c+=Math.PI*2}var f=h;var d=c-h;var p=Math.abs(d);var v=Math.sqrt(u*u+l*l);var m=(15*p*Math.sqrt(v)/Math.PI>>0)+1;var g=d/m;f+=g;if(s){o.push(e,t);o.push(r,i);for(var y=1,_=f;y<m;y++,_+=g){o.push(e,t);o.push(e+Math.sin(_)*v,t+Math.cos(_)*v)}o.push(e,t);o.push(n,a)}else{o.push(r,i);o.push(e,t);for(var y=1,_=f;y<m;y++,_+=g){o.push(e+Math.sin(_)*v,t+Math.cos(_)*v);o.push(e,t)}o.push(n,a);o.push(e,t)}return m*2}function f(e,t){var r=e.shape;var i=e.points||r.points.slice();var n=t.closePointEps;if(i.length===0){return}var a=e.lineStyle;var o=new re.Point(i[0],i[1]);var s=new re.Point(i[i.length-2],i[i.length-1]);var u=r.type!==re.SHAPES.POLY||r.closeStroke;var l=Math.abs(o.x-s.x)<n&&Math.abs(o.y-s.y)<n;if(u){i=i.slice();if(l){i.pop();i.pop();s.set(i[i.length-2],i[i.length-1])}var h=(o.x+s.x)*.5;var c=(s.y+o.y)*.5;i.unshift(h,c);i.push(h,c)}var f=t.points;var d=i.length/2;var p=i.length;var v=f.length/2;var m=a.width/2;var g=m*m;var y=a.miterLimit*a.miterLimit;var _=i[0];var b=i[1];var x=i[2];var w=i[3];var E=0;var S=0;var T=-(b-w);var P=_-x;var A=0;var I=0;var O=Math.sqrt(T*T+P*P);T/=O;P/=O;T*=m;P*=m;var M=a.alignment;var C=(1-M)*2;var D=M*2;if(!u){if(a.cap===te.LINE_CAP.ROUND){p+=ae(_-T*(C-D)*.5,b-P*(C-D)*.5,_-T*C,b-P*C,_+T*D,b+P*D,f,true)+2}else if(a.cap===te.LINE_CAP.SQUARE){p+=ne(_,b,T,P,C,D,true,f)}}f.push(_-T*C,b-P*C);f.push(_+T*D,b+P*D);for(var R=1;R<d-1;++R){_=i[(R-1)*2];b=i[(R-1)*2+1];x=i[R*2];w=i[R*2+1];E=i[(R+1)*2];S=i[(R+1)*2+1];T=-(b-w);P=_-x;O=Math.sqrt(T*T+P*P);T/=O;P/=O;T*=m;P*=m;A=-(w-S);I=x-E;O=Math.sqrt(A*A+I*I);A/=O;I/=O;A*=m;I*=m;var L=x-_;var N=b-w;var k=x-E;var F=S-w;var B=N*k-F*L;var j=B<0;if(Math.abs(B)<.1){f.push(x-T*C,w-P*C);f.push(x+T*D,w+P*D);continue}var U=(-T+_)*(-P+w)-(-T+x)*(-P+b);var H=(-A+E)*(-I+w)-(-A+x)*(-I+S);var G=(L*H-k*U)/B;var z=(F*U-N*H)/B;var X=(G-x)*(G-x)+(z-w)*(z-w);var W=x+(G-x)*C;var Y=w+(z-w)*C;var q=x-(G-x)*D;var V=w-(z-w)*D;var $=Math.min(L*L+N*N,k*k+F*F);var K=j?C:D;var Q=$+K*K*g;var Z=X<=Q;if(Z){if(a.join===te.LINE_JOIN.BEVEL||X/g>y){if(j){f.push(W,Y);f.push(x+T*D,w+P*D);f.push(W,Y);f.push(x+A*D,w+I*D)}else{f.push(x-T*C,w-P*C);f.push(q,V);f.push(x-A*C,w-I*C);f.push(q,V)}p+=2}else if(a.join===te.LINE_JOIN.ROUND){if(j){f.push(W,Y);f.push(x+T*D,w+P*D);p+=ae(x,w,x+T*D,w+P*D,x+A*D,w+I*D,f,true)+4;f.push(W,Y);f.push(x+A*D,w+I*D)}else{f.push(x-T*C,w-P*C);f.push(q,V);p+=ae(x,w,x-T*C,w-P*C,x-A*C,w-I*C,f,false)+4;f.push(x-A*C,w-I*C);f.push(q,V)}}else{f.push(W,Y);f.push(q,V)}}else{f.push(x-T*C,w-P*C);f.push(x+T*D,w+P*D);if(a.join===te.LINE_JOIN.BEVEL||X/g>y);else if(a.join===te.LINE_JOIN.ROUND){if(j){p+=ae(x,w,x+T*D,w+P*D,x+A*D,w+I*D,f,true)+2}else{p+=ae(x,w,x-T*C,w-P*C,x-A*C,w-I*C,f,false)+2}}else{if(j){f.push(q,V);f.push(q,V)}else{f.push(W,Y);f.push(W,Y)}p+=2}f.push(x-A*C,w-I*C);f.push(x+A*D,w+I*D);p+=2}}_=i[(d-2)*2];b=i[(d-2)*2+1];x=i[(d-1)*2];w=i[(d-1)*2+1];T=-(b-w);P=_-x;O=Math.sqrt(T*T+P*P);T/=O;P/=O;T*=m;P*=m;f.push(x-T*C,w-P*C);f.push(x+T*D,w+P*D);if(!u){if(a.cap===te.LINE_CAP.ROUND){p+=ae(x-T*(C-D)*.5,w-P*(C-D)*.5,x-T*C,w-P*C,x+T*D,w+P*D,f,false)+2}else if(a.cap===te.LINE_CAP.SQUARE){p+=ne(x,w,T,P,C,D,false,f)}}var J=t.indices;var ee=ie.epsilon*ie.epsilon;for(var R=v;R<p+v-2;++R){_=f[R*2];b=f[R*2+1];x=f[(R+1)*2];w=f[(R+1)*2+1];E=f[(R+2)*2];S=f[(R+2)*2+1];if(Math.abs(_*(w-S)+x*(S-b)+E*(b-w))<ee){continue}J.push(R,R+1,R+2)}}function d(e,t){var r=0;var i=e.shape;var n=e.points||i.points;var a=i.type!==re.SHAPES.POLY||i.closeStroke;if(n.length===0){return}var o=t.points;var s=t.indices;var u=n.length/2;var l=o.length/2;var h=l;o.push(n[0],n[1]);for(r=1;r<u;r++){o.push(n[r*2],n[r*2+1]);s.push(h,h+1);h++}if(a){s.push(h,l)}}function p(e,t){if(e.lineStyle.native){d(e,t)}else{f(e,t)}}var m=function(p){o(e,p);function e(e,t,r,i,n,a){if(a===void 0){a=0}var o=this;n=n||i/2;var s=-1*Math.PI/2+a;var u=r*2;var l=re.PI_2/u;var h=[];for(var c=0;c<u;c++){var f=c%2?n:i;var d=c*l+s;h.push(e+f*Math.cos(d),t+f*Math.sin(d))}o=p.call(this,h)||this;return o}return e}(re.Polygon);var y=function(){function e(){}e.curveTo=function(e,t,r,i,n,a){var o=a[a.length-2];var s=a[a.length-1];var u=s-t;var l=o-e;var h=i-t;var c=r-e;var f=Math.abs(u*c-l*h);if(f<1e-8||n===0){if(a[a.length-2]!==e||a[a.length-1]!==t){a.push(e,t)}return null}var d=u*u+l*l;var p=h*h+c*c;var v=u*h+l*c;var m=n*Math.sqrt(d)/f;var g=n*Math.sqrt(p)/f;var y=m*v/d;var _=g*v/p;var b=m*c+g*l;var x=m*h+g*u;var w=l*(g+y);var E=u*(g+y);var S=c*(m+_);var T=h*(m+_);var P=Math.atan2(E-x,w-b);var A=Math.atan2(T-x,S-b);return{cx:b+e,cy:x+t,radius:n,startAngle:P,endAngle:A,anticlockwise:l*h>c*u}};e.arc=function(e,t,r,i,n,a,o,s,u){var l=o-a;var h=ie._segmentsCount(Math.abs(l)*n,Math.ceil(Math.abs(l)/re.PI_2)*40);var c=l/(h*2);var f=c*2;var d=Math.cos(c);var p=Math.sin(c);var v=h-1;var m=v%1/v;for(var g=0;g<=v;++g){var y=g+m*g;var _=c+a+f*y;var b=Math.cos(_);var x=-Math.sin(_);u.push((d*b+p*x)*n+r,(d*-x+p*b)*n+i)}};return e}();var b=function(){function g(){}g.curveLength=function(e,t,r,i,n,a,o,s){var u=10;var l=0;var h=0;var c=0;var f=0;var d=0;var p=0;var v=0;var m=0;var g=0;var y=0;var _=0;var b=e;var x=t;for(var w=1;w<=u;++w){h=w/u;c=h*h;f=c*h;d=1-h;p=d*d;v=p*d;m=v*e+3*p*h*r+3*d*c*n+f*o;g=v*t+3*p*h*i+3*d*c*a+f*s;y=b-m;_=x-g;b=m;x=g;l+=Math.sqrt(y*y+_*_)}return l};g.curveTo=function(e,t,r,i,n,a,o){var s=o[o.length-2];var u=o[o.length-1];o.length-=2;var l=ie._segmentsCount(g.curveLength(s,u,e,t,r,i,n,a));var h=0;var c=0;var f=0;var d=0;var p=0;o.push(s,u);for(var v=1,m=0;v<=l;++v){m=v/l;h=1-m;c=h*h;f=c*h;d=m*m;p=d*m;o.push(f*s+3*c*m*e+3*h*d*r+p*n,f*u+3*c*m*t+3*h*d*i+p*a)}};return g}();var x=function(){function f(){}f.curveLength=function(e,t,r,i,n,a){var o=e-2*r+n;var s=t-2*i+a;var u=2*r-2*e;var l=2*i-2*t;var h=4*(o*o+s*s);var c=4*(o*u+s*l);var f=u*u+l*l;var d=2*Math.sqrt(h+c+f);var p=Math.sqrt(h);var v=2*h*p;var m=2*Math.sqrt(f);var g=c/p;return(v*d+p*c*(d-m)+(4*f*h-c*c)*Math.log((2*p+g+d)/(g+m)))/(4*v)};f.curveTo=function(e,t,r,i,n){var a=n[n.length-2];var o=n[n.length-1];var s=ie._segmentsCount(f.curveLength(a,o,e,t,r,i));var u=0;var l=0;for(var h=1;h<=s;++h){var c=h/s;u=a+(e-a)*c;l=o+(t-o)*c;n.push(u+(e+(r-e)*c-u)*c,l+(t+(i-t)*c-l)*c)}};return f}();var w=function(){function e(){this.reset()}e.prototype.begin=function(e,t,r){this.reset();this.style=e;this.start=t;this.attribStart=r};e.prototype.end=function(e,t){this.attribSize=t-this.attribStart;this.size=e-this.start};e.prototype.reset=function(){this.style=null;this.size=0;this.start=0;this.attribStart=0;this.attribSize=0};return e}();var E;var S=(E={},E[re.SHAPES.POLY]=s,E[re.SHAPES.CIRC]=r,E[re.SHAPES.ELIP]=r,E[re.SHAPES.RECT]=u,E[re.SHAPES.RREC]=h,E);var T=[];var P=[];var A={buildPoly:s,buildCircle:r,buildRectangle:u,buildRoundedRectangle:h,FILL_COMMANDS:S,BATCH_POOL:T,DRAW_CALL_POOL:P,buildLine:p,Star:m,ArcUtils:y,BezierUtils:b,QuadraticUtils:x,BatchPart:w};var I=function(){function e(e,t,r,i){if(t===void 0){t=null}if(r===void 0){r=null}if(i===void 0){i=null}this.shape=e;this.lineStyle=r;this.fillStyle=t;this.matrix=i;this.type=e.type;this.points=[];this.holes=[]}e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)};e.prototype.destroy=function(){this.shape=null;this.holes.length=0;this.holes=null;this.points.length=0;this.points=null;this.lineStyle=null;this.fillStyle=null};return e}();var O=new re.Point;var M=new i.Bounds;var C=function(t){o(r,t);function r(){var e=t.call(this)||this;e.uvsFloat32=null;e.indicesUint16=null;e.points=[];e.colors=[];e.uvs=[];e.indices=[];e.textureIds=[];e.graphicsData=[];e.dirty=0;e.batchDirty=-1;e.cacheDirty=-1;e.clearDirty=0;e.drawCalls=[];e.batches=[];e.shapeIndex=0;e._bounds=new i.Bounds;e.boundsDirty=-1;e.boundsPadding=0;e.batchable=false;e.indicesUint16=null;e.uvsFloat32=null;e.closePointEps=1e-4;return e}Object.defineProperty(r.prototype,"bounds",{get:function(){if(this.boundsDirty!==this.dirty){this.boundsDirty=this.dirty;this.calculateBounds()}return this._bounds},enumerable:false,configurable:true});r.prototype.invalidate=function(){this.boundsDirty=-1;this.dirty++;this.batchDirty++;this.shapeIndex=0;this.points.length=0;this.colors.length=0;this.uvs.length=0;this.indices.length=0;this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++){this.drawCalls[e].texArray.clear();P.push(this.drawCalls[e])}this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var t=this.batches[e];t.reset();T.push(t)}this.batches.length=0};r.prototype.clear=function(){if(this.graphicsData.length>0){this.invalidate();this.clearDirty++;this.graphicsData.length=0}return this};r.prototype.drawShape=function(e,t,r,i){if(t===void 0){t=null}if(r===void 0){r=null}if(i===void 0){i=null}var n=new I(e,t,r,i);this.graphicsData.push(n);this.dirty++;return this};r.prototype.drawHole=function(e,t){if(t===void 0){t=null}if(!this.graphicsData.length){return null}var r=new I(e,null,null,t);var i=this.graphicsData[this.graphicsData.length-1];r.lineStyle=i.lineStyle;i.holes.push(r);this.dirty++;return this};r.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e){this.graphicsData[e].destroy()}this.points.length=0;this.points=null;this.colors.length=0;this.colors=null;this.uvs.length=0;this.uvs=null;this.indices.length=0;this.indices=null;this.indexBuffer.destroy();this.indexBuffer=null;this.graphicsData.length=0;this.graphicsData=null;this.drawCalls.length=0;this.drawCalls=null;this.batches.length=0;this.batches=null;this._bounds=null};r.prototype.containsPoint=function(e){var t=this.graphicsData;for(var r=0;r<t.length;++r){var i=t[r];if(!i.fillStyle.visible){continue}if(i.shape){if(i.matrix){i.matrix.applyInverse(e,O)}else{O.copyFrom(e)}if(i.shape.contains(O.x,O.y)){var n=false;if(i.holes){for(var a=0;a<i.holes.length;a++){var o=i.holes[a];if(o.shape.contains(O.x,O.y)){n=true;break}}}if(!n){return true}}}}return false};r.prototype.updateBatches=function(e){if(!this.graphicsData.length){this.batchable=true;return}if(!this.validateBatching()){return}this.cacheDirty=this.dirty;var t=this.uvs;var r=this.graphicsData;var i=null;var n=null;if(this.batches.length>0){i=this.batches[this.batches.length-1];n=i.style}for(var a=this.shapeIndex;a<r.length;a++){this.shapeIndex++;var o=r[a];var s=o.fillStyle;var u=o.lineStyle;var l=S[o.type];l.build(o);if(o.matrix){this.transformPoints(o.points,o.matrix)}for(var h=0;h<2;h++){var c=h===0?s:u;if(!c.visible){continue}var f=c.texture.baseTexture;var d=this.indices.length;var p=this.points.length/2;f.wrapMode=_.WRAP_MODES.REPEAT;if(h===0){this.processFill(o)}else{this.processLine(o)}var v=this.points.length/2-p;if(v===0){continue}if(i&&!this._compareStyles(n,c)){i.end(d,p);i=null}if(!i){i=T.pop()||new w;i.begin(c,d,p);this.batches.push(i);n=c}this.addUvs(this.points,t,c.texture,p,v,c.matrix)}}var m=this.indices.length;var g=this.points.length/2;if(i){i.end(m,g)}if(this.batches.length===0){this.batchable=true;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length){this.indicesUint16.set(this.indices)}else{var y=g>65535&&e;this.indicesUint16=y?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable();if(this.batchable){this.packBatches()}else{this.buildDrawCalls()}};r.prototype._compareStyles=function(e,t){if(!e||!t){return false}if(e.texture.baseTexture!==t.texture.baseTexture){return false}if(e.color+e.alpha!==t.color+t.alpha){return false}if(!!e.native!==!!t.native){return false}return true};r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length){return false}for(var e=0,t=this.graphicsData.length;e<t;e++){var r=this.graphicsData[e];var i=r.fillStyle;var n=r.lineStyle;if(i&&!i.texture.baseTexture.valid){return false}if(n&&!n.texture.baseTexture.valid){return false}}return true};r.prototype.packBatches=function(){this.batchDirty++;this.uvsFloat32=new Float32Array(this.uvs);var e=this.batches;for(var t=0,r=e.length;t<r;t++){var i=e[t];for(var n=0;n<i.size;n++){var a=i.start+n;this.indicesUint16[a]=this.indicesUint16[a]-i.attribStart}}};r.prototype.isBatchable=function(){if(this.points.length>65535*2){return false}var e=this.batches;for(var t=0;t<e.length;t++){if(e[t].style.native){return false}}return this.points.length<r.BATCHABLE_SIZE*2};r.prototype.buildDrawCalls=function(){var e=++v.BaseTexture._globalBatch;for(var t=0;t<this.drawCalls.length;t++){this.drawCalls[t].texArray.clear();P.push(this.drawCalls[t])}this.drawCalls.length=0;var r=this.colors;var i=this.textureIds;var n=P.pop();if(!n){n=new v.BatchDrawCall;n.texArray=new v.BatchTextureArray}n.texArray.count=0;n.start=0;n.size=0;n.type=_.DRAW_MODES.TRIANGLES;var a=0;var o=null;var s=0;var u=false;var l=_.DRAW_MODES.TRIANGLES;var h=0;this.drawCalls.push(n);for(var t=0;t<this.batches.length;t++){var c=this.batches[t];var f=8;var d=c.style;var p=d.texture.baseTexture;if(u!==!!d.native){u=!!d.native;l=u?_.DRAW_MODES.LINES:_.DRAW_MODES.TRIANGLES;o=null;a=f;e++}if(o!==p){o=p;if(p._batchEnabled!==e){if(a===f){e++;a=0;if(n.size>0){n=P.pop();if(!n){n=new v.BatchDrawCall;n.texArray=new v.BatchTextureArray}this.drawCalls.push(n)}n.start=h;n.size=0;n.texArray.count=0;n.type=l}p.touched=1;p._batchEnabled=e;p._batchLocation=a;p.wrapMode=10497;n.texArray.elements[n.texArray.count++]=p;a++}}n.size+=c.size;h+=c.size;s=p._batchLocation;this.addColors(r,d.color,d.alpha,c.attribSize);this.addTextureIds(i,s,c.attribSize)}v.BaseTexture._globalBatch=e;this.packAttributes()};r.prototype.packAttributes=function(){var e=this.points;var t=this.uvs;var r=this.colors;var i=this.textureIds;var n=new ArrayBuffer(e.length*3*4);var a=new Float32Array(n);var o=new Uint32Array(n);var s=0;for(var u=0;u<e.length/2;u++){a[s++]=e[u*2];a[s++]=e[u*2+1];a[s++]=t[u*2];a[s++]=t[u*2+1];o[s++]=r[u];a[s++]=i[u]}this._buffer.update(n);this._indexBuffer.update(this.indicesUint16)};r.prototype.processFill=function(e){if(e.holes.length){this.processHoles(e.holes);s.triangulate(e,this)}else{var t=S[e.type];t.triangulate(e,this)}};r.prototype.processLine=function(e){p(e,this);for(var t=0;t<e.holes.length;t++){p(e.holes[t],this)}};r.prototype.processHoles=function(e){for(var t=0;t<e.length;t++){var r=e[t];var i=S[r.type];i.build(r);if(r.matrix){this.transformPoints(r.points,r.matrix)}}};r.prototype.calculateBounds=function(){var e=this._bounds;var t=M;var r=re.Matrix.IDENTITY;this._bounds.clear();t.clear();for(var i=0;i<this.graphicsData.length;i++){var n=this.graphicsData[i];var a=n.shape;var o=n.type;var s=n.lineStyle;var u=n.matrix||re.Matrix.IDENTITY;var l=0;if(s&&s.visible){var h=s.alignment;l=s.width;if(o===re.SHAPES.POLY){l=l*(.5+Math.abs(.5-h))}else{l=l*Math.max(0,h)}}if(r!==u){if(!t.isEmpty()){e.addBoundsMatrix(t,r);t.clear()}r=u}if(o===re.SHAPES.RECT||o===re.SHAPES.RREC){var c=a;t.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,l,l)}else if(o===re.SHAPES.CIRC){var f=a;t.addFramePad(f.x,f.y,f.x,f.y,f.radius+l,f.radius+l)}else if(o===re.SHAPES.ELIP){var d=a;t.addFramePad(d.x,d.y,d.x,d.y,d.width+l,d.height+l)}else{var p=a;e.addVerticesMatrix(r,p.points,0,p.points.length,l,l)}}if(!t.isEmpty()){e.addBoundsMatrix(t,r)}e.pad(this.boundsPadding,this.boundsPadding)};r.prototype.transformPoints=function(e,t){for(var r=0;r<e.length/2;r++){var i=e[r*2];var n=e[r*2+1];e[r*2]=t.a*i+t.c*n+t.tx;e[r*2+1]=t.b*i+t.d*n+t.ty}};r.prototype.addColors=function(e,t,r,i){var n=(t>>16)+(t&65280)+((t&255)<<16);var a=c.premultiplyTint(n,r);while(i-- >0){e.push(a)}};r.prototype.addTextureIds=function(e,t,r){while(r-- >0){e.push(t)}};r.prototype.addUvs=function(e,t,r,i,n,a){if(a===void 0){a=null}var o=0;var s=t.length;var u=r.frame;while(o<n){var l=e[(i+o)*2];var h=e[(i+o)*2+1];if(a){var c=a.a*l+a.c*h+a.tx;h=a.b*l+a.d*h+a.ty;l=c}o++;t.push(l/u.width,h/u.height)}var f=r.baseTexture;if(u.width<f.width||u.height<f.height){this.adjustUvs(t,r,s,n)}};r.prototype.adjustUvs=function(e,t,r,i){var n=t.baseTexture;var a=1e-6;var o=r+i*2;var s=t.frame;var u=s.width/n.width;var l=s.height/n.height;var h=s.x/s.width;var c=s.y/s.height;var f=Math.floor(e[r]+a);var d=Math.floor(e[r+1]+a);for(var p=r+2;p<o;p+=2){f=Math.min(f,Math.floor(e[p]+a));d=Math.min(d,Math.floor(e[p+1]+a))}h-=f;c-=d;for(var p=r;p<o;p+=2){e[p]=(e[p]+h)*u;e[p+1]=(e[p+1]+c)*l}};r.BATCHABLE_SIZE=100;return r}(v.BatchGeometry);var D=function(t){o(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;e.width=0;e.alignment=.5;e.native=false;e.cap=te.LINE_CAP.BUTT;e.join=te.LINE_JOIN.MITER;e.miterLimit=10;return e}r.prototype.clone=function(){var e=new r;e.color=this.color;e.alpha=this.alpha;e.texture=this.texture;e.matrix=this.matrix;e.visible=this.visible;e.width=this.width;e.alignment=this.alignment;e.native=this.native;e.cap=this.cap;e.join=this.join;e.miterLimit=this.miterLimit;return e};r.prototype.reset=function(){t.prototype.reset.call(this);this.color=0;this.alignment=.5;this.width=0;this.native=false};return r}(n);var R=new Float32Array(3);var L={};var N=function(r){o(t,r);function t(e){if(e===void 0){e=null}var t=r.call(this)||this;t._geometry=e||new C;t._geometry.refCount++;t.shader=null;t.state=v.State.for2d();t._fillStyle=new n;t._lineStyle=new D;t._matrix=null;t._holeMode=false;t.currentPath=null;t.batches=[];t.batchTint=-1;t.batchDirty=-1;t.vertexData=null;t.pluginName="batch";t._transformID=-1;t.tint=16777215;t.blendMode=_.BLEND_MODES.NORMAL;return t}Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:false,configurable:true});t.prototype.clone=function(){this.finishPoly();return new t(this._geometry)};Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:false,configurable:true});t.prototype.lineStyle=function(e){if(e===void 0){e=null}if(typeof e==="number"){var t=arguments;e={width:t[0]||0,color:t[1]||0,alpha:t[2]!==undefined?t[2]:1,alignment:t[3]!==undefined?t[3]:.5,native:!!t[4]}}return this.lineTextureStyle(e)};t.prototype.lineTextureStyle=function(t){if(typeof t==="number"){c.deprecation("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],u=e[6];t={width:r,texture:i,color:n,alpha:a,matrix:o,alignment:s,native:u};Object.keys(t).forEach(function(e){return t[e]===undefined&&delete t[e]})}t=Object.assign({width:0,texture:v.Texture.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:false,cap:te.LINE_CAP.BUTT,join:te.LINE_JOIN.MITER,miterLimit:10},t);if(this.currentPath){this.startPoly()}var l=t.width>0&&t.alpha>0;if(!l){this._lineStyle.reset()}else{if(t.matrix){t.matrix=t.matrix.clone();t.matrix.invert()}Object.assign(this._lineStyle,{visible:l},t)}return this};t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points;var t=this.currentPath.points.length;if(t>2){this.drawShape(this.currentPath);this.currentPath=new re.Polygon;this.currentPath.closeStroke=false;this.currentPath.points.push(e[t-2],e[t-1])}}else{this.currentPath=new re.Polygon;this.currentPath.closeStroke=false}};t.prototype.finishPoly=function(){if(this.currentPath){if(this.currentPath.points.length>2){this.drawShape(this.currentPath);this.currentPath=null}else{this.currentPath.points.length=0}}};t.prototype.moveTo=function(e,t){this.startPoly();this.currentPath.points[0]=e;this.currentPath.points[1]=t;return this};t.prototype.lineTo=function(e,t){if(!this.currentPath){this.moveTo(0,0)}var r=this.currentPath.points;var i=r[r.length-2];var n=r[r.length-1];if(i!==e||n!==t){r.push(e,t)}return this};t.prototype._initCurve=function(e,t){if(e===void 0){e=0}if(t===void 0){t=0}if(this.currentPath){if(this.currentPath.points.length===0){this.currentPath.points=[e,t]}}else{this.moveTo(e,t)}};t.prototype.quadraticCurveTo=function(e,t,r,i){this._initCurve();var n=this.currentPath.points;if(n.length===0){this.moveTo(0,0)}x.curveTo(e,t,r,i,n);return this};t.prototype.bezierCurveTo=function(e,t,r,i,n,a){this._initCurve();b.curveTo(e,t,r,i,n,a,this.currentPath.points);return this};t.prototype.arcTo=function(e,t,r,i,n){this._initCurve(e,t);var a=this.currentPath.points;var o=y.curveTo(e,t,r,i,n,a);if(o){var s=o.cx,u=o.cy,l=o.radius,h=o.startAngle,c=o.endAngle,f=o.anticlockwise;this.arc(s,u,l,h,c,f)}return this};t.prototype.arc=function(e,t,r,i,n,a){if(a===void 0){a=false}if(i===n){return this}if(!a&&n<=i){n+=re.PI_2}else if(a&&i<=n){i+=re.PI_2}var o=n-i;if(o===0){return this}var s=e+Math.cos(i)*r;var u=t+Math.sin(i)*r;var l=this._geometry.closePointEps;var h=this.currentPath?this.currentPath.points:null;if(h){var c=Math.abs(h[h.length-2]-s);var f=Math.abs(h[h.length-1]-u);if(c<l&&f<l);else{h.push(s,u)}}else{this.moveTo(s,u);h=this.currentPath.points}y.arc(s,u,e,t,r,i,n,a,h);return this};t.prototype.beginFill=function(e,t){if(e===void 0){e=0}if(t===void 0){t=1}return this.beginTextureFill({texture:v.Texture.WHITE,color:e,alpha:t})};t.prototype.beginTextureFill=function(t){if(t instanceof v.Texture){c.deprecation("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,r=e[0],i=e[1],n=e[2],a=e[3];t={texture:r,color:i,alpha:n,matrix:a};Object.keys(t).forEach(function(e){return t[e]===undefined&&delete t[e]})}t=Object.assign({texture:v.Texture.WHITE,color:16777215,alpha:1,matrix:null},t);if(this.currentPath){this.startPoly()}var o=t.alpha>0;if(!o){this._fillStyle.reset()}else{if(t.matrix){t.matrix=t.matrix.clone();t.matrix.invert()}Object.assign(this._fillStyle,{visible:o},t)}return this};t.prototype.endFill=function(){this.finishPoly();this._fillStyle.reset();return this};t.prototype.drawRect=function(e,t,r,i){return this.drawShape(new re.Rectangle(e,t,r,i))};t.prototype.drawRoundedRect=function(e,t,r,i,n){return this.drawShape(new re.RoundedRectangle(e,t,r,i,n))};t.prototype.drawCircle=function(e,t,r){return this.drawShape(new re.Circle(e,t,r))};t.prototype.drawEllipse=function(e,t,r,i){return this.drawShape(new re.Ellipse(e,t,r,i))};t.prototype.drawPolygon=function(){var e=arguments;var t=[];for(var r=0;r<arguments.length;r++){t[r]=e[r]}var i;var n=true;var a=t[0];if(a.points){n=a.closeStroke;i=a.points}else if(Array.isArray(t[0])){i=t[0]}else{i=t}var o=new re.Polygon(i);o.closeStroke=n;this.drawShape(o);return this};t.prototype.drawShape=function(e){if(!this._holeMode){this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix)}else{this._geometry.drawHole(e,this._matrix)}return this};t.prototype.drawStar=function(e,t,r,i,n,a){if(a===void 0){a=0}return this.drawPolygon(new m(e,t,r,i,n,a))};t.prototype.clear=function(){this._geometry.clear();this._lineStyle.reset();this._fillStyle.reset();this._boundsID++;this._matrix=null;this._holeMode=false;this.currentPath=null;return this};t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===re.SHAPES.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)};t.prototype._render=function(e){this.finishPoly();var t=this._geometry;var r=e.context.supports.uint32Indices;t.updateBatches(r);if(t.batchable){if(this.batchDirty!==t.batchDirty){this._populateBatches()}this._renderBatched(e)}else{e.batch.flush();this._renderDirect(e)}};t.prototype._populateBatches=function(){var e=this._geometry;var t=this.blendMode;var r=e.batches.length;this.batchTint=-1;this._transformID=-1;this.batchDirty=e.batchDirty;this.batches.length=r;this.vertexData=new Float32Array(e.points);for(var i=0;i<r;i++){var n=e.batches[i];var a=n.style.color;var o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2);var s=new Float32Array(e.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2);var u=new Uint16Array(e.indicesUint16.buffer,n.start*2,n.size);var l={vertexData:o,blendMode:t,indices:u,uvs:s,_batchRGB:c.hex2rgb(a),_tintRGB:a,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[i]=l}};t.prototype._renderBatched=function(e){if(!this.batches.length){return}e.batch.setObjectRenderer(e.plugins[this.pluginName]);this.calculateVertices();this.calculateTints();for(var t=0,r=this.batches.length;t<r;t++){var i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha;e.plugins[this.pluginName].render(i)}};t.prototype._renderDirect=function(e){var t=this._resolveDirectShader(e);var r=this._geometry;var i=this.tint;var n=this.worldAlpha;var a=t.uniforms;var o=r.drawCalls;a.translationMatrix=this.transform.worldTransform;a.tint[0]=(i>>16&255)/255*n;a.tint[1]=(i>>8&255)/255*n;a.tint[2]=(i&255)/255*n;a.tint[3]=n;e.shader.bind(t);e.geometry.bind(r,t);e.state.set(this.state);for(var s=0,u=o.length;s<u;s++){this._renderDrawCallDirect(e,r.drawCalls[s])}};t.prototype._renderDrawCallDirect=function(e,t){var r=t.texArray,i=t.type,n=t.size,a=t.start;var o=r.count;for(var s=0;s<o;s++){e.texture.bind(r.elements[s],s)}e.geometry.draw(i,n,a)};t.prototype._resolveDirectShader=function(e){var t=this.shader;var r=this.pluginName;if(!t){if(!L[r]){var i=e.plugins.batch.MAX_TEXTURES;var n=new Int32Array(i);for(var a=0;a<i;a++){n[a]=a}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new re.Matrix,default:v.UniformGroup.from({uSamplers:n},true)};var s=e.plugins[r]._shader.program;L[r]=new v.Shader(s,o)}t=L[r]}return t};t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(!e.graphicsData.length){return}var t=e.bounds,r=t.minX,i=t.minY,n=t.maxX,a=t.maxY;this._bounds.addFrame(this.transform,r,i,n,a)};t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,t._TEMP_POINT);return this._geometry.containsPoint(t._TEMP_POINT)};t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;var e=c.hex2rgb(this.tint,R);for(var t=0;t<this.batches.length;t++){var r=this.batches[t];var i=r._batchRGB;var n=e[0]*i[0]*255;var a=e[1]*i[1]*255;var o=e[2]*i[2]*255;var s=(n<<16)+(a<<8)+(o|0);r._tintRGB=(s>>16)+(s&65280)+((s&255)<<16)}}};t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID===e){return}this._transformID=e;var t=this.transform.worldTransform;var r=t.a;var i=t.b;var n=t.c;var a=t.d;var o=t.tx;var s=t.ty;var u=this._geometry.points;var l=this.vertexData;var h=0;for(var c=0;c<u.length;c+=2){var f=u[c];var d=u[c+1];l[h++]=r*f+n*d+o;l[h++]=a*d+i*f+s}};t.prototype.closePath=function(){var e=this.currentPath;if(e){e.closeStroke=true}return this};t.prototype.setMatrix=function(e){this._matrix=e;return this};t.prototype.beginHole=function(){this.finishPoly();this._holeMode=true;return this};t.prototype.endHole=function(){this.finishPoly();this._holeMode=false;return this};t.prototype.destroy=function(e){this._geometry.refCount--;if(this._geometry.refCount===0){this._geometry.dispose()}this._matrix=null;this.currentPath=null;this._lineStyle.destroy();this._lineStyle=null;this._fillStyle.destroy();this._fillStyle=null;this._geometry=null;this.shader=null;this.vertexData=null;this.batches.length=0;this.batches=null;r.prototype.destroy.call(this,e)};t._TEMP_POINT=new re.Point;return t}(i.Container);te.FillStyle=n;te.GRAPHICS_CURVES=ie;te.Graphics=N;te.GraphicsData=I;te.GraphicsGeometry=C;te.LineStyle=D;te.graphicsUtils=A},{"@pixi/constants":3,"@pixi/core":4,"@pixi/display":5,"@pixi/math":16,"@pixi/utils":34}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/math");var n=e("@pixi/ticker");var a=e("@pixi/display");var o=e("@pixi/utils");var s=function(){function e(){this.pressure=0;this.rotationAngle=0;this.twist=0;this.tangentialPressure=0;this.global=new i.Point;this.target=null;this.originalEvent=null;this.identifier=null;this.isPrimary=false;this.button=0;this.buttons=0;this.width=0;this.height=0;this.tiltX=0;this.tiltY=0;this.pointerType=null;this.pressure=0;this.rotationAngle=0;this.twist=0;this.tangentialPressure=0}Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:false,configurable:true});e.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)};e.prototype.copyEvent=function(e){if("isPrimary"in e&&e.isPrimary){this.isPrimary=true}this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which;this.width="width"in e&&e.width;this.height="height"in e&&e.height;this.tiltX="tiltX"in e&&e.tiltX;this.tiltY="tiltY"in e&&e.tiltY;this.pointerType="pointerType"in e&&e.pointerType;this.pressure="pressure"in e&&e.pressure;this.rotationAngle="rotationAngle"in e&&e.rotationAngle;this.twist="twist"in e&&e.twist||0;this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0};e.prototype.reset=function(){this.isPrimary=false};return e}();var u=function(e,t){u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return u(e,t)};function l(e,t){u(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var h=function(){function e(){this.stopped=false;this.stopsPropagatingAt=null;this.stopPropagationHint=false;this.target=null;this.currentTarget=null;this.type=null;this.data=null}e.prototype.stopPropagation=function(){this.stopped=true;this.stopPropagationHint=true;this.stopsPropagatingAt=this.currentTarget};e.prototype.reset=function(){this.stopped=false;this.stopsPropagatingAt=null;this.stopPropagationHint=false;this.currentTarget=null;this.target=null};return e}();var d=function(){function t(e){this._pointerId=e;this._flags=t.FLAGS.NONE}t.prototype._doSet=function(e,t){if(t){this._flags=this._flags|e}else{this._flags=this._flags&~e}};Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:false,configurable:true});t.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2});return t}();var c=function(){function e(){this._tempPoint=new i.Point}e.prototype.recursiveFindHit=function(e,t,r,i,n){if(!t||!t.visible){return false}var a=e.data.global;n=t.interactive||n;var o=false;var s=n;var u=true;if(t.hitArea){if(i){t.worldTransform.applyInverse(a,this._tempPoint);if(!t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)){i=false;u=false}else{o=true}}s=false}else if(t._mask){if(i){if(!(t._mask.containsPoint&&t._mask.containsPoint(a))){i=false}}}if(u&&t.interactiveChildren&&t.children){var l=t.children;for(var h=l.length-1;h>=0;h--){var c=l[h];var f=this.recursiveFindHit(e,c,r,i,s);if(f){if(!c.parent){continue}s=false;if(f){if(e.target){i=false}o=true}}}}if(n){if(i&&!e.target){if(!t.hitArea&&t.containsPoint){if(t.containsPoint(a)){o=true}}}if(t.interactive){if(o&&!e.target){e.target=t}if(r){r(e,t,!!o)}}}return o};e.prototype.findHit=function(e,t,r,i){this.recursiveFindHit(e,t,r,i,false)};return e}();var f={interactive:false,interactiveChildren:true,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){if(e){this.cursor="pointer"}else if(this.cursor==="pointer"){this.cursor=null}},cursor:null,get trackedPointers(){if(this._trackedPointers===undefined){this._trackedPointers={}}return this._trackedPointers},_trackedPointers:undefined};a.DisplayObject.mixin(f);var p=1;var v={target:null,data:{global:null}};var m=function(i){l(e,i);function e(e,t){var r=i.call(this)||this;t=t||{};r.renderer=e;r.autoPreventDefault=t.autoPreventDefault!==undefined?t.autoPreventDefault:true;r.interactionFrequency=t.interactionFrequency||10;r.mouse=new s;r.mouse.identifier=p;r.mouse.global.set(-999999);r.activeInteractionData={};r.activeInteractionData[p]=r.mouse;r.interactionDataPool=[];r.eventData=new h;r.interactionDOMElement=null;r.moveWhenInside=false;r.eventsAdded=false;r.tickerAdded=false;r.mouseOverRenderer=false;r.supportsTouchEvents="ontouchstart"in window;r.supportsPointerEvents=!!window.PointerEvent;r.onPointerUp=r.onPointerUp.bind(r);r.processPointerUp=r.processPointerUp.bind(r);r.onPointerCancel=r.onPointerCancel.bind(r);r.processPointerCancel=r.processPointerCancel.bind(r);r.onPointerDown=r.onPointerDown.bind(r);r.processPointerDown=r.processPointerDown.bind(r);r.onPointerMove=r.onPointerMove.bind(r);r.processPointerMove=r.processPointerMove.bind(r);r.onPointerOut=r.onPointerOut.bind(r);r.processPointerOverOut=r.processPointerOverOut.bind(r);r.onPointerOver=r.onPointerOver.bind(r);r.cursorStyles={default:"inherit",pointer:"pointer"};r.currentCursorMode=null;r.cursor=null;r.resolution=1;r.delayedEvents=[];r.search=new c;r._tempDisplayObject=new a.TemporaryDisplayObject;r._useSystemTicker=t.useSystemTicker!==undefined?t.useSystemTicker:true;r.setTargetElement(r.renderer.view,r.renderer.resolution);return r}Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e;if(e){this.addTickerListener()}else{this.removeTickerListener()}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:false,configurable:true});e.prototype.hitTest=function(e,t){v.target=null;v.data.global=e;if(!t){t=this.lastObjectRendered}this.processInteractive(v,t,null,true);return v.target};e.prototype.setTargetElement=function(e,t){if(t===void 0){t=1}this.removeTickerListener();this.removeEvents();this.interactionDOMElement=e;this.resolution=t;this.addEvents();this.addTickerListener()};e.prototype.addTickerListener=function(){if(this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker){return}n.Ticker.system.add(this.tickerUpdate,this,n.UPDATE_PRIORITY.INTERACTION);this.tickerAdded=true};e.prototype.removeTickerListener=function(){if(!this.tickerAdded){return}n.Ticker.system.remove(this.tickerUpdate,this);this.tickerAdded=false};e.prototype.addEvents=function(){if(this.eventsAdded||!this.interactionDOMElement){return}var e=this.interactionDOMElement.style;if(window.navigator.msPointerEnabled){e.msContentZooming="none";e.msTouchAction="none"}else if(this.supportsPointerEvents){e.touchAction="none"}if(this.supportsPointerEvents){window.document.addEventListener("pointermove",this.onPointerMove,true);this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,true);this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,true);this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,true);window.addEventListener("pointercancel",this.onPointerCancel,true);window.addEventListener("pointerup",this.onPointerUp,true)}else{window.document.addEventListener("mousemove",this.onPointerMove,true);this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,true);this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,true);this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,true);window.addEventListener("mouseup",this.onPointerUp,true)}if(this.supportsTouchEvents){this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,true);this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,true);this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,true);this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,true)}this.eventsAdded=true};e.prototype.removeEvents=function(){if(!this.eventsAdded||!this.interactionDOMElement){return}var e=this.interactionDOMElement.style;if(window.navigator.msPointerEnabled){e.msContentZooming="";e.msTouchAction=""}else if(this.supportsPointerEvents){e.touchAction=""}if(this.supportsPointerEvents){window.document.removeEventListener("pointermove",this.onPointerMove,true);this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,true);this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,true);this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,true);window.removeEventListener("pointercancel",this.onPointerCancel,true);window.removeEventListener("pointerup",this.onPointerUp,true)}else{window.document.removeEventListener("mousemove",this.onPointerMove,true);this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,true);this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,true);this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,true);window.removeEventListener("mouseup",this.onPointerUp,true)}if(this.supportsTouchEvents){this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,true);this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,true);this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,true);this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,true)}this.interactionDOMElement=null;this.eventsAdded=false};e.prototype.tickerUpdate=function(e){this._deltaTime+=e;if(this._deltaTime<this.interactionFrequency){return}this._deltaTime=0;this.update()};e.prototype.update=function(){if(!this.interactionDOMElement){return}if(this._didMove){this._didMove=false;return}this.cursor=null;for(var e in this.activeInteractionData){if(this.activeInteractionData.hasOwnProperty(e)){var t=this.activeInteractionData[e];if(t.originalEvent&&t.pointerType!=="touch"){var r=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,true)}}}this.setCursorMode(this.cursor)};e.prototype.setCursorMode=function(e){e=e||"default";if(this.currentCursorMode===e){return}this.currentCursorMode=e;var t=this.cursorStyles[e];if(t){switch(typeof t){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t);break}}else if(typeof e==="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)){this.interactionDOMElement.style.cursor=e}};e.prototype.dispatchEvent=function(e,t,r){if(!r.stopPropagationHint||e===r.stopsPropagatingAt){r.currentTarget=e;r.type=t;e.emit(t,r);if(e[t]){e[t](r)}}};e.prototype.delayDispatchEvent=function(e,t,r){this.delayedEvents.push({displayObject:e,eventString:t,eventData:r})};e.prototype.mapPositionToPoint=function(e,t,r){var i;if(!this.interactionDOMElement.parentElement){i={x:0,y:0,width:0,height:0}}else{i=this.interactionDOMElement.getBoundingClientRect()}var n=1/this.resolution;e.x=(t-i.left)*(this.interactionDOMElement.width/i.width)*n;e.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n};e.prototype.processInteractive=function(e,t,r,i){var n=this.search.findHit(e,t,r,i);var a=this.delayedEvents;if(!a.length){return n}e.stopPropagationHint=false;var o=a.length;this.delayedEvents=[];for(var s=0;s<o;s++){var u=a[s],l=u.displayObject,h=u.eventString,c=u.eventData;if(c.stopsPropagatingAt===l){c.stopPropagationHint=true}this.dispatchEvent(l,h,c)}return n};e.prototype.onPointerDown=function(e){if(this.supportsTouchEvents&&e.pointerType==="touch"){return}var t=this.normalizeToPointerData(e);if(this.autoPreventDefault&&t[0].isNormalized){var r=e.cancelable||!("cancelable"in e);if(r){e.preventDefault()}}var i=t.length;for(var n=0;n<i;n++){var a=t[n];var o=this.getInteractionDataForPointerId(a);var s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=e;this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,true);this.emit("pointerdown",s);if(a.pointerType==="touch"){this.emit("touchstart",s)}else if(a.pointerType==="mouse"||a.pointerType==="pen"){var u=a.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}};e.prototype.processPointerDown=function(e,t,r){var i=e.data;var n=e.data.identifier;if(r){if(!t.trackedPointers[n]){t.trackedPointers[n]=new d(n)}this.dispatchEvent(t,"pointerdown",e);if(i.pointerType==="touch"){this.dispatchEvent(t,"touchstart",e)}else if(i.pointerType==="mouse"||i.pointerType==="pen"){var a=i.button===2;if(a){t.trackedPointers[n].rightDown=true}else{t.trackedPointers[n].leftDown=true}this.dispatchEvent(t,a?"rightdown":"mousedown",e)}}};e.prototype.onPointerComplete=function(e,t,r){var i=this.normalizeToPointerData(e);var n=i.length;var a=e.target!==this.interactionDOMElement?"outside":"";for(var o=0;o<n;o++){var s=i[o];var u=this.getInteractionDataForPointerId(s);var l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);l.data.originalEvent=e;this.processInteractive(l,this.lastObjectRendered,r,t||!a);this.emit(t?"pointercancel":"pointerup"+a,l);if(s.pointerType==="mouse"||s.pointerType==="pen"){var h=s.button===2;this.emit(h?"rightup"+a:"mouseup"+a,l)}else if(s.pointerType==="touch"){this.emit(t?"touchcancel":"touchend"+a,l);this.releaseInteractionDataForPointerId(s.pointerId)}}};e.prototype.onPointerCancel=function(e){if(this.supportsTouchEvents&&e.pointerType==="touch"){return}this.onPointerComplete(e,true,this.processPointerCancel)};e.prototype.processPointerCancel=function(e,t){var r=e.data;var i=e.data.identifier;if(t.trackedPointers[i]!==undefined){delete t.trackedPointers[i];this.dispatchEvent(t,"pointercancel",e);if(r.pointerType==="touch"){this.dispatchEvent(t,"touchcancel",e)}}};e.prototype.onPointerUp=function(e){if(this.supportsTouchEvents&&e.pointerType==="touch"){return}this.onPointerComplete(e,false,this.processPointerUp)};e.prototype.processPointerUp=function(e,t,r){var i=e.data;var n=e.data.identifier;var a=t.trackedPointers[n];var o=i.pointerType==="touch";var s=i.pointerType==="mouse"||i.pointerType==="pen";var u=false;if(s){var l=i.button===2;var h=d.FLAGS;var c=l?h.RIGHT_DOWN:h.LEFT_DOWN;var f=a!==undefined&&a.flags&c;if(r){this.dispatchEvent(t,l?"rightup":"mouseup",e);if(f){this.dispatchEvent(t,l?"rightclick":"click",e);u=true}}else if(f){this.dispatchEvent(t,l?"rightupoutside":"mouseupoutside",e)}if(a){if(l){a.rightDown=false}else{a.leftDown=false}}}if(r){this.dispatchEvent(t,"pointerup",e);if(o){this.dispatchEvent(t,"touchend",e)}if(a){if(!s||u){this.dispatchEvent(t,"pointertap",e)}if(o){this.dispatchEvent(t,"tap",e);a.over=false}}}else if(a){this.dispatchEvent(t,"pointerupoutside",e);if(o){this.dispatchEvent(t,"touchendoutside",e)}}if(a&&a.none){delete t.trackedPointers[n]}};e.prototype.onPointerMove=function(e){if(this.supportsTouchEvents&&e.pointerType==="touch"){return}var t=this.normalizeToPointerData(e);if(t[0].pointerType==="mouse"||t[0].pointerType==="pen"){this._didMove=true;this.cursor=null}var r=t.length;for(var i=0;i<r;i++){var n=t[i];var a=this.getInteractionDataForPointerId(n);var o=this.configureInteractionEventForDOMEvent(this.eventData,n,a);o.data.originalEvent=e;this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,true);this.emit("pointermove",o);if(n.pointerType==="touch"){this.emit("touchmove",o)}if(n.pointerType==="mouse"||n.pointerType==="pen"){this.emit("mousemove",o)}}if(t[0].pointerType==="mouse"){this.setCursorMode(this.cursor)}};e.prototype.processPointerMove=function(e,t,r){var i=e.data;var n=i.pointerType==="touch";var a=i.pointerType==="mouse"||i.pointerType==="pen";if(a){this.processPointerOverOut(e,t,r)}if(!this.moveWhenInside||r){this.dispatchEvent(t,"pointermove",e);if(n){this.dispatchEvent(t,"touchmove",e)}if(a){this.dispatchEvent(t,"mousemove",e)}}};e.prototype.onPointerOut=function(e){if(this.supportsTouchEvents&&e.pointerType==="touch"){return}var t=this.normalizeToPointerData(e);var r=t[0];if(r.pointerType==="mouse"){this.mouseOverRenderer=false;this.setCursorMode(null)}var i=this.getInteractionDataForPointerId(r);var n=this.configureInteractionEventForDOMEvent(this.eventData,r,i);n.data.originalEvent=r;this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,false);this.emit("pointerout",n);if(r.pointerType==="mouse"||r.pointerType==="pen"){this.emit("mouseout",n)}else{this.releaseInteractionDataForPointerId(i.identifier)}};e.prototype.processPointerOverOut=function(e,t,r){var i=e.data;var n=e.data.identifier;var a=i.pointerType==="mouse"||i.pointerType==="pen";var o=t.trackedPointers[n];if(r&&!o){o=t.trackedPointers[n]=new d(n)}if(o===undefined){return}if(r&&this.mouseOverRenderer){if(!o.over){o.over=true;this.delayDispatchEvent(t,"pointerover",e);if(a){this.delayDispatchEvent(t,"mouseover",e)}}if(a&&this.cursor===null){this.cursor=t.cursor}}else if(o.over){o.over=false;this.dispatchEvent(t,"pointerout",this.eventData);if(a){this.dispatchEvent(t,"mouseout",e)}if(o.none){delete t.trackedPointers[n]}}};e.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e);var r=t[0];var i=this.getInteractionDataForPointerId(r);var n=this.configureInteractionEventForDOMEvent(this.eventData,r,i);n.data.originalEvent=r;if(r.pointerType==="mouse"){this.mouseOverRenderer=true}this.emit("pointerover",n);if(r.pointerType==="mouse"||r.pointerType==="pen"){this.emit("mouseover",n)}};e.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId;var r;if(t===p||e.pointerType==="mouse"){r=this.mouse}else if(this.activeInteractionData[t]){r=this.activeInteractionData[t]}else{r=this.interactionDataPool.pop()||new s;r.identifier=t;this.activeInteractionData[t]=r}r.copyEvent(e);return r};e.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];if(t){delete this.activeInteractionData[e];t.reset();this.interactionDataPool.push(t)}};e.prototype.configureInteractionEventForDOMEvent=function(e,t,r){e.data=r;this.mapPositionToPoint(r.global,t.clientX,t.clientY);if(t.pointerType==="touch"){t.globalX=r.global.x;t.globalY=r.global.y}r.originalEvent=t;e.reset();return e};e.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent){for(var r=0,i=e.changedTouches.length;r<i;r++){var n=e.changedTouches[r];if(typeof n.button==="undefined"){n.button=e.touches.length?1:0}if(typeof n.buttons==="undefined"){n.buttons=e.touches.length?1:0}if(typeof n.isPrimary==="undefined"){n.isPrimary=e.touches.length===1&&e.type==="touchstart"}if(typeof n.width==="undefined"){n.width=n.radiusX||1}if(typeof n.height==="undefined"){n.height=n.radiusY||1}if(typeof n.tiltX==="undefined"){n.tiltX=0}if(typeof n.tiltY==="undefined"){n.tiltY=0}if(typeof n.pointerType==="undefined"){n.pointerType="touch"}if(typeof n.pointerId==="undefined"){n.pointerId=n.identifier||0}if(typeof n.pressure==="undefined"){n.pressure=n.force||.5}if(typeof n.twist==="undefined"){n.twist=0}if(typeof n.tangentialPressure==="undefined"){n.tangentialPressure=0}if(typeof n.layerX==="undefined"){n.layerX=n.offsetX=n.clientX}if(typeof n.layerY==="undefined"){n.layerY=n.offsetY=n.clientY}n.isNormalized=true;t.push(n)}}else if(e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof window.PointerEvent))){var a=e;if(typeof a.isPrimary==="undefined"){a.isPrimary=true}if(typeof a.width==="undefined"){a.width=1}if(typeof a.height==="undefined"){a.height=1}if(typeof a.tiltX==="undefined"){a.tiltX=0}if(typeof a.tiltY==="undefined"){a.tiltY=0}if(typeof a.pointerType==="undefined"){a.pointerType="mouse"}if(typeof a.pointerId==="undefined"){a.pointerId=p}if(typeof a.pressure==="undefined"){a.pressure=.5}if(typeof a.twist==="undefined"){a.twist=0}if(typeof a.tangentialPressure==="undefined"){a.tangentialPressure=0}a.isNormalized=true;t.push(a)}else{t.push(e)}return t};e.prototype.destroy=function(){this.removeEvents();this.removeTickerListener();this.removeAllListeners();this.renderer=null;this.mouse=null;this.eventData=null;this.interactionDOMElement=null;this.onPointerDown=null;this.processPointerDown=null;this.onPointerUp=null;this.processPointerUp=null;this.onPointerCancel=null;this.processPointerCancel=null;this.onPointerMove=null;this.processPointerMove=null;this.onPointerOut=null;this.processPointerOverOut=null;this.onPointerOver=null;this.search=null};return e}(o.EventEmitter);r.InteractionData=s;r.InteractionEvent=h;r.InteractionManager=m;r.InteractionTrackingData=d;r.interactiveTarget=f},{"@pixi/display":5,"@pixi/math":16,"@pixi/ticker":33,"@pixi/utils":34}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("resource-loader");var n=e("@pixi/core");var a=i.Resource;var o=function(e,t){o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return o(e,t)};function l(e,t){o(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){function e(){}e.use=function(e,t){if(e.data&&e.type===i.Resource.TYPE.IMAGE){e.texture=n.Texture.fromLoader(e.data,e.url,e.name)}t()};return e}();var u=function(s){l(u,s);function u(e,t){var r=s.call(this,e,t)||this;for(var i=0;i<u._plugins.length;++i){var n=u._plugins[i];var a=n.pre,o=n.use;if(a){r.pre(a)}if(o){r.use(o)}}r._protected=false;return r}u.prototype.destroy=function(){if(!this._protected){this.reset()}};Object.defineProperty(u,"shared",{get:function(){var e=u._shared;if(!e){e=new u;e._protected=true;u._shared=e}return e},enumerable:false,configurable:true});u.registerPlugin=function(e){u._plugins.push(e);if(e.add){e.add()}return u};u._plugins=[];return u}(i.Loader);u.registerPlugin({use:i.middleware.parsing});u.registerPlugin(s);var h=function(){function e(){}e.init=function(e){e=Object.assign({sharedLoader:false},e);this.loader=e.sharedLoader?u.shared:new u};e.destroy=function(){if(this.loader){this.loader.destroy();this.loader=null}};return e}();r.AppLoaderPlugin=h;r.Loader=u;r.LoaderResource=a;r.TextureLoader=s},{"@pixi/core":4,"resource-loader":72}],16:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:true});var u=Math.PI*2;var r=180/Math.PI;var i=Math.PI/180;(function(e){e[e["POLY"]=0]="POLY";e[e["RECT"]=1]="RECT";e[e["CIRC"]=2]="CIRC";e[e["ELIP"]=3]="ELIP";e[e["RREC"]=4]="RREC"})(s.SHAPES||(s.SHAPES={}));var n=function(){function e(e,t,r,i){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}if(i===void 0){i=0}this.x=Number(e);this.y=Number(t);this.width=Number(r);this.height=Number(i);this.type=s.SHAPES.RECT}Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:false,configurable:true});Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:false,configurable:true});e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)};e.prototype.copyFrom=function(e){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height;return this};e.prototype.copyTo=function(e){e.x=this.x;e.y=this.y;e.width=this.width;e.height=this.height;return e};e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0){return false}if(e>=this.x&&e<this.x+this.width){if(t>=this.y&&t<this.y+this.height){return true}}return false};e.prototype.pad=function(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.x-=e;this.y-=t;this.width+=e*2;this.height+=t*2;return this};e.prototype.fit=function(e){var t=Math.max(this.x,e.x);var r=Math.min(this.x+this.width,e.x+e.width);var i=Math.max(this.y,e.y);var n=Math.min(this.y+this.height,e.y+e.height);this.x=t;this.width=Math.max(r-t,0);this.y=i;this.height=Math.max(n-i,0);return this};e.prototype.ceil=function(e,t){if(e===void 0){e=1}if(t===void 0){t=.001}var r=Math.ceil((this.x+this.width-t)*e)/e;var i=Math.ceil((this.y+this.height-t)*e)/e;this.x=Math.floor((this.x+t)*e)/e;this.y=Math.floor((this.y+t)*e)/e;this.width=r-this.x;this.height=i-this.y;return this};e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x);var r=Math.max(this.x+this.width,e.x+e.width);var i=Math.min(this.y,e.y);var n=Math.max(this.y+this.height,e.y+e.height);this.x=t;this.width=r-t;this.y=i;this.height=n-i;return this};return e}();var a=function(){function e(e,t,r){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}this.x=e;this.y=t;this.radius=r;this.type=s.SHAPES.CIRC}e.prototype.clone=function(){return new e(this.x,this.y,this.radius)};e.prototype.contains=function(e,t){if(this.radius<=0){return false}var r=this.radius*this.radius;var i=this.x-e;var n=this.y-t;i*=i;n*=n;return i+n<=r};e.prototype.getBounds=function(){return new n(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)};return e}();var o=function(){function e(e,t,r,i){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}if(i===void 0){i=0}this.x=e;this.y=t;this.width=r;this.height=i;this.type=s.SHAPES.ELIP}e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)};e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0){return false}var r=(e-this.x)/this.width;var i=(t-this.y)/this.height;r*=r;i*=i;return r+i<=1};e.prototype.getBounds=function(){return new n(this.x-this.width,this.y-this.height,this.width,this.height)};return e}();var l=function(){function r(){var e=arguments;var t=[];for(var r=0;r<arguments.length;r++){t[r]=e[r]}var i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!=="number"){var n=[];for(var a=0,o=i.length;a<o;a++){n.push(i[a].x,i[a].y)}i=n}this.points=i;this.type=s.SHAPES.POLY;this.closeStroke=true}r.prototype.clone=function(){var e=this.points.slice();var t=new r(e);t.closeStroke=this.closeStroke;return t};r.prototype.contains=function(e,t){var r=false;var i=this.points.length/2;for(var n=0,a=i-1;n<i;a=n++){var o=this.points[n*2];var s=this.points[n*2+1];var u=this.points[a*2];var l=this.points[a*2+1];var h=s>t!==l>t&&e<(u-o)*((t-s)/(l-s))+o;if(h){r=!r}}return r};return r}();var h=function(){function e(e,t,r,i,n){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}if(i===void 0){i=0}if(n===void 0){n=20}this.x=e;this.y=t;this.width=r;this.height=i;this.radius=n;this.type=s.SHAPES.RREC}e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)};e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0){return false}if(e>=this.x&&e<=this.x+this.width){if(t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius){return true}var r=e-(this.x+this.radius);var i=t-(this.y+this.radius);var n=this.radius*this.radius;if(r*r+i*i<=n){return true}r=e-(this.x+this.width-this.radius);if(r*r+i*i<=n){return true}i=t-(this.y+this.height-this.radius);if(r*r+i*i<=n){return true}r=e-(this.x+this.radius);if(r*r+i*i<=n){return true}}}return false};return e}();var c=function(){function e(e,t){if(e===void 0){e=0}if(t===void 0){t=0}this.x=e;this.y=t}e.prototype.clone=function(){return new e(this.x,this.y)};e.prototype.copyFrom=function(e){this.set(e.x,e.y);return this};e.prototype.copyTo=function(e){e.set(this.x,this.y);return e};e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y};e.prototype.set=function(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.x=e;this.y=t;return this};return e}();var f=function(){function r(e,t,r,i){if(r===void 0){r=0}if(i===void 0){i=0}this._x=r;this._y=i;this.cb=e;this.scope=t}r.prototype.clone=function(e,t){if(e===void 0){e=this.cb}if(t===void 0){t=this.scope}return new r(e,t,this._x,this._y)};r.prototype.set=function(e,t){if(e===void 0){e=0}if(t===void 0){t=e}if(this._x!==e||this._y!==t){this._x=e;this._y=t;this.cb.call(this.scope)}return this};r.prototype.copyFrom=function(e){if(this._x!==e.x||this._y!==e.y){this._x=e.x;this._y=e.y;this.cb.call(this.scope)}return this};r.prototype.copyTo=function(e){e.set(this._x,this._y);return e};r.prototype.equals=function(e){return e.x===this._x&&e.y===this._y};Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(e){if(this._x!==e){this._x=e;this.cb.call(this.scope)}},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(e){if(this._y!==e){this._y=e;this.cb.call(this.scope)}},enumerable:false,configurable:true});return r}();var d=function(){function t(e,t,r,i,n,a){if(e===void 0){e=1}if(t===void 0){t=0}if(r===void 0){r=0}if(i===void 0){i=1}if(n===void 0){n=0}if(a===void 0){a=0}this.array=null;this.a=e;this.b=t;this.c=r;this.d=i;this.tx=n;this.ty=a}t.prototype.fromArray=function(e){this.a=e[0];this.b=e[1];this.c=e[3];this.d=e[4];this.tx=e[2];this.ty=e[5]};t.prototype.set=function(e,t,r,i,n,a){this.a=e;this.b=t;this.c=r;this.d=i;this.tx=n;this.ty=a;return this};t.prototype.toArray=function(e,t){if(!this.array){this.array=new Float32Array(9)}var r=t||this.array;if(e){r[0]=this.a;r[1]=this.b;r[2]=0;r[3]=this.c;r[4]=this.d;r[5]=0;r[6]=this.tx;r[7]=this.ty;r[8]=1}else{r[0]=this.a;r[1]=this.c;r[2]=this.tx;r[3]=this.b;r[4]=this.d;r[5]=this.ty;r[6]=0;r[7]=0;r[8]=1}return r};t.prototype.apply=function(e,t){t=t||new c;var r=e.x;var i=e.y;t.x=this.a*r+this.c*i+this.tx;t.y=this.b*r+this.d*i+this.ty;return t};t.prototype.applyInverse=function(e,t){t=t||new c;var r=1/(this.a*this.d+this.c*-this.b);var i=e.x;var n=e.y;t.x=this.d*r*i+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r;t.y=this.a*r*n+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r;return t};t.prototype.translate=function(e,t){this.tx+=e;this.ty+=t;return this};t.prototype.scale=function(e,t){this.a*=e;this.d*=t;this.c*=e;this.b*=t;this.tx*=e;this.ty*=t;return this};t.prototype.rotate=function(e){var t=Math.cos(e);var r=Math.sin(e);var i=this.a;var n=this.c;var a=this.tx;this.a=i*t-this.b*r;this.b=i*r+this.b*t;this.c=n*t-this.d*r;this.d=n*r+this.d*t;this.tx=a*t-this.ty*r;this.ty=a*r+this.ty*t;return this};t.prototype.append=function(e){var t=this.a;var r=this.b;var i=this.c;var n=this.d;this.a=e.a*t+e.b*i;this.b=e.a*r+e.b*n;this.c=e.c*t+e.d*i;this.d=e.c*r+e.d*n;this.tx=e.tx*t+e.ty*i+this.tx;this.ty=e.tx*r+e.ty*n+this.ty;return this};t.prototype.setTransform=function(e,t,r,i,n,a,o,s,u){this.a=Math.cos(o+u)*n;this.b=Math.sin(o+u)*n;this.c=-Math.sin(o-s)*a;this.d=Math.cos(o-s)*a;this.tx=e-(r*this.a+i*this.c);this.ty=t-(r*this.b+i*this.d);return this};t.prototype.prepend=function(e){var t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var r=this.a;var i=this.c;this.a=r*e.a+this.b*e.c;this.b=r*e.b+this.b*e.d;this.c=i*e.a+this.d*e.c;this.d=i*e.b+this.d*e.d}this.tx=t*e.a+this.ty*e.c+e.tx;this.ty=t*e.b+this.ty*e.d+e.ty;return this};t.prototype.decompose=function(e){var t=this.a;var r=this.b;var i=this.c;var n=this.d;var a=-Math.atan2(-i,n);var o=Math.atan2(r,t);var s=Math.abs(a+o);if(s<1e-5||Math.abs(u-s)<1e-5){e.rotation=o;e.skew.x=e.skew.y=0}else{e.rotation=0;e.skew.x=a;e.skew.y=o}e.scale.x=Math.sqrt(t*t+r*r);e.scale.y=Math.sqrt(i*i+n*n);e.position.x=this.tx;e.position.y=this.ty;return e};t.prototype.invert=function(){var e=this.a;var t=this.b;var r=this.c;var i=this.d;var n=this.tx;var a=e*i-t*r;this.a=i/a;this.b=-t/a;this.c=-r/a;this.d=e/a;this.tx=(r*this.ty-i*n)/a;this.ty=-(e*this.ty-t*n)/a;return this};t.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;return this};t.prototype.clone=function(){var e=new t;e.a=this.a;e.b=this.b;e.c=this.c;e.d=this.d;e.tx=this.tx;e.ty=this.ty;return e};t.prototype.copyTo=function(e){e.a=this.a;e.b=this.b;e.c=this.c;e.d=this.d;e.tx=this.tx;e.ty=this.ty;return e};t.prototype.copyFrom=function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.d=e.d;this.tx=e.tx;this.ty=e.ty;return this};Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:false,configurable:true});Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:false,configurable:true});return t}();var p=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1];var v=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1];var m=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1];var g=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1];var y=[];var _=[];var b=Math.sign;function x(){for(var e=0;e<16;e++){var t=[];y.push(t);for(var r=0;r<16;r++){var i=b(p[e]*p[r]+m[e]*v[r]);var n=b(v[e]*p[r]+g[e]*v[r]);var a=b(p[e]*m[r]+m[e]*g[r]);var o=b(v[e]*m[r]+g[e]*g[r]);for(var s=0;s<16;s++){if(p[s]===i&&v[s]===n&&m[s]===a&&g[s]===o){t.push(s);break}}}}for(var e=0;e<16;e++){var u=new d;u.set(p[e],v[e],m[e],g[e],0,0);_.push(u)}}x();var w={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return p[e]},uY:function(e){return v[e]},vX:function(e){return m[e]},vY:function(e){return g[e]},inv:function(e){if(e&8){return e&15}return-e&7},add:function(e,t){return y[e][t]},sub:function(e,t){return y[e][w.inv(t)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,t){if(Math.abs(e)*2<=Math.abs(t)){if(t>=0){return w.S}return w.N}else if(Math.abs(t)*2<=Math.abs(e)){if(e>0){return w.E}return w.W}else if(t>0){if(e>0){return w.SE}return w.SW}else if(e>0){return w.NE}return w.NW},matrixAppendRotationInv:function(e,t,r,i){if(r===void 0){r=0}if(i===void 0){i=0}var n=_[w.inv(t)];n.tx=r;n.ty=i;e.append(n)}};var E=function(){function e(){this.worldTransform=new d;this.localTransform=new d;this.position=new f(this.onChange,this,0,0);this.scale=new f(this.onChange,this,1,1);this.pivot=new f(this.onChange,this,0,0);this.skew=new f(this.updateSkew,this,0,0);this._rotation=0;this._cx=1;this._sx=0;this._cy=0;this._sy=1;this._localID=0;this._currentLocalID=0;this._worldID=0;this._parentID=0}e.prototype.onChange=function(){this._localID++};e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y);this._sx=Math.sin(this._rotation+this.skew.y);this._cy=-Math.sin(this._rotation-this.skew.x);this._sy=Math.cos(this._rotation-this.skew.x);this._localID++};e.prototype.updateLocalTransform=function(){var e=this.localTransform;if(this._localID!==this._currentLocalID){e.a=this._cx*this.scale.x;e.b=this._sx*this.scale.x;e.c=this._cy*this.scale.y;e.d=this._sy*this.scale.y;e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c);e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);this._currentLocalID=this._localID;this._parentID=-1}};e.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID){t.a=this._cx*this.scale.x;t.b=this._sx*this.scale.x;t.c=this._cy*this.scale.y;t.d=this._sy*this.scale.y;t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c);t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);this._currentLocalID=this._localID;this._parentID=-1}if(this._parentID!==e._worldID){var r=e.worldTransform;var i=this.worldTransform;i.a=t.a*r.a+t.b*r.c;i.b=t.a*r.b+t.b*r.d;i.c=t.c*r.a+t.d*r.c;i.d=t.c*r.b+t.d*r.d;i.tx=t.tx*r.a+t.ty*r.c+r.tx;i.ty=t.tx*r.b+t.ty*r.d+r.ty;this._parentID=e._worldID;this._worldID++}};e.prototype.setFromMatrix=function(e){e.decompose(this);this._localID++};Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){if(this._rotation!==e){this._rotation=e;this.updateSkew()}},enumerable:false,configurable:true});e.IDENTITY=new e;return e}();s.Circle=a;s.DEG_TO_RAD=i;s.Ellipse=o;s.Matrix=d;s.ObservablePoint=f;s.PI_2=u;s.Point=c;s.Polygon=l;s.RAD_TO_DEG=r;s.Rectangle=n;s.RoundedRectangle=h;s.Transform=E;s.groupD8=w},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var l=e("@pixi/mesh");var s=e("@pixi/constants");var h=e("@pixi/core");var i=function(e,t){i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return i(e,t)};function c(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var u=function(a){c(e,a);function e(e,t,r,i){if(e===void 0){e=100}if(t===void 0){t=100}if(r===void 0){r=10}if(i===void 0){i=10}var n=a.call(this)||this;n.segWidth=r;n.segHeight=i;n.width=e;n.height=t;n.build();return n}e.prototype.build=function(){var e=this.segWidth*this.segHeight;var t=[];var r=[];var i=[];var n=this.segWidth-1;var a=this.segHeight-1;var o=this.width/n;var s=this.height/a;for(var u=0;u<e;u++){var l=u%this.segWidth;var h=u/this.segWidth|0;t.push(l*o,h*s);r.push(l/n,h/a)}var c=n*a;for(var u=0;u<c;u++){var f=u%n;var d=u/n|0;var p=d*this.segWidth+f;var v=d*this.segWidth+f+1;var m=(d+1)*this.segWidth+f;var g=(d+1)*this.segWidth+f+1;i.push(p,v,m,v,g,m)}this.buffers[0].data=new Float32Array(t);this.buffers[1].data=new Float32Array(r);this.indexBuffer.data=new Uint16Array(i);this.buffers[0].update();this.buffers[1].update();this.indexBuffer.update()};return e}(l.MeshGeometry);var f=function(n){c(e,n);function e(e,t,r){if(e===void 0){e=200}if(r===void 0){r=0}var i=n.call(this,new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6))||this;i.points=t;i._width=e;i.textureScale=r;i.build();return i}Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:false,configurable:true});e.prototype.build=function(){var e=this.points;if(!e){return}var t=this.getBuffer("aVertexPosition");var r=this.getBuffer("aTextureCoord");var i=this.getIndex();if(e.length<1){return}if(t.data.length/4!==e.length){t.data=new Float32Array(e.length*4);r.data=new Float32Array(e.length*4);i.data=new Uint16Array((e.length-1)*6)}var n=r.data;var a=i.data;n[0]=0;n[1]=0;n[2]=0;n[3]=1;var o=0;var s=e[0];var u=this._width*this.textureScale;var l=e.length;for(var h=0;h<l;h++){var c=h*4;if(this.textureScale>0){var f=s.x-e[h].x;var d=s.y-e[h].y;var p=Math.sqrt(f*f+d*d);s=e[h];o+=p/u}else{o=h/(l-1)}n[c]=o;n[c+1]=0;n[c+2]=o;n[c+3]=1}var v=0;for(var h=0;h<l-1;h++){var c=h*2;a[v++]=c;a[v++]=c+1;a[v++]=c+2;a[v++]=c+2;a[v++]=c+1;a[v++]=c+3}r.update();i.update();this.updateVertices()};e.prototype.updateVertices=function(){var e=this.points;if(e.length<1){return}var t=e[0];var r;var i=0;var n=0;var a=this.buffers[0].data;var o=e.length;for(var s=0;s<o;s++){var u=e[s];var l=s*4;if(s<e.length-1){r=e[s+1]}else{r=u}n=-(r.x-t.x);i=r.y-t.y;var h=Math.sqrt(i*i+n*n);var c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;i/=h;n/=h;i*=c;n*=c;a[l]=u.x+i;a[l+1]=u.y+n;a[l+2]=u.x-i;a[l+3]=u.y-n;t=u}this.buffers[0].update()};e.prototype.update=function(){if(this.textureScale>0){this.build()}else{this.updateVertices()}};return e}(l.MeshGeometry);var n=function(o){c(e,o);function e(e,t,r){if(r===void 0){r=0}var i=this;var n=new f(e.height,t,r);var a=new l.MeshMaterial(e);if(r>0){e.baseTexture.wrapMode=s.WRAP_MODES.REPEAT}i=o.call(this,n,a)||this;i.autoUpdate=true;return i}e.prototype._render=function(e){var t=this.geometry;if(this.autoUpdate||t._width!==this.shader.texture.height){t._width=this.shader.texture.height;t.update()}o.prototype._render.call(this,e)};return e}(l.Mesh);var a=function(o){c(e,o);function e(e,t,r){var i=this;var n=new u(e.width,e.height,t,r);var a=new l.MeshMaterial(h.Texture.WHITE);i=o.call(this,n,a)||this;i.texture=e;return i}e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry;e.width=this.shader.texture.width;e.height=this.shader.texture.height;e.build()};Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){if(this.shader.texture===e){return}this.shader.texture=e;this._textureID=-1;if(e.baseTexture.valid){this.textureUpdated()}else{e.once("update",this.textureUpdated,this)}},enumerable:false,configurable:true});e.prototype._render=function(e){if(this._textureID!==this.shader.texture._updateID){this.textureUpdated()}o.prototype._render.call(this,e)};e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this);o.prototype.destroy.call(this,e)};return e}(l.Mesh);var o=function(u){c(e,u);function e(e,t,r,i,n){if(e===void 0){e=h.Texture.EMPTY}var a=this;var o=new l.MeshGeometry(t,r,i);o.getBuffer("aVertexPosition").static=false;var s=new l.MeshMaterial(e);a=u.call(this,o,s,null,n)||this;a.autoUpdate=true;return a}Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:false,configurable:true});e.prototype._render=function(e){if(this.autoUpdate){this.geometry.getBuffer("aVertexPosition").update()}u.prototype._render.call(this,e)};return e}(l.Mesh);var d=10;var p=function(o){c(e,o);function e(e,t,r,i,n){if(t===void 0){t=d}if(r===void 0){r=d}if(i===void 0){i=d}if(n===void 0){n=d}var a=o.call(this,h.Texture.WHITE,4,4)||this;a._origWidth=e.orig.width;a._origHeight=e.orig.height;a._width=a._origWidth;a._height=a._origHeight;a._leftWidth=t;a._rightWidth=i;a._topHeight=r;a._bottomHeight=n;a.texture=e;return a}e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;this._refresh()};Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:false,configurable:true});e.prototype.updateHorizontalVertices=function(){var e=this.vertices;var t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t;e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t;e[25]=e[27]=e[29]=e[31]=this._height};e.prototype.updateVerticalVertices=function(){var e=this.vertices;var t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t;e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t;e[6]=e[14]=e[22]=e[30]=this._width};e.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth;var t=this._width>e?1:this._width/e;var r=this._topHeight+this._bottomHeight;var i=this._height>r?1:this._height/r;var n=Math.min(t,i);return n};Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e;this._refresh()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e;this._refresh()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e;this._refresh()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e;this._refresh()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e;this._refresh()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e;this._refresh()},enumerable:false,configurable:true});e.prototype._refresh=function(){var e=this.texture;var t=this.geometry.buffers[1].data;this._origWidth=e.orig.width;this._origHeight=e.orig.height;var r=1/this._origWidth;var i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0;t[1]=t[3]=t[5]=t[7]=0;t[6]=t[14]=t[22]=t[30]=1;t[25]=t[27]=t[29]=t[31]=1;t[2]=t[10]=t[18]=t[26]=r*this._leftWidth;t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth;t[9]=t[11]=t[13]=t[15]=i*this._topHeight;t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight;this.updateHorizontalVertices();this.updateVerticalVertices();this.geometry.buffers[0].update();this.geometry.buffers[1].update()};return e}(a);r.NineSlicePlane=p;r.PlaneGeometry=u;r.RopeGeometry=f;r.SimpleMesh=o;r.SimplePlane=a;r.SimpleRope=n},{"@pixi/constants":3,"@pixi/core":4,"@pixi/mesh":18}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var u=e("@pixi/core");var a=e("@pixi/math");var l=e("@pixi/constants");var i=e("@pixi/display");var p=e("@pixi/settings");var o=e("@pixi/utils");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function h(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){function e(e,t){this.uvBuffer=e;this.uvMatrix=t;this.data=null;this._bufferUpdateId=-1;this._textureUpdateId=-1;this._updateID=0}e.prototype.update=function(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID){return}this._bufferUpdateId=this.uvBuffer._updateID;this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;if(!this.data||this.data.length!==t.length){this.data=new Float32Array(t.length)}this.uvMatrix.multiplyUvs(t,this.data);this._updateID++};return e}();var c=new a.Point;var f=new a.Polygon;var d=function(a){h(r,a);function r(e,t,r,i){if(i===void 0){i=l.DRAW_MODES.TRIANGLES}var n=a.call(this)||this;n.geometry=e;e.refCount++;n.shader=t;n.state=r||u.State.for2d();n.drawMode=i;n.start=0;n.size=0;n.uvs=null;n.indices=null;n.vertexData=new Float32Array(1);n.vertexDirty=0;n._transformID=-1;n._roundPixels=p.settings.ROUND_PIXELS;n.batchUvs=null;return n}Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){if(this._roundPixels!==e){this._transformID=-1}this._roundPixels=e},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"tint",{get:function(){return this.shader.tint},set:function(e){this.shader.tint=e},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture=e},enumerable:false,configurable:true});r.prototype._render=function(e){var t=this.geometry.buffers[0].data;if(this.shader.batchable&&this.drawMode===l.DRAW_MODES.TRIANGLES&&t.length<r.BATCHABLE_SIZE*2){this._renderToBatch(e)}else{this._renderDefault(e)}};r.prototype._renderDefault=function(e){var t=this.shader;t.alpha=this.worldAlpha;if(t.update){t.update()}e.batch.flush();if(t.program.uniformData.translationMatrix){t.uniforms.translationMatrix=this.transform.worldTransform.toArray(true)}e.shader.bind(t);e.state.set(this.state);e.geometry.bind(this.geometry,t);e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)};r.prototype._renderToBatch=function(e){var t=this.geometry;if(this.shader.uvMatrix){this.shader.uvMatrix.update();this.calculateUvs()}this.calculateVertices();this.indices=t.indexBuffer.data;this._tintRGB=this.shader._tintRGB;this._texture=this.shader.texture;var r=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[r]);e.plugins[r].render(this)};r.prototype.calculateVertices=function(){var e=this.geometry;var t=e.buffers[0].data;if(e.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID){return}this._transformID=this.transform._worldID;if(this.vertexData.length!==t.length){this.vertexData=new Float32Array(t.length)}var r=this.transform.worldTransform;var i=r.a;var n=r.b;var a=r.c;var o=r.d;var s=r.tx;var u=r.ty;var l=this.vertexData;for(var h=0;h<l.length/2;h++){var c=t[h*2];var f=t[h*2+1];l[h*2]=i*c+a*f+s;l[h*2+1]=n*c+o*f+u}if(this._roundPixels){var d=p.settings.RESOLUTION;for(var h=0;h<l.length;++h){l[h]=Math.round((l[h]*d|0)/d)}}this.vertexDirty=e.vertexDirtyId};r.prototype.calculateUvs=function(){var e=this.geometry.buffers[1];if(!this.shader.uvMatrix.isSimple){if(!this.batchUvs){this.batchUvs=new s(e,this.shader.uvMatrix)}this.batchUvs.update();this.uvs=this.batchUvs.data}else{this.uvs=e.data}};r.prototype._calculateBounds=function(){this.calculateVertices();this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)};r.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y)){return false}this.worldTransform.applyInverse(e,c);var t=this.geometry.getBuffer("aVertexPosition").data;var r=f.points;var i=this.geometry.getIndex().data;var n=i.length;var a=this.drawMode===4?3:1;for(var o=0;o+2<n;o+=a){var s=i[o]*2;var u=i[o+1]*2;var l=i[o+2]*2;r[0]=t[s];r[1]=t[s+1];r[2]=t[u];r[3]=t[u+1];r[4]=t[l];r[5]=t[l+1];if(f.contains(c.x,c.y)){return true}}return false};r.prototype.destroy=function(e){a.prototype.destroy.call(this,e);this.geometry.refCount--;if(this.geometry.refCount===0){this.geometry.dispose()}this.geometry=null;this.shader=null;this.state=null;this.uvs=null;this.indices=null;this.vertexData=null};r.BATCHABLE_SIZE=100;return r}(i.Container);var v="varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n";var m="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n";var g=function(n){h(e,n);function e(e,t){var r=this;var i={uSampler:e,alpha:1,uTextureMatrix:a.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t);if(t.uniforms){Object.assign(i,t.uniforms)}r=n.call(this,t.program||u.Program.from(m,v),i)||this;r._colorDirty=false;r.uvMatrix=new u.TextureMatrix(e);r.batchable=t.program===undefined;r.pluginName=t.pluginName;r.tint=t.tint;r.alpha=t.alpha;return r}Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){if(this.uniforms.uSampler!==e){this.uniforms.uSampler=e;this.uvMatrix.texture=e}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(e){if(e===this._alpha){return}this._alpha=e;this._colorDirty=true},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(e){if(e===this._tint){return}this._tint=e;this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16);this._colorDirty=true},enumerable:false,configurable:true});e.prototype.update=function(){if(this._colorDirty){this._colorDirty=false;var e=this.texture.baseTexture;o.premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}if(this.uvMatrix.update()){this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord}};return e}(u.Shader);var y=function(s){h(e,s);function e(e,t,r){var i=s.call(this)||this;var n=new u.Buffer(e);var a=new u.Buffer(t,true);var o=new u.Buffer(r,true,true);i.addAttribute("aVertexPosition",n,2,false,l.TYPES.FLOAT).addAttribute("aTextureCoord",a,2,false,l.TYPES.FLOAT).addIndex(o);i._updateId=-1;return i}Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:false,configurable:true});return e}(u.Geometry);r.Mesh=d;r.MeshBatchUvs=s;r.MeshGeometry=y;r.MeshMaterial=g},{"@pixi/constants":3,"@pixi/core":4,"@pixi/display":5,"@pixi/math":16,"@pixi/settings":26,"@pixi/utils":34}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var f=e("@pixi/core");var d=e("@pixi/sprite");var i=e("@pixi/display");var n=e("@pixi/math");var p=e("@pixi/utils");var v=e("@pixi/settings");var m=new n.Matrix;i.DisplayObject.prototype._cacheAsBitmap=false;i.DisplayObject.prototype._cacheData=null;var a=function(){function e(){this.textureCacheId=null;this.originalRender=null;this.originalRenderCanvas=null;this.originalCalculateBounds=null;this.originalGetLocalBounds=null;this.originalUpdateTransform=null;this.originalDestroy=null;this.originalMask=null;this.originalFilterArea=null;this.originalContainsPoint=null;this.sprite=null}return e}();Object.defineProperties(i.DisplayObject.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap===e){return}this._cacheAsBitmap=e;var t;if(e){if(!this._cacheData){this._cacheData=new a}t=this._cacheData;t.originalRender=this.render;t.originalRenderCanvas=this.renderCanvas;t.originalUpdateTransform=this.updateTransform;t.originalCalculateBounds=this.calculateBounds;t.originalGetLocalBounds=this.getLocalBounds;t.originalDestroy=this.destroy;t.originalContainsPoint=this.containsPoint;t.originalMask=this._mask;t.originalFilterArea=this.filterArea;this.render=this._renderCached;this.renderCanvas=this._renderCachedCanvas;this.destroy=this._cacheAsBitmapDestroy}else{t=this._cacheData;if(t.sprite){this._destroyCachedDisplayObject()}this.render=t.originalRender;this.renderCanvas=t.originalRenderCanvas;this.calculateBounds=t.originalCalculateBounds;this.getLocalBounds=t.originalGetLocalBounds;this.destroy=t.originalDestroy;this.updateTransform=t.originalUpdateTransform;this.containsPoint=t.originalContainsPoint;this._mask=t.originalMask;this.filterArea=t.originalFilterArea}}}});i.DisplayObject.prototype._renderCached=function e(t){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObject(t);this._cacheData.sprite.transform._worldID=this.transform._worldID;this._cacheData.sprite.worldAlpha=this.worldAlpha;this._cacheData.sprite._render(t)};i.DisplayObject.prototype._initCachedDisplayObject=function e(t){if(this._cacheData&&this._cacheData.sprite){return}var r=this.alpha;this.alpha=1;t.batch.flush();var i=this.getLocalBounds(null,true).clone();if(this.filters){var n=this.filters[0].padding;i.pad(n)}i.ceil(v.settings.RESOLUTION);var a=t.renderTexture.current;var o=t.renderTexture.sourceFrame.clone();var s=t.projection.transform;var u=f.RenderTexture.create({width:i.width,height:i.height});var l="cacheAsBitmap_"+p.uid();this._cacheData.textureCacheId=l;f.BaseTexture.addToCache(u.baseTexture,l);f.Texture.addToCache(u,l);var h=this.transform.localTransform.copyTo(m).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender;t.render(this,u,true,h,false);t.projection.transform=s;t.renderTexture.bind(a,o);this.render=this._renderCached;this.updateTransform=this.displayObjectUpdateTransform;this.calculateBounds=this._calculateCachedBounds;this.getLocalBounds=this._getCachedLocalBounds;this._mask=null;this.filterArea=null;var c=new d.Sprite(u);c.transform.worldTransform=this.transform.worldTransform;c.anchor.x=-(i.x/i.width);c.anchor.y=-(i.y/i.height);c.alpha=r;c._bounds=this._bounds;this._cacheData.sprite=c;this.transform._parentID=-1;if(!this.parent){this.enableTempParent();this.updateTransform();this.disableTempParent(null)}else{this.updateTransform()}this.containsPoint=c.containsPoint.bind(c)};i.DisplayObject.prototype._renderCachedCanvas=function e(t){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObjectCanvas(t);this._cacheData.sprite.worldAlpha=this.worldAlpha;this._cacheData.sprite._renderCanvas(t)};i.DisplayObject.prototype._initCachedDisplayObjectCanvas=function e(t){if(this._cacheData&&this._cacheData.sprite){return}var r=this.getLocalBounds(null,true);var i=this.alpha;this.alpha=1;var n=t.context;var a=t._projTransform;r.ceil(v.settings.RESOLUTION);var o=f.RenderTexture.create({width:r.width,height:r.height});var s="cacheAsBitmap_"+p.uid();this._cacheData.textureCacheId=s;f.BaseTexture.addToCache(o.baseTexture,s);f.Texture.addToCache(o,s);var u=m;this.transform.localTransform.copyTo(u);u.invert();u.tx-=r.x;u.ty-=r.y;this.renderCanvas=this._cacheData.originalRenderCanvas;t.render(this,o,true,u,false);t.context=n;t._projTransform=a;this.renderCanvas=this._renderCachedCanvas;this.updateTransform=this.displayObjectUpdateTransform;this.calculateBounds=this._calculateCachedBounds;this.getLocalBounds=this._getCachedLocalBounds;this._mask=null;this.filterArea=null;var l=new d.Sprite(o);l.transform.worldTransform=this.transform.worldTransform;l.anchor.x=-(r.x/r.width);l.anchor.y=-(r.y/r.height);l.alpha=i;l._bounds=this._bounds;this._cacheData.sprite=l;this.transform._parentID=-1;if(!this.parent){this.parent=t._tempDisplayObjectParent;this.updateTransform();this.parent=null}else{this.updateTransform()}this.containsPoint=l.containsPoint.bind(l)};i.DisplayObject.prototype._calculateCachedBounds=function e(){this._bounds.clear();this._cacheData.sprite.transform._worldID=this.transform._worldID;this._cacheData.sprite._calculateBounds();this._bounds.updateID=this._boundsID};i.DisplayObject.prototype._getCachedLocalBounds=function e(){return this._cacheData.sprite.getLocalBounds(null)};i.DisplayObject.prototype._destroyCachedDisplayObject=function e(){this._cacheData.sprite._texture.destroy(true);this._cacheData.sprite=null;f.BaseTexture.removeFromCache(this._cacheData.textureCacheId);f.Texture.removeFromCache(this._cacheData.textureCacheId);this._cacheData.textureCacheId=null};i.DisplayObject.prototype._cacheAsBitmapDestroy=function e(t){this.cacheAsBitmap=false;this.destroy(t)};r.CacheData=a},{"@pixi/core":4,"@pixi/display":5,"@pixi/math":16,"@pixi/settings":26,"@pixi/sprite":29,"@pixi/utils":34}],20:[function(e,t,r){"use strict";var i=e("@pixi/display");i.DisplayObject.prototype.name=null;i.Container.prototype.getChildByName=function e(t,r){for(var i=0,n=this.children.length;i<n;i++){if(this.children[i].name===t){return this.children[i]}}if(r){for(var i=0,n=this.children.length;i<n;i++){var a=this.children[i];if(!a.getChildByName){continue}var o=this.children[i].getChildByName(t,true);if(o){return o}}}return null}},{"@pixi/display":5}],21:[function(e,t,r){"use strict";var i=e("@pixi/display");var n=e("@pixi/math");i.DisplayObject.prototype.getGlobalPosition=function e(t,r){if(t===void 0){t=new n.Point}if(r===void 0){r=false}if(this.parent){this.parent.toGlobal(this.position,t,r)}else{t.x=this.position.x;t.y=this.position.y}return t}},{"@pixi/display":5,"@pixi/math":16}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var s=e("@pixi/constants");var i=e("@pixi/display");var m=e("@pixi/utils");var u=e("@pixi/core");var n=e("@pixi/math");var a=function(e,t){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return a(e,t)};function l(e,t){a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(o){l(e,o);function e(e,t,r,i){if(e===void 0){e=1500}if(r===void 0){r=16384}if(i===void 0){i=false}var n=o.call(this)||this;var a=16384;if(r>a){r=a}n._properties=[false,true,false,false,false];n._maxSize=e;n._batchSize=r;n._buffers=null;n._bufferUpdateIDs=[];n._updateID=0;n.interactiveChildren=false;n.blendMode=s.BLEND_MODES.NORMAL;n.autoResize=i;n.roundPixels=true;n.baseTexture=null;n.setProperties(t);n._tint=0;n.tintRgb=new Float32Array(4);n.tint=16777215;return n}e.prototype.setProperties=function(e){if(e){this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0];this._properties[1]="position"in e?!!e.position:this._properties[1];this._properties[2]="rotation"in e?!!e.rotation:this._properties[2];this._properties[3]="uvs"in e?!!e.uvs:this._properties[3];this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4]}};e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e;m.hex2rgb(e,this.tintRgb)},enumerable:false,configurable:true});e.prototype.render=function(e){var t=this;if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}if(!this.baseTexture){this.baseTexture=this.children[0]._texture.baseTexture;if(!this.baseTexture.valid){this.baseTexture.once("update",function(){return t.onChildrenChange(0)})}}e.batch.setObjectRenderer(e.plugins.particle);e.plugins.particle.render(this)};e.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);while(this._bufferUpdateIDs.length<t){this._bufferUpdateIDs.push(0)}this._bufferUpdateIDs[t]=++this._updateID};e.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e){this._buffers[e].destroy()}this._buffers=null}};e.prototype.destroy=function(e){o.prototype.destroy.call(this,e);this.dispose();this._properties=null;this._buffers=null;this._bufferUpdateIDs=null};return e}(i.Container);var h=function(){function e(e,t,r){this.geometry=new u.Geometry;this.indexBuffer=null;this.size=r;this.dynamicProperties=[];this.staticProperties=[];for(var i=0;i<e.length;++i){var n=e[i];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||s.TYPES.FLOAT,offset:n.offset};if(t[i]){this.dynamicProperties.push(n)}else{this.staticProperties.push(n)}}this.staticStride=0;this.staticBuffer=null;this.staticData=null;this.staticDataUint32=null;this.dynamicStride=0;this.dynamicBuffer=null;this.dynamicData=null;this.dynamicDataUint32=null;this._updateID=0;this.initBuffers()}e.prototype.initBuffers=function(){var e=this.geometry;var t=0;this.indexBuffer=new u.Buffer(m.createIndicesForQuads(this.size),true,true);e.addIndex(this.indexBuffer);this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];i.offset=t;t+=i.size;this.dynamicStride+=i.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n);this.dynamicDataUint32=new Uint32Array(n);this.dynamicBuffer=new u.Buffer(this.dynamicData,false,false);var a=0;this.staticStride=0;for(var r=0;r<this.staticProperties.length;++r){var i=this.staticProperties[r];i.offset=a;a+=i.size;this.staticStride+=i.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o);this.staticDataUint32=new Uint32Array(o);this.staticBuffer=new u.Buffer(this.staticData,true,false);for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];e.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===s.TYPES.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var r=0;r<this.staticProperties.length;++r){var i=this.staticProperties[r];e.addAttribute(i.attributeName,this.staticBuffer,0,i.type===s.TYPES.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}};e.prototype.uploadDynamic=function(e,t,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(e,t,r,n.type===s.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++};e.prototype.uploadStatic=function(e,t,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(e,t,r,n.type===s.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++};e.prototype.destroy=function(){this.indexBuffer=null;this.dynamicProperties=null;this.dynamicBuffer=null;this.dynamicData=null;this.dynamicDataUint32=null;this.staticProperties=null;this.staticBuffer=null;this.staticData=null;this.staticDataUint32=null;this.geometry.destroy()};return e}();var c="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}";var f="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n";var d=function(r){l(e,r);function e(e){var t=r.call(this,e)||this;t.shader=null;t.properties=null;t.tempMatrix=new n.Matrix;t.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:t.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:t.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:t.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:t.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:s.TYPES.UNSIGNED_BYTE,uploadFunction:t.uploadTint,offset:0}];t.shader=u.Shader.from(f,c,{});t.state=u.State.for2d();return t}e.prototype.render=function(e){var t=e.children;var r=e._maxSize;var i=e._batchSize;var n=this.renderer;var a=t.length;if(a===0){return}else if(a>r&&!e.autoResize){a=r}var o=e._buffers;if(!o){o=e._buffers=this.generateBuffers(e)}var s=t[0]._texture.baseTexture;this.state.blendMode=m.correctBlendMode(e.blendMode,s.alphaMode);n.state.set(this.state);var u=n.gl;var l=e.worldTransform.copyTo(this.tempMatrix);l.prepend(n.globalUniforms.uniforms.projectionMatrix);this.shader.uniforms.translationMatrix=l.toArray(true);this.shader.uniforms.uColor=m.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,s.alphaMode);this.shader.uniforms.uSampler=s;this.renderer.shader.bind(this.shader);var h=false;for(var c=0,f=0;c<a;c+=i,f+=1){var d=a-c;if(d>i){d=i}if(f>=o.length){o.push(this._generateOneMoreBuffer(e))}var p=o[f];p.uploadDynamic(t,c,d);var v=e._bufferUpdateIDs[f]||0;h=h||p._updateID<v;if(h){p._updateID=e._updateID;p.uploadStatic(t,c,d)}n.geometry.bind(p.geometry);u.drawElements(u.TRIANGLES,d*6,u.UNSIGNED_SHORT,0)}};e.prototype.generateBuffers=function(e){var t=[];var r=e._maxSize;var i=e._batchSize;var n=e._properties;for(var a=0;a<r;a+=i){t.push(new h(this.properties,n,i))}return t};e.prototype._generateOneMoreBuffer=function(e){var t=e._batchSize;var r=e._properties;return new h(this.properties,r,t)};e.prototype.uploadVertices=function(e,t,r,i,n,a){var o=0;var s=0;var u=0;var l=0;for(var h=0;h<r;++h){var c=e[t+h];var f=c._texture;var d=c.scale.x;var p=c.scale.y;var v=f.trim;var m=f.orig;if(v){s=v.x-c.anchor.x*m.width;o=s+v.width;l=v.y-c.anchor.y*m.height;u=l+v.height}else{o=m.width*(1-c.anchor.x);s=m.width*-c.anchor.x;u=m.height*(1-c.anchor.y);l=m.height*-c.anchor.y}i[a]=s*d;i[a+1]=l*p;i[a+n]=o*d;i[a+n+1]=l*p;i[a+n*2]=o*d;i[a+n*2+1]=u*p;i[a+n*3]=s*d;i[a+n*3+1]=u*p;a+=n*4}};e.prototype.uploadPosition=function(e,t,r,i,n,a){for(var o=0;o<r;o++){var s=e[t+o].position;i[a]=s.x;i[a+1]=s.y;i[a+n]=s.x;i[a+n+1]=s.y;i[a+n*2]=s.x;i[a+n*2+1]=s.y;i[a+n*3]=s.x;i[a+n*3+1]=s.y;a+=n*4}};e.prototype.uploadRotation=function(e,t,r,i,n,a){for(var o=0;o<r;o++){var s=e[t+o].rotation;i[a]=s;i[a+n]=s;i[a+n*2]=s;i[a+n*3]=s;a+=n*4}};e.prototype.uploadUvs=function(e,t,r,i,n,a){for(var o=0;o<r;++o){var s=e[t+o]._texture._uvs;if(s){i[a]=s.x0;i[a+1]=s.y0;i[a+n]=s.x1;i[a+n+1]=s.y1;i[a+n*2]=s.x2;i[a+n*2+1]=s.y2;i[a+n*3]=s.x3;i[a+n*3+1]=s.y3;a+=n*4}else{i[a]=0;i[a+1]=0;i[a+n]=0;i[a+n+1]=0;i[a+n*2]=0;i[a+n*2+1]=0;i[a+n*3]=0;i[a+n*3+1]=0;a+=n*4}}};e.prototype.uploadTint=function(e,t,r,i,n,a){for(var o=0;o<r;++o){var s=e[t+o];var u=s._texture.baseTexture.alphaMode>0;var l=s.alpha;var h=l<1&&u?m.premultiplyTint(s._tintRGB,l):s._tintRGB+(l*255<<24);i[a]=h;i[a+n]=h;i[a+n*2]=h;i[a+n*3]=h;a+=n*4}};e.prototype.destroy=function(){r.prototype.destroy.call(this);if(this.shader){this.shader.destroy();this.shader=null}this.tempMatrix=null};return e}(u.ObjectRenderer);r.ParticleContainer=o;r.ParticleRenderer=d},{"@pixi/constants":3,"@pixi/core":4,"@pixi/display":5,"@pixi/math":16,"@pixi/utils":34}],23:[function(e,t,r){"use strict";function i(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var n=e("es6-promise-polyfill");var a=i(e("object-assign"));if(!window.Promise){window.Promise=n.Polyfill}if(!Object.assign){Object.assign=a}var o=16;if(!(Date.now&&Date.prototype.getTime)){Date.now=function e(){return(new Date).getTime()}}if(!(window.performance&&window.performance.now)){var s=Date.now();if(!window.performance){window.performance={}}window.performance.now=function(){return Date.now()-s}}var u=Date.now();var l=["ms","moz","webkit","o"];for(var h=0;h<l.length&&!window.requestAnimationFrame;++h){var c=l[h];window.requestAnimationFrame=window[c+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(e){if(typeof e!=="function"){throw new TypeError(e+"is not a function")}var t=Date.now();var r=o+u-t;if(r<0){r=0}u=t;return window.setTimeout(function(){u=Date.now();e(performance.now())},r)}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(e){return clearTimeout(e)}}if(!Math.sign){Math.sign=function e(t){t=Number(t);if(t===0||isNaN(t)){return t}return t>0?1:-1}}if(!Number.isInteger){Number.isInteger=function e(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t}}if(!window.ArrayBuffer){window.ArrayBuffer=Array}if(!window.Float32Array){window.Float32Array=Array}if(!window.Uint32Array){window.Uint32Array=Array}if(!window.Uint16Array){window.Uint16Array=Array}if(!window.Uint8Array){window.Uint8Array=Array}if(!window.Int32Array){window.Int32Array=Array}},{"es6-promise-polyfill":36,"object-assign":64}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("@pixi/settings");var a=e("@pixi/core");var o=e("@pixi/graphics");var s=e("@pixi/ticker");var n=e("@pixi/display");var u=e("@pixi/text");i.settings.UPLOADS_PER_FRAME=4;var l=function(e,t){l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return l(e,t)};function h(e,t){l(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var c=function(){function e(e){this.maxItemsPerFrame=e;this.itemsLeft=0}e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame};e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0};return e}();function f(e,t){var r=false;if(e&&e._textures&&e._textures.length){for(var i=0;i<e._textures.length;i++){if(e._textures[i]instanceof a.Texture){var n=e._textures[i].baseTexture;if(t.indexOf(n)===-1){t.push(n);r=true}}}}return r}function d(e,t){if(e.baseTexture instanceof a.BaseTexture){var r=e.baseTexture;if(t.indexOf(r)===-1){t.push(r)}return true}return false}function p(e,t){if(e._texture&&e._texture instanceof a.Texture){var r=e._texture.baseTexture;if(t.indexOf(r)===-1){t.push(r)}return true}return false}function v(e,t){if(t instanceof u.Text){t.updateText(true);return true}return false}function m(e,t){if(t instanceof u.TextStyle){var r=t.toFontString();u.TextMetrics.measureFont(r);return true}return false}function g(e,t){if(e instanceof u.Text){if(t.indexOf(e.style)===-1){t.push(e.style)}if(t.indexOf(e)===-1){t.push(e)}var r=e._texture.baseTexture;if(t.indexOf(r)===-1){t.push(r)}return true}return false}function y(e,t){if(e instanceof u.TextStyle){if(t.indexOf(e)===-1){t.push(e)}return true}return false}var _=function(){function e(e){var t=this;this.limiter=new c(i.settings.UPLOADS_PER_FRAME);this.renderer=e;this.uploadHookHelper=null;this.queue=[];this.addHooks=[];this.uploadHooks=[];this.completes=[];this.ticking=false;this.delayedTick=function(){if(!t.queue){return}t.prepareItems()};this.registerFindHook(g);this.registerFindHook(y);this.registerFindHook(f);this.registerFindHook(d);this.registerFindHook(p);this.registerUploadHook(v);this.registerUploadHook(m)}e.prototype.upload=function(e,t){if(typeof e==="function"){t=e;e=null}if(e){this.add(e)}if(this.queue.length){if(t){this.completes.push(t)}if(!this.ticking){this.ticking=true;s.Ticker.system.addOnce(this.tick,this,s.UPDATE_PRIORITY.UTILITY)}}else if(t){t()}};e.prototype.tick=function(){setTimeout(this.delayedTick,0)};e.prototype.prepareItems=function(){this.limiter.beginFrame();while(this.queue.length&&this.limiter.allowedToUpload()){var e=this.queue[0];var t=false;if(e&&!e._destroyed){for(var r=0,i=this.uploadHooks.length;r<i;r++){if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift();t=true;break}}}if(!t){this.queue.shift()}}if(!this.queue.length){this.ticking=false;var n=this.completes.slice(0);this.completes.length=0;for(var r=0,i=n.length;r<i;r++){n[r]()}}else{s.Ticker.system.addOnce(this.tick,this,s.UPDATE_PRIORITY.UTILITY)}};e.prototype.registerFindHook=function(e){if(e){this.addHooks.push(e)}return this};e.prototype.registerUploadHook=function(e){if(e){this.uploadHooks.push(e)}return this};e.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r;t++){if(this.addHooks[t](e,this.queue)){break}}if(e instanceof n.Container){for(var t=e.children.length-1;t>=0;t--){this.add(e.children[t])}}return this};e.prototype.destroy=function(){if(this.ticking){s.Ticker.system.remove(this.tick,this)}this.ticking=false;this.addHooks=null;this.uploadHooks=null;this.renderer=null;this.completes=null;this.queue=null;this.limiter=null;this.uploadHookHelper=null};return e}();function b(e,t){if(t instanceof a.BaseTexture){if(!t._glTextures[e.CONTEXT_UID]){e.texture.bind(t)}return true}return false}function x(e,t){if(!(t instanceof o.Graphics)){return false}var r=t.geometry;t.finishPoly();r.updateBatches();var i=r.batches;for(var n=0;n<i.length;n++){var a=i[n].style.texture;if(a){b(e,a.baseTexture)}}if(!r.batchable){e.geometry.bind(r,t._resolveDirectShader(e))}return true}function w(e,t){if(e instanceof o.Graphics){t.push(e);return true}return false}var E=function(r){h(e,r);function e(e){var t=r.call(this,e)||this;t.uploadHookHelper=t.renderer;t.registerFindHook(w);t.registerUploadHook(b);t.registerUploadHook(x);return t}return e}(_);var S=function(){function e(e){this.maxMilliseconds=e;this.frameStart=0}e.prototype.beginFrame=function(){this.frameStart=Date.now()};e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};return e}();r.BasePrepare=_;r.CountLimiter=c;r.Prepare=E;r.TimeLimiter=S},{"@pixi/core":4,"@pixi/display":5,"@pixi/graphics":13,"@pixi/settings":26,"@pixi/text":32,"@pixi/ticker":33}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e){this.items=[];this._name=e;this._aliasCount=0}e.prototype.emit=function(e,t,r,i,n,a,o,s){if(arguments.length>8){throw new Error("max arguments reached")}var u=this,l=u.name,h=u.items;this._aliasCount++;for(var c=0,f=h.length;c<f;c++){h[c][l](e,t,r,i,n,a,o,s)}if(h===this.items){this._aliasCount--}return this};e.prototype.ensureNonAliasedItems=function(){if(this._aliasCount>0&&this.items.length>1){this._aliasCount=0;this.items=this.items.slice(0)}};e.prototype.add=function(e){if(e[this._name]){this.ensureNonAliasedItems();this.remove(e);this.items.push(e)}return this};e.prototype.remove=function(e){var t=this.items.indexOf(e);if(t!==-1){this.ensureNonAliasedItems();this.items.splice(t,1)}return this};e.prototype.contains=function(e){return this.items.indexOf(e)!==-1};e.prototype.removeAll=function(){this.ensureNonAliasedItems();this.items.length=0;return this};e.prototype.destroy=function(){this.removeAll();this.items=null;this._name=null};Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:false,configurable:true});return e}();Object.defineProperties(i.prototype,{dispatch:{value:i.prototype.emit},run:{value:i.prototype.emit}});r.Runner=i},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var n=i(e("ismobilejs"));var a=n(window.navigator);function o(e){var t=true;if(a.tablet||a.phone){if(a.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);if(i<11){t=false}}}if(a.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);if(i<7){t=false}}}}return t?e:4}function s(){return!a.apple.device}var u={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:o(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:false,autoDensity:false,transparent:false,backgroundColor:0,clearBeforeRender:true,preserveDrawingBuffer:false,width:800,height:600,legacy:false},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:a.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:s(),CREATE_IMAGE_BITMAP:false,ROUND_PIXELS:false};r.isMobile=a;r.settings=u},{ismobilejs:39}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var a=e("@pixi/core");var i=e("@pixi/sprite");var o=e("@pixi/ticker");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function s(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var u=function(i){s(n,i);function n(e,t){if(t===void 0){t=true}var r=i.call(this,e[0]instanceof a.Texture?e[0]:e[0].texture)||this;r._textures=null;r._durations=null;r._autoUpdate=t;r._isConnectedToTicker=false;r.animationSpeed=1;r.loop=true;r.updateAnchor=false;r.onComplete=null;r.onFrameChange=null;r.onLoop=null;r._currentTime=0;r._playing=false;r._previousFrame=null;r.textures=e;return r}n.prototype.stop=function(){if(!this._playing){return}this._playing=false;if(this._autoUpdate&&this._isConnectedToTicker){o.Ticker.shared.remove(this.update,this);this._isConnectedToTicker=false}};n.prototype.play=function(){if(this._playing){return}this._playing=true;if(this._autoUpdate&&!this._isConnectedToTicker){o.Ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH);this._isConnectedToTicker=true}};n.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e;if(t!==this.currentFrame){this.updateTexture()}};n.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e;if(t!==this.currentFrame){this.updateTexture()}this.play()};n.prototype.update=function(e){var t=this.animationSpeed*e;var r=this.currentFrame;if(this._durations!==null){var i=this._currentTime%1*this._durations[this.currentFrame];i+=t/60*1e3;while(i<0){this._currentTime--;i+=this._durations[this.currentFrame]}var n=Math.sign(this.animationSpeed*e);this._currentTime=Math.floor(this._currentTime);while(i>=this._durations[this.currentFrame]){i-=this._durations[this.currentFrame]*n;this._currentTime+=n}this._currentTime+=i/this._durations[this.currentFrame]}else{this._currentTime+=t}if(this._currentTime<0&&!this.loop){this.gotoAndStop(0);if(this.onComplete){this.onComplete()}}else if(this._currentTime>=this._textures.length&&!this.loop){this.gotoAndStop(this._textures.length-1);if(this.onComplete){this.onComplete()}}else if(r!==this.currentFrame){if(this.loop&&this.onLoop){if(this.animationSpeed>0&&this.currentFrame<r){this.onLoop()}else if(this.animationSpeed<0&&this.currentFrame>r){this.onLoop()}}this.updateTexture()}};n.prototype.updateTexture=function(){var e=this.currentFrame;if(this._previousFrame===e){return}this._previousFrame=e;this._texture=this._textures[e];this._textureID=-1;this._textureTrimmedID=-1;this._cachedTint=16777215;this.uvs=this._texture._uvs.uvsFloat32;if(this.updateAnchor){this._anchor.copyFrom(this._texture.defaultAnchor)}if(this.onFrameChange){this.onFrameChange(this.currentFrame)}};n.prototype.destroy=function(e){this.stop();i.prototype.destroy.call(this,e);this.onComplete=null;this.onFrameChange=null;this.onLoop=null};n.fromFrames=function(e){var t=[];for(var r=0;r<e.length;++r){t.push(a.Texture.from(e[r]))}return new n(t)};n.fromImages=function(e){var t=[];for(var r=0;r<e.length;++r){t.push(a.Texture.from(e[r]))}return new n(t)};Object.defineProperty(n.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof a.Texture){this._textures=e;this._durations=null}else{this._textures=[];this._durations=[];for(var t=0;t<e.length;t++){this._textures.push(e[t].texture);this._durations.push(e[t].time)}}this._previousFrame=null;this.gotoAndStop(0);this.updateTexture()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;if(e<0){e+=this._textures.length}return e},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"playing",{get:function(){return this._playing},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){if(e!==this._autoUpdate){this._autoUpdate=e;if(!this._autoUpdate&&this._isConnectedToTicker){o.Ticker.shared.remove(this.update,this);this._isConnectedToTicker=false}else if(this._autoUpdate&&!this._isConnectedToTicker&&this._playing){o.Ticker.shared.add(this.update,this);this._isConnectedToTicker=true}}},enumerable:false,configurable:true});return n}(i.Sprite);r.AnimatedSprite=u},{"@pixi/core":4,"@pixi/sprite":29,"@pixi/ticker":33}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var a=e("@pixi/core");var o=e("@pixi/math");var i=e("@pixi/sprite");var p=e("@pixi/utils");var v=e("@pixi/constants");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function s(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var u=new o.Point;var l=function(n){s(r,n);function r(e,t,r){if(t===void 0){t=100}if(r===void 0){r=100}var i=n.call(this,e)||this;i.tileTransform=new o.Transform;i._width=t;i._height=r;i.uvMatrix=i.texture.uvMatrix||new a.TextureMatrix(e);i.pluginName="tilingSprite";i.uvRespectAnchor=false;return i}Object.defineProperty(r.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e;this.uvMatrix.update(true)},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:false,configurable:true});r.prototype._onTextureUpdate=function(){if(this.uvMatrix){this.uvMatrix.texture=this._texture}this._cachedTint=16777215};r.prototype._render=function(e){var t=this._texture;if(!t||!t.valid){return}this.tileTransform.updateLocalTransform();this.uvMatrix.update();e.batch.setObjectRenderer(e.plugins[this.pluginName]);e.plugins[this.pluginName].render(this)};r.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x;var t=this._height*-this._anchor._y;var r=this._width*(1-this._anchor._x);var i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,i)};r.prototype.getLocalBounds=function(e){if(this.children.length===0){this._bounds.minX=this._width*-this._anchor._x;this._bounds.minY=this._height*-this._anchor._y;this._bounds.maxX=this._width*(1-this._anchor._x);this._bounds.maxY=this._height*(1-this._anchor._y);if(!e){if(!this._localBoundsRect){this._localBoundsRect=new o.Rectangle}e=this._localBoundsRect}return this._bounds.getRectangle(e)}return n.prototype.getLocalBounds.call(this,e)};r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,u);var t=this._width;var r=this._height;var i=-t*this.anchor._x;if(u.x>=i&&u.x<i+t){var n=-r*this.anchor._y;if(u.y>=n&&u.y<n+r){return true}}return false};r.prototype.destroy=function(e){n.prototype.destroy.call(this,e);this.tileTransform=null;this.uvMatrix=null};r.from=function(e,t){if(typeof t==="number"){p.deprecation("5.3.0","TilingSprite.from use options instead of width and height args");t={width:t,height:arguments[2]}}return new r(a.Texture.from(e,t),t.width,t.height)};Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:false,configurable:true});Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:false,configurable:true});return r}(i.Sprite);var h="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";var c="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n";var f="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n";var m=new o.Matrix;var d=function(i){s(e,i);function e(e){var t=i.call(this,e)||this;var r={globals:t.renderer.globalUniforms};t.shader=a.Shader.from(h,c,r);t.simpleShader=a.Shader.from(h,f,r);t.quad=new a.QuadUv;t.state=a.State.for2d();return t}e.prototype.render=function(e){var t=this.renderer;var r=this.quad;var i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x;i[1]=i[3]=e._height*-e.anchor.y;i[2]=i[4]=e._width*(1-e.anchor.x);i[5]=i[7]=e._height*(1-e.anchor.y);if(e.uvRespectAnchor){i=r.uvs;i[0]=i[6]=-e.anchor.x;i[1]=i[3]=-e.anchor.y;i[2]=i[4]=1-e.anchor.x;i[5]=i[7]=1-e.anchor.y}r.invalidate();var n=e._texture;var a=n.baseTexture;var o=e.tileTransform.localTransform;var s=e.uvMatrix;var u=a.isPowerOfTwo&&n.frame.width===a.width&&n.frame.height===a.height;if(u){if(!a._glTextures[t.CONTEXT_UID]){if(a.wrapMode===v.WRAP_MODES.CLAMP){a.wrapMode=v.WRAP_MODES.REPEAT}}else{u=a.wrapMode!==v.WRAP_MODES.CLAMP}}var l=u?this.simpleShader:this.shader;var h=n.width;var c=n.height;var f=e._width;var d=e._height;m.set(o.a*h/f,o.b*h/d,o.c*c/f,o.d*c/d,o.tx/f,o.ty/d);m.invert();if(u){m.prepend(s.mapCoord)}else{l.uniforms.uMapCoord=s.mapCoord.toArray(true);l.uniforms.uClampFrame=s.uClampFrame;l.uniforms.uClampOffset=s.uClampOffset}l.uniforms.uTransform=m.toArray(true);l.uniforms.uColor=p.premultiplyTintToRgba(e.tint,e.worldAlpha,l.uniforms.uColor,a.alphaMode);l.uniforms.translationMatrix=e.transform.worldTransform.toArray(true);l.uniforms.uSampler=n;t.shader.bind(l);t.geometry.bind(r);this.state.blendMode=p.correctBlendMode(e.blendMode,a.alphaMode);t.state.set(this.state);t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)};return e}(a.ObjectRenderer);r.TilingSprite=l;r.TilingSpriteRenderer=d},{"@pixi/constants":3,"@pixi/core":4,"@pixi/math":16,"@pixi/sprite":29,"@pixi/utils":34}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var a=e("@pixi/constants");var o=e("@pixi/core");var i=e("@pixi/display");var s=e("@pixi/math");var y=e("@pixi/settings");var u=e("@pixi/utils");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function l(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var h=new s.Point;var c=new Uint16Array([0,1,2,0,2,3]);var f=function(i){l(n,i);function n(e){var t=i.call(this)||this;t._anchor=new s.ObservablePoint(t._onAnchorUpdate,t,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0);t._texture=null;t._width=0;t._height=0;t._tint=null;t._tintRGB=null;t.tint=16777215;t.blendMode=a.BLEND_MODES.NORMAL;t._cachedTint=16777215;t.uvs=null;t.texture=e||o.Texture.EMPTY;t.vertexData=new Float32Array(8);t.vertexTrimmedData=null;t._transformID=-1;t._textureID=-1;t._transformTrimmedID=-1;t._textureTrimmedID=-1;t.indices=c;t.pluginName="batch";t.isSprite=true;t._roundPixels=y.settings.ROUND_PIXELS;return t}n.prototype._onTextureUpdate=function(){this._textureID=-1;this._textureTrimmedID=-1;this._cachedTint=16777215;if(this._width){this.scale.x=u.sign(this.scale.x)*this._width/this._texture.orig.width}if(this._height){this.scale.y=u.sign(this.scale.y)*this._height/this._texture.orig.height}};n.prototype._onAnchorUpdate=function(){this._transformID=-1;this._transformTrimmedID=-1};n.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID){return}if(this._textureID!==e._updateID){this.uvs=this._texture._uvs.uvsFloat32}this._transformID=this.transform._worldID;this._textureID=e._updateID;var t=this.transform.worldTransform;var r=t.a;var i=t.b;var n=t.c;var a=t.d;var o=t.tx;var s=t.ty;var u=this.vertexData;var l=e.trim;var h=e.orig;var c=this._anchor;var f=0;var d=0;var p=0;var v=0;if(l){d=l.x-c._x*h.width;f=d+l.width;v=l.y-c._y*h.height;p=v+l.height}else{d=-c._x*h.width;f=d+h.width;v=-c._y*h.height;p=v+h.height}u[0]=r*d+n*v+o;u[1]=a*v+i*d+s;u[2]=r*f+n*v+o;u[3]=a*v+i*f+s;u[4]=r*f+n*p+o;u[5]=a*p+i*f+s;u[6]=r*d+n*p+o;u[7]=a*p+i*d+s;if(this._roundPixels){var m=y.settings.RESOLUTION;for(var g=0;g<u.length;++g){u[g]=Math.round((u[g]*m|0)/m)}}};n.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData){this.vertexTrimmedData=new Float32Array(8)}else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID){return}this._transformTrimmedID=this.transform._worldID;this._textureTrimmedID=this._texture._updateID;var e=this._texture;var t=this.vertexTrimmedData;var r=e.orig;var i=this._anchor;var n=this.transform.worldTransform;var a=n.a;var o=n.b;var s=n.c;var u=n.d;var l=n.tx;var h=n.ty;var c=-i._x*r.width;var f=c+r.width;var d=-i._y*r.height;var p=d+r.height;t[0]=a*c+s*d+l;t[1]=u*d+o*c+h;t[2]=a*f+s*d+l;t[3]=u*d+o*f+h;t[4]=a*f+s*p+l;t[5]=u*p+o*f+h;t[6]=a*c+s*p+l;t[7]=u*p+o*c+h};n.prototype._render=function(e){this.calculateVertices();e.batch.setObjectRenderer(e.plugins[this.pluginName]);e.plugins[this.pluginName].render(this)};n.prototype._calculateBounds=function(){var e=this._texture.trim;var t=this._texture.orig;if(!e||e.width===t.width&&e.height===t.height){this.calculateVertices();this._bounds.addQuad(this.vertexData)}else{this.calculateTrimmedVertices();this._bounds.addQuad(this.vertexTrimmedData)}};n.prototype.getLocalBounds=function(e){if(this.children.length===0){this._bounds.minX=this._texture.orig.width*-this._anchor._x;this._bounds.minY=this._texture.orig.height*-this._anchor._y;this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x);this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y);if(!e){if(!this._localBoundsRect){this._localBoundsRect=new s.Rectangle}e=this._localBoundsRect}return this._bounds.getRectangle(e)}return i.prototype.getLocalBounds.call(this,e)};n.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,h);var t=this._texture.orig.width;var r=this._texture.orig.height;var i=-t*this.anchor.x;var n=0;if(h.x>=i&&h.x<i+t){n=-r*this.anchor.y;if(h.y>=n&&h.y<n+r){return true}}return false};n.prototype.destroy=function(e){i.prototype.destroy.call(this,e);this._texture.off("update",this._onTextureUpdate,this);this._anchor=null;var t=typeof e==="boolean"?e:e&&e.texture;if(t){var r=typeof e==="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null};n.from=function(e,t){var r=e instanceof o.Texture?e:o.Texture.from(e,t);return new n(r)};Object.defineProperty(n.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){if(this._roundPixels!==e){this._transformID=-1}this._roundPixels=e},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=u.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width;this._width=e},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=u.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height;this._height=e},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e;this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(e){if(this._texture===e){return}if(this._texture){this._texture.off("update",this._onTextureUpdate,this)}this._texture=e||o.Texture.EMPTY;this._cachedTint=16777215;this._textureID=-1;this._textureTrimmedID=-1;if(e){if(e.baseTexture.valid){this._onTextureUpdate()}else{e.once("update",this._onTextureUpdate,this)}}},enumerable:false,configurable:true});return n}(i.Container);r.Sprite=f},{"@pixi/constants":3,"@pixi/core":4,"@pixi/display":5,"@pixi/math":16,"@pixi/settings":26,"@pixi/utils":34}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var c=e("@pixi/math");var f=e("@pixi/core");var i=e("@pixi/utils");var s=e("@pixi/loaders");var u=function(){function h(e,t,r){if(r===void 0){r=null}this._texture=e instanceof f.Texture?e:null;this.baseTexture=e instanceof f.BaseTexture?e:this._texture.baseTexture;this.textures={};this.animations={};this.data=t;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null));this._frames=this.data.frames;this._frameKeys=Object.keys(this._frames);this._batchIndex=0;this._callback=null}h.prototype._updateResolution=function(e){if(e===void 0){e=null}var t=this.data.meta.scale;var r=i.getResolutionOfUrl(e,null);if(r===null){r=t!==undefined?parseFloat(t):1}if(r!==1){this.baseTexture.setResolution(r)}return r};h.prototype.parse=function(e){this._batchIndex=0;this._callback=e;if(this._frameKeys.length<=h.BATCH_SIZE){this._processFrames(0);this._processAnimations();this._parseComplete()}else{this._nextBatch()}};h.prototype._processFrames=function(e){var t=e;var r=h.BATCH_SIZE;while(t-e<r&&t<this._frameKeys.length){var i=this._frameKeys[t];var n=this._frames[i];var a=n.frame;if(a){var o=null;var s=null;var u=n.trimmed!==false&&n.sourceSize?n.sourceSize:n.frame;var l=new c.Rectangle(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);if(n.rotated){o=new c.Rectangle(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution)}else{o=new c.Rectangle(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)}if(n.trimmed!==false&&n.spriteSourceSize){s=new c.Rectangle(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)}this.textures[i]=new f.Texture(this.baseTexture,o,l,s,n.rotated?2:0,n.anchor);f.Texture.addToCache(this.textures[i],i)}t++}};h.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var r=0;r<e[t].length;r++){var i=e[t][r];this.animations[t].push(this.textures[i])}}};h.prototype._parseComplete=function(){var e=this._callback;this._callback=null;this._batchIndex=0;e.call(this,this.textures)};h.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*h.BATCH_SIZE);this._batchIndex++;setTimeout(function(){if(e._batchIndex*h.BATCH_SIZE<e._frameKeys.length){e._nextBatch()}else{e._processAnimations();e._parseComplete()}},0)};h.prototype.destroy=function(e){var t;if(e===void 0){e=false}for(var r in this.textures){this.textures[r].destroy()}this._frames=null;this._frameKeys=null;this.data=null;this.textures=null;if(e){(t=this._texture)===null||t===void 0?void 0:t.destroy();this.baseTexture.destroy()}this._texture=null;this.baseTexture=null};h.BATCH_SIZE=1e3;return h}();var n=function(){function o(){}o.use=function(i,n){var e=this;var t=i.name+"_image";if(!i.data||i.type!==s.LoaderResource.TYPE.JSON||!i.data.frames||e.resources[t]){n();return}var r={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i};var a=o.getResourcePath(i,e.baseUrl);e.add(t,a,r,function e(t){if(t.error){n(t.error);return}var r=new u(t.texture,i.data,i.url);r.parse(function(){i.spritesheet=r;i.textures=r.textures;n()})})};o.getResourcePath=function(e,t){if(e.isDataUrl){return e.data.meta.image}return i.url.resolve(e.url.replace(t,""),e.data.meta.image)};return o}();r.Spritesheet=u;r.SpritesheetLoader=n},{"@pixi/core":4,"@pixi/loaders":15,"@pixi/math":16,"@pixi/utils":34}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var ee=e("@pixi/math");var f=e("@pixi/settings");var te=e("@pixi/mesh");var re=e("@pixi/utils");var ie=e("@pixi/core");var I=e("@pixi/text");var i=e("@pixi/display");var v=e("@pixi/loaders");var n=function(e,t){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return n(e,t)};function a(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var O=function(){function e(){this.info=[];this.common=[];this.page=[];this.char=[];this.kerning=[]}return e}();var o=function(){function e(){}e.test=function(e){return typeof e==="string"&&e.indexOf("info face=")===0};e.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm);var r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var i in t){var n=t[i].match(/^[a-z]+/gm)[0];var a=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm);var o={};for(var s in a){var u=a[s].split("=");var l=u[0];var h=u[1].replace(/"/gm,"");var c=parseFloat(h);var f=isNaN(c)?h:c;o[l]=f}r[n].push(o)}var d=new O;r.info.forEach(function(e){return d.info.push({face:e.face,size:parseInt(e.size,10)})});r.common.forEach(function(e){return d.common.push({lineHeight:parseInt(e.lineHeight,10)})});r.page.forEach(function(e){return d.page.push({id:parseInt(e.id,10),file:e.file})});r.char.forEach(function(e){return d.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})});r.kerning.forEach(function(e){return d.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})});return d};return e}();var s=function(){function e(){}e.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null};e.parse=function(e){var t=new O;var r=e.getElementsByTagName("info");var i=e.getElementsByTagName("common");var n=e.getElementsByTagName("page");var a=e.getElementsByTagName("char");var o=e.getElementsByTagName("kerning");for(var s=0;s<r.length;s++){t.info.push({face:r[s].getAttribute("face"),size:parseInt(r[s].getAttribute("size"),10)})}for(var s=0;s<i.length;s++){t.common.push({lineHeight:parseInt(i[s].getAttribute("lineHeight"),10)})}for(var s=0;s<n.length;s++){t.page.push({id:parseInt(n[s].getAttribute("id"),10)||0,file:n[s].getAttribute("file")})}for(var s=0;s<a.length;s++){var u=a[s];t.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var s=0;s<o.length;s++){t.kerning.push({first:parseInt(o[s].getAttribute("first"),10),second:parseInt(o[s].getAttribute("second"),10),amount:parseInt(o[s].getAttribute("amount"),10)})}return t};return e}();var u=function(){function e(){}e.test=function(e){if(typeof e==="string"&&e.indexOf("<font>")>-1){var t=(new self.DOMParser).parseFromString(e,"text/xml");return s.test(t)}return false};e.parse=function(e){var t=(new window.DOMParser).parseFromString(e,"text/xml");return s.parse(t)};return e}();var l=[o,s,u];function m(e){for(var t=0;t<l.length;t++){if(l[t].test(e)){return l[t]}}return null}function d(e,t,r,i,n,a){var o=r.fill;if(!Array.isArray(o)){return o}else if(o.length===1){return o[0]}var s;var u=r.dropShadow?r.dropShadowDistance:0;var l=r.padding||0;var h=Math.ceil(e.width/i)-u-l*2;var c=Math.ceil(e.height/i)-u-l*2;var f=o.slice();var d=r.fillGradientStops.slice();if(!d.length){var p=f.length+1;for(var v=1;v<p;++v){d.push(v/p)}}f.unshift(o[0]);d.unshift(0);f.push(o[o.length-1]);d.push(1);if(r.fillGradientType===I.TEXT_GRADIENT.LINEAR_VERTICAL){s=t.createLinearGradient(h/2,l,h/2,c+l);var m=0;var g=a.fontProperties.fontSize+r.strokeThickness;var y=g/c;for(var v=0;v<n.length;v++){var _=a.lineHeight*v;for(var b=0;b<f.length;b++){var x=0;if(typeof d[b]==="number"){x=d[b]}else{x=b/f.length}var w=_/c+x*y;var E=Math.max(m,w);E=Math.min(E,1);s.addColorStop(E,f[b]);m=E}}}else{s=t.createLinearGradient(l,c/2,h+l,c/2);var S=f.length+1;var T=1;for(var v=0;v<f.length;v++){var P=void 0;if(typeof d[v]==="number"){P=d[v]}else{P=T/S}s.addColorStop(P,f[v]);T++}}return s}function M(e,t,r,i,n,a,o){var s=r.text;var u=r.fontProperties;t.translate(i,n);t.scale(a,a);var l=o.strokeThickness/2;var h=-(o.strokeThickness/2);t.font=o.toFontString();t.lineWidth=o.strokeThickness;t.textBaseline=o.textBaseline;t.lineJoin=o.lineJoin;t.miterLimit=o.miterLimit;t.fillStyle=d(e,t,o,a,[s],r);t.strokeStyle=o.stroke;t.font=o.toFontString();t.lineWidth=o.strokeThickness;t.textBaseline=o.textBaseline;t.lineJoin=o.lineJoin;t.miterLimit=o.miterLimit;t.fillStyle=d(e,t,o,a,[s],r);t.strokeStyle=o.stroke;var c=o.dropShadowColor;var f=re.hex2rgb(typeof c==="number"?c:re.string2hex(c));if(o.dropShadow){t.shadowColor="rgba("+f[0]*255+","+f[1]*255+","+f[2]*255+","+o.dropShadowAlpha+")";t.shadowBlur=o.dropShadowBlur;t.shadowOffsetX=Math.cos(o.dropShadowAngle)*o.dropShadowDistance;t.shadowOffsetY=Math.sin(o.dropShadowAngle)*o.dropShadowDistance}else{t.shadowColor="black";t.shadowBlur=0;t.shadowOffsetX=0;t.shadowOffsetY=0}if(o.stroke&&o.strokeThickness){t.strokeText(s,l,h+r.lineHeight-u.descent)}if(o.fill){t.fillText(s,l,h+r.lineHeight-u.descent)}t.setTransform(1,0,0,1,0,0);t.fillStyle="rgba(0, 0, 0, 0)"}function C(e){if(typeof e==="string"){e=[e]}var t=[];for(var r=0,i=e.length;r<i;r++){var n=e[r];if(Array.isArray(n)){if(n.length!==2){throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".")}var a=n[0].charCodeAt(0);var o=n[1].charCodeAt(0);if(o<a){throw new Error("[BitmapFont]: Invalid character range.")}for(var s=a,u=o;s<=u;s++){t.push(String.fromCharCode(s))}}else{t.push.apply(t,n.split(""))}}if(t.length===0){throw new Error("[BitmapFont]: Empty set when resolving characters.")}return t}var ne=function(){function A(e,t){var r=e.info[0];var i=e.common[0];var n=e.page[0];var a=re.getResolutionOfUrl(n.file);var o={};this.font=r.face;this.size=r.size;this.lineHeight=i.lineHeight/a;this.chars={};this.pageTextures=o;for(var s=0;s<e.page.length;s++){var u=e.page[s],l=u.id,h=u.file;o[l]=t instanceof Array?t[s]:t[h]}for(var s=0;s<e.char.length;s++){var c=e.char[s],l=c.id,f=c.page;var d=e.char[s],p=d.x,v=d.y,m=d.width,g=d.height,y=d.xoffset,_=d.yoffset,b=d.xadvance;p/=a;v/=a;m/=a;g/=a;y/=a;_/=a;b/=a;var x=new ee.Rectangle(p+o[f].frame.x/a,v+o[f].frame.y/a,m,g);this.chars[l]={xOffset:y,yOffset:_,xAdvance:b,kerning:{},texture:new ie.Texture(o[f].baseTexture,x),page:f}}for(var s=0;s<e.kerning.length;s++){var w=e.kerning[s],E=w.first,S=w.second,T=w.amount;E/=a;S/=a;T/=a;if(this.chars[S]){this.chars[S].kerning[E]=T}}}A.prototype.destroy=function(){for(var e in this.chars){this.chars[e].texture.destroy();this.chars[e].texture=null}for(var e in this.pageTextures){this.pageTextures[e].destroy(true);this.pageTextures[e]=null}this.chars=null;this.pageTextures=null};A.install=function(e,t){var r;if(e instanceof O){r=e}else{var i=m(e);if(!i){throw new Error("Unrecognized data format for font.")}r=i.parse(e)}if(t instanceof ie.Texture){t=[t]}var n=new A(r,t);A.available[n.font]=n;return n};A.uninstall=function(e){var t=A.available[e];if(!t){throw new Error("No font found named '"+e+"'")}t.destroy();delete A.available[e]};A.from=function(e,t,r){if(!e){throw new Error("[BitmapFont] Property `name` is required.")}var i=Object.assign({},A.defaultOptions,r),n=i.chars,a=i.padding,o=i.resolution,s=i.textureWidth,u=i.textureHeight;var l=C(n);var h=t instanceof I.TextStyle?t:new I.TextStyle(t);var c=s;var f=new O;f.info[0]={face:h.fontFamily,size:h.fontSize};f.common[0]={lineHeight:h.fontSize};var d=0;var p=0;var v;var m;var g;var y=0;var _=[];for(var b=0;b<l.length;b++){if(!v){v=document.createElement("canvas");v.width=s;v.height=u;m=v.getContext("2d");g=new ie.BaseTexture(v,{resolution:o});_.push(new ie.Texture(g));f.page.push({id:_.length-1,file:""})}var x=I.TextMetrics.measureText(l[b],h,false,v);var w=x.width;var E=Math.ceil(x.height);var S=Math.ceil((h.fontStyle==="italic"?2:1)*w);if(p>=u-E*o){if(p===0){throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+h.fontSize+"px fonts"))}--b;v=null;m=null;g=null;p=0;d=0;y=0;continue}y=Math.max(E+x.fontProperties.descent,y);if(S*o+d>=c){--b;p+=y*o;p=Math.ceil(p);d=0;y=0;continue}M(v,m,x,d,p,o,h);var T=x.text.charCodeAt(0);f.char.push({id:T,page:_.length-1,x:d/o,y:p/o,width:S,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(w-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))});d+=(S+2*a)*o;d=Math.ceil(d)}var P=new A(f,_);if(A.available[e]!==undefined){A.uninstall(e)}A.available[e]=P;return P};A.ALPHA=[["a","z"],["A","Z"]," "];A.NUMERIC=[["0","9"]];A.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];A.ASCII=[[" ","~"]];A.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:A.ALPHANUMERIC};A.available={};return A}();var ae=[];var oe=[];var h=function(h){a(c,h);function c(e,t){if(t===void 0){t={}}var r=h.call(this)||this;r._tint=16777215;if(t.font){re.deprecation("5.3.0","PIXI.BitmapText constructor style.font property is deprecated.");r._upgradeStyle(t)}var i=Object.assign({},c.styleDefaults,t),n=i.align,a=i.tint,o=i.maxWidth,s=i.letterSpacing,u=i.fontName,l=i.fontSize;if(!ne.available[u]){throw new Error('Missing BitmapFont "'+u+'"')}r._activePagesMeshData=[];r._textWidth=0;r._textHeight=0;r._align=n;r._tint=a;r._fontName=u;r._fontSize=l||ne.available[u].size;r._text=e;r._maxWidth=o;r._maxLineHeight=0;r._letterSpacing=s;r._anchor=new ee.ObservablePoint(function(){r.dirty=true},r,0,0);r._roundPixels=f.settings.ROUND_PIXELS;r.dirty=true;r._textureCache={};return r}c.prototype.updateText=function(){var e;var t=ne.available[this._fontName];var r=this._fontSize/t.size;var i=new ee.Point;var n=[];var a=[];var o=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ";var s=o.length;var u=this._maxWidth*t.size/this._fontSize;var l=null;var h=0;var c=0;var f=0;var d=-1;var p=0;var v=0;var m=0;for(var g=0;g<s;g++){var y=o.charCodeAt(g);var _=o.charAt(g);if(/(?:\s)/.test(_)){d=g;p=h}if(_==="\r"||_==="\n"){a.push(h);c=Math.max(c,h);++f;++v;i.x=0;i.y+=t.lineHeight;l=null;continue}var b=t.chars[y];if(!b){continue}if(l&&b.kerning[l]){i.x+=b.kerning[l]}var x=oe.pop()||{texture:ie.Texture.EMPTY,line:0,charCode:0,position:new ee.Point};x.texture=b.texture;x.line=f;x.charCode=y;x.position.x=i.x+b.xOffset+this._letterSpacing/2;x.position.y=i.y+b.yOffset;n.push(x);i.x+=b.xAdvance+this._letterSpacing;h=i.x;m=Math.max(m,b.yOffset+b.texture.height);l=y;if(d!==-1&&u>0&&i.x>u){++v;re.removeItems(n,1+d-v,1+g-d);g=d;d=-1;a.push(p);c=Math.max(c,p);f++;i.x=0;i.y+=t.lineHeight;l=null}}var w=o.charAt(o.length-1);if(w!=="\r"&&w!=="\n"){if(/(?:\s)/.test(w)){h=p}a.push(h);c=Math.max(c,h)}var E=[];for(var g=0;g<=f;g++){var S=0;if(this._align==="right"){S=c-a[g]}else if(this._align==="center"){S=(c-a[g])/2}E.push(S)}var T=n.length;var P={};var A=[];var I=this._activePagesMeshData;for(var g=0;g<I.length;g++){ae.push(I[g])}for(var g=0;g<T;g++){var O=n[g].texture;var M=O.baseTexture.uid;if(!P[M]){var C=ae.pop();if(!C){var D=new te.MeshGeometry;var R=new te.MeshMaterial(ie.Texture.EMPTY);var L=new te.Mesh(D,R);C={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:L,vertices:null,uvs:null,indices:null}}C.index=0;C.indexCount=0;C.vertexCount=0;C.uvsCount=0;C.total=0;var N=this._textureCache;N[M]=N[M]||new ie.Texture(O.baseTexture);C.mesh.texture=N[M];C.mesh.tint=this._tint;A.push(C);P[M]=C}P[M].total++}for(var g=0;g<I.length;g++){if(A.indexOf(I[g])===-1){this.removeChild(I[g].mesh)}}for(var g=0;g<A.length;g++){if(A[g].mesh.parent!==this){this.addChild(A[g].mesh)}}this._activePagesMeshData=A;for(var g in P){var C=P[g];var k=C.total;if(!(((e=C.indices)===null||e===void 0?void 0:e.length)>6*k)||C.vertices.length<te.Mesh.BATCHABLE_SIZE*2){C.vertices=new Float32Array(4*2*k);C.uvs=new Float32Array(4*2*k);C.indices=new Uint16Array(6*k)}else{var F=C.total;var B=C.vertices;for(var j=F*4*2;j<B.length;j++){B[j]=0}}C.mesh.size=6*k}for(var g=0;g<T;g++){var _=n[g];var U=_.position.x+E[_.line];if(this._roundPixels){U=Math.round(U)}var H=U*r;var G=_.position.y*r;var O=_.texture;var z=P[O.baseTexture.uid];var X=O.frame;var W=O._uvs;var Y=z.index++;z.indices[Y*6+0]=0+Y*4;z.indices[Y*6+1]=1+Y*4;z.indices[Y*6+2]=2+Y*4;z.indices[Y*6+3]=0+Y*4;z.indices[Y*6+4]=2+Y*4;z.indices[Y*6+5]=3+Y*4;z.vertices[Y*8+0]=H;z.vertices[Y*8+1]=G;z.vertices[Y*8+2]=H+X.width*r;z.vertices[Y*8+3]=G;z.vertices[Y*8+4]=H+X.width*r;z.vertices[Y*8+5]=G+X.height*r;z.vertices[Y*8+6]=H;z.vertices[Y*8+7]=G+X.height*r;z.uvs[Y*8+0]=W.x0;z.uvs[Y*8+1]=W.y0;z.uvs[Y*8+2]=W.x1;z.uvs[Y*8+3]=W.y1;z.uvs[Y*8+4]=W.x2;z.uvs[Y*8+5]=W.y2;z.uvs[Y*8+6]=W.x3;z.uvs[Y*8+7]=W.y3}this._textWidth=c*r;this._textHeight=(i.y+t.lineHeight)*r;for(var g in P){var C=P[g];if(this.anchor.x!==0||this.anchor.y!==0){var q=0;var V=this._textWidth*this.anchor.x;var $=this._textHeight*this.anchor.y;for(var K=0;K<C.total;K++){C.vertices[q++]-=V;C.vertices[q++]-=$;C.vertices[q++]-=V;C.vertices[q++]-=$;C.vertices[q++]-=V;C.vertices[q++]-=$;C.vertices[q++]-=V;C.vertices[q++]-=$}}this._maxLineHeight=m*r;var Q=C.mesh.geometry.getBuffer("aVertexPosition");var Z=C.mesh.geometry.getBuffer("aTextureCoord");var J=C.mesh.geometry.getIndex();Q.data=C.vertices;Z.data=C.uvs;J.data=C.indices;Q.update();Z.update();J.update()}for(var g=0;g<n.length;g++){oe.push(n[g])}};c.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};c.prototype.getLocalBounds=function(){this.validate();return h.prototype.getLocalBounds.call(this)};c.prototype.validate=function(){if(this.dirty){this.updateText();this.dirty=false}};Object.defineProperty(c.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint===e){return}this._tint=e;for(var t=0;t<this._activePagesMeshData.length;t++){this._activePagesMeshData[t].mesh.tint=e}},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"align",{get:function(){return this._align},set:function(e){if(this._align!==e){this._align=e;this.dirty=true}},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!ne.available[e]){throw new Error('Missing BitmapFont "'+e+'"')}if(this._fontName!==e){this._fontName=e;this.dirty=true}},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){if(this._fontSize!==e){this._fontSize=e;this.dirty=true}},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"anchor",{get:function(){return this._anchor},set:function(e){if(typeof e==="number"){this._anchor.set(e)}else{this._anchor.copyFrom(e)}},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e===null||e===undefined?"":e);if(this._text===e){return}this._text=e;this.dirty=true},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){if(this._maxWidth===e){return}this._maxWidth=e;this.dirty=true},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"maxLineHeight",{get:function(){this.validate();return this._maxLineHeight},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"textWidth",{get:function(){this.validate();return this._textWidth},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){if(this._letterSpacing!==e){this._letterSpacing=e;this.dirty=true}},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){if(e!==this._roundPixels){this._roundPixels=e;this.dirty=true}},enumerable:false,configurable:true});Object.defineProperty(c.prototype,"textHeight",{get:function(){this.validate();return this._textHeight},enumerable:false,configurable:true});c.prototype._upgradeStyle=function(e){if(typeof e.font==="string"){var t=e.font.split(" ");e.fontName=t.length===1?t[0]:t.slice(1).join(" ");if(t.length>=2){e.fontSize=parseInt(t[0],10)}}else{e.fontName=e.font.name;e.fontSize=typeof e.font.size==="number"?e.font.size:parseInt(e.font.size,10)}};c.prototype.destroy=function(e){var t=this._textureCache;for(var r in t){var i=t[r];i.destroy();delete t[r]}this._textureCache=null;h.prototype.destroy.call(this,e)};c.registerFont=function(e,t){re.deprecation("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install");return ne.install(e,t)};Object.defineProperty(c,"fonts",{get:function(){re.deprecation("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available");return ne.available},enumerable:false,configurable:true});c.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};return c}(i.Container);var c=function(){function p(){}p.add=function(){v.LoaderResource.setExtensionXhrType("fnt",v.LoaderResource.XHR_RESPONSE_TYPE.TEXT)};p.use=function(t,r){var e=m(t.data);if(!e){r();return}var i=p.getBaseUrl(this,t);var n=e.parse(t.data);var a={};var o=function(e){a[e.metadata.pageFile]=e.texture;if(Object.keys(a).length===n.page.length){t.bitmapFont=ne.install(n,a);r()}};for(var s=0;s<n.page.length;++s){var u=n.page[s].file;var l=i+u;var h=false;for(var c in this.resources){var f=this.resources[c];if(f.url===l){f.metadata.pageFile=u;if(f.texture){o(f)}else{f.onAfterMiddleware.add(o)}h=true;break}}if(!h){var d={crossOrigin:t.crossOrigin,loadType:v.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(l,d,o)}}};p.getBaseUrl=function(e,t){var r=!t.isDataUrl?p.dirname(t.url):"";if(t.isDataUrl){if(r==="."){r=""}if(e.baseUrl&&r){if(e.baseUrl.charAt(e.baseUrl.length-1)==="/"){r+="/"}}}r=r.replace(e.baseUrl,"");if(r&&r.charAt(r.length-1)!=="/"){r+="/"}return r};p.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");if(t===e){return"."}else if(t===""){return"/"}return t};return p}();r.BitmapFont=ne;r.BitmapFontData=O;r.BitmapFontLoader=c;r.BitmapText=h},{"@pixi/core":4,"@pixi/display":5,"@pixi/loaders":15,"@pixi/math":16,"@pixi/mesh":18,"@pixi/settings":26,"@pixi/text":32,"@pixi/utils":34}],32:[function(e,t,S){"use strict";Object.defineProperty(S,"__esModule",{value:true});var r=e("@pixi/sprite");var s=e("@pixi/core");var u=e("@pixi/settings");var l=e("@pixi/math");var x=e("@pixi/utils");var i=function(e,t){i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return i(e,t)};function n(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}(function(e){e[e["LINEAR_VERTICAL"]=0]="LINEAR_VERTICAL";e[e["LINEAR_HORIZONTAL"]=1]="LINEAR_HORIZONTAL"})(S.TEXT_GRADIENT||(S.TEXT_GRADIENT={}));var a={align:"left",breakWords:false,dropShadow:false,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:S.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:false,whiteSpace:"pre",wordWrap:false,wordWrapWidth:100,leading:0};var o=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];var h=function(){function t(e){this.styleID=0;this.reset();p(this,e,e)}t.prototype.clone=function(){var e={};p(e,this,a);return new t(e)};t.prototype.reset=function(){p(this,a,a)};Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){if(this._align!==e){this._align=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){if(this._breakWords!==e){this._breakWords=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){if(this._dropShadow!==e){this._dropShadow=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){if(this._dropShadowAlpha!==e){this._dropShadowAlpha=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){if(this._dropShadowAngle!==e){this._dropShadowAngle=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){if(this._dropShadowBlur!==e){this._dropShadowBlur=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=f(e);if(this._dropShadowColor!==t){this._dropShadowColor=t;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){if(this._dropShadowDistance!==e){this._dropShadowDistance=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=f(e);if(this._fill!==t){this._fill=t;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){if(this._fillGradientType!==e){this._fillGradientType=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){if(!d(this._fillGradientStops,e)){this._fillGradientStops=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){if(this.fontFamily!==e){this._fontFamily=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){if(this._fontSize!==e){this._fontSize=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){if(this._fontStyle!==e){this._fontStyle=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){if(this._fontVariant!==e){this._fontVariant=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){if(this._fontWeight!==e){this._fontWeight=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){if(this._letterSpacing!==e){this._letterSpacing=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){if(this._lineHeight!==e){this._lineHeight=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(e){if(this._leading!==e){this._leading=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){if(this._lineJoin!==e){this._lineJoin=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){if(this._miterLimit!==e){this._miterLimit=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(e){if(this._padding!==e){this._padding=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=f(e);if(this._stroke!==t){this._stroke=t;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){if(this._strokeThickness!==e){this._strokeThickness=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){if(this._textBaseline!==e){this._textBaseline=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(e){if(this._trim!==e){this._trim=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){if(this._whiteSpace!==e){this._whiteSpace=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){if(this._wordWrap!==e){this._wordWrap=e;this.styleID++}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){if(this._wordWrapWidth!==e){this._wordWrapWidth=e;this.styleID++}},enumerable:false,configurable:true});t.prototype.toFontString=function(){var e=typeof this.fontSize==="number"?this.fontSize+"px":this.fontSize;var t=this.fontFamily;if(!Array.isArray(this.fontFamily)){t=this.fontFamily.split(",")}for(var r=t.length-1;r>=0;r--){var i=t[r].trim();if(!/([\"\'])[^\'\"]+\1/.test(i)&&o.indexOf(i)<0){i='"'+i+'"'}t[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")};return t}();function c(e){if(typeof e==="number"){return x.hex2string(e)}else if(typeof e==="string"){if(e.indexOf("0x")===0){e=e.replace("0x","#")}}return e}function f(e){if(!Array.isArray(e)){return c(e)}else{for(var t=0;t<e.length;++t){e[t]=c(e[t])}return e}}function d(e,t){if(!Array.isArray(e)||!Array.isArray(t)){return false}if(e.length!==t.length){return false}for(var r=0;r<e.length;++r){if(e[r]!==t[r]){return false}}return true}function p(e,t,r){for(var i in r){if(Array.isArray(t[i])){e[i]=t[i].slice()}else{e[i]=t[i]}}}var w=function(){function I(e,t,r,i,n,a,o,s,u){this.text=e;this.style=t;this.width=r;this.height=i;this.lines=n;this.lineWidths=a;this.lineHeight=o;this.maxLineWidth=s;this.fontProperties=u}I.measureText=function(e,t,r,i){if(i===void 0){i=I._canvas}r=r===undefined||r===null?t.wordWrap:r;var n=t.toFontString();var a=I.measureFont(n);if(a.fontSize===0){a.fontSize=t.fontSize;a.ascent=t.fontSize}var o=i.getContext("2d");o.font=n;var s=r?I.wordWrap(e,t,i):e;var u=s.split(/(?:\r\n|\r|\n)/);var l=new Array(u.length);var h=0;for(var c=0;c<u.length;c++){var f=o.measureText(u[c]).width+(u[c].length-1)*t.letterSpacing;l[c]=f;h=Math.max(h,f)}var d=h+t.strokeThickness;if(t.dropShadow){d+=t.dropShadowDistance}var p=t.lineHeight||a.fontSize+t.strokeThickness;var v=Math.max(p,a.fontSize+t.strokeThickness)+(u.length-1)*(p+t.leading);if(t.dropShadow){v+=t.dropShadowDistance}return new I(e,t,d,v,u,l,p+t.leading,h,a)};I.wordWrap=function(e,t,r){if(r===void 0){r=I._canvas}var i=r.getContext("2d");var n=0;var a="";var o="";var s=Object.create(null);var u=t.letterSpacing,l=t.whiteSpace;var h=I.collapseSpaces(l);var c=I.collapseNewlines(l);var f=!h;var d=t.wordWrapWidth+u;var p=I.tokenize(e);for(var v=0;v<p.length;v++){var m=p[v];if(I.isNewline(m)){if(!c){o+=I.addLine(a);f=!h;a="";n=0;continue}m=" "}if(h){var g=I.isBreakingSpace(m);var y=I.isBreakingSpace(a[a.length-1]);if(g&&y){continue}}var _=I.getFromCache(m,u,s,i);if(_>d){if(a!==""){o+=I.addLine(a);a="";n=0}if(I.canBreakWords(m,t.breakWords)){var b=I.wordWrapSplit(m);for(var x=0;x<b.length;x++){var w=b[x];var E=1;while(b[x+E]){var S=b[x+E];var T=w[w.length-1];if(!I.canBreakChars(T,S,m,x,t.breakWords)){w+=S}else{break}E++}x+=w.length-1;var P=I.getFromCache(w,u,s,i);if(P+n>d){o+=I.addLine(a);f=false;a="";n=0}a+=w;n+=P}}else{if(a.length>0){o+=I.addLine(a);a="";n=0}var A=v===p.length-1;o+=I.addLine(m,!A);f=false;a="";n=0}}else{if(_+n>d){f=false;o+=I.addLine(a);a="";n=0}if(a.length>0||!I.isBreakingSpace(m)||f){a+=m;n+=_}}}o+=I.addLine(a,false);return o};I.addLine=function(e,t){if(t===void 0){t=true}e=I.trimRight(e);e=t?e+"\n":e;return e};I.getFromCache=function(e,t,r,i){var n=r[e];if(typeof n!=="number"){var a=e.length*t;n=i.measureText(e).width+a;r[e]=n}return n};I.collapseSpaces=function(e){return e==="normal"||e==="pre-line"};I.collapseNewlines=function(e){return e==="normal"};I.trimRight=function(e){if(typeof e!=="string"){return""}for(var t=e.length-1;t>=0;t--){var r=e[t];if(!I.isBreakingSpace(r)){break}e=e.slice(0,-1)}return e};I.isNewline=function(e){if(typeof e!=="string"){return false}return I._newlines.indexOf(e.charCodeAt(0))>=0};I.isBreakingSpace=function(e){if(typeof e!=="string"){return false}return I._breakingSpaces.indexOf(e.charCodeAt(0))>=0};I.tokenize=function(e){var t=[];var r="";if(typeof e!=="string"){return t}for(var i=0;i<e.length;i++){var n=e[i];if(I.isBreakingSpace(n)||I.isNewline(n)){if(r!==""){t.push(r);r=""}t.push(n);continue}r+=n}if(r!==""){t.push(r)}return t};I.canBreakWords=function(e,t){return t};I.canBreakChars=function(e,t,r,i,n){return true};I.wordWrapSplit=function(e){return e.split("")};I.measureFont=function(e){if(I._fonts[e]){return I._fonts[e]}var t={ascent:0,descent:0,fontSize:0};var r=I._canvas;var i=I._context;i.font=e;var n=I.METRICS_STRING+I.BASELINE_SYMBOL;var a=Math.ceil(i.measureText(n).width);var o=Math.ceil(i.measureText(I.BASELINE_SYMBOL).width);var s=2*o;o=o*I.BASELINE_MULTIPLIER|0;r.width=a;r.height=s;i.fillStyle="#f00";i.fillRect(0,0,a,s);i.font=e;i.textBaseline="alphabetic";i.fillStyle="#000";i.fillText(n,0,o);var u=i.getImageData(0,0,a,s).data;var l=u.length;var h=a*4;var c=0;var f=0;var d=false;for(c=0;c<o;++c){for(var p=0;p<h;p+=4){if(u[f+p]!==255){d=true;break}}if(!d){f+=h}else{break}}t.ascent=o-c;f=l-h;d=false;for(c=s;c>o;--c){for(var p=0;p<h;p+=4){if(u[f+p]!==255){d=true;break}}if(!d){f-=h}else{break}}t.descent=c-o;t.fontSize=t.ascent+t.descent;I._fonts[e]=t;return t};I.clearMetrics=function(e){if(e===void 0){e=""}if(e){delete I._fonts[e]}else{I._fonts={}}};return I}();var v=function(){try{var e=new OffscreenCanvas(0,0);var t=e.getContext("2d");if(t&&t.measureText){return e}return document.createElement("canvas")}catch(e){return document.createElement("canvas")}}();v.width=v.height=10;w._canvas=v;w._context=v.getContext("2d");w._fonts={};w.METRICS_STRING="|ÉqÅ";w.BASELINE_SYMBOL="M";w.BASELINE_MULTIPLIER=1.4;w._newlines=[10,13];w._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var m={texture:true,children:false,baseTexture:true};var g=function(o){n(e,o);function e(e,t,r){var i=this;var n=false;if(!r){r=document.createElement("canvas");n=true}r.width=3;r.height=3;var a=s.Texture.from(r);a.orig=new l.Rectangle;a.trim=new l.Rectangle;i=o.call(this,a)||this;i._ownCanvas=n;i.canvas=r;i.context=i.canvas.getContext("2d");i._resolution=u.settings.RESOLUTION;i._autoResolution=true;i._text=null;i._style=null;i._styleListener=null;i._font="";i.text=e;i.style=t;i.localStyleID=-1;return i}e.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID){this.dirty=true;this.localStyleID=t.styleID}if(!this.dirty&&e){return}this._font=this._style.toFontString();var r=this.context;var i=w.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas);var n=i.width;var a=i.height;var o=i.lines;var s=i.lineHeight;var u=i.lineWidths;var l=i.maxLineWidth;var h=i.fontProperties;this.canvas.width=Math.ceil((Math.max(1,n)+t.padding*2)*this._resolution);this.canvas.height=Math.ceil((Math.max(1,a)+t.padding*2)*this._resolution);r.scale(this._resolution,this._resolution);r.clearRect(0,0,this.canvas.width,this.canvas.height);r.font=this._font;r.lineWidth=t.strokeThickness;r.textBaseline=t.textBaseline;r.lineJoin=t.lineJoin;r.miterLimit=t.miterLimit;var c;var f;var d=t.dropShadow?2:1;for(var p=0;p<d;++p){var v=t.dropShadow&&p===0;var m=v?Math.ceil(Math.max(1,a)+t.padding*2):0;var g=m*this._resolution;if(v){r.fillStyle="black";r.strokeStyle="black";var y=t.dropShadowColor;var _=x.hex2rgb(typeof y==="number"?y:x.string2hex(y));r.shadowColor="rgba("+_[0]*255+","+_[1]*255+","+_[2]*255+","+t.dropShadowAlpha+")";r.shadowBlur=t.dropShadowBlur;r.shadowOffsetX=Math.cos(t.dropShadowAngle)*t.dropShadowDistance;r.shadowOffsetY=Math.sin(t.dropShadowAngle)*t.dropShadowDistance+g}else{r.fillStyle=this._generateFillStyle(t,o,i);r.strokeStyle=t.stroke;r.shadowColor="black";r.shadowBlur=0;r.shadowOffsetX=0;r.shadowOffsetY=0}for(var b=0;b<o.length;b++){c=t.strokeThickness/2;f=t.strokeThickness/2+b*s+h.ascent;if(t.align==="right"){c+=l-u[b]}else if(t.align==="center"){c+=(l-u[b])/2}if(t.stroke&&t.strokeThickness){this.drawLetterSpacing(o[b],c+t.padding,f+t.padding-m,true)}if(t.fill){this.drawLetterSpacing(o[b],c+t.padding,f+t.padding-m)}}}this.updateTexture()};e.prototype.drawLetterSpacing=function(e,t,r,i){if(i===void 0){i=false}var n=this._style;var a=n.letterSpacing;if(a===0){if(i){this.context.strokeText(e,t,r)}else{this.context.fillText(e,t,r)}return}var o=t;var s=Array.from?Array.from(e):e.split("");var u=this.context.measureText(e).width;var l=0;for(var h=0;h<s.length;++h){var c=s[h];if(i){this.context.strokeText(c,o,r)}else{this.context.fillText(c,o,r)}l=this.context.measureText(e.substring(h+1)).width;o+=u-l+a;u=l}};e.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=x.trimCanvas(e);if(t.data){e.width=t.width;e.height=t.height;this.context.putImageData(t.data,0,0)}}var r=this._texture;var i=this._style;var n=i.trim?0:i.padding;var a=r.baseTexture;r.trim.width=r._frame.width=Math.ceil(e.width/this._resolution);r.trim.height=r._frame.height=Math.ceil(e.height/this._resolution);r.trim.x=-n;r.trim.y=-n;r.orig.width=r._frame.width-n*2;r.orig.height=r._frame.height-n*2;this._onTextureUpdate();a.setRealSize(e.width,e.height,this._resolution);this._recursivePostUpdateTransform();this.dirty=false};e.prototype._render=function(e){if(this._autoResolution&&this._resolution!==e.resolution){this._resolution=e.resolution;this.dirty=true}this.updateText(true);o.prototype._render.call(this,e)};e.prototype.getLocalBounds=function(e){this.updateText(true);return o.prototype.getLocalBounds.call(this,e)};e.prototype._calculateBounds=function(){this.updateText(true);this.calculateVertices();this._bounds.addQuad(this.vertexData)};e.prototype._generateFillStyle=function(e,t,r){var i=e.fill;if(!Array.isArray(i)){return i}else if(i.length===1){return i[0]}var n;var a=e.dropShadow?e.dropShadowDistance:0;var o=e.padding||0;var s=Math.ceil(this.canvas.width/this._resolution)-a-o*2;var u=Math.ceil(this.canvas.height/this._resolution)-a-o*2;var l=i.slice();var h=e.fillGradientStops.slice();if(!h.length){var c=l.length+1;for(var f=1;f<c;++f){h.push(f/c)}}l.unshift(i[0]);h.unshift(0);l.push(i[i.length-1]);h.push(1);if(e.fillGradientType===S.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(s/2,o,s/2,u+o);var d=0;var p=r.fontProperties.fontSize+e.strokeThickness;var v=p/u;for(var f=0;f<t.length;f++){var m=r.lineHeight*f;for(var g=0;g<l.length;g++){var y=0;if(typeof h[g]==="number"){y=h[g]}else{y=g/l.length}var _=m/u+y*v;var b=Math.max(d,_);b=Math.min(b,1);n.addColorStop(b,l[g]);d=b}}}else{n=this.context.createLinearGradient(o,u/2,s+o,u/2);var x=l.length+1;var w=1;for(var f=0;f<l.length;f++){var E=void 0;if(typeof h[f]==="number"){E=h[f]}else{E=w/x}n.addColorStop(E,l[f]);w++}}return n};e.prototype.destroy=function(e){if(typeof e==="boolean"){e={children:e}}e=Object.assign({},m,e);o.prototype.destroy.call(this,e);if(this._ownCanvas){this.canvas.height=this.canvas.width=0}this.context=null;this.canvas=null;this._style=null};Object.defineProperty(e.prototype,"width",{get:function(){this.updateText(true);return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(true);var t=x.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width;this._width=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){this.updateText(true);return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(true);var t=x.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height;this._height=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{};if(e instanceof h){this._style=e}else{this._style=new h(e)}this.localStyleID=-1;this.dirty=true},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e===null||e===undefined?"":e);if(this._text===e){return}this._text=e;this.dirty=true},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=false;if(this._resolution===e){return}this._resolution=e;this.dirty=true},enumerable:false,configurable:true});return e}(r.Sprite);S.Text=g;S.TextMetrics=w;S.TextStyle=h},{"@pixi/core":4,"@pixi/math":16,"@pixi/settings":26,"@pixi/sprite":29,"@pixi/utils":34}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});var a=e("@pixi/settings");a.settings.TARGET_FPMS=.06;(function(e){e[e["INTERACTION"]=50]="INTERACTION";e[e["HIGH"]=25]="HIGH";e[e["NORMAL"]=0]="NORMAL";e[e["LOW"]=-25]="LOW";e[e["UTILITY"]=-50]="UTILITY"})(i.UPDATE_PRIORITY||(i.UPDATE_PRIORITY={}));var n=function(){function e(e,t,r,i){if(t===void 0){t=null}if(r===void 0){r=0}if(i===void 0){i=false}this.fn=e;this.context=t;this.priority=r;this.once=i;this.next=null;this.previous=null;this._destroyed=false}e.prototype.match=function(e,t){if(t===void 0){t=null}return this.fn===e&&this.context===t};e.prototype.emit=function(e){if(this.fn){if(this.context){this.fn.call(this.context,e)}else{this.fn(e)}}var t=this.next;if(this.once){this.destroy(true)}if(this._destroyed){this.next=null}return t};e.prototype.connect=function(e){this.previous=e;if(e.next){e.next.previous=this}this.next=e.next;e.next=this};e.prototype.destroy=function(e){if(e===void 0){e=false}this._destroyed=true;this.fn=null;this.context=null;if(this.previous){this.previous.next=this.next}if(this.next){this.next.previous=this.previous}var t=this.next;this.next=e?null:t;this.previous=null;return t};return e}();var r=function(){function t(){var t=this;this._head=new n(null,null,Infinity);this._requestId=null;this._maxElapsedMS=100;this._minElapsedMS=0;this.autoStart=false;this.deltaTime=1;this.deltaMS=1/a.settings.TARGET_FPMS;this.elapsedMS=1/a.settings.TARGET_FPMS;this.lastTime=-1;this.speed=1;this.started=false;this._protected=false;this._lastFrame=-1;this._tick=function(e){t._requestId=null;if(t.started){t.update(e);if(t.started&&t._requestId===null&&t._head.next){t._requestId=requestAnimationFrame(t._tick)}}}}t.prototype._requestIfNeeded=function(){if(this._requestId===null&&this._head.next){this.lastTime=performance.now();this._lastFrame=this.lastTime;this._requestId=requestAnimationFrame(this._tick)}};t.prototype._cancelIfNeeded=function(){if(this._requestId!==null){cancelAnimationFrame(this._requestId);this._requestId=null}};t.prototype._startIfPossible=function(){if(this.started){this._requestIfNeeded()}else if(this.autoStart){this.start()}};t.prototype.add=function(e,t,r){if(r===void 0){r=i.UPDATE_PRIORITY.NORMAL}return this._addListener(new n(e,t,r))};t.prototype.addOnce=function(e,t,r){if(r===void 0){r=i.UPDATE_PRIORITY.NORMAL}return this._addListener(new n(e,t,r,true))};t.prototype._addListener=function(e){var t=this._head.next;var r=this._head;if(!t){e.connect(r)}else{while(t){if(e.priority>t.priority){e.connect(r);break}r=t;t=t.next}if(!e.previous){e.connect(r)}}this._startIfPossible();return this};t.prototype.remove=function(e,t){var r=this._head.next;while(r){if(r.match(e,t)){r=r.destroy()}else{r=r.next}}if(!this._head.next){this._cancelIfNeeded()}return this};Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head){return 0}var e=0;var t=this._head;while(t=t.next){e++}return e},enumerable:false,configurable:true});t.prototype.start=function(){if(!this.started){this.started=true;this._requestIfNeeded()}};t.prototype.stop=function(){if(this.started){this.started=false;this._cancelIfNeeded()}};t.prototype.destroy=function(){if(!this._protected){this.stop();var e=this._head.next;while(e){e=e.destroy(true)}this._head.destroy();this._head=null}};t.prototype.update=function(e){if(e===void 0){e=performance.now()}var t;if(e>this.lastTime){t=this.elapsedMS=e-this.lastTime;if(t>this._maxElapsedMS){t=this._maxElapsedMS}t*=this.speed;if(this._minElapsedMS){var r=e-this._lastFrame|0;if(r<this._minElapsedMS){return}this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t;this.deltaTime=this.deltaMS*a.settings.TARGET_FPMS;var i=this._head;var n=i.next;while(n){n=n.emit(this.deltaTime)}if(!i.next){this._cancelIfNeeded()}}else{this.deltaTime=this.deltaMS=this.elapsedMS=0}this.lastTime=e};Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e);var r=Math.min(Math.max(0,t)/1e3,a.settings.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"maxFPS",{get:function(){if(this._minElapsedMS){return Math.round(1e3/this._minElapsedMS)}return 0},set:function(e){if(e===0){this._minElapsedMS=0}else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:false,configurable:true});Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=true;e._protected=true}return t._shared},enumerable:false,configurable:true});Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=true;e._protected=true}return t._system},enumerable:false,configurable:true});return t}();var o=function(){function e(){}e.init=function(e){var t=this;e=Object.assign({autoStart:true,sharedTicker:false},e);Object.defineProperty(this,"ticker",{set:function(e){if(this._ticker){this._ticker.remove(this.render,this)}this._ticker=e;if(e){e.add(this.render,this,i.UPDATE_PRIORITY.LOW)}},get:function(){return this._ticker}});this.stop=function(){t._ticker.stop()};this.start=function(){t._ticker.start()};this._ticker=null;this.ticker=e.sharedTicker?r.shared:new r;if(e.autoStart){this.start()}};e.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null;e.destroy()}};return e}();i.Ticker=r;i.TickerPlugin=o},{"@pixi/settings":26}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var o=e("@pixi/settings");var n=i(e("eventemitter3"));var a=i(e("earcut"));var s=e("url");var u=i(s);var l=e("@pixi/constants");o.settings.RETINA_PREFIX=/@([0-9\.]+)x/;o.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=true;var h=false;var c="5.3.6";function f(){h=true}function d(e){var t;if(h){return}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=["\n %c %c %c PixiJS "+c+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=window.console).log.apply(t,r)}else if(window.console){window.console.log("PixiJS "+c+" - "+e+" - http://www.pixijs.com/")}h=true}var p;function v(){if(typeof p==="undefined"){p=function e(){var t={stencil:true,failIfMajorPerformanceCaveat:o.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext){return false}var r=document.createElement("canvas");var i=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);var n=!!(i&&i.getContextAttributes().stencil);if(i){var a=i.getExtension("WEBGL_lose_context");if(a){a.loseContext()}}i=null;return n}catch(e){return false}}()}return p}function m(e,t){if(t===void 0){t=[]}t[0]=(e>>16&255)/255;t[1]=(e>>8&255)/255;t[2]=(e&255)/255;return t}function g(e){var t=e.toString(16);t="000000".substr(0,6-t.length)+t;return"#"+t}function y(e){if(typeof e==="string"&&e[0]==="#"){e=e.substr(1)}return parseInt(e,16)}function _(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function b(){var e=[];var t=[];for(var r=0;r<32;r++){e[r]=r;t[r]=r}e[l.BLEND_MODES.NORMAL_NPM]=l.BLEND_MODES.NORMAL;e[l.BLEND_MODES.ADD_NPM]=l.BLEND_MODES.ADD;e[l.BLEND_MODES.SCREEN_NPM]=l.BLEND_MODES.SCREEN;t[l.BLEND_MODES.NORMAL]=l.BLEND_MODES.NORMAL_NPM;t[l.BLEND_MODES.ADD]=l.BLEND_MODES.ADD_NPM;t[l.BLEND_MODES.SCREEN]=l.BLEND_MODES.SCREEN_NPM;var i=[];i.push(t);i.push(e);return i}var x=b();function w(e,t){return x[t?1:0][e]}function E(e,t,r,i){r=r||new Float32Array(4);if(i||i===undefined){r[0]=e[0]*t;r[1]=e[1]*t;r[2]=e[2]*t}else{r[0]=e[0];r[1]=e[1];r[2]=e[2]}r[3]=t;return r}function S(e,t){if(t===1){return(t*255<<24)+e}if(t===0){return 0}var r=e>>16&255;var i=e>>8&255;var n=e&255;r=r*t+.5|0;i=i*t+.5|0;n=n*t+.5|0;return(t*255<<24)+(r<<16)+(i<<8)+n}function T(e,t,r,i){r=r||new Float32Array(4);r[0]=(e>>16&255)/255;r[1]=(e>>8&255)/255;r[2]=(e&255)/255;if(i||i===undefined){r[0]*=t;r[1]*=t;r[2]*=t}r[3]=t;return r}function P(e,t){if(t===void 0){t=null}var r=e*6;t=t||new Uint16Array(r);if(t.length!==r){throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+r)}for(var i=0,n=0;i<r;i+=6,n+=4){t[i+0]=n+0;t[i+1]=n+1;t[i+2]=n+2;t[i+3]=n+0;t[i+4]=n+2;t[i+5]=n+3}return t}function A(e){if(e.BYTES_PER_ELEMENT===4){if(e instanceof Float32Array){return"Float32Array"}else if(e instanceof Uint32Array){return"Uint32Array"}return"Int32Array"}else if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array){return"Uint16Array"}}else if(e.BYTES_PER_ELEMENT===1){if(e instanceof Uint8Array){return"Uint8Array"}}return null}var I={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function O(e,t){var r=0;var i=0;var n={};for(var a=0;a<e.length;a++){i+=t[a];r+=e[a].length}var o=new ArrayBuffer(r*4);var s=null;var u=0;for(var a=0;a<e.length;a++){var l=t[a];var h=e[a];var c=A(h);if(!n[c]){n[c]=new I[c](o)}s=n[c];for(var f=0;f<h.length;f++){var d=(f/l|0)*i+u;var p=f%l;s[d+p]=h[f]}u+=l}return new Float32Array(o)}function M(e){e+=e===0?1:0;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e+1}function C(e){return!(e&e-1)&&!!e}function D(e){var t=(e>65535?1:0)<<4;e>>>=t;var r=(e>255?1:0)<<3;e>>>=r;t|=r;r=(e>15?1:0)<<2;e>>>=r;t|=r;r=(e>3?1:0)<<1;e>>>=r;t|=r;return t|e>>1}function R(e,t,r){var i=e.length;var n;if(t>=i||r===0){return}r=t+r>i?i-t:r;var a=i-r;for(n=t;n<a;++n){e[n]=e[n+r]}e.length=a}function L(e){if(e===0){return 0}return e<0?-1:1}var N=0;function k(){return++N}var F={};function B(e,t,r){if(r===void 0){r=3}if(F[t]){return}var i=(new Error).stack;if(typeof i==="undefined"){console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e)}else{i=i.split("\n").splice(r).join("\n");if(console.groupCollapsed){console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+"\nDeprecated since v"+e);console.warn(i);console.groupEnd()}else{console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e);console.warn(i)}}F[t]=true}var j={};var U=Object.create(null);var H=Object.create(null);function G(){var e;for(e in U){U[e].destroy()}for(e in H){H[e].destroy()}}function z(){var e;for(e in U){delete U[e]}for(e in H){delete H[e]}}var X=function(){function e(e,t,r){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=r||o.settings.RESOLUTION;this.resize(e,t)}e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution;this.canvas.height=t*this.resolution};e.prototype.destroy=function(){this.context=null;this.canvas=null};Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e},enumerable:false,configurable:true});return e}();function W(e){var t=e.width;var r=e.height;var i=e.getContext("2d");var n=i.getImageData(0,0,t,r);var a=n.data;var o=a.length;var s={top:null,left:null,right:null,bottom:null};var u=null;var l;var h;var c;for(l=0;l<o;l+=4){if(a[l+3]!==0){h=l/4%t;c=~~(l/4/t);if(s.top===null){s.top=c}if(s.left===null){s.left=h}else if(h<s.left){s.left=h}if(s.right===null){s.right=h+1}else if(s.right<h){s.right=h+1}if(s.bottom===null){s.bottom=c}else if(s.bottom<c){s.bottom=c}}}if(s.top!==null){t=s.right-s.left;r=s.bottom-s.top+1;u=i.getImageData(s.left,s.top,t,r)}return{height:r,width:t,data:u}}var Y=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function q(e){var t=Y.exec(e);if(t){return{mediaType:t[1]?t[1].toLowerCase():undefined,subType:t[2]?t[2].toLowerCase():undefined,charset:t[3]?t[3].toLowerCase():undefined,encoding:t[4]?t[4].toLowerCase():undefined,data:t[5]}}return undefined}var V;function $(e,t){if(t===void 0){t=window.location}if(e.indexOf("data:")===0){return""}t=t||window.location;if(!V){V=document.createElement("a")}V.href=e;var r=s.parse(V.href);var i=!r.port&&t.port===""||r.port===t.port;if(r.hostname!==t.hostname||!i||r.protocol!==t.protocol){return"anonymous"}return""}function K(e,t){var r=o.settings.RETINA_PREFIX.exec(e);if(r){return parseFloat(r[1])}return t!==undefined?t:1}Object.defineProperty(r,"isMobile",{enumerable:true,get:function(){return o.isMobile}});r.EventEmitter=n;r.earcut=a;r.url=u;r.BaseTextureCache=H;r.CanvasRenderTarget=X;r.DATA_URI=Y;r.ProgramCache=j;r.TextureCache=U;r.clearTextureCache=z;r.correctBlendMode=w;r.createIndicesForQuads=P;r.decomposeDataUri=q;r.deprecation=B;r.destroyTextureCache=G;r.determineCrossOrigin=$;r.getBufferType=A;r.getResolutionOfUrl=K;r.hex2rgb=m;r.hex2string=g;r.interleaveTypedArrays=O;r.isPow2=C;r.isWebGLSupported=v;r.log2=D;r.nextPow2=M;r.premultiplyBlendMode=x;r.premultiplyRgba=E;r.premultiplyTint=S;r.premultiplyTintToRgba=T;r.removeItems=R;r.rgb2hex=_;r.sayHello=d;r.sign=L;r.skipHello=f;r.string2hex=y;r.trimCanvas=W;r.uid=k},{"@pixi/constants":3,"@pixi/settings":26,earcut:35,eventemitter3:37,url:82}],35:[function(e,t,r){"use strict";t.exports=i;t.exports.default=i;function i(e,t,r){r=r||2;var i=t&&t.length,n=i?t[0]*r:e.length,a=v(e,0,n,r,true),o=[];if(!a||a.next===a.prev)return o;var s,u,l,h,c,f,d;if(i)a=g(e,t,a,r);if(e.length>80*r){s=l=e[0];u=h=e[1];for(var p=r;p<n;p+=r){c=e[p];f=e[p+1];if(c<s)s=c;if(f<u)u=f;if(c>l)l=c;if(f>h)h=f}d=Math.max(l-s,h-u);d=d!==0?1/d:0}m(a,o,r,s,u,d);return o}function v(e,t,r,i,n){var a,o;if(n===L(e,t,r,i)>0){for(a=t;a<r;a+=i)o=C(a,e[a],e[a+1],o)}else{for(a=r-i;a>=t;a-=i)o=C(a,e[a],e[a+1],o)}if(o&&s(o,o.next)){D(o);o=o.next}return o}function h(e,t){if(!e)return e;if(!t)t=e;var r=e,i;do{i=false;if(!r.steiner&&(s(r,r.next)||T(r.prev,r,r.next)===0)){D(r);r=t=r.prev;if(r===r.next)break;i=true}else{r=r.next}}while(i||r!==t);return t}function m(e,t,r,i,n,a,o){if(!e)return;if(!o&&a)x(e,i,n,a);var s=e,u,l;while(e.prev!==e.next){u=e.prev;l=e.next;if(a?f(e,i,n,a):c(e)){t.push(u.i/r);t.push(e.i/r);t.push(l.i/r);D(e);e=l.next;s=l.next;continue}e=l;if(e===s){if(!o){m(h(e),t,r,i,n,a,1)}else if(o===1){e=d(h(e),t,r);m(e,t,r,i,n,a,2)}else if(o===2){p(e,t,r,i,n,a)}break}}}function c(e){var t=e.prev,r=e,i=e.next;if(T(t,r,i)>=0)return false;var n=e.next.next;while(n!==e.prev){if(S(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&T(n.prev,n,n.next)>=0)return false;n=n.next}return true}function f(e,t,r,i){var n=e.prev,a=e,o=e.next;if(T(n,a,o)>=0)return false;var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,u=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,l=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,h=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y;var c=w(s,u,t,r,i),f=w(l,h,t,r,i);var d=e.prevZ,p=e.nextZ;while(d&&d.z>=c&&p&&p.z<=f){if(d!==e.prev&&d!==e.next&&S(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&T(d.prev,d,d.next)>=0)return false;d=d.prevZ;if(p!==e.prev&&p!==e.next&&S(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&T(p.prev,p,p.next)>=0)return false;p=p.nextZ}while(d&&d.z>=c){if(d!==e.prev&&d!==e.next&&S(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&T(d.prev,d,d.next)>=0)return false;d=d.prevZ}while(p&&p.z<=f){if(p!==e.prev&&p!==e.next&&S(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&T(p.prev,p,p.next)>=0)return false;p=p.nextZ}return true}function d(e,t,r){var i=e;do{var n=i.prev,a=i.next.next;if(!s(n,a)&&o(n,i,i.next,a)&&I(n,a)&&I(a,n)){t.push(n.i/r);t.push(i.i/r);t.push(a.i/r);D(i);D(i.next);i=e=a}i=i.next}while(i!==e);return h(i)}function p(e,t,r,i,n,a){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&l(o,s)){var u=M(o,s);o=h(o,o.next);u=h(u,u.next);m(o,t,r,i,n,a);m(u,t,r,i,n,a);return}s=s.next}o=o.next}while(o!==e)}function g(e,t,r,i){var n=[],a,o,s,u,l;for(a=0,o=t.length;a<o;a++){s=t[a]*i;u=a<o-1?t[a+1]*i:e.length;l=v(e,s,u,i,false);if(l===l.next)l.steiner=true;n.push(E(l))}n.sort(y);for(a=0;a<n.length;a++){_(n[a],r);r=h(r,r.next)}return r}function y(e,t){return e.x-t.x}function _(e,t){t=n(e,t);if(t){var r=M(t,e);h(t,t.next);h(r,r.next)}}function n(e,t){var r=t,i=e.x,n=e.y,a=-Infinity,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){a=s;if(s===i){if(n===r.y)return r;if(n===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(i===a)return o;var u=o,l=o.x,h=o.y,c=Infinity,f;r=o;do{if(i>=r.x&&r.x>=l&&i!==r.x&&S(n<h?i:a,n,l,h,n<h?a:i,n,r.x,r.y)){f=Math.abs(n-r.y)/(i-r.x);if(I(r,e)&&(f<c||f===c&&(r.x>o.x||r.x===o.x&&b(o,r)))){o=r;c=f}}r=r.next}while(r!==u);return o}function b(e,t){return T(e.prev,e,t.prev)<0&&T(t.next,e,e.next)<0}function x(e,t,r,i){var n=e;do{if(n.z===null)n.z=w(n.x,n.y,t,r,i);n.prevZ=n.prev;n.nextZ=n.next;n=n.next}while(n!==e);n.prevZ.nextZ=null;n.prevZ=null;a(n)}function a(e){var t,r,i,n,a,o,s,u,l=1;do{r=e;e=null;a=null;o=0;while(r){o++;i=r;s=0;for(t=0;t<l;t++){s++;i=i.nextZ;if(!i)break}u=l;while(s>0||u>0&&i){if(s!==0&&(u===0||!i||r.z<=i.z)){n=r;r=r.nextZ;s--}else{n=i;i=i.nextZ;u--}if(a)a.nextZ=n;else e=n;n.prevZ=a;a=n}r=i}a.nextZ=null;l*=2}while(o>1);return e}function w(e,t,r,i,n){e=32767*(e-r)*n;t=32767*(t-i)*n;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function E(e){var t=e,r=e;do{if(t.x<r.x||t.x===r.x&&t.y<r.y)r=t;t=t.next}while(t!==e);return r}function S(e,t,r,i,n,a,o,s){return(n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(n-o)*(i-s)>=0}function l(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!A(e,t)&&(I(e,t)&&I(t,e)&&O(e,t)&&(T(e.prev,e,t.prev)||T(e,t.prev,t))||s(e,t)&&T(e.prev,e,e.next)>0&&T(t.prev,t,t.next)>0)}function T(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function s(e,t){return e.x===t.x&&e.y===t.y}function o(e,t,r,i){var n=P(T(e,t,r));var a=P(T(e,t,i));var o=P(T(r,i,e));var s=P(T(r,i,t));if(n!==a&&o!==s)return true;if(n===0&&u(e,r,t))return true;if(a===0&&u(e,i,t))return true;if(o===0&&u(r,e,i))return true;if(s===0&&u(r,t,i))return true;return false}function u(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function P(e){return e>0?1:e<0?-1:0}function A(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&o(r,r.next,e,t))return true;r=r.next}while(r!==e);return false}function I(e,t){return T(e.prev,e,e.next)<0?T(e,t,e.next)>=0&&T(e,e.prev,t)>=0:T(e,t,e.prev)<0||T(e,e.next,t)<0}function O(e,t){var r=e,i=false,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{if(r.y>a!==r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x)i=!i;r=r.next}while(r!==e);return i}function M(e,t){var r=new R(e.i,e.x,e.y),i=new R(t.i,t.x,t.y),n=e.next,a=t.prev;e.next=t;t.prev=e;r.next=n;n.prev=r;i.next=r;r.prev=i;a.next=i;i.prev=a;return i}function C(e,t,r,i){var n=new R(e,t,r);if(!i){n.prev=n;n.next=n}else{n.next=i.next;n.prev=i;i.next.prev=n;i.next=n}return n}function D(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function R(e,t,r){this.i=e;this.x=t;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}i.deviation=function(e,t,r,i){var n=t&&t.length;var a=n?t[0]*r:e.length;var o=Math.abs(L(e,0,a,r));if(n){for(var s=0,u=t.length;s<u;s++){var l=t[s]*r;var h=s<u-1?t[s+1]*r:e.length;o-=Math.abs(L(e,l,h,r))}}var c=0;for(s=0;s<i.length;s+=3){var f=i[s]*r;var d=i[s+1]*r;var p=i[s+2]*r;c+=Math.abs((e[f]-e[p])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[p+1]-e[f+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function L(e,t,r,i){var n=0;for(var a=t,o=r-i;a<r;a+=i){n+=(e[o]-e[a])*(e[a+1]+e[o+1]);o=a}return n}i.flatten=function(e){var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0;for(var n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++){for(var o=0;o<t;o++)r.vertices.push(e[n][a][o])}if(n>0){i+=e[n-1].length;r.holes.push(i)}}return r}},{}],36:[function(e,t,T){(function(e,S){(function(){(function(e){var r=e["Promise"];var t=r&&"resolve"in r&&"reject"in r&&"all"in r&&"race"in r&&function(){var t;new r(function(e){t=e});return typeof t==="function"}();if(typeof T!=="undefined"&&T){T.Promise=t?r:E;T.Polyfill=E}else{if(typeof define=="function"&&define.amd){define(function(){return t?r:E})}else{if(!t)e["Promise"]=E}}var i="pending";var n="sealed";var o="fulfilled";var s="rejected";var a=function(){};function u(e){return Object.prototype.toString.call(e)==="[object Array]"}var l=typeof S!=="undefined"?S:setTimeout;var h=[];var c;function f(){for(var e=0;e<h.length;e++)h[e][0](h[e][1]);h=[];c=false}function d(e,t){h.push([e,t]);if(!c){c=true;l(f,0)}}function p(e,t){function r(e){g(t,e)}function i(e){_(t,e)}try{e(r,i)}catch(e){i(e)}}function v(e){var t=e.owner;var r=t.state_;var i=t.data_;var n=e[r];var a=e.then;if(typeof n==="function"){r=o;try{i=n(i)}catch(e){_(a,e)}}if(!m(a,i)){if(r===o)g(a,i);if(r===s)_(a,i)}}function m(t,r){var i;try{if(t===r)throw new TypeError("A promises callback cannot return that same promise.");if(r&&(typeof r==="function"||typeof r==="object")){var e=r.then;if(typeof e==="function"){e.call(r,function(e){if(!i){i=true;if(r!==e)g(t,e);else y(t,e)}},function(e){if(!i){i=true;_(t,e)}});return true}}}catch(e){if(!i)_(t,e);return true}return false}function g(e,t){if(e===t||!m(e,t))y(e,t)}function y(e,t){if(e.state_===i){e.state_=n;e.data_=t;d(x,e)}}function _(e,t){if(e.state_===i){e.state_=n;e.data_=t;d(w,e)}}function b(e){var t=e.then_;e.then_=undefined;for(var r=0;r<t.length;r++){v(t[r])}}function x(e){e.state_=o;b(e)}function w(e){e.state_=s;b(e)}function E(e){if(typeof e!=="function")throw new TypeError("Promise constructor takes a function argument");if(this instanceof E===false)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[];p(e,this)}E.prototype={constructor:E,state_:i,then_:null,data_:undefined,then:function(e,t){var r={owner:this,then:new this.constructor(a),fulfilled:e,rejected:t};if(this.state_===o||this.state_===s){d(v,r)}else{this.then_.push(r)}return r.then},catch:function(e){return this.then(null,e)}};E.all=function(s){var e=this;if(!u(s))throw new TypeError("You must pass an array to Promise.all().");return new e(function(r,e){var i=[];var n=0;function t(t){n++;return function(e){i[t]=e;if(!--n)r(i)}}for(var a=0,o;a<s.length;a++){o=s[a];if(o&&typeof o.then==="function")o.then(t(a),e);else i[a]=o}if(!n)r(i)})};E.race=function(n){var e=this;if(!u(n))throw new TypeError("You must pass an array to Promise.race().");return new e(function(e,t){for(var r=0,i;r<n.length;r++){i=n[r];if(i&&typeof i.then==="function")i.then(e,t);else e(i)}})};E.resolve=function(t){var e=this;if(t&&typeof t==="object"&&t.constructor===e)return t;return new e(function(e){e(t)})};E.reject=function(r){var e=this;return new e(function(e,t){t(r)})}})(typeof window!="undefined"?window:typeof e!="undefined"?e:typeof self!="undefined"?self:this)}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("timers").setImmediate)},{timers:75}],37:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,p="~";function i(){}if(Object.create){i.prototype=Object.create(null);if(!(new i).__proto__)p=false}function s(e,t,r){this.fn=e;this.context=t;this.once=r||false}function a(e,t,r,i,n){if(typeof r!=="function"){throw new TypeError("The listener must be a function")}var a=new s(r,i||e,n),o=p?p+t:t;if(!e._events[o])e._events[o]=a,e._eventsCount++;else if(!e._events[o].fn)e._events[o].push(a);else e._events[o]=[e._events[o],a];return e}function h(e,t){if(--e._eventsCount===0)e._events=new i;else delete e._events[t]}function o(){this._events=new i;this._eventsCount=0}o.prototype.eventNames=function e(){var t=[],r,i;if(this._eventsCount===0)return t;for(i in r=this._events){if(n.call(r,i))t.push(p?i.slice(1):i)}if(Object.getOwnPropertySymbols){return t.concat(Object.getOwnPropertySymbols(r))}return t};o.prototype.listeners=function e(t){var r=p?p+t:t,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,a=i.length,o=new Array(a);n<a;n++){o[n]=i[n].fn}return o};o.prototype.listenerCount=function e(t){var r=p?p+t:t,i=this._events[r];if(!i)return 0;if(i.fn)return 1;return i.length};o.prototype.emit=function e(t,r,i,n,a,o){var s=p?p+t:t;if(!this._events[s])return false;var u=this._events[s],l=arguments.length,h,c;if(u.fn){if(u.once)this.removeListener(t,u.fn,undefined,true);switch(l){case 1:return u.fn.call(u.context),true;case 2:return u.fn.call(u.context,r),true;case 3:return u.fn.call(u.context,r,i),true;case 4:return u.fn.call(u.context,r,i,n),true;case 5:return u.fn.call(u.context,r,i,n,a),true;case 6:return u.fn.call(u.context,r,i,n,a,o),true}for(c=1,h=new Array(l-1);c<l;c++){h[c-1]=arguments[c]}u.fn.apply(u.context,h)}else{var f=u.length,d;for(c=0;c<f;c++){if(u[c].once)this.removeListener(t,u[c].fn,undefined,true);switch(l){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,r);break;case 3:u[c].fn.call(u[c].context,r,i);break;case 4:u[c].fn.call(u[c].context,r,i,n);break;default:if(!h)for(d=1,h=new Array(l-1);d<l;d++){h[d-1]=arguments[d]}u[c].fn.apply(u[c].context,h)}}}return true};o.prototype.on=function e(t,r,i){return a(this,t,r,i,false)};o.prototype.once=function e(t,r,i){return a(this,t,r,i,true)};o.prototype.removeListener=function e(t,r,i,n){var a=p?p+t:t;if(!this._events[a])return this;if(!r){h(this,a);return this}var o=this._events[a];if(o.fn){if(o.fn===r&&(!n||o.once)&&(!i||o.context===i)){h(this,a)}}else{for(var s=0,u=[],l=o.length;s<l;s++){if(o[s].fn!==r||n&&!o[s].once||i&&o[s].context!==i){u.push(o[s])}}if(u.length)this._events[a]=u.length===1?u[0]:u;else h(this,a)}return this};o.prototype.removeAllListeners=function e(t){var r;if(t){r=p?p+t:t;if(this._events[r])h(this,r)}else{this._events=new i;this._eventsCount=0}return this};o.prototype.off=o.prototype.removeListener;o.prototype.addListener=o.prototype.on;o.prefixed=p;o.EventEmitter=o;if("undefined"!==typeof t){t.exports=o}},{}],38:[function(e,r,i){(function(Hr){(function(){(function(e,t){typeof i==="object"&&typeof r!=="undefined"?t(i):typeof define==="function"&&define.amd?define(["exports"],t):t(e["image-q"]={})})(this,function(e){"use strict";var m=typeof window!=="undefined"?window:typeof Hr!=="undefined"?Hr:typeof self!=="undefined"?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function r(e,t){return t={exports:{}},e(t,t.exports),t.exports}var f=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r;(function(e){e[e["RED"]=.2126]="RED";e[e["GREEN"]=.7152]="GREEN";e[e["BLUE"]=.0722]="BLUE";e[e["WHITE"]=1]="WHITE"})(r=t.Y||(t.Y={}));var i;(function(e){e[e["RED"]=.64]="RED";e[e["GREEN"]=.3]="GREEN";e[e["BLUE"]=.15]="BLUE";e[e["WHITE"]=.3127]="WHITE"})(i=t.x||(t.x={}));var n;(function(e){e[e["RED"]=.33]="RED";e[e["GREEN"]=.6]="GREEN";e[e["BLUE"]=.06]="BLUE";e[e["WHITE"]=.329]="WHITE"})(n=t.y||(t.y={}))});t(f);var i=f.Y;var n=f.x;var a=f.y;var o=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.bt709=f});t(o);var s=o.bt709;var u=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});function i(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}function r(e,t,r){e=i(e/255);t=i(t/255);r=i(r/255);return{x:e*.4124+t*.3576+r*.1805,y:e*.2126+t*.7152+r*.0722,z:e*.0193+t*.1192+r*.9505}}t.rgb2xyz=r});t(u);var l=u.rgb2xyz;var G=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){return e*(Math.PI/180)}t.degrees2radians=r;function i(e,t,r){var i=e;if(i<t)i=t;if(i<r)i=r;return i}t.max3=i;function n(e,t,r){var i=e;if(i>t)i=t;if(i>r)i=r;return i}t.min3=n;function a(e,t,r){if(e>r)e=r;if(e<t)e=t;return e|0}t.intInRange=a;function o(e){e=Math.round(e);if(e>255)e=255;else if(e<0)e=0;return e}t.inRange0to255Rounded=o;function s(e){if(e>255)e=255;else if(e<0)e=0;return e}t.inRange0to255=s;function u(e,r){var t=typeof e[0];var i;if(t==="number"||t==="string"){var n=Object.create(null);for(var a=0,o=e.length;a<o;a++){var s=e[a];if(n[s]||n[s]===0)continue;n[s]=a}i=e.sort(function(e,t){return r(e,t)||n[e]-n[t]})}else{var u=e.slice(0);i=e.sort(function(e,t){return r(e,t)||u.indexOf(e)-u.indexOf(t)})}return i}t.stableSort=u});t(G);var h=G.degrees2radians;var c=G.max3;var d=G.min3;var p=G.intInRange;var v=G.inRange0to255Rounded;var g=G.inRange0to255;var y=G.stableSort;var _=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t,r){var i=G.min3(e,t,r);var n=G.max3(e,t,r);var a=n-i;var o=(i+n)/510;var s=0;if(o>0&&o<1)s=a/(o<.5?n+i:510-n-i);var u=0;if(a>0){if(n===e){u=(t-r)/a}else if(n===t){u=2+(r-e)/a}else{u=4+(e-t)/a}u*=60;if(u<0)u+=360}return{h:u,s:s,l:o}}t.rgb2hsl=r});t(_);var b=_.rgb2hsl;var x=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var i=.95047;var n=1;var a=1.08883;function o(e){return e>.008856?Math.pow(e,1/3):7.787*e+16/116}function r(e,t,r){e=o(e/i);t=o(t/n);r=o(r/a);if(116*t-16<0)throw new Error("xxx");return{L:Math.max(0,116*t-16),a:500*(e-t),b:200*(t-r)}}t.xyz2lab=r});t(x);var w=x.xyz2lab;var E=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t,r){var i=u.rgb2xyz(e,t,r);return x.xyz2lab(i.x,i.y,i.z)}t.rgb2lab=r});t(E);var S=E.rgb2lab;var T=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var o=.95047;var s=1;var u=1.08883;function l(e){return e>.206893034?Math.pow(e,3):(e-16/116)/7.787}function r(e,t,r){var i=(e+16)/116;var n=t/500+i;var a=i-r/200;return{x:o*l(n),y:s*l(i),z:u*l(a)}}t.lab2xyz=r});t(T);var P=T.lab2xyz;var A=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});function o(e){return e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e}function r(e,t,r){var i=o(e*3.2406+t*-1.5372+r*-.4986);var n=o(e*-.9689+t*1.8758+r*.0415);var a=o(e*.0557+t*-.204+r*1.057);return{r:G.inRange0to255Rounded(i*255),g:G.inRange0to255Rounded(n*255),b:G.inRange0to255Rounded(a*255)}}t.xyz2rgb=r});t(A);var I=A.xyz2rgb;var O=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t,r){var i=T.lab2xyz(e,t,r);return A.xyz2rgb(i.x,i.y,i.z)}t.lab2rgb=r});t(O);var M=O.lab2rgb;var C=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.rgb2xyz=u.rgb2xyz;t.rgb2hsl=_.rgb2hsl;t.rgb2lab=E.rgb2lab;t.lab2xyz=T.lab2xyz;t.lab2rgb=O.lab2rgb;t.xyz2lab=x.xyz2lab;t.xyz2rgb=A.xyz2rgb});t(C);var D=C.rgb2xyz;var R=C.rgb2hsl;var L=C.rgb2lab;var N=C.lab2xyz;var k=C.lab2rgb;var F=C.xyz2lab;var B=C.xyz2rgb;var j=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(){this._setDefaults();this.setWhitePoint(255,255,255,255)}e.prototype.setWhitePoint=function(e,t,r,i){this._whitePoint={r:e>0?255/e:0,g:t>0?255/t:0,b:r>0?255/r:0,a:i>0?255/i:0};this._maxDistance=this.calculateRaw(e,t,r,i,0,0,0,0)};e.prototype.calculateNormalized=function(e,t){return this.calculateRaw(e.r,e.g,e.b,e.a,t.r,t.g,t.b,t.a)/this._maxDistance};return e}();t.AbstractDistanceCalculator=r});t(j);var U=j.AbstractDistanceCalculator;var H=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:true});var i=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.calculateRaw=function(e,t,r,i,n,a,o,s){var u=E.rgb2lab(G.inRange0to255(e*this._whitePoint.r),G.inRange0to255(t*this._whitePoint.g),G.inRange0to255(r*this._whitePoint.b));var l=E.rgb2lab(G.inRange0to255(n*this._whitePoint.r),G.inRange0to255(a*this._whitePoint.g),G.inRange0to255(o*this._whitePoint.b));var h=u.L-l.L;var c=u.a-l.a;var f=u.b-l.b;var d=Math.sqrt(u.a*u.a+u.b*u.b);var p=Math.sqrt(l.a*l.a+l.b*l.b);var v=d-p;var m=c*c+f*f-v*v;m=m<0?0:Math.sqrt(m);var g=(s-i)*this._whitePoint.a*this._kA;return Math.sqrt(Math.pow(h/this._Kl,2)+Math.pow(v/(1+this._K1*d),2)+Math.pow(m/(1+this._K2*d),2)+Math.pow(g,2))};return t}(j.AbstractDistanceCalculator);t.AbstractCIE94=i;var n=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._setDefaults=function(){this._Kl=2;this._K1=.048;this._K2=.014;this._kA=.25*50/255};return t}(i);t.CIE94Textiles=n;var a=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._setDefaults=function(){this._Kl=1;this._K1=.045;this._K2=.015;this._kA=.25*100/255};return t}(i);t.CIE94GraphicArts=a});t(H);var z=H.AbstractCIE94;var X=H.CIE94Textiles;var W=H.CIE94GraphicArts;var Y=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:true});var i=function(e){r(L,e);function L(){return e!==null&&e.apply(this,arguments)||this}L.prototype._setDefaults=function(){};L._calculatehp=function(e,t){var r=Math.atan2(e,t);if(r>=0)return r;return r+L._deg360InRad};L._calculateRT=function(e,t){var r=Math.pow(t,7);var i=2*Math.sqrt(r/(r+L._pow25to7));var n=L._deg30InRad*Math.exp(-Math.pow((e-L._deg275InRad)/L._deg25InRad,2));return-Math.sin(2*n)*i};L._calculateT=function(e){return 1-.17*Math.cos(e-L._deg30InRad)+.24*Math.cos(e*2)+.32*Math.cos(e*3+L._deg6InRad)-.2*Math.cos(e*4-L._deg63InRad)};L._calculate_ahp=function(e,t,r,i){var n=r+i;if(e===0)return n;if(t<=L._deg180InRad)return n/2;if(n<L._deg360InRad)return(n+L._deg360InRad)/2;return(n-L._deg360InRad)/2};L._calculate_dHp=function(e,t,r,i){var n;if(e===0){n=0}else if(t<=L._deg180InRad){n=r-i}else if(r<=i){n=r-i+L._deg360InRad}else{n=r-i-L._deg360InRad}return 2*Math.sqrt(e)*Math.sin(n/2)};L.prototype.calculateRaw=function(e,t,r,i,n,a,o,s){var u=E.rgb2lab(G.inRange0to255(e*this._whitePoint.r),G.inRange0to255(t*this._whitePoint.g),G.inRange0to255(r*this._whitePoint.b));var l=E.rgb2lab(G.inRange0to255(n*this._whitePoint.r),G.inRange0to255(a*this._whitePoint.g),G.inRange0to255(o*this._whitePoint.b));var h=(s-i)*this._whitePoint.a*L._kA;var c=this.calculateRawInLab(u,l);return Math.sqrt(c+h*h)};L.prototype.calculateRawInLab=function(e,t){var r=e.L;var i=e.a;var n=e.b;var a=t.L;var o=t.a;var s=t.b;var u=Math.sqrt(i*i+n*n);var l=Math.sqrt(o*o+s*s);var h=Math.pow((u+l)/2,7);var c=.5*(1-Math.sqrt(h/(h+L._pow25to7)));var f=(1+c)*i;var d=(1+c)*o;var p=Math.sqrt(f*f+n*n);var v=Math.sqrt(d*d+s*s);var m=p*v;var g=L._calculatehp(n,f);var y=L._calculatehp(s,d);var _=Math.abs(g-y);var b=a-r;var x=v-p;var w=L._calculate_dHp(m,_,y,g);var E=L._calculate_ahp(m,_,g,y);var S=L._calculateT(E);var T=(p+v)/2;var P=Math.pow((r+a)/2-50,2);var A=1+.015*P/Math.sqrt(20+P);var I=1+.045*T;var O=1+.015*S*T;var M=L._calculateRT(E,T);var C=b/A;var D=x/I;var R=w/O;return Math.pow(C,2)+Math.pow(D,2)+Math.pow(R,2)+M*D*R};L._kA=.25*100/255;L._pow25to7=Math.pow(25,7);L._deg360InRad=G.degrees2radians(360);L._deg180InRad=G.degrees2radians(180);L._deg30InRad=G.degrees2radians(30);L._deg6InRad=G.degrees2radians(6);L._deg63InRad=G.degrees2radians(63);L._deg275InRad=G.degrees2radians(275);L._deg25InRad=G.degrees2radians(25);return L}(j.AbstractDistanceCalculator);t.CIEDE2000=i});t(Y);var q=Y.CIEDE2000;var V=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:true});var i=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.calculateRaw=function(e,t,r,i,n,a,o,s){var u=(e+n)/2*this._whitePoint.r;var l=(e-n)*this._whitePoint.r;var h=(t-a)*this._whitePoint.g;var c=(r-o)*this._whitePoint.b;var f=((512+u)*l*l>>8)+4*h*h+((767-u)*c*c>>8);var d=(s-i)*this._whitePoint.a;return Math.sqrt(f+d*d)};t.prototype._setDefaults=function(){};return t}(j.AbstractDistanceCalculator);t.CMetric=i});t(V);var $=V.CMetric;var K=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:true});var i=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.calculateRaw=function(e,t,r,i,n,a,o,s){var u=n-e;var l=a-t;var h=o-r;var c=s-i;return Math.sqrt(this._kR*u*u+this._kG*l*l+this._kB*h*h+this._kA*c*c)};return t}(j.AbstractDistanceCalculator);t.AbstractEuclidean=i;var n=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._setDefaults=function(){this._kR=1;this._kG=1;this._kB=1;this._kA=1};return t}(i);t.Euclidean=n;var a=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._setDefaults=function(){this._kR=f.Y.RED;this._kG=f.Y.GREEN;this._kB=f.Y.BLUE;this._kA=1};return t}(i);t.EuclideanBT709=a;var o=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._setDefaults=function(){this._kR=f.Y.RED;this._kG=f.Y.GREEN;this._kB=f.Y.BLUE;this._kA=0};return t}(i);t.EuclideanBT709NoAlpha=o});t(K);var Q=K.AbstractEuclidean;var Z=K.Euclidean;var J=K.EuclideanBT709;var ee=K.EuclideanBT709NoAlpha;var te=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:true});var i=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.calculateRaw=function(e,t,r,i,n,a,o,s){var u=n-e;var l=a-t;var h=o-r;var c=s-i;if(u<0)u=0-u;if(l<0)l=0-l;if(h<0)h=0-h;if(c<0)c=0-c;return this._kR*u+this._kG*l+this._kB*h+this._kA*c};return t}(j.AbstractDistanceCalculator);t.AbstractManhattan=i;var n=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._setDefaults=function(){this._kR=1;this._kG=1;this._kB=1;this._kA=1};return t}(i);t.Manhattan=n;var a=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._setDefaults=function(){this._kR=.4984;this._kG=.8625;this._kB=.2979;this._kA=1};return t}(i);t.ManhattanNommyde=a;var o=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype._setDefaults=function(){this._kR=f.Y.RED;this._kG=f.Y.GREEN;this._kB=f.Y.BLUE;this._kA=1};return t}(i);t.ManhattanBT709=o});t(te);var re=te.AbstractManhattan;var ie=te.Manhattan;var ne=te.ManhattanNommyde;var ae=te.ManhattanBT709;var oe=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:true});var i=function(e){r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.calculateRaw=function(e,t,r,i,n,a,o,s){var u=(s-i)*this._whitePoint.a;return this._colordifferenceCh(e*this._whitePoint.r,n*this._whitePoint.r,u)+this._colordifferenceCh(t*this._whitePoint.g,a*this._whitePoint.g,u)+this._colordifferenceCh(r*this._whitePoint.b,o*this._whitePoint.b,u)};t.prototype._colordifferenceCh=function(e,t,r){var i=e-t;var n=i+r;return i*i+n*n};t.prototype._setDefaults=function(){};return t}(j.AbstractDistanceCalculator);t.PNGQuant=i});t(oe);var se=oe.PNGQuant;var ue=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.AbstractDistanceCalculator=j.AbstractDistanceCalculator;t.CIE94Textiles=H.CIE94Textiles;t.CIE94GraphicArts=H.CIE94GraphicArts;t.CIEDE2000=Y.CIEDE2000;t.CMetric=V.CMetric;t.AbstractEuclidean=K.AbstractEuclidean;t.Euclidean=K.Euclidean;t.EuclideanBT709NoAlpha=K.EuclideanBT709NoAlpha;t.EuclideanBT709=K.EuclideanBT709;t.AbstractManhattan=te.AbstractManhattan;t.Manhattan=te.Manhattan;t.ManhattanBT709=te.ManhattanBT709;t.ManhattanNommyde=te.ManhattanNommyde;t.PNGQuant=oe.PNGQuant});t(ue);var le=ue.AbstractDistanceCalculator;var he=ue.CIE94Textiles;var ce=ue.CIE94GraphicArts;var fe=ue.CIEDE2000;var de=ue.CMetric;var pe=ue.AbstractEuclidean;var ve=ue.Euclidean;var me=ue.EuclideanBT709NoAlpha;var ge=ue.EuclideanBT709;var ye=ue.AbstractManhattan;var _e=ue.Manhattan;var be=ue.ManhattanBT709;var xe=ue.ManhattanNommyde;var we=ue.PNGQuant;var Ee=r(function(e,t){var a=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(){}e.prototype.quantizeSync=function(){try{for(var e=a(this.quantize()),t=e.next();!t.done;t=e.next()){var r=t.value;if(r.palette){return r.palette}}}catch(e){i={error:e}}finally{try{if(t&&!t.done&&(n=e.return))n.call(e)}finally{if(i)throw i.error}}throw new Error("unreachable");var i,n};return e}();t.AbstractPaletteQuantizer=r});t(Ee);var Se=Ee.AbstractPaletteQuantizer;var Te=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r=function(){function a(){this.uint32=-1>>>0;this.r=this.g=this.b=this.a=0;this.rgba=new Array(4);this.rgba[0]=0;this.rgba[1]=0;this.rgba[2]=0;this.rgba[3]=0}a.createByQuadruplet=function(e){var t=new a;t.r=e[0]|0;t.g=e[1]|0;t.b=e[2]|0;t.a=e[3]|0;t._loadUINT32();t._loadQuadruplet();return t};a.createByRGBA=function(e,t,r,i){var n=new a;n.r=e|0;n.g=t|0;n.b=r|0;n.a=i|0;n._loadUINT32();n._loadQuadruplet();return n};a.createByUint32=function(e){var t=new a;t.uint32=e>>>0;t._loadRGBA();t._loadQuadruplet();return t};a.prototype.from=function(e){this.r=e.r;this.g=e.g;this.b=e.b;this.a=e.a;this.uint32=e.uint32;this.rgba[0]=e.r;this.rgba[1]=e.g;this.rgba[2]=e.b;this.rgba[3]=e.a};a.prototype.getLuminosity=function(e){var t=this.r;var r=this.g;var i=this.b;if(e){t=Math.min(255,255-this.a+this.a*t/255);r=Math.min(255,255-this.a+this.a*r/255);i=Math.min(255,255-this.a+this.a*i/255)}return t*f.Y.RED+r*f.Y.GREEN+i*f.Y.BLUE};a.prototype._loadUINT32=function(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0};a.prototype._loadRGBA=function(){this.r=this.uint32&255;this.g=this.uint32>>>8&255;this.b=this.uint32>>>16&255;this.a=this.uint32>>>24&255};a.prototype._loadQuadruplet=function(){this.rgba[0]=this.r;this.rgba[1]=this.g;this.rgba[2]=this.b;this.rgba[3]=this.a};return a}();t.Point=r});t(Te);var Pe=Te.Point;var Ae=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r=function(){function o(){this._width=0;this._height=0;this._pointArray=[]}o.prototype.getWidth=function(){return this._width};o.prototype.getHeight=function(){return this._height};o.prototype.setWidth=function(e){this._width=e};o.prototype.setHeight=function(e){this._height=e};o.prototype.getPointArray=function(){return this._pointArray};o.prototype.clone=function(){var e=new o;e._width=this._width;e._height=this._height;for(var t=0,r=this._pointArray.length;t<r;t++){e._pointArray[t]=Te.Point.createByUint32(this._pointArray[t].uint32|0)}return e};o.prototype.toUint32Array=function(){var e=this._pointArray.length;var t=new Uint32Array(e);for(var r=0;r<e;r++){t[r]=this._pointArray[r].uint32}return t};o.prototype.toUint8Array=function(){return new Uint8Array(this.toUint32Array().buffer)};o.fromHTMLImageElement=function(e){var t=e.naturalWidth;var r=e.naturalHeight;var i=document.createElement("canvas");i.width=t;i.height=r;var n=i.getContext("2d");n.drawImage(e,0,0,t,r,0,0,t,r);return o.fromHTMLCanvasElement(i)};o.fromHTMLCanvasElement=function(e){var t=e.width;var r=e.height;var i=e.getContext("2d");var n=i.getImageData(0,0,t,r);return o.fromImageData(n)};o.fromImageData=function(e){var t=e.width;var r=e.height;return o.fromUint8Array(e.data,t,r)};o.fromUint8Array=function(e,t,r){switch(Object.prototype.toString.call(e)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:e=new Uint8Array(e)}var i=new Uint32Array(e.buffer);return o.fromUint32Array(i,t,r)};o.fromUint32Array=function(e,t,r){var i=new o;i._width=t;i._height=r;for(var n=0,a=e.length;n<a;n++){i._pointArray[n]=Te.Point.createByUint32(e[n]|0)}return i};o.fromBuffer=function(e,t,r){var i=new Uint32Array(e.buffer,e.byteOffset,e.byteLength/Uint32Array.BYTES_PER_ELEMENT);return o.fromUint32Array(i,t,r)};return o}();t.PointContainer=r});t(Ae);var Ie=Ae.PointContainer;var Oe=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var h=10;function c(e,t){var r=360;var i=r/t;var n=i/2;for(var a=1,o=i-n;a<t;a++,o+=i){if(e>=o&&e<o+i)return a}return 0}t.hueGroup=c;var r=function(){function e(){this._pointArray=[];this._i32idx={};this._pointContainer=new Ae.PointContainer;this._pointContainer.setHeight(1);this._pointArray=this._pointContainer.getPointArray()}e.prototype.add=function(e){this._pointArray.push(e);this._pointContainer.setWidth(this._pointArray.length)};e.prototype.has=function(e){for(var t=this._pointArray.length-1;t>=0;t--){if(e.uint32===this._pointArray[t].uint32)return true}return false};e.prototype.getNearestColor=function(e,t){return this._pointArray[this._getNearestIndex(e,t)|0]};e.prototype.getPointContainer=function(){return this._pointContainer};e.prototype._nearestPointFromCache=function(e){return typeof this._i32idx[e]==="number"?this._i32idx[e]:-1};e.prototype._getNearestIndex=function(e,t){var r=this._nearestPointFromCache(""+t.uint32);if(r>=0)return r;var i=Number.MAX_VALUE;r=0;for(var n=0,a=this._pointArray.length;n<a;n++){var o=this._pointArray[n];var s=e.calculateRaw(t.r,t.g,t.b,t.a,o.r,o.g,o.b,o.a);if(s<i){i=s;r=n}}this._i32idx[t.uint32]=r;return r};e.prototype.sort=function(){this._i32idx={};this._pointArray.sort(function(e,t){var r=_.rgb2hsl(e.r,e.g,e.b);var i=_.rgb2hsl(t.r,t.g,t.b);var n=e.r===e.g&&e.g===e.b?0:1+c(r.h,h);var a=t.r===t.g&&t.g===t.b?0:1+c(i.h,h);var o=a-n;if(o)return-o;var s=e.getLuminosity(true);var u=t.getLuminosity(true);if(u-s!==0)return u-s;var l=(i.s*100|0)-(r.s*100|0);if(l)return-l;return 0})};return e}();t.Palette=r});t(Oe);var Me=Oe.hueGroup;var Ce=Oe.Palette;var De=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var i=function(){function e(){this.num=0;this.cols=[]}return e}();var r=function(){function e(e,t){this._numGroups=e;this._minCols=t;this._stats=[];for(var r=0;r<=e;r++){this._stats[r]=new i}this._groupsFull=0}e.prototype.check=function(e){if(this._groupsFull===this._numGroups+1){this.check=function(){}}var t=e&255;var r=e>>>8&255;var i=e>>>16&255;var n=t===r&&r===i?0:1+Oe.hueGroup(_.rgb2hsl(t,r,i).h,this._numGroups);var a=this._stats[n];var o=this._minCols;a.num++;if(a.num>o){return}if(a.num===o){this._groupsFull++}if(a.num<=o){this._stats[n].cols.push(e)}};e.prototype.injectIntoDictionary=function(t){for(var e=0;e<=this._numGroups;e++){if(this._stats[e].num<=this._minCols){this._stats[e].cols.forEach(function(e){if(!t[e]){t[e]=1}else{t[e]++}})}}};e.prototype.injectIntoArray=function(t){for(var e=0;e<=this._numGroups;e++){if(this._stats[e].num<=this._minCols){this._stats[e].cols.forEach(function(e){if(t.indexOf(e)===-1){t.push(e)}})}}};return e}();t.HueStatistics=r});t(De);var Re=De.HueStatistics;var Le=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r=function(){function r(e,t){this._range=e;this._progressRange=t;this._step=Math.max(1,this._range/(r.steps+1)|0);this._last=-this._step;this.progress=0}r.prototype.shouldNotify=function(e){if(e-this._last>=this._step){this._last=e;this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange);return true}return false};r.steps=100;return r}();t.ProgressTracker=r});t(Le);var Ne=Le.ProgressTracker;var ke=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.arithmetic=G;t.HueStatistics=De.HueStatistics;t.Palette=Oe.Palette;t.Point=Te.Point;t.PointContainer=Ae.PointContainer;t.ProgressTracker=Le.ProgressTracker});t(ke);var Fe=ke.arithmetic;var Be=ke.HueStatistics;var je=ke.Palette;var Ue=ke.Point;var He=ke.PointContainer;var Ge=ke.ProgressTracker;var ze=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var x=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};var n=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var w=3;var a=function(){function e(e){this.r=this.g=this.b=this.a=e}e.prototype.toPoint=function(){return Te.Point.createByRGBA(this.r>>w,this.g>>w,this.b>>w,this.a>>w)};e.prototype.subtract=function(e,t,r,i){this.r-=e|0;this.g-=t|0;this.b-=r|0;this.a-=i|0};return e}();var i=function(i){r(b,i);function b(e,t){if(t===void 0){t=256}var r=i.call(this)||this;r._distance=e;r._pointArray=[];r._sampleFactor=1;r._networkSize=t;r._distance.setWhitePoint(255<<w,255<<w,255<<w,255<<w);return r}b.prototype.sample=function(e){this._pointArray=this._pointArray.concat(e.getPointArray())};b.prototype.quantize=function(){return x(this,function(e){switch(e.label){case 0:this._init();return[5,n(this._learn())];case 1:e.sent();return[4,{palette:this._buildPalette(),progress:100}];case 2:e.sent();return[2]}})};b.prototype._init=function(){this._freq=[];this._bias=[];this._radPower=[];this._network=[];for(var e=0;e<this._networkSize;e++){this._network[e]=new a((e<<w+8)/this._networkSize|0);this._freq[e]=b._initialBias/this._networkSize|0;this._bias[e]=0}};b.prototype._learn=function(){var t,r,i,n,a,o,s,u,l,h,c,l,f,d,p,v,m,g,y,_;return x(this,function(e){switch(e.label){case 0:t=this._sampleFactor;r=this._pointArray.length;if(r<b._minpicturebytes)t=1;i=30+(t-1)/3|0;n=r/t|0;a=n/b._nCycles|0;o=b._initAlpha;s=(this._networkSize>>3)*b._radiusBias;u=s>>b._radiusBiasShift;if(u<=1)u=0;for(l=0;l<u;l++){this._radPower[l]=o*((u*u-l*l)*b._radBias/(u*u))>>>0}if(r<b._minpicturebytes){h=1}else if(r%b._prime1!==0){h=b._prime1}else if(r%b._prime2!==0){h=b._prime2}else if(r%b._prime3!==0){h=b._prime3}else{h=b._prime4}c=new ke.ProgressTracker(n,99);l=0,f=0;e.label=1;case 1:if(!(l<n))return[3,5];if(!c.shouldNotify(l))return[3,3];return[4,{progress:c.progress}];case 2:e.sent();e.label=3;case 3:d=this._pointArray[f];p=d.b<<w;v=d.g<<w;m=d.r<<w;g=d.a<<w;y=this._contest(p,v,m,g);this._alterSingle(o,y,p,v,m,g);if(u!==0)this._alterNeighbour(u,y,p,v,m,g);f+=h;if(f>=r)f-=r;l++;if(a===0)a=1;if(l%a===0){o-=o/i|0;s-=s/b._radiusDecrease|0;u=s>>b._radiusBiasShift;if(u<=1)u=0;for(_=0;_<u;_++)this._radPower[_]=o*((u*u-_*_)*b._radBias/(u*u))>>>0}e.label=4;case 4:return[3,1];case 5:return[2]}})};b.prototype._buildPalette=function(){var t=new Oe.Palette;this._network.forEach(function(e){t.add(e.toPoint())});t.sort();return t};b.prototype._alterNeighbour=function(e,t,r,i,n,a){var o=t-e;if(o<-1)o=-1;var s=t+e;if(s>this._networkSize)s=this._networkSize;var u=t+1;var l=t-1;var h=1;while(u<s||l>o){var c=this._radPower[h++]/b._alphaRadBias;if(u<s){var f=this._network[u++];f.subtract(c*(f.r-n),c*(f.g-i),c*(f.b-r),c*(f.a-a))}if(l>o){var f=this._network[l--];f.subtract(c*(f.r-n),c*(f.g-i),c*(f.b-r),c*(f.a-a))}}};b.prototype._alterSingle=function(e,t,r,i,n,a){e/=b._initAlpha;var o=this._network[t];o.subtract(e*(o.r-n),e*(o.g-i),e*(o.b-r),e*(o.a-a))};b.prototype._contest=function(e,t,r,i){var n=255*4<<w;var a=~(1<<31);var o=a;var s=-1;var u=s;for(var l=0;l<this._networkSize;l++){var h=this._network[l];var c=this._distance.calculateNormalized(h,{r:r,g:t,b:e,a:i})*n|0;if(c<a){a=c;s=l}var f=c-(this._bias[l]>>b._initialBiasShift-w);if(f<o){o=f;u=l}var d=this._freq[l]>>b._betaShift;this._freq[l]-=d;this._bias[l]+=d<<b._gammaShift}this._freq[s]+=b._beta;this._bias[s]-=b._betaGamma;return u};b._prime1=499;b._prime2=491;b._prime3=487;b._prime4=503;b._minpicturebytes=b._prime4;b._nCycles=100;b._initialBiasShift=16;b._initialBias=1<<b._initialBiasShift;b._gammaShift=10;b._betaShift=10;b._beta=b._initialBias>>b._betaShift;b._betaGamma=b._initialBias<<b._gammaShift-b._betaShift;b._radiusBiasShift=6;b._radiusBias=1<<b._radiusBiasShift;b._radiusDecrease=30;b._alphaBiasShift=10;b._initAlpha=1<<b._alphaBiasShift;b._radBiasShift=8;b._radBias=1<<b._radBiasShift;b._alphaRadBiasShift=b._alphaBiasShift+b._radBiasShift;b._alphaRadBias=1<<b._alphaRadBiasShift;return b}(Ee.AbstractPaletteQuantizer);t.NeuQuant=i});t(ze);var Xe=ze.NeuQuant;var We=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var x=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};var n=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var w=3;var a=function(){function e(e){this.r=this.g=this.b=this.a=e}e.prototype.toPoint=function(){return Te.Point.createByRGBA(this.r>>w,this.g>>w,this.b>>w,this.a>>w)};e.prototype.subtract=function(e,t,r,i){this.r-=e;this.g-=t;this.b-=r;this.a-=i};return e}();var i=function(i){r(b,i);function b(e,t){if(t===void 0){t=256}var r=i.call(this)||this;r._distance=e;r._pointArray=[];r._sampleFactor=1;r._networkSize=t;r._distance.setWhitePoint(255<<w,255<<w,255<<w,255<<w);return r}b.prototype.sample=function(e){this._pointArray=this._pointArray.concat(e.getPointArray())};b.prototype.quantize=function(){return x(this,function(e){switch(e.label){case 0:this._init();return[5,n(this._learn())];case 1:e.sent();return[4,{palette:this._buildPalette(),progress:100}];case 2:e.sent();return[2]}})};b.prototype._init=function(){this._freq=[];this._bias=[];this._radPower=[];this._network=[];for(var e=0;e<this._networkSize;e++){this._network[e]=new a((e<<w+8)/this._networkSize);this._freq[e]=b._initialBias/this._networkSize;this._bias[e]=0}};b.prototype._learn=function(){var t,r,i,n,a,o,s,u,l,h,c,l,f,d,p,v,m,g,y,_;return x(this,function(e){switch(e.label){case 0:t=this._sampleFactor;r=this._pointArray.length;if(r<b._minpicturebytes)t=1;i=30+(t-1)/3;n=r/t;a=n/b._nCycles|0;o=b._initAlpha;s=(this._networkSize>>3)*b._radiusBias;u=s>>b._radiusBiasShift;if(u<=1)u=0;for(l=0;l<u;l++){this._radPower[l]=o*((u*u-l*l)*b._radBias/(u*u))}if(r<b._minpicturebytes){h=1}else if(r%b._prime1!==0){h=b._prime1}else if(r%b._prime2!==0){h=b._prime2}else if(r%b._prime3!==0){h=b._prime3}else{h=b._prime4}c=new ke.ProgressTracker(n,99);l=0,f=0;e.label=1;case 1:if(!(l<n))return[3,5];if(!c.shouldNotify(l))return[3,3];return[4,{progress:c.progress}];case 2:e.sent();e.label=3;case 3:d=this._pointArray[f];p=d.b<<w;v=d.g<<w;m=d.r<<w;g=d.a<<w;y=this._contest(p,v,m,g);this._alterSingle(o,y,p,v,m,g);if(u!==0)this._alterNeighbour(u,y,p,v,m,g);f+=h;if(f>=r)f-=r;l++;if(a===0)a=1;if(l%a===0){o-=o/i;s-=s/b._radiusDecrease;u=s>>b._radiusBiasShift;if(u<=1)u=0;for(_=0;_<u;_++)this._radPower[_]=o*((u*u-_*_)*b._radBias/(u*u))}e.label=4;case 4:return[3,1];case 5:return[2]}})};b.prototype._buildPalette=function(){var t=new Oe.Palette;this._network.forEach(function(e){t.add(e.toPoint())});t.sort();return t};b.prototype._alterNeighbour=function(e,t,r,i,n,a){var o=t-e;if(o<-1)o=-1;var s=t+e;if(s>this._networkSize)s=this._networkSize;var u=t+1;var l=t-1;var h=1;while(u<s||l>o){var c=this._radPower[h++]/b._alphaRadBias;if(u<s){var f=this._network[u++];f.subtract(c*(f.r-n),c*(f.g-i),c*(f.b-r),c*(f.a-a))}if(l>o){var f=this._network[l--];f.subtract(c*(f.r-n),c*(f.g-i),c*(f.b-r),c*(f.a-a))}}};b.prototype._alterSingle=function(e,t,r,i,n,a){e/=b._initAlpha;var o=this._network[t];o.subtract(e*(o.r-n),e*(o.g-i),e*(o.b-r),e*(o.a-a))};b.prototype._contest=function(e,t,r,i){var n=255*4<<w;var a=~(1<<31);var o=a;var s=-1;var u=s;for(var l=0;l<this._networkSize;l++){var h=this._network[l];var c=this._distance.calculateNormalized(h,{r:r,g:t,b:e,a:i})*n;if(c<a){a=c;s=l}var f=c-(this._bias[l]>>b._initialBiasShift-w);if(f<o){o=f;u=l}var d=this._freq[l]>>b._betaShift;this._freq[l]-=d;this._bias[l]+=d<<b._gammaShift}this._freq[s]+=b._beta;this._bias[s]-=b._betaGamma;return u};b._prime1=499;b._prime2=491;b._prime3=487;b._prime4=503;b._minpicturebytes=b._prime4;b._nCycles=100;b._initialBiasShift=16;b._initialBias=1<<b._initialBiasShift;b._gammaShift=10;b._betaShift=10;b._beta=b._initialBias>>b._betaShift;b._betaGamma=b._initialBias<<b._gammaShift-b._betaShift;b._radiusBiasShift=6;b._radiusBias=1<<b._radiusBiasShift;b._radiusDecrease=30;b._alphaBiasShift=10;b._initAlpha=1<<b._alphaBiasShift;b._radBiasShift=8;b._radBias=1<<b._radBiasShift;b._alphaRadBiasShift=b._alphaBiasShift+b._radBiasShift;b._alphaRadBias=1<<b._alphaRadBiasShift;return b}(Ee.AbstractPaletteQuantizer);t.NeuQuantFloat=i});t(We);var Ye=We.NeuQuantFloat;var qe=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var r=function(){function h(e,t){this._method=e;this._minHueCols=t<<2;this._initColors=t<<2;this._hueStats=new De.HueStatistics(h._hueGroups,this._minHueCols);this._histogram=Object.create(null)}h.prototype.sample=function(e){switch(this._method){case 1:this._colorStats1D(e);break;case 2:this._colorStats2D(e);break}};h.prototype.getImportanceSortedColorsIDXI32=function(){var r=this;var e=G.stableSort(Object.keys(this._histogram),function(e,t){return r._histogram[t]-r._histogram[e]});if(e.length===0){return[]}var t;switch(this._method){case 1:var i=Math.min(e.length,this._initColors);var n=e[i-1];var a=this._histogram[n];t=e.slice(0,i);var o=i;var s=e.length;while(o<s&&this._histogram[e[o]]===a){t.push(e[o++])}this._hueStats.injectIntoArray(t);break;case 2:t=e;break;default:throw new Error("Incorrect method")}return t.map(function(e){return+e})};h.prototype._colorStats1D=function(e){var t=this._histogram;var r=e.getPointArray();var i=r.length;for(var n=0;n<i;n++){var a=r[n].uint32;this._hueStats.check(a);if(a in t){t[a]++}else{t[a]=1}}};h.prototype._colorStats2D=function(e){var n=this;var t=e.getWidth();var r=e.getHeight();var a=e.getPointArray();var i=h._boxSize[0];var o=h._boxSize[1];var s=i*o;var u=this._makeBoxes(t,r,i,o);var l=this._histogram;u.forEach(function(e){var r=Math.round(e.w*e.h/s)*h._boxPixels;if(r<2)r=2;var i={};n._iterateBox(e,t,function(e){var t=a[e].uint32;n._hueStats.check(t);if(t in l){l[t]++}else if(t in i){if(++i[t]>=r){l[t]=i[t]}}else{i[t]=1}})});this._hueStats.injectIntoDictionary(l)};h.prototype._iterateBox=function(e,t,r){var i=e;var n=i.y*t+i.x;var a=(i.y+i.h-1)*t+(i.x+i.w-1);var o=t-i.w+1;var s=0;var u=n;do{r.call(this,u);u+=++s%i.w===0?o:1}while(u<=a)};h.prototype._makeBoxes=function(e,t,r,i){var n=e%r;var a=t%i;var o=e-n;var s=t-a;var u=[];for(var l=0;l<t;l+=i){for(var h=0;h<e;h+=r){u.push({x:h,y:l,w:h===o?n:r,h:l===s?a:i})}}return u};h._boxSize=[64,64];h._boxPixels=2;h._hueGroups=10;return h}();t.ColorHistogram=r});t(qe);var Ve=qe.ColorHistogram;var $e=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var _=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};var i=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var b=function(){function e(e,t,r){this.index=e;this.color=t;this.distance=r}return e}();var n=function(n){r(e,n);function e(e,t,r){if(t===void 0){t=256}if(r===void 0){r=2}var i=n.call(this)||this;i._distance=e;i._colors=t;i._histogram=new qe.ColorHistogram(r,t);i._initialDistance=.01;i._distanceIncrement=.005;return i}e.prototype.sample=function(e){this._histogram.sample(e)};e.prototype.quantize=function(){var t;return _(this,function(e){switch(e.label){case 0:t=this._histogram.getImportanceSortedColorsIDXI32();if(t.length===0){throw new Error("No colors in image")}return[5,i(this._buildPalette(t))];case 1:e.sent();return[2]}})};e.prototype._buildPalette=function(t){var r,i,n,a,o,s,u,l,h,a,c,f,d,p,v,m,g,y;return _(this,function(e){switch(e.label){case 0:r=new Oe.Palette;i=r.getPointContainer().getPointArray();n=new Array(t.length);for(a=0;a<t.length;a++){i.push(Te.Point.createByUint32(t[a]));n[a]=1}o=i.length;s=[];u=o;l=this._initialDistance;h=new ke.ProgressTracker(u-this._colors,99);e.label=1;case 1:if(!(u>this._colors))return[3,7];s.length=0;a=0;e.label=2;case 2:if(!(a<o))return[3,6];if(!h.shouldNotify(o-u))return[3,4];return[4,{progress:h.progress}];case 3:e.sent();e.label=4;case 4:if(n[a]===0)return[3,5];c=i[a];for(f=a+1;f<o;f++){if(n[f]===0)continue;d=i[f];p=this._distance.calculateNormalized(c,d);if(p<l){s.push(new b(f,d,p));n[f]=0;u--}}e.label=5;case 5:a++;return[3,2];case 6:l+=u>this._colors*3?this._initialDistance:this._distanceIncrement;return[3,1];case 7:if(u<this._colors){G.stableSort(s,function(e,t){return t.distance-e.distance});v=0;while(u<this._colors&&v<s.length){m=s[v];n[m.index]=1;u++;v++}}g=i.length;for(y=g-1;y>=0;y--){if(n[y]===0){if(y!==g-1){i[y]=i[g-1]}--g}}i.length=g;r.sort();return[4,{palette:r,progress:100}];case 8:e.sent();return[2]}})};return e}(Ee.AbstractPaletteQuantizer);t.RGBQuant=n});t($e);var Ke=$e.RGBQuant;var Qe=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var T=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};var E=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});function P(e){var t=[];for(var r=0;r<e;r++){t[r]=0}return t}function i(e,t,r,i){var n=new Array(e);for(var a=0;a<e;a++){n[a]=new Array(t);for(var o=0;o<t;o++){n[a][o]=new Array(r);for(var s=0;s<r;s++){n[a][o][s]=new Array(i);for(var u=0;u<i;u++){n[a][o][s][u]=0}}}}return n}function A(e,t,r){var i=new Array(e);for(var n=0;n<e;n++){i[n]=new Array(t);for(var a=0;a<t;a++){i[n][a]=new Array(r);for(var o=0;o<r;o++){i[n][a][o]=0}}}return i}function I(e,t,r,i,n){for(var a=0;a<t;a++){e[a]=[];for(var o=0;o<r;o++){e[a][o]=[];for(var s=0;s<i;s++){e[a][o][s]=n}}}}function O(e,t,r){for(var i=0;i<t;i++){e[i]=r}}var a=function(){function e(){}return e}();t.WuColorCube=a;var n=function(n){r(S,n);function S(e,t,r){if(t===void 0){t=256}if(r===void 0){r=5}var i=n.call(this)||this;i._distance=e;i._setQuality(r);i._initialize(t);return i}S.prototype.sample=function(e){var t=e.getPointArray();for(var r=0,i=t.length;r<i;r++){this._addColor(t[r])}this._pixels=this._pixels.concat(t)};S.prototype.quantize=function(){var t,r,i,n,a,o,s,u;return T(this,function(e){switch(e.label){case 0:return[5,E(this._preparePalette())];case 1:e.sent();t=new Oe.Palette;for(r=0;r<this._colors;r++){if(this._sums[r]>0){i=this._sums[r];n=this._reds[r]/i;a=this._greens[r]/i;o=this._blues[r]/i;s=this._alphas[r]/i;u=Te.Point.createByRGBA(n|0,a|0,o|0,s|0);t.add(u)}}t.sort();return[4,{palette:t,progress:100}];case 2:e.sent();return[2]}})};S.prototype._preparePalette=function(){var t,r,i,n,a,o,s,u,l,h,c,a,f,d,p,v,m,g,y,_,b,x,w;return T(this,function(e){switch(e.label){case 0:return[5,E(this._calculateMoments())];case 1:e.sent();t=0;r=P(this._colors);for(i=1;i<this._colors;++i){if(this._cut(this._cubes[t],this._cubes[i])){r[t]=this._cubes[t].volume>1?this._calculateVariance(this._cubes[t]):0;r[i]=this._cubes[i].volume>1?this._calculateVariance(this._cubes[i]):0}else{r[t]=0;i--}t=0;n=r[0];for(a=1;a<=i;++a){if(r[a]>n){n=r[a];t=a}}if(n<=0){this._colors=i+1;break}}o=[];s=[];u=[];l=[];for(h=0;h<this._colors;++h){c=S._volume(this._cubes[h],this._weights);if(c>0){o[h]=S._volume(this._cubes[h],this._momentsRed)/c|0;s[h]=S._volume(this._cubes[h],this._momentsGreen)/c|0;u[h]=S._volume(this._cubes[h],this._momentsBlue)/c|0;l[h]=S._volume(this._cubes[h],this._momentsAlpha)/c|0}else{o[h]=0;s[h]=0;u[h]=0;l[h]=0}}this._reds=P(this._colors+1);this._greens=P(this._colors+1);this._blues=P(this._colors+1);this._alphas=P(this._colors+1);this._sums=P(this._colors+1);for(a=0,f=this._pixels.length;a<f;a++){d=this._pixels[a];p=-1;v=p;m=Number.MAX_VALUE;for(g=0;g<this._colors;g++){y=o[g];_=s[g];b=u[g];x=l[g];w=this._distance.calculateRaw(y,_,b,x,d.r,d.g,d.b,d.a);if(w<m){m=w;v=g}}this._reds[v]+=d.r;this._greens[v]+=d.g;this._blues[v]+=d.b;this._alphas[v]+=d.a;this._sums[v]++}return[2]}})};S.prototype._addColor=function(e){var t=8-this._significantBitsPerChannel;var r=(e.r>>t)+1;var i=(e.g>>t)+1;var n=(e.b>>t)+1;var a=(e.a>>t)+1;this._weights[a][r][i][n]++;this._momentsRed[a][r][i][n]+=e.r;this._momentsGreen[a][r][i][n]+=e.g;this._momentsBlue[a][r][i][n]+=e.b;this._momentsAlpha[a][r][i][n]+=e.a;this._moments[a][r][i][n]+=this._table[e.r]+this._table[e.g]+this._table[e.b]+this._table[e.a]};S.prototype._calculateMoments=function(){var t,r,i,n,a,o,s,u,l,h,c,f,d,p,v,m,g,y,_,b,x,w,E,S;return T(this,function(e){switch(e.label){case 0:t=[];r=[];i=[];n=[];a=[];o=[];s=A(this._sideSize,this._sideSize,this._sideSize);u=A(this._sideSize,this._sideSize,this._sideSize);l=A(this._sideSize,this._sideSize,this._sideSize);h=A(this._sideSize,this._sideSize,this._sideSize);c=A(this._sideSize,this._sideSize,this._sideSize);f=A(this._sideSize,this._sideSize,this._sideSize);d=0;p=new ke.ProgressTracker(this._alphaMaxSideIndex*this._maxSideIndex,99);v=1;e.label=1;case 1:if(!(v<=this._alphaMaxSideIndex))return[3,7];I(s,this._sideSize,this._sideSize,this._sideSize,0);I(u,this._sideSize,this._sideSize,this._sideSize,0);I(l,this._sideSize,this._sideSize,this._sideSize,0);I(h,this._sideSize,this._sideSize,this._sideSize,0);I(c,this._sideSize,this._sideSize,this._sideSize,0);I(f,this._sideSize,this._sideSize,this._sideSize,0);m=1;e.label=2;case 2:if(!(m<=this._maxSideIndex))return[3,6];if(!p.shouldNotify(d))return[3,4];return[4,{progress:p.progress}];case 3:e.sent();e.label=4;case 4:O(t,this._sideSize,0);O(r,this._sideSize,0);O(i,this._sideSize,0);O(n,this._sideSize,0);O(a,this._sideSize,0);O(o,this._sideSize,0);for(g=1;g<=this._maxSideIndex;++g){y=0;_=0;b=0;x=0;w=0;E=0;for(S=1;S<=this._maxSideIndex;++S){y+=this._weights[v][m][g][S];_+=this._momentsRed[v][m][g][S];b+=this._momentsGreen[v][m][g][S];x+=this._momentsBlue[v][m][g][S];w+=this._momentsAlpha[v][m][g][S];E+=this._moments[v][m][g][S];t[S]+=y;r[S]+=_;i[S]+=b;n[S]+=x;a[S]+=w;o[S]+=E;s[m][g][S]=s[m-1][g][S]+t[S];u[m][g][S]=u[m-1][g][S]+r[S];l[m][g][S]=l[m-1][g][S]+i[S];h[m][g][S]=h[m-1][g][S]+n[S];c[m][g][S]=c[m-1][g][S]+a[S];f[m][g][S]=f[m-1][g][S]+o[S];this._weights[v][m][g][S]=this._weights[v-1][m][g][S]+s[m][g][S];this._momentsRed[v][m][g][S]=this._momentsRed[v-1][m][g][S]+u[m][g][S];this._momentsGreen[v][m][g][S]=this._momentsGreen[v-1][m][g][S]+l[m][g][S];this._momentsBlue[v][m][g][S]=this._momentsBlue[v-1][m][g][S]+h[m][g][S];this._momentsAlpha[v][m][g][S]=this._momentsAlpha[v-1][m][g][S]+c[m][g][S];this._moments[v][m][g][S]=this._moments[v-1][m][g][S]+f[m][g][S]}}e.label=5;case 5:++m,++d;return[3,2];case 6:++v;return[3,1];case 7:return[2]}})};S._volumeFloat=function(e,t){return t[e.alphaMaximum][e.redMaximum][e.greenMaximum][e.blueMaximum]-t[e.alphaMaximum][e.redMaximum][e.greenMinimum][e.blueMaximum]-t[e.alphaMaximum][e.redMinimum][e.greenMaximum][e.blueMaximum]+t[e.alphaMaximum][e.redMinimum][e.greenMinimum][e.blueMaximum]-t[e.alphaMinimum][e.redMaximum][e.greenMaximum][e.blueMaximum]+t[e.alphaMinimum][e.redMaximum][e.greenMinimum][e.blueMaximum]+t[e.alphaMinimum][e.redMinimum][e.greenMaximum][e.blueMaximum]-t[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMaximum]-(t[e.alphaMaximum][e.redMaximum][e.greenMaximum][e.blueMinimum]-t[e.alphaMinimum][e.redMaximum][e.greenMaximum][e.blueMinimum]-t[e.alphaMaximum][e.redMaximum][e.greenMinimum][e.blueMinimum]+t[e.alphaMinimum][e.redMaximum][e.greenMinimum][e.blueMinimum]-t[e.alphaMaximum][e.redMinimum][e.greenMaximum][e.blueMinimum]+t[e.alphaMinimum][e.redMinimum][e.greenMaximum][e.blueMinimum]+t[e.alphaMaximum][e.redMinimum][e.greenMinimum][e.blueMinimum]-t[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMinimum])};S._volume=function(e,t){return S._volumeFloat(e,t)|0};S._top=function(e,t,r,i){var n;switch(t){case S._alpha:n=i[r][e.redMaximum][e.greenMaximum][e.blueMaximum]-i[r][e.redMaximum][e.greenMinimum][e.blueMaximum]-i[r][e.redMinimum][e.greenMaximum][e.blueMaximum]+i[r][e.redMinimum][e.greenMinimum][e.blueMaximum]-(i[r][e.redMaximum][e.greenMaximum][e.blueMinimum]-i[r][e.redMaximum][e.greenMinimum][e.blueMinimum]-i[r][e.redMinimum][e.greenMaximum][e.blueMinimum]+i[r][e.redMinimum][e.greenMinimum][e.blueMinimum]);break;case S._red:n=i[e.alphaMaximum][r][e.greenMaximum][e.blueMaximum]-i[e.alphaMaximum][r][e.greenMinimum][e.blueMaximum]-i[e.alphaMinimum][r][e.greenMaximum][e.blueMaximum]+i[e.alphaMinimum][r][e.greenMinimum][e.blueMaximum]-(i[e.alphaMaximum][r][e.greenMaximum][e.blueMinimum]-i[e.alphaMaximum][r][e.greenMinimum][e.blueMinimum]-i[e.alphaMinimum][r][e.greenMaximum][e.blueMinimum]+i[e.alphaMinimum][r][e.greenMinimum][e.blueMinimum]);break;case S._green:n=i[e.alphaMaximum][e.redMaximum][r][e.blueMaximum]-i[e.alphaMaximum][e.redMinimum][r][e.blueMaximum]-i[e.alphaMinimum][e.redMaximum][r][e.blueMaximum]+i[e.alphaMinimum][e.redMinimum][r][e.blueMaximum]-(i[e.alphaMaximum][e.redMaximum][r][e.blueMinimum]-i[e.alphaMaximum][e.redMinimum][r][e.blueMinimum]-i[e.alphaMinimum][e.redMaximum][r][e.blueMinimum]+i[e.alphaMinimum][e.redMinimum][r][e.blueMinimum]);break;case S._blue:n=i[e.alphaMaximum][e.redMaximum][e.greenMaximum][r]-i[e.alphaMaximum][e.redMaximum][e.greenMinimum][r]-i[e.alphaMaximum][e.redMinimum][e.greenMaximum][r]+i[e.alphaMaximum][e.redMinimum][e.greenMinimum][r]-(i[e.alphaMinimum][e.redMaximum][e.greenMaximum][r]-i[e.alphaMinimum][e.redMaximum][e.greenMinimum][r]-i[e.alphaMinimum][e.redMinimum][e.greenMaximum][r]+i[e.alphaMinimum][e.redMinimum][e.greenMinimum][r]);break;default:throw new Error("impossible")}return n|0};S._bottom=function(e,t,r){switch(t){case S._alpha:return-r[e.alphaMinimum][e.redMaximum][e.greenMaximum][e.blueMaximum]+r[e.alphaMinimum][e.redMaximum][e.greenMinimum][e.blueMaximum]+r[e.alphaMinimum][e.redMinimum][e.greenMaximum][e.blueMaximum]-r[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMaximum]-(-r[e.alphaMinimum][e.redMaximum][e.greenMaximum][e.blueMinimum]+r[e.alphaMinimum][e.redMaximum][e.greenMinimum][e.blueMinimum]+r[e.alphaMinimum][e.redMinimum][e.greenMaximum][e.blueMinimum]-r[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMinimum]);case S._red:return-r[e.alphaMaximum][e.redMinimum][e.greenMaximum][e.blueMaximum]+r[e.alphaMaximum][e.redMinimum][e.greenMinimum][e.blueMaximum]+r[e.alphaMinimum][e.redMinimum][e.greenMaximum][e.blueMaximum]-r[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMaximum]-(-r[e.alphaMaximum][e.redMinimum][e.greenMaximum][e.blueMinimum]+r[e.alphaMaximum][e.redMinimum][e.greenMinimum][e.blueMinimum]+r[e.alphaMinimum][e.redMinimum][e.greenMaximum][e.blueMinimum]-r[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMinimum]);case S._green:return-r[e.alphaMaximum][e.redMaximum][e.greenMinimum][e.blueMaximum]+r[e.alphaMaximum][e.redMinimum][e.greenMinimum][e.blueMaximum]+r[e.alphaMinimum][e.redMaximum][e.greenMinimum][e.blueMaximum]-r[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMaximum]-(-r[e.alphaMaximum][e.redMaximum][e.greenMinimum][e.blueMinimum]+r[e.alphaMaximum][e.redMinimum][e.greenMinimum][e.blueMinimum]+r[e.alphaMinimum][e.redMaximum][e.greenMinimum][e.blueMinimum]-r[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMinimum]);case S._blue:return-r[e.alphaMaximum][e.redMaximum][e.greenMaximum][e.blueMinimum]+r[e.alphaMaximum][e.redMaximum][e.greenMinimum][e.blueMinimum]+r[e.alphaMaximum][e.redMinimum][e.greenMaximum][e.blueMinimum]-r[e.alphaMaximum][e.redMinimum][e.greenMinimum][e.blueMinimum]-(-r[e.alphaMinimum][e.redMaximum][e.greenMaximum][e.blueMinimum]+r[e.alphaMinimum][e.redMaximum][e.greenMinimum][e.blueMinimum]+r[e.alphaMinimum][e.redMinimum][e.greenMaximum][e.blueMinimum]-r[e.alphaMinimum][e.redMinimum][e.greenMinimum][e.blueMinimum]);default:return 0}};S.prototype._calculateVariance=function(e){var t=S._volume(e,this._momentsRed);var r=S._volume(e,this._momentsGreen);var i=S._volume(e,this._momentsBlue);var n=S._volume(e,this._momentsAlpha);var a=S._volumeFloat(e,this._moments);var o=S._volume(e,this._weights);var s=t*t+r*r+i*i+n*n;return a-s/o};S.prototype._maximize=function(e,t,r,i,n,a,o,s,u){var l=S._bottom(e,t,this._momentsRed)|0;var h=S._bottom(e,t,this._momentsGreen)|0;var c=S._bottom(e,t,this._momentsBlue)|0;var f=S._bottom(e,t,this._momentsAlpha)|0;var d=S._bottom(e,t,this._weights)|0;var p=0;var v=-1;for(var m=r;m<i;++m){var g=l+S._top(e,t,m,this._momentsRed);var y=h+S._top(e,t,m,this._momentsGreen);var _=c+S._top(e,t,m,this._momentsBlue);var b=f+S._top(e,t,m,this._momentsAlpha);var x=d+S._top(e,t,m,this._weights);if(x!==0){var w=g*g+y*y+_*_+b*b;var E=w/x;g=n-g;y=a-y;_=o-_;b=s-b;x=u-x;if(x!==0){w=g*g+y*y+_*_+b*b;E+=w/x;if(E>p){p=E;v=m}}}}return{max:p,position:v}};S.prototype._cut=function(e,t){var r;var i=S._volume(e,this._momentsRed);var n=S._volume(e,this._momentsGreen);var a=S._volume(e,this._momentsBlue);var o=S._volume(e,this._momentsAlpha);var s=S._volume(e,this._weights);var u=this._maximize(e,S._red,e.redMinimum+1,e.redMaximum,i,n,a,o,s);var l=this._maximize(e,S._green,e.greenMinimum+1,e.greenMaximum,i,n,a,o,s);var h=this._maximize(e,S._blue,e.blueMinimum+1,e.blueMaximum,i,n,a,o,s);var c=this._maximize(e,S._alpha,e.alphaMinimum+1,e.alphaMaximum,i,n,a,o,s);if(c.max>=u.max&&c.max>=l.max&&c.max>=h.max){r=S._alpha;if(c.position<0)return false}else{if(u.max>=c.max&&u.max>=l.max&&u.max>=h.max){r=S._red}else if(l.max>=c.max&&l.max>=u.max&&l.max>=h.max){r=S._green}else{r=S._blue}}t.redMaximum=e.redMaximum;t.greenMaximum=e.greenMaximum;t.blueMaximum=e.blueMaximum;t.alphaMaximum=e.alphaMaximum;switch(r){case S._red:t.redMinimum=e.redMaximum=u.position;t.greenMinimum=e.greenMinimum;t.blueMinimum=e.blueMinimum;t.alphaMinimum=e.alphaMinimum;break;case S._green:t.greenMinimum=e.greenMaximum=l.position;t.redMinimum=e.redMinimum;t.blueMinimum=e.blueMinimum;t.alphaMinimum=e.alphaMinimum;break;case S._blue:t.blueMinimum=e.blueMaximum=h.position;t.redMinimum=e.redMinimum;t.greenMinimum=e.greenMinimum;t.alphaMinimum=e.alphaMinimum;break;case S._alpha:t.alphaMinimum=e.alphaMaximum=c.position;t.blueMinimum=e.blueMinimum;t.redMinimum=e.redMinimum;t.greenMinimum=e.greenMinimum;break}e.volume=(e.redMaximum-e.redMinimum)*(e.greenMaximum-e.greenMinimum)*(e.blueMaximum-e.blueMinimum)*(e.alphaMaximum-e.alphaMinimum);t.volume=(t.redMaximum-t.redMinimum)*(t.greenMaximum-t.greenMinimum)*(t.blueMaximum-t.blueMinimum)*(t.alphaMaximum-t.alphaMinimum);return true};S.prototype._initialize=function(e){this._colors=e;this._cubes=[];for(var t=0;t<e;t++){this._cubes[t]=new a}this._cubes[0].redMinimum=0;this._cubes[0].greenMinimum=0;this._cubes[0].blueMinimum=0;this._cubes[0].alphaMinimum=0;this._cubes[0].redMaximum=this._maxSideIndex;this._cubes[0].greenMaximum=this._maxSideIndex;this._cubes[0].blueMaximum=this._maxSideIndex;this._cubes[0].alphaMaximum=this._alphaMaxSideIndex;this._weights=i(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize);this._momentsRed=i(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize);this._momentsGreen=i(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize);this._momentsBlue=i(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize);this._momentsAlpha=i(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize);this._moments=i(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize);this._table=[];for(var r=0;r<256;++r){this._table[r]=r*r}this._pixels=[]};S.prototype._setQuality=function(e){if(e===void 0){e=5}this._significantBitsPerChannel=e;this._maxSideIndex=1<<this._significantBitsPerChannel;this._alphaMaxSideIndex=this._maxSideIndex;this._sideSize=this._maxSideIndex+1;this._alphaSideSize=this._alphaMaxSideIndex+1};S._alpha=3;S._red=2;S._green=1;S._blue=0;return S}(Ee.AbstractPaletteQuantizer);t.WuQuant=n});t(Qe);var Ze=Qe.WuColorCube;var Je=Qe.WuQuant;var et=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.AbstractPaletteQuantizer=Ee.AbstractPaletteQuantizer;t.NeuQuant=ze.NeuQuant;t.NeuQuantFloat=We.NeuQuantFloat;t.RGBQuant=$e.RGBQuant;t.ColorHistogram=qe.ColorHistogram;t.WuQuant=Qe.WuQuant;t.WuColorCube=Qe.WuColorCube});t(et);var tt=et.AbstractPaletteQuantizer;var rt=et.NeuQuant;var it=et.NeuQuantFloat;var nt=et.RGBQuant;var at=et.ColorHistogram;var ot=et.WuQuant;var st=et.WuColorCube;var ut=r(function(e,t){var s=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(){}e.prototype.quantizeSync=function(e,t){try{for(var r=s(this.quantize(e,t)),i=r.next();!i.done;i=r.next()){var n=i.value;if(n.pointContainer){return n.pointContainer}}}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(o=r.return))o.call(r)}finally{if(a)throw a.error}}throw new Error("unreachable");var a,o};return e}();t.AbstractImageQuantizer=r});t(ut);var lt=ut.AbstractImageQuantizer;var ht=r(function(e,t){var i=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var c=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};Object.defineProperty(t,"__esModule",{value:true});var r=function(r){i(e,r);function e(e){var t=r.call(this)||this;t._distance=e;return t}e.prototype.quantize=function(t,r){var i,n,a,o,s,u,l,h;return c(this,function(e){switch(e.label){case 0:i=t.getPointArray();n=t.getWidth();a=t.getHeight();o=new Le.ProgressTracker(a,99);s=0;e.label=1;case 1:if(!(s<a))return[3,5];if(!o.shouldNotify(s))return[3,3];return[4,{progress:o.progress}];case 2:e.sent();e.label=3;case 3:for(u=0,l=s*n;u<n;u++,l++){h=i[l];h.from(r.getNearestColor(this._distance,h))}e.label=4;case 4:s++;return[3,1];case 5:return[4,{pointContainer:t,progress:100}];case 6:e.sent();return[2]}})};return e}(ut.AbstractImageQuantizer);t.NearestColor=r});t(ht);var ct=ht.NearestColor;var ft=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var U=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};var H=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var i;(function(e){e[e["FloydSteinberg"]=0]="FloydSteinberg";e[e["FalseFloydSteinberg"]=1]="FalseFloydSteinberg";e[e["Stucki"]=2]="Stucki";e[e["Atkinson"]=3]="Atkinson";e[e["Jarvis"]=4]="Jarvis";e[e["Burkes"]=5]="Burkes";e[e["Sierra"]=6]="Sierra";e[e["TwoSierra"]=7]="TwoSierra";e[e["SierraLite"]=8]="SierraLite"})(i=t.ErrorDiffusionArrayKernel||(t.ErrorDiffusionArrayKernel={}));var n=function(o){r(e,o);function e(e,t,r,i,n){if(r===void 0){r=true}if(i===void 0){i=0}if(n===void 0){n=false}var a=o.call(this)||this;a._setKernel(t);a._distance=e;a._minColorDistance=i;a._serpentine=r;a._calculateErrorLikeGIMP=n;return a}e.prototype.quantize=function(t,r){var i,n,a,o,s,u,l,h,c,f,d,p,v,m,g,y,_,b,x,w,E,S,T,P,A,I,O,M,C,D,R,p,L,N,k,F,B,j;return U(this,function(e){switch(e.label){case 0:i=t.getPointArray();n=new Te.Point;a=t.getWidth();o=t.getHeight();s=[];u=1;l=1;try{for(h=H(this._kernel),c=h.next();!c.done;c=h.next()){f=c.value;d=f[2]+1;if(l<d)l=d}}catch(e){B={error:e}}finally{try{if(c&&!c.done&&(j=h.return))j.call(h)}finally{if(B)throw B.error}}for(p=0;p<l;p++){this._fillErrorLine(s[p]=[],a)}v=new Le.ProgressTracker(o,99);m=0;e.label=1;case 1:if(!(m<o))return[3,5];if(!v.shouldNotify(m))return[3,3];return[4,{progress:v.progress}];case 2:e.sent();e.label=3;case 3:if(this._serpentine)u=u*-1;g=m*a;y=u===1?0:a-1;_=u===1?a:-1;this._fillErrorLine(s[0],a);s.push(s.shift());b=s[0];for(x=y,w=g+y;x!==_;x+=u,w+=u){E=i[w];S=b[x];n.from(E);T=Te.Point.createByRGBA(G.inRange0to255Rounded(E.r+S[0]),G.inRange0to255Rounded(E.g+S[1]),G.inRange0to255Rounded(E.b+S[2]),G.inRange0to255Rounded(E.a+S[3]));P=r.getNearestColor(this._distance,T);E.from(P);if(this._minColorDistance){A=this._distance.calculateNormalized(E,P);if(A<this._minColorDistance)continue}I=void 0;O=void 0;M=void 0;C=void 0;if(this._calculateErrorLikeGIMP){I=T.r-P.r;O=T.g-P.g;M=T.b-P.b;C=T.a-P.a}else{I=n.r-P.r;O=n.g-P.g;M=n.b-P.b;C=n.a-P.a}D=u===1?0:this._kernel.length-1;R=u===1?this._kernel.length:-1;for(p=D;p!==R;p+=u){L=this._kernel[p][1]*u;N=this._kernel[p][2];if(L+x>=0&&L+x<a&&N+m>=0&&N+m<o){k=this._kernel[p][0];F=s[N][L+x];F[0]=F[0]+I*k;F[1]=F[1]+O*k;F[2]=F[2]+M*k;F[3]=F[3]+C*k}}}e.label=4;case 4:m++;return[3,1];case 5:return[4,{pointContainer:t,progress:100}];case 6:e.sent();return[2]}})};e.prototype._fillErrorLine=function(e,t){if(e.length>t){e.length=t}var r=e.length;for(var i=0;i<r;i++){var n=e[i];n[0]=n[1]=n[2]=n[3]=0}for(var i=r;i<t;i++){e[i]=[0,0,0,0]}};e.prototype._setKernel=function(e){switch(e){case i.FloydSteinberg:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case i.FalseFloydSteinberg:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case i.Stucki:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case i.Atkinson:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case i.Jarvis:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case i.Burkes:this._kernel=[[8/32,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[8/32,0,1],[4/32,1,1],[2/32,2,1]];break;case i.Sierra:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case i.TwoSierra:this._kernel=[[4/16,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case i.SierraLite:this._kernel=[[2/4,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error("ErrorDiffusionArray: unknown kernel = "+e)}};return e}(ut.AbstractImageQuantizer);t.ErrorDiffusionArray=n});t(ft);var dt=ft.ErrorDiffusionArrayKernel;var pt=ft.ErrorDiffusionArray;var vt=r(function(e,t){var u=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};var l=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var h;(function(e){e[e["NONE"]=0]="NONE";e[e["UP"]=1]="UP";e[e["LEFT"]=2]="LEFT";e[e["RIGHT"]=3]="RIGHT";e[e["DOWN"]=4]="DOWN"})(h||(h={}));function r(t,r,i){var n,a,o,s;return u(this,function(e){switch(e.label){case 0:n=Math.max(t,r);a=Math.floor(Math.log(n)/Math.log(2)+1);o=new Le.ProgressTracker(t*r,99);s={width:t,height:r,level:a,callback:i,tracker:o,index:0,x:0,y:0};return[5,l(c(s,h.UP))];case 1:e.sent();f(s,h.NONE);return[2]}})}t.hilbertCurve=r;function c(t,r){var i;return u(this,function(e){switch(e.label){case 0:if(t.level<1)return[2];if(!t.tracker.shouldNotify(t.index))return[3,2];return[4,{progress:t.tracker.progress}];case 1:e.sent();e.label=2;case 2:t.level--;i=r;switch(i){case h.LEFT:return[3,3];case h.RIGHT:return[3,8];case h.UP:return[3,13];case h.DOWN:return[3,18]}return[3,23];case 3:return[5,l(c(t,h.UP))];case 4:e.sent();f(t,h.RIGHT);return[5,l(c(t,h.LEFT))];case 5:e.sent();f(t,h.DOWN);return[5,l(c(t,h.LEFT))];case 6:e.sent();f(t,h.LEFT);return[5,l(c(t,h.DOWN))];case 7:e.sent();return[3,24];case 8:return[5,l(c(t,h.DOWN))];case 9:e.sent();f(t,h.LEFT);return[5,l(c(t,h.RIGHT))];case 10:e.sent();f(t,h.UP);return[5,l(c(t,h.RIGHT))];case 11:e.sent();f(t,h.RIGHT);return[5,l(c(t,h.UP))];case 12:e.sent();return[3,24];case 13:return[5,l(c(t,h.LEFT))];case 14:e.sent();f(t,h.DOWN);return[5,l(c(t,h.UP))];case 15:e.sent();f(t,h.RIGHT);return[5,l(c(t,h.UP))];case 16:e.sent();f(t,h.UP);return[5,l(c(t,h.RIGHT))];case 17:e.sent();return[3,24];case 18:return[5,l(c(t,h.RIGHT))];case 19:e.sent();f(t,h.UP);return[5,l(c(t,h.DOWN))];case 20:e.sent();f(t,h.LEFT);return[5,l(c(t,h.DOWN))];case 21:e.sent();f(t,h.DOWN);return[5,l(c(t,h.LEFT))];case 22:e.sent();return[3,24];case 23:return[3,24];case 24:t.level++;return[2]}})}function f(e,t){if(e.x>=0&&e.x<e.width&&e.y>=0&&e.y<e.height){e.callback(e.x,e.y);e.index++}switch(t){case h.LEFT:e.x--;break;case h.RIGHT:e.x++;break;case h.UP:e.y--;break;case h.DOWN:e.y++;break}}});t(vt);var mt=vt.hilbertCurve;var gt=r(function(e,t){var r=m&&m.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var o=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};var s=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var i=function(n){r(a,n);function a(e,t,r){if(t===void 0){t=16}if(r===void 0){r=1}var i=n.call(this)||this;i._distance=e;i._errorQueueSize=t;i._weights=a._createWeights(r,t);return i}a.prototype.quantize=function(t,d){var p=this;var v,m,r,g,y,i;return o(this,function(e){switch(e.label){case 0:v=t.getPointArray();m=t.getWidth();r=t.getHeight();g=[];y=0;for(i=0;i<this._errorQueueSize;i++){g[i]={r:0,g:0,b:0,a:0}}return[5,s(vt.hilbertCurve(m,r,function(e,t){var r=v[e+t*m];var i=r.r;var n=r.g;var a=r.b;var o=r.a;for(var s=0;s<p._errorQueueSize;s++){var u=p._weights[s];var l=g[(s+y)%p._errorQueueSize];i+=l.r*u;n+=l.g*u;a+=l.b*u;o+=l.a*u}var h=Te.Point.createByRGBA(G.inRange0to255Rounded(i),G.inRange0to255Rounded(n),G.inRange0to255Rounded(a),G.inRange0to255Rounded(o));var c=d.getNearestColor(p._distance,h);y=(y+1)%p._errorQueueSize;var f=(y+p._errorQueueSize-1)%p._errorQueueSize;g[f].r=r.r-c.r;g[f].g=r.g-c.g;g[f].b=r.b-c.b;g[f].a=r.a-c.a;r.from(c)}))];case 1:e.sent();return[4,{pointContainer:t,progress:100}];case 2:e.sent();return[2]}})};a._createWeights=function(e,t){var r=[];var i=Math.exp(Math.log(t)/(t-1));for(var n=0,a=1;n<t;n++){r[n]=(a+.5|0)/t*e;a*=i}return r};return a}(ut.AbstractImageQuantizer);t.ErrorDiffusionRiemersma=i});t(gt);var yt=gt.ErrorDiffusionRiemersma;var _t=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.AbstractImageQuantizer=ut.AbstractImageQuantizer;t.NearestColor=ht.NearestColor;t.ErrorDiffusionArray=ft.ErrorDiffusionArray;t.ErrorDiffusionArrayKernel=ft.ErrorDiffusionArrayKernel;t.ErrorDiffusionRiemersma=gt.ErrorDiffusionRiemersma});t(_t);var bt=_t.AbstractImageQuantizer;var xt=_t.NearestColor;var wt=_t.ErrorDiffusionArray;var Et=_t.ErrorDiffusionArrayKernel;var St=_t.ErrorDiffusionRiemersma;var Tt=r(function(e,t){var s=m&&m.__values||function(e){var t=typeof Symbol==="function"&&e[Symbol.iterator],r=0;if(t)return t.call(e);return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:true});var n=.01;var a=.03;function r(e,t){if(e.getHeight()!==t.getHeight()||e.getWidth()!==t.getWidth()){throw new Error("Images have different sizes!")}var r=8;var i=(1<<r)-1;var f=Math.pow(n*i,2);var d=Math.pow(a*i,2);var p=0;var v=0;o(e,t,function(e,t,r,i){var n=0;var a=0;var o=0;for(var s=0;s<e.length;s++){a+=Math.pow(e[s]-r,2);o+=Math.pow(t[s]-i,2);n+=(e[s]-r)*(t[s]-i)}var u=e.length-1;a/=u;o/=u;n/=u;var l=(2*r*i+f)*(2*n+d);var h=(Math.pow(r,2)+Math.pow(i,2)+f)*(a+o+d);var c=l/h;v+=c;p++});return v/p}t.ssim=r;function o(e,t,r){var i=8;var n=e.getWidth();var a=e.getHeight();for(var o=0;o<a;o+=i){for(var s=0;s<n;s+=i){var u=Math.min(i,n-s);var l=Math.min(i,a-o);var h=p(e,s,o,u,l);var c=p(t,s,o,u,l);var f=v(h);var d=v(c);r(h,c,f,d)}}}function p(e,t,r,i,n){var a=e.getPointArray();var o=[];var s=0;for(var u=r;u<r+n;u++){var l=u*e.getWidth();for(var h=t;h<t+i;h++){var c=a[l+h];o[s]=c.r*f.Y.RED+c.g*f.Y.GREEN+c.b*f.Y.BLUE;s++}}return o}function v(e){var t=0;try{for(var r=s(e),i=r.next();!i.done;i=r.next()){var n=i.value;t+=n}}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(o=r.return))o.call(r)}finally{if(a)throw a.error}}return t/e.length;var a,o}});t(Tt);var Pt=Tt.ssim;var At=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.ssim=Tt.ssim});t(At);var It=At.ssim;var Ot=r(function(e){var t=e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=t});var Mt=r(function(e){var t=e.exports={version:"2.5.3"};if(typeof __e=="number")__e=t});var Ct=Mt.version;var Dt=function(e){return typeof e==="object"?e!==null:typeof e==="function"};var Rt=function(e){if(!Dt(e))throw TypeError(e+" is not an object!");return e};var Lt=function(e){try{return!!e()}catch(e){return true}};var Nt=!Lt(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7});var kt=Ot.document;var Ft=Dt(kt)&&Dt(kt.createElement);var Bt=function(e){return Ft?kt.createElement(e):{}};var jt=!Nt&&!Lt(function(){return Object.defineProperty(Bt("div"),"a",{get:function(){return 7}}).a!=7});var Ut=function(e,t){if(!Dt(e))return e;var r,i;if(t&&typeof(r=e.toString)=="function"&&!Dt(i=r.call(e)))return i;if(typeof(r=e.valueOf)=="function"&&!Dt(i=r.call(e)))return i;if(!t&&typeof(r=e.toString)=="function"&&!Dt(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")};var Ht=Object.defineProperty;var Gt=Nt?Object.defineProperty:function e(t,r,i){Rt(t);r=Ut(r,true);Rt(i);if(jt)try{return Ht(t,r,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");if("value"in i)t[r]=i.value;return t};var zt={f:Gt};var Xt=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}};var Wt=Nt?function(e,t,r){return zt.f(e,t,Xt(1,r))}:function(e,t,r){e[t]=r;return e};var Yt={}.hasOwnProperty;var qt=function(e,t){return Yt.call(e,t)};var Vt=0;var $t=Math.random();var Kt=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++Vt+$t).toString(36))};var Qt=r(function(e){var a=Kt("src");var t="toString";var r=Function[t];var o=(""+r).split(t);Mt.inspectSource=function(e){return r.call(e)};(e.exports=function(e,t,r,i){var n=typeof r=="function";if(n)qt(r,"name")||Wt(r,"name",t);if(e[t]===r)return;if(n)qt(r,a)||Wt(r,a,e[t]?""+e[t]:o.join(String(t)));if(e===Ot){e[t]=r}else if(!i){delete e[t];Wt(e,t,r)}else if(e[t]){e[t]=r}else{Wt(e,t,r)}})(Function.prototype,t,function e(){return typeof this=="function"&&this[a]||r.call(this)})});var Zt=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e};var Jt=function(i,n,e){Zt(i);if(n===undefined)return i;switch(e){case 1:return function(e){return i.call(n,e)};case 2:return function(e,t){return i.call(n,e,t)};case 3:return function(e,t,r){return i.call(n,e,t,r)}}return function(){return i.apply(n,arguments)}};var er="prototype";var tr=function(e,t,r){var i=e&tr.F;var n=e&tr.G;var a=e&tr.S;var o=e&tr.P;var s=e&tr.B;var u=n?Ot:a?Ot[t]||(Ot[t]={}):(Ot[t]||{})[er];var l=n?Mt:Mt[t]||(Mt[t]={});var h=l[er]||(l[er]={});var c,f,d,p;if(n)r=t;for(c in r){f=!i&&u&&u[c]!==undefined;d=(f?u:r)[c];p=s&&f?Jt(d,Ot):o&&typeof d=="function"?Jt(Function.call,d):d;if(u)Qt(u,c,d,e&tr.U);if(l[c]!=d)Wt(l,c,p);if(o&&h[c]!=d)h[c]=d}};Ot.core=Mt;tr.F=1;tr.G=2;tr.S=4;tr.P=8;tr.B=16;tr.W=32;tr.U=64;tr.R=128;var rr=tr;var ir=function(e,t,r){var i=r===undefined;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)};var nr=Ot.document;var ar=nr&&nr.documentElement;var or={}.toString;var sr=function(e){return or.call(e).slice(8,-1)};var ur=Ot.process;var lr=Ot.setImmediate;var hr=Ot.clearImmediate;var cr=Ot.MessageChannel;var fr=Ot.Dispatch;var dr=0;var pr={};var vr="onreadystatechange";var mr,gr,yr;var _r=function(){var e=+this;if(pr.hasOwnProperty(e)){var t=pr[e];delete pr[e];t()}};var br=function(e){_r.call(e.data)};if(!lr||!hr){lr=function e(t){var r=[];var i=1;while(arguments.length>i)r.push(arguments[i++]);pr[++dr]=function(){ir(typeof t=="function"?t:Function(t),r)};mr(dr);return dr};hr=function e(t){delete pr[t]};if(sr(ur)=="process"){mr=function(e){ur.nextTick(Jt(_r,e,1))}}else if(fr&&fr.now){mr=function(e){fr.now(Jt(_r,e,1))}}else if(cr){gr=new cr;yr=gr.port2;gr.port1.onmessage=br;mr=Jt(yr.postMessage,yr,1)}else if(Ot.addEventListener&&typeof postMessage=="function"&&!Ot.importScripts){mr=function(e){Ot.postMessage(e+"","*")};Ot.addEventListener("message",br,false)}else if(vr in Bt("script")){mr=function(e){ar.appendChild(Bt("script"))[vr]=function(){ar.removeChild(this);_r.call(e)}}}else{mr=function(e){setTimeout(Jt(_r,e,1),0)}}}var xr={set:lr,clear:hr};rr(rr.G+rr.B,{setImmediate:xr.set,clearImmediate:xr.clear});var wr=Mt.setImmediate;var Er=r(function(e,t){var r=m&&m.__awaiter||function(a,o,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{n(u.next(e))}catch(e){t(e)}}function i(e){try{n(u["throw"](e))}catch(e){t(e)}}function n(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,i)}n((u=u.apply(a,o||[])).next())})};var i=m&&m.__generator||function(e,r){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,t;return t={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return u([t,e])}}function u(t){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=a[t[0]&2?"return":t[0]?"throw":"next"])&&!(o=o.call(a,t[1])).done)return o;if(a=0,o)t=[0,o.value];switch(t[0]){case 0:case 1:o=t;break;case 4:i.label++;return{value:t[1],done:false};case 5:i.label++;a=t[1];t=[0];continue;case 7:t=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(t[0]===6||t[0]===2)){i=0;continue}if(t[0]===3&&(!o||t[1]>o[0]&&t[1]<o[3])){i.label=t[1];break}if(t[0]===6&&i.label<o[1]){i.label=o[1];o=t;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(t);break}if(o[2])i.ops.pop();i.trys.pop();continue}t=r.call(e,i)}catch(e){t=[6,e];a=0}finally{n=o=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};Object.defineProperty(t,"__esModule",{value:true});var n=et;function a(e,t){var r=t===void 0?{}:t,i=r.colorDistanceFormula,n=r.paletteQuantization,a=r.colors;var o=d(i);var s=v(o,n,a);e.forEach(function(e){return s.sample(e)});return s.quantizeSync()}t.buildPaletteSync=a;function o(u,e){var t=e===void 0?{}:e,l=t.colorDistanceFormula,h=t.paletteQuantization,c=t.colors,f=t.onProgress;return r(this,void 0,void 0,function(){return i(this,function(e){return[2,new Promise(function(t,r){var e=d(l);var i=v(e,h,c);u.forEach(function(e){return i.sample(e)});var n;var a;var o=i.quantize();var s=function(){try{var e=o.next();if(e.done){t(n)}else{if(e.value.palette)n=e.value.palette;if(f)f(e.value.progress);a=wr(s)}}catch(e){clearTimeout(a);r(e)}};a=wr(s)})]})})}t.buildPalette=o;function s(e,t,r){var i=r===void 0?{}:r,n=i.colorDistanceFormula,a=i.imageQuantization;var o=d(n);var s=p(o,a);return s.quantizeSync(e,t)}t.applyPaletteSync=s;function u(u,l,e){var t=e===void 0?{}:e,h=t.colorDistanceFormula,c=t.imageQuantization,f=t.onProgress;return r(this,void 0,void 0,function(){return i(this,function(e){return[2,new Promise(function(t,r){var e=d(h);var i=p(e,c);var n;var a;var o=i.quantize(u,l);var s=function(){try{var e=o.next();if(e.done){t(n)}else{if(e.value.pointContainer)n=e.value.pointContainer;if(f)f(e.value.progress);a=wr(s)}}catch(e){clearTimeout(a);r(e)}};a=wr(s)})]})})}t.applyPalette=u;function d(e){if(e===void 0){e="euclidean-bt709"}switch(e){case"cie94-graphic-arts":return new ue.CIE94GraphicArts;case"cie94-textiles":return new ue.CIE94Textiles;case"ciede2000":return new ue.CIEDE2000;case"color-metric":return new ue.CMetric;case"euclidean":return new ue.Euclidean;case"euclidean-bt709":return new ue.EuclideanBT709;case"euclidean-bt709-noalpha":return new ue.EuclideanBT709NoAlpha;case"manhattan":return new ue.Manhattan;case"manhattan-bt709":return new ue.ManhattanBT709;case"manhattan-nommyde":return new ue.ManhattanNommyde;case"pngquant":return new ue.PNGQuant;default:throw new Error("Unknown colorDistanceFormula "+e)}}function p(e,t){if(t===void 0){t="floyd-steinberg"}switch(t){case"nearest":return new _t.NearestColor(e);case"riemersma":return new _t.ErrorDiffusionRiemersma(e);case"floyd-steinberg":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.FloydSteinberg);case"false-floyd-steinberg":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.FalseFloydSteinberg);case"stucki":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.Stucki);case"atkinson":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.Atkinson);case"jarvis":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.Jarvis);case"burkes":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.Burkes);case"sierra":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.Sierra);case"two-sierra":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.TwoSierra);case"sierra-lite":return new _t.ErrorDiffusionArray(e,_t.ErrorDiffusionArrayKernel.SierraLite);default:throw new Error("Unknown imageQuantization "+t)}}function v(e,t,r){if(t===void 0){t="wuquant"}if(r===void 0){r=256}switch(t){case"neuquant":return new n.NeuQuant(e,r);case"rgbquant":return new n.RGBQuant(e,r);case"wuquant":return new n.WuQuant(e,r);case"neuquant-float":return new n.NeuQuantFloat(e,r);default:throw new Error("Unknown paletteQuantization "+t)}}});t(Er);var Sr=Er.buildPaletteSync;var Tr=Er.buildPalette;var Pr=Er.applyPaletteSync;var Ar=Er.applyPalette;var Ir=r(function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.constants=o;t.conversion=C;t.distance=ue;t.palette=et;t.image=_t;t.quality=At;t.utils=ke;t.buildPalette=Er.buildPalette;t.buildPaletteSync=Er.buildPaletteSync;t.applyPalette=Er.applyPalette;t.applyPaletteSync=Er.applyPaletteSync});var Or=t(Ir);var Mr=Ir.constants;var Cr=Ir.conversion;var Dr=Ir.distance;var Rr=Ir.palette;var Lr=Ir.image;var Nr=Ir.quality;var kr=Ir.utils;var Fr=Ir.buildPalette;var Br=Ir.buildPaletteSync;var jr=Ir.applyPalette;var Ur=Ir.applyPaletteSync;e.default=Or;e.constants=Mr;e.conversion=Cr;e.distance=Dr;e.palette=Rr;e.image=Lr;e.quality=Nr;e.utils=kr;e.buildPalette=Fr;e.buildPaletteSync=Br;e.applyPalette=jr;e.applyPaletteSync=Ur;Object.defineProperty(e,"__esModule",{value:true})})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],39:[function(e,t,r){"use strict";function i(e){for(var t in e)if(!r.hasOwnProperty(t))r[t]=e[t]}r.__esModule=true;i(e("./isMobile"));var n=e("./isMobile");r["default"]=n["default"]},{"./isMobile":40}],40:[function(e,t,r){"use strict";r.__esModule=true;var o=/iPhone/i;var s=/iPod/i;var u=/iPad/i;var l=/\biOS-universal(?:.+)Mac\b/i;var h=/\bAndroid(?:.+)Mobile\b/i;var c=/Android/i;var f=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i;var d=/Silk/i;var p=/Windows Phone/i;var v=/\bWindows(?:.+)ARM\b/i;var m=/BlackBerry/i;var g=/BB10/i;var y=/Opera Mini/i;var _=/\b(CriOS|Chrome)(?:.+)Mobile/i;var b=/Mobile(?:.+)Firefox\b/i;var x=function(e){return typeof e!=="undefined"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints==="number"&&e.maxTouchPoints>1&&typeof MSStream==="undefined"};function w(t){return function(e){return e.test(t)}}function i(e){var t={userAgent:"",platform:"",maxTouchPoints:0};if(!e&&typeof navigator!=="undefined"){t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}}else if(typeof e==="string"){t.userAgent=e}else if(e&&e.userAgent){t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}}var r=t.userAgent;var i=r.split("[FBAN");if(typeof i[1]!=="undefined"){r=i[0]}i=r.split("Twitter");if(typeof i[1]!=="undefined"){r=i[0]}var n=w(r);var a={apple:{phone:n(o)&&!n(p),ipod:n(s),tablet:!n(o)&&(n(u)||x(t))&&!n(p),universal:n(l),device:(n(o)||n(s)||n(u)||n(l)||x(t))&&!n(p)},amazon:{phone:n(f),tablet:!n(f)&&n(d),device:n(f)||n(d)},android:{phone:!n(p)&&n(f)||!n(p)&&n(h),tablet:!n(p)&&!n(f)&&!n(h)&&(n(d)||n(c)),device:!n(p)&&(n(f)||n(d)||n(h)||n(c))||n(/\bokhttp\b/i)},windows:{phone:n(p),tablet:n(v),device:n(p)||n(v)},other:{blackberry:n(m),blackberry10:n(g),opera:n(y),firefox:n(b),chrome:n(_),device:n(m)||n(g)||n(y)||n(b)||n(_)},any:false,phone:false,tablet:false};a.any=a.apple.device||a.android.device||a.windows.device||a.other.device;a.phone=a.apple.phone||a.android.phone||a.windows.phone;a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet;return a}r["default"]=i},{}],41:[function(e,r,t){(function(e,t){"use strict";if(typeof r==="object"&&typeof r.exports==="object"){r.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(E,e){"use strict";var t=[];var i=Object.getPrototypeOf;var s=t.slice;var v=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)};var u=t.push;var n=t.indexOf;var r={};var a=r.toString;var m=r.hasOwnProperty;var o=m.toString;var l=o.call(Object);var g={};var y=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"};var _=function e(t){return t!=null&&t===t.window};var S=E.document;var h={type:true,src:true,nonce:true,noModule:true};function b(e,t,r){r=r||S;var i,n,a=r.createElement("script");a.text=e;if(t){for(i in h){n=t[i]||t.getAttribute&&t.getAttribute(i);if(n){a.setAttribute(i,n)}}}r.head.appendChild(a).parentNode.removeChild(a)}function x(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?r[a.call(e)]||"object":typeof e}var c="3.5.1",T=function(e,t){return new T.fn.init(e,t)};T.fn=T.prototype={jquery:c,constructor:T,length:0,toArray:function(){return s.call(this)},get:function(e){if(e==null){return s.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return T.each(this,e)},map:function(r){return this.pushStack(T.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(T.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice};T.extend=T.fn.extend=function(){var e,t,r,i,n,a,o=arguments[0]||{},s=1,u=arguments.length,l=false;if(typeof o==="boolean"){l=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!y(o)){o={}}if(s===u){o=this;s--}for(;s<u;s++){if((e=arguments[s])!=null){for(t in e){i=e[t];if(t==="__proto__"||o===i){continue}if(l&&i&&(T.isPlainObject(i)||(n=Array.isArray(i)))){r=o[t];if(n&&!Array.isArray(r)){a=[]}else if(!n&&!T.isPlainObject(r)){a={}}else{a=r}n=false;o[t]=T.extend(l,a,i)}else if(i!==undefined){o[t]=i}}}}return o};T.extend({expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;if(!e||a.call(e)!=="[object Object]"){return false}t=i(e);if(!t){return true}r=m.call(t,"constructor")&&t.constructor;return typeof r==="function"&&o.call(r)===l},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e,t,r){b(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,i=0;if(f(e)){r=e.length;for(;i<r;i++){if(t.call(e[i],i,e[i])===false){break}}}else{for(i in e){if(t.call(e[i],i,e[i])===false){break}}}return e},makeArray:function(e,t){var r=t||[];if(e!=null){if(f(Object(e))){T.merge(r,typeof e==="string"?[e]:e)}else{u.call(r,e)}}return r},inArray:function(e,t,r){return t==null?-1:n.call(t,e,r)},merge:function(e,t){var r=+t.length,i=0,n=e.length;for(;i<r;i++){e[n++]=t[i]}e.length=n;return e},grep:function(e,t,r){var i,n=[],a=0,o=e.length,s=!r;for(;a<o;a++){i=!t(e[a],a);if(i!==s){n.push(e[a])}}return n},map:function(e,t,r){var i,n,a=0,o=[];if(f(e)){i=e.length;for(;a<i;a++){n=t(e[a],a,r);if(n!=null){o.push(n)}}}else{for(a in e){n=t(e[a],a,r);if(n!=null){o.push(n)}}}return v(o)},guid:1,support:g});if(typeof Symbol==="function"){T.fn[Symbol.iterator]=t[Symbol.iterator]}T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});function f(e){var t=!!e&&"length"in e&&e.length,r=x(e);if(y(e)||_(e)){return false}return r==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var d=function(r){var e,d,b,a,n,p,c,v,x,u,l,w,E,o,S,m,s,h,g,T="sizzle"+1*new Date,f=r.document,P=0,i=0,y=ue(),_=ue(),A=ue(),I=ue(),O=function(e,t){if(e===t){l=true}return 0},M={}.hasOwnProperty,t=[],C=t.pop,D=t.push,R=t.push,L=t.slice,N=function(e,t){var r=0,i=e.length;for(;r<i;r++){if(e[r]===t){return r}}return-1},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|"+"ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",U=":("+B+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|"+".*"+")\\)|)",H=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),z=new RegExp("^"+F+"*,"+F+"*"),X=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),W=new RegExp(F+"|>"),Y=new RegExp(U),q=new RegExp("^"+B+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),re=function(e,t){var r="0x"+e.slice(1)-65536;return t?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){if(t){if(e==="\0"){return"�"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},ae=function(){w()},oe=be(function(e){return e.disabled===true&&e.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{R.apply(t=L.call(f.childNodes),f.childNodes);t[f.childNodes.length].nodeType}catch(e){R={apply:t.length?function(e,t){D.apply(e,L.call(t))}:function(e,t){var r=e.length,i=0;while(e[r++]=t[i++]){}e.length=r-1}}}function se(t,e,r,i){var n,a,o,s,u,l,h,c=e&&e.ownerDocument,f=e?e.nodeType:9;r=r||[];if(typeof t!=="string"||!t||f!==1&&f!==9&&f!==11){return r}if(!i){w(e);e=e||E;if(S){if(f!==11&&(u=J.exec(t))){if(n=u[1]){if(f===9){if(o=e.getElementById(n)){if(o.id===n){r.push(o);return r}}else{return r}}else{if(c&&(o=c.getElementById(n))&&g(e,o)&&o.id===n){r.push(o);return r}}}else if(u[2]){R.apply(r,e.getElementsByTagName(t));return r}else if((n=u[3])&&d.getElementsByClassName&&e.getElementsByClassName){R.apply(r,e.getElementsByClassName(n));return r}}if(d.qsa&&!I[t+" "]&&(!m||!m.test(t))&&(f!==1||e.nodeName.toLowerCase()!=="object")){h=t;c=e;if(f===1&&(W.test(t)||X.test(t))){c=ee.test(t)&&ge(e.parentNode)||e;if(c!==e||!d.scope){if(s=e.getAttribute("id")){s=s.replace(ie,ne)}else{e.setAttribute("id",s=T)}}l=p(t);a=l.length;while(a--){l[a]=(s?"#"+s:":scope")+" "+_e(l[a])}h=l.join(",")}try{R.apply(r,c.querySelectorAll(h));return r}catch(e){I(t,true)}finally{if(s===T){e.removeAttribute("id")}}}}}return v(t.replace(G,"$1"),e,r,i)}function ue(){var r=[];function i(e,t){if(r.push(e+" ")>b.cacheLength){delete i[r.shift()]}return i[e+" "]=t}return i}function le(e){e[T]=true;return e}function he(e){var t=E.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function ce(e,t){var r=e.split("|"),i=r.length;while(i--){b.attrHandle[r[i]]=t}}function fe(e,t){var r=t&&e,i=r&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(i){return i}if(r){while(r=r.nextSibling){if(r===t){return-1}}}return e?1:-1}function de(r){return function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type===r}}function pe(r){return function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&e.type===r}}function ve(t){return function(e){if("form"in e){if(e.parentNode&&e.disabled===false){if("label"in e){if("label"in e.parentNode){return e.parentNode.disabled===t}else{return e.disabled===t}}return e.isDisabled===t||e.isDisabled!==!t&&oe(e)===t}return e.disabled===t}else if("label"in e){return e.disabled===t}return false}}function me(o){return le(function(a){a=+a;return le(function(e,t){var r,i=o([],e.length,a),n=i.length;while(n--){if(e[r=i[n]]){e[r]=!(t[r]=e[r])}}})})}function ge(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}d=se.support={};n=se.isXML=function(e){var t=e.namespaceURI,r=(e.ownerDocument||e).documentElement;return!$.test(t||r&&r.nodeName||"HTML")};w=se.setDocument=function(e){var t,r,i=e?e.ownerDocument||e:f;if(i==E||i.nodeType!==9||!i.documentElement){return E}E=i;o=E.documentElement;S=!n(E);if(f!=E&&(r=E.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",ae,false)}else if(r.attachEvent){r.attachEvent("onunload",ae)}}d.scope=he(function(e){o.appendChild(e).appendChild(E.createElement("div"));return typeof e.querySelectorAll!=="undefined"&&!e.querySelectorAll(":scope fieldset div").length});d.attributes=he(function(e){e.className="i";return!e.getAttribute("className")});d.getElementsByTagName=he(function(e){e.appendChild(E.createComment(""));return!e.getElementsByTagName("*").length});d.getElementsByClassName=Z.test(E.getElementsByClassName);d.getById=he(function(e){o.appendChild(e).id=T;return!E.getElementsByName||!E.getElementsByName(T).length});if(d.getById){b.filter["ID"]=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}};b.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&S){var r=t.getElementById(e);return r?[r]:[]}}}else{b.filter["ID"]=function(e){var r=e.replace(te,re);return function(e){var t=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return t&&t.value===r}};b.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&S){var r,i,n,a=t.getElementById(e);if(a){r=a.getAttributeNode("id");if(r&&r.value===e){return[a]}n=t.getElementsByName(e);i=0;while(a=n[i++]){r=a.getAttributeNode("id");if(r&&r.value===e){return[a]}}}return[]}}}b.find["TAG"]=d.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(d.qsa){return t.querySelectorAll(e)}}:function(e,t){var r,i=[],n=0,a=t.getElementsByTagName(e);if(e==="*"){while(r=a[n++]){if(r.nodeType===1){i.push(r)}}return i}return a};b.find["CLASS"]=d.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&S){return t.getElementsByClassName(e)}};s=[];m=[];if(d.qsa=Z.test(E.querySelectorAll)){he(function(e){var t;o.appendChild(e).innerHTML="<a id='"+T+"'></a>"+"<select id='"+T+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+F+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){m.push("\\["+F+"*(?:value|"+k+")")}if(!e.querySelectorAll("[id~="+T+"-]").length){m.push("~=")}t=E.createElement("input");t.setAttribute("name","");e.appendChild(t);if(!e.querySelectorAll("[name='']").length){m.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")")}if(!e.querySelectorAll(":checked").length){m.push(":checked")}if(!e.querySelectorAll("a#"+T+"+*").length){m.push(".#.+[+~]")}e.querySelectorAll("\\\f");m.push("[\\r\\n\\f]")});he(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=E.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){m.push("name"+F+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){m.push(":enabled",":disabled")}o.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){m.push(":enabled",":disabled")}e.querySelectorAll("*,:x");m.push(",.*:")})}if(d.matchesSelector=Z.test(h=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector)){he(function(e){d.disconnectedMatch=h.call(e,"*");h.call(e,"[s!='']:x");s.push("!=",U)})}m=m.length&&new RegExp(m.join("|"));s=s.length&&new RegExp(s.join("|"));t=Z.test(o.compareDocumentPosition);g=t||Z.test(o.contains)?function(e,t){var r=e.nodeType===9?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&i.nodeType===1&&(r.contains?r.contains(i):e.compareDocumentPosition&&e.compareDocumentPosition(i)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};O=t?function(e,t){if(e===t){l=true;return 0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;if(r){return r}r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(r&1||!d.sortDetached&&t.compareDocumentPosition(e)===r){if(e==E||e.ownerDocument==f&&g(f,e)){return-1}if(t==E||t.ownerDocument==f&&g(f,t)){return 1}return u?N(u,e)-N(u,t):0}return r&4?-1:1}:function(e,t){if(e===t){l=true;return 0}var r,i=0,n=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!n||!a){return e==E?-1:t==E?1:n?-1:a?1:u?N(u,e)-N(u,t):0}else if(n===a){return fe(e,t)}r=e;while(r=r.parentNode){o.unshift(r)}r=t;while(r=r.parentNode){s.unshift(r)}while(o[i]===s[i]){i++}return i?fe(o[i],s[i]):o[i]==f?-1:s[i]==f?1:0};return E};se.matches=function(e,t){return se(e,null,null,t)};se.matchesSelector=function(e,t){w(e);if(d.matchesSelector&&S&&!I[t+" "]&&(!s||!s.test(t))&&(!m||!m.test(t))){try{var r=h.call(e,t);if(r||d.disconnectedMatch||e.document&&e.document.nodeType!==11){return r}}catch(e){I(t,true)}}return se(t,E,null,[e]).length>0};se.contains=function(e,t){if((e.ownerDocument||e)!=E){w(e)}return g(e,t)};se.attr=function(e,t){if((e.ownerDocument||e)!=E){w(e)}var r=b.attrHandle[t.toLowerCase()],i=r&&M.call(b.attrHandle,t.toLowerCase())?r(e,t,!S):undefined;return i!==undefined?i:d.attributes||!S?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null};se.escape=function(e){return(e+"").replace(ie,ne)};se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};se.uniqueSort=function(e){var t,r=[],i=0,n=0;l=!d.detectDuplicates;u=!d.sortStable&&e.slice(0);e.sort(O);if(l){while(t=e[n++]){if(t===e[n]){i=r.push(n)}}while(i--){e.splice(r[i],1)}}u=null;return e};a=se.getText=function(e){var t,r="",i=0,n=e.nodeType;if(!n){while(t=e[i++]){r+=a(t)}}else if(n===1||n===9||n===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){r+=a(e)}}}else if(n===3||n===4){return e.nodeValue}return r};b=se.selectors={cacheLength:50,createPseudo:le,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,re);e[3]=(e[3]||e[4]||e[5]||"").replace(te,re);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){se.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){se.error(e[0])}return e},PSEUDO:function(e){var t,r=!e[6]&&e[2];if(V["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(r&&Y.test(r)&&(t=p(r,true))&&(t=r.indexOf(")",r.length-t)-r.length)){e[0]=e[0].slice(0,t);e[2]=r.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=y[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&y(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(r,i,n){return function(e){var t=se.attr(e,r);if(t==null){return i==="!="}if(!i){return true}t+="";return i==="="?t===n:i==="!="?t!==n:i==="^="?n&&t.indexOf(n)===0:i==="*="?n&&t.indexOf(n)>-1:i==="$="?n&&t.slice(-n.length)===n:i==="~="?(" "+t.replace(H," ")+" ").indexOf(n)>-1:i==="|="?t===n||t.slice(0,n.length+1)===n+"-":false}},CHILD:function(p,e,t,v,m){var g=p.slice(0,3)!=="nth",y=p.slice(-4)!=="last",_=e==="of-type";return v===1&&m===0?function(e){return!!e.parentNode}:function(e,t,r){var i,n,a,o,s,u,l=g!==y?"nextSibling":"previousSibling",h=e.parentNode,c=_&&e.nodeName.toLowerCase(),f=!r&&!_,d=false;if(h){if(g){while(l){o=e;while(o=o[l]){if(_?o.nodeName.toLowerCase()===c:o.nodeType===1){return false}}u=l=p==="only"&&!u&&"nextSibling"}return true}u=[y?h.firstChild:h.lastChild];if(y&&f){o=h;a=o[T]||(o[T]={});n=a[o.uniqueID]||(a[o.uniqueID]={});i=n[p]||[];s=i[0]===P&&i[1];d=s&&i[2];o=s&&h.childNodes[s];while(o=++s&&o&&o[l]||(d=s=0)||u.pop()){if(o.nodeType===1&&++d&&o===e){n[p]=[P,s,d];break}}}else{if(f){o=e;a=o[T]||(o[T]={});n=a[o.uniqueID]||(a[o.uniqueID]={});i=n[p]||[];s=i[0]===P&&i[1];d=s}if(d===false){while(o=++s&&o&&o[l]||(d=s=0)||u.pop()){if((_?o.nodeName.toLowerCase()===c:o.nodeType===1)&&++d){if(f){a=o[T]||(o[T]={});n=a[o.uniqueID]||(a[o.uniqueID]={});n[p]=[P,d]}if(o===e){break}}}}}d-=m;return d===v||d%v===0&&d/v>=0}}},PSEUDO:function(e,a){var t,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);if(o[T]){return o(a)}if(o.length>1){t=[e,e,"",a];return b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var r,i=o(e,a),n=i.length;while(n--){r=N(e,i[n]);e[r]=!(t[r]=i[n])}}):function(e){return o(e,0,t)}}return o}},pseudos:{not:le(function(e){var i=[],n=[],s=c(e.replace(G,"$1"));return s[T]?le(function(e,t,r,i){var n,a=s(e,null,i,[]),o=e.length;while(o--){if(n=a[o]){e[o]=!(t[o]=n)}}}):function(e,t,r){i[0]=e;s(i,null,r,n);i[0]=null;return!n.pop()}}),has:le(function(t){return function(e){return se(t,e).length>0}}),contains:le(function(t){t=t.replace(te,re);return function(e){return(e.textContent||a(e)).indexOf(t)>-1}}),lang:le(function(r){if(!q.test(r||"")){se.error("unsupported lang: "+r)}r=r.replace(te,re).toLowerCase();return function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){t=t.toLowerCase();return t===r||t.indexOf(r+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(false),disabled:ve(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!b.pseudos["empty"](e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,r){return[r<0?r+t:r]}),even:me(function(e,t){var r=0;for(;r<t;r+=2){e.push(r)}return e}),odd:me(function(e,t){var r=1;for(;r<t;r+=2){e.push(r)}return e}),lt:me(function(e,t,r){var i=r<0?r+t:r>t?t:r;for(;--i>=0;){e.push(i)}return e}),gt:me(function(e,t,r){var i=r<0?r+t:r;for(;++i<t;){e.push(i)}return e})}};b.pseudos["nth"]=b.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){b.pseudos[e]=de(e)}for(e in{submit:true,reset:true}){b.pseudos[e]=pe(e)}function ye(){}ye.prototype=b.filters=b.pseudos;b.setFilters=new ye;p=se.tokenize=function(e,t){var r,i,n,a,o,s,u,l=_[e+" "];if(l){return t?0:l.slice(0)}o=e;s=[];u=b.preFilter;while(o){if(!r||(i=z.exec(o))){if(i){o=o.slice(i[0].length)||o}s.push(n=[])}r=false;if(i=X.exec(o)){r=i.shift();n.push({value:r,type:i[0].replace(G," ")});o=o.slice(r.length)}for(a in b.filter){if((i=V[a].exec(o))&&(!u[a]||(i=u[a](i)))){r=i.shift();n.push({value:r,type:a,matches:i});o=o.slice(r.length)}}if(!r){break}}return t?o.length:o?se.error(e):_(e,s).slice(0)};function _e(e){var t=0,r=e.length,i="";for(;t<r;t++){i+=e[t].value}return i}function be(s,e,t){var u=e.dir,l=e.next,h=l||u,c=t&&h==="parentNode",f=i++;return e.first?function(e,t,r){while(e=e[u]){if(e.nodeType===1||c){return s(e,t,r)}}return false}:function(e,t,r){var i,n,a,o=[P,f];if(r){while(e=e[u]){if(e.nodeType===1||c){if(s(e,t,r)){return true}}}}else{while(e=e[u]){if(e.nodeType===1||c){a=e[T]||(e[T]={});n=a[e.uniqueID]||(a[e.uniqueID]={});if(l&&l===e.nodeName.toLowerCase()){e=e[u]||e}else if((i=n[h])&&i[0]===P&&i[1]===f){return o[2]=i[2]}else{n[h]=o;if(o[2]=s(e,t,r)){return true}}}}}return false}}function xe(n){return n.length>1?function(e,t,r){var i=n.length;while(i--){if(!n[i](e,t,r)){return false}}return true}:n[0]}function we(e,t,r){var i=0,n=t.length;for(;i<n;i++){se(e,t[i],r)}return r}function Ee(e,t,r,i,n){var a,o=[],s=0,u=e.length,l=t!=null;for(;s<u;s++){if(a=e[s]){if(!r||r(a,i,n)){o.push(a);if(l){t.push(s)}}}}return o}function Se(d,p,v,m,g,e){if(m&&!m[T]){m=Se(m)}if(g&&!g[T]){g=Se(g,e)}return le(function(e,t,r,i){var n,a,o,s=[],u=[],l=t.length,h=e||we(p||"*",r.nodeType?[r]:r,[]),c=d&&(e||!p)?Ee(h,s,d,r,i):h,f=v?g||(e?d:l||m)?[]:t:c;if(v){v(c,f,r,i)}if(m){n=Ee(f,u);m(n,[],r,i);a=n.length;while(a--){if(o=n[a]){f[u[a]]=!(c[u[a]]=o)}}}if(e){if(g||d){if(g){n=[];a=f.length;while(a--){if(o=f[a]){n.push(c[a]=o)}}g(null,f=[],n,i)}a=f.length;while(a--){if((o=f[a])&&(n=g?N(e,o):s[a])>-1){e[n]=!(t[n]=o)}}}}else{f=Ee(f===t?f.splice(l,f.length):f);if(g){g(null,t,f,i)}else{R.apply(t,f)}}})}function Te(e){var n,t,r,i=e.length,a=b.relative[e[0].type],o=a||b.relative[" "],s=a?1:0,u=be(function(e){return e===n},o,true),l=be(function(e){return N(n,e)>-1},o,true),h=[function(e,t,r){var i=!a&&(r||t!==x)||((n=t).nodeType?u(e,t,r):l(e,t,r));n=null;return i}];for(;s<i;s++){if(t=b.relative[e[s].type]){h=[be(xe(h),t)]}else{t=b.filter[e[s].type].apply(null,e[s].matches);if(t[T]){r=++s;for(;r<i;r++){if(b.relative[e[r].type]){break}}return Se(s>1&&xe(h),s>1&&_e(e.slice(0,s-1).concat({value:e[s-2].type===" "?"*":""})).replace(G,"$1"),t,s<r&&Te(e.slice(s,r)),r<i&&Te(e=e.slice(r)),r<i&&_e(e))}h.push(t)}}return xe(h)}function Pe(m,g){var y=g.length>0,_=m.length>0,e=function(e,t,r,i,n){var a,o,s,u=0,l="0",h=e&&[],c=[],f=x,d=e||_&&b.find["TAG"]("*",n),p=P+=f==null?1:Math.random()||.1,v=d.length;if(n){x=t==E||t||n}for(;l!==v&&(a=d[l])!=null;l++){if(_&&a){o=0;if(!t&&a.ownerDocument!=E){w(a);r=!S}while(s=m[o++]){if(s(a,t||E,r)){i.push(a);break}}if(n){P=p}}if(y){if(a=!s&&a){u--}if(e){h.push(a)}}}u+=l;if(y&&l!==u){o=0;while(s=g[o++]){s(h,c,t,r)}if(e){if(u>0){while(l--){if(!(h[l]||c[l])){c[l]=C.call(i)}}}c=Ee(c)}R.apply(i,c);if(n&&!e&&c.length>0&&u+g.length>1){se.uniqueSort(i)}}if(n){P=p;x=f}return h};return y?le(e):e}c=se.compile=function(e,t){var r,i=[],n=[],a=A[e+" "];if(!a){if(!t){t=p(e)}r=t.length;while(r--){a=Te(t[r]);if(a[T]){i.push(a)}else{n.push(a)}}a=A(e,Pe(n,i));a.selector=e}return a};v=se.select=function(e,t,r,i){var n,a,o,s,u,l=typeof e==="function"&&e,h=!i&&p(e=l.selector||e);r=r||[];if(h.length===1){a=h[0]=h[0].slice(0);if(a.length>2&&(o=a[0]).type==="ID"&&t.nodeType===9&&S&&b.relative[a[1].type]){t=(b.find["ID"](o.matches[0].replace(te,re),t)||[])[0];if(!t){return r}else if(l){t=t.parentNode}e=e.slice(a.shift().value.length)}n=V["needsContext"].test(e)?0:a.length;while(n--){o=a[n];if(b.relative[s=o.type]){break}if(u=b.find[s]){if(i=u(o.matches[0].replace(te,re),ee.test(a[0].type)&&ge(t.parentNode)||t)){a.splice(n,1);e=i.length&&_e(a);if(!e){R.apply(r,i);return r}break}}}}(l||c(e,h))(i,t,!S,r,!t||ee.test(e)&&ge(t.parentNode)||t);return r};d.sortStable=T.split("").sort(O).join("")===T;d.detectDuplicates=!!l;w();d.sortDetached=he(function(e){return e.compareDocumentPosition(E.createElement("fieldset"))&1});if(!he(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){ce("type|href|height|width",function(e,t,r){if(!r){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!d.attributes||!he(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){ce("value",function(e,t,r){if(!r&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!he(function(e){return e.getAttribute("disabled")==null})){ce(k,function(e,t,r){var i;if(!r){return e[t]===true?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}})}return se}(E);T.find=d;T.expr=d.selectors;T.expr[":"]=T.expr.pseudos;T.uniqueSort=T.unique=d.uniqueSort;T.text=d.getText;T.isXMLDoc=d.isXML;T.contains=d.contains;T.escapeSelector=d.escape;var p=function(e,t,r){var i=[],n=r!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(n&&T(e).is(r)){break}i.push(e)}}return i};var w=function(e,t){var r=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){r.push(e)}}return r};var P=T.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,r,i){if(y(r)){return T.grep(e,function(e,t){return!!r.call(e,t,e)!==i})}if(r.nodeType){return T.grep(e,function(e){return e===r!==i})}if(typeof r!=="string"){return T.grep(e,function(e){return n.call(r,e)>-1!==i})}return T.filter(r,e,i)}T.filter=function(e,t,r){var i=t[0];if(r){e=":not("+e+")"}if(t.length===1&&i.nodeType===1){return T.find.matchesSelector(i,e)?[i]:[]}return T.find.matches(e,T.grep(t,function(e){return e.nodeType===1}))};T.fn.extend({find:function(e){var t,r,i=this.length,n=this;if(typeof e!=="string"){return this.pushStack(T(e).filter(function(){for(t=0;t<i;t++){if(T.contains(n[t],this)){return true}}}))}r=this.pushStack([]);for(t=0;t<i;t++){T.find(e,n[t],r)}return i>1?T.uniqueSort(r):r},filter:function(e){return this.pushStack(O(this,e||[],false))},not:function(e){return this.pushStack(O(this,e||[],true))},is:function(e){return!!O(this,typeof e==="string"&&P.test(e)?T(e):e||[],false).length}});var M,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,D=T.fn.init=function(e,t,r){var i,n;if(!e){return this}r=r||M;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){i=[null,e,null]}else{i=C.exec(e)}if(i&&(i[1]||!t)){if(i[1]){t=t instanceof T?t[0]:t;T.merge(this,T.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:S,true));if(I.test(i[1])&&T.isPlainObject(t)){for(i in t){if(y(this[i])){this[i](t[i])}else{this.attr(i,t[i])}}}return this}else{n=S.getElementById(i[2]);if(n){this[0]=n;this.length=1}return this}}else if(!t||t.jquery){return(t||r).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(y(e)){return r.ready!==undefined?r.ready(e):e(T)}return T.makeArray(e,this)};D.prototype=T.fn;M=T(S);var R=/^(?:parents|prev(?:Until|All))/,L={children:true,contents:true,next:true,prev:true};T.fn.extend({has:function(e){var t=T(e,this),r=t.length;return this.filter(function(){var e=0;for(;e<r;e++){if(T.contains(this,t[e])){return true}}})},closest:function(e,t){var r,i=0,n=this.length,a=[],o=typeof e!=="string"&&T(e);if(!P.test(e)){for(;i<n;i++){for(r=this[i];r&&r!==t;r=r.parentNode){if(r.nodeType<11&&(o?o.index(r)>-1:r.nodeType===1&&T.find.matchesSelector(r,e))){a.push(r);break}}}}return this.pushStack(a.length>1?T.uniqueSort(a):a)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return n.call(T(e),this[0])}return n.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function N(e,t){while((e=e[t])&&e.nodeType!==1){}return e}T.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return p(e,"parentNode")},parentsUntil:function(e,t,r){return p(e,"parentNode",r)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return p(e,"nextSibling")},prevAll:function(e){return p(e,"previousSibling")},nextUntil:function(e,t,r){return p(e,"nextSibling",r)},prevUntil:function(e,t,r){return p(e,"previousSibling",r)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){if(e.contentDocument!=null&&i(e.contentDocument)){return e.contentDocument}if(A(e,"template")){e=e.content||e}return T.merge([],e.childNodes)}},function(i,n){T.fn[i]=function(e,t){var r=T.map(this,n,e);if(i.slice(-5)!=="Until"){t=e}if(t&&typeof t==="string"){r=T.filter(t,r)}if(this.length>1){if(!L[i]){T.uniqueSort(r)}if(R.test(i)){r.reverse()}}return this.pushStack(r)}});var k=/[^\x20\t\r\n\f]+/g;function F(e){var r={};T.each(e.match(k)||[],function(e,t){r[t]=true});return r}T.Callbacks=function(i){i=typeof i==="string"?F(i):T.extend({},i);var r,e,t,n,a=[],o=[],s=-1,u=function(){n=n||i.once;t=r=true;for(;o.length;s=-1){e=o.shift();while(++s<a.length){if(a[s].apply(e[0],e[1])===false&&i.stopOnFalse){s=a.length;e=false}}}if(!i.memory){e=false}r=false;if(n){if(e){a=[]}else{a=""}}},l={add:function(){if(a){if(e&&!r){s=a.length-1;o.push(e)}(function r(e){T.each(e,function(e,t){if(y(t)){if(!i.unique||!l.has(t)){a.push(t)}}else if(t&&t.length&&x(t)!=="string"){r(t)}})})(arguments);if(e&&!r){u()}}return this},remove:function(){T.each(arguments,function(e,t){var r;while((r=T.inArray(t,a,r))>-1){a.splice(r,1);if(r<=s){s--}}});return this},has:function(e){return e?T.inArray(e,a)>-1:a.length>0},empty:function(){if(a){a=[]}return this},disable:function(){n=o=[];a=e="";return this},disabled:function(){return!a},lock:function(){n=o=[];if(!e&&!r){a=e=""}return this},locked:function(){return!!n},fireWith:function(e,t){if(!n){t=t||[];t=[e,t.slice?t.slice():t];o.push(t);if(!r){u()}}return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return!!t}};return l};function B(e){return e}function j(e){throw e}function U(e,t,r,i){var n;try{if(e&&y(n=e.promise)){n.call(e).done(t).fail(r)}else if(e&&y(n=e.then)){n.call(e,t,r)}else{t.apply(undefined,[e].slice(i))}}catch(e){r.apply(undefined,[e])}}T.extend({Deferred:function(e){var a=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){s.done(arguments).fail(arguments);return this},catch:function(e){return o.then(null,e)},pipe:function(){var n=arguments;return T.Deferred(function(i){T.each(a,function(e,t){var r=y(n[t[4]])&&n[t[4]];s[t[1]](function(){var e=r&&r.apply(this,arguments);if(e&&y(e.promise)){e.promise().progress(i.notify).done(i.resolve).fail(i.reject)}else{i[t[0]+"With"](this,r?[e]:arguments)}})});n=null}).promise()},then:function(t,r,i){var u=0;function l(n,a,o,s){return function(){var r=this,i=arguments,e=function(){var e,t;if(n<u){return}e=o.apply(r,i);if(e===a.promise()){throw new TypeError("Thenable self-resolution")}t=e&&(typeof e==="object"||typeof e==="function")&&e.then;if(y(t)){if(s){t.call(e,l(u,a,B,s),l(u,a,j,s))}else{u++;t.call(e,l(u,a,B,s),l(u,a,j,s),l(u,a,B,a.notifyWith))}}else{if(o!==B){r=undefined;i=[e]}(s||a.resolveWith)(r,i)}},t=s?e:function(){try{e()}catch(e){if(T.Deferred.exceptionHook){T.Deferred.exceptionHook(e,t.stackTrace)}if(n+1>=u){if(o!==j){r=undefined;i=[e]}a.rejectWith(r,i)}}};if(n){t()}else{if(T.Deferred.getStackHook){t.stackTrace=T.Deferred.getStackHook()}E.setTimeout(t)}}}return T.Deferred(function(e){a[0][3].add(l(0,e,y(i)?i:B,e.notifyWith));a[1][3].add(l(0,e,y(t)?t:B));a[2][3].add(l(0,e,y(r)?r:j))}).promise()},promise:function(e){return e!=null?T.extend(e,o):o}},s={};T.each(a,function(e,t){var r=t[2],i=t[5];o[t[1]]=r.add;if(i){r.add(function(){n=i},a[3-e][2].disable,a[3-e][3].disable,a[0][2].lock,a[0][3].lock)}r.add(t[3].fire);s[t[0]]=function(){s[t[0]+"With"](this===s?undefined:this,arguments);return this};s[t[0]+"With"]=r.fireWith});o.promise(s);if(e){e.call(s,s)}return s},when:function(e){var r=arguments.length,t=r,i=Array(t),n=s.call(arguments),a=T.Deferred(),o=function(t){return function(e){i[t]=this;n[t]=arguments.length>1?s.call(arguments):e;if(!--r){a.resolveWith(i,n)}}};if(r<=1){U(e,a.done(o(t)).resolve,a.reject,!r);if(a.state()==="pending"||y(n[t]&&n[t].then)){return a.then()}}while(t--){U(n[t],o(t),a.reject)}return a.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(e,t){if(E.console&&E.console.warn&&e&&H.test(e.name)){E.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)}};T.readyException=function(e){E.setTimeout(function(){throw e})};var G=T.Deferred();T.fn.ready=function(e){G.then(e).catch(function(e){T.readyException(e)});return this};T.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--T.readyWait:T.isReady){return}T.isReady=true;if(e!==true&&--T.readyWait>0){return}G.resolveWith(S,[T])}});T.ready.then=G.then;function z(){S.removeEventListener("DOMContentLoaded",z);E.removeEventListener("load",z);T.ready()}if(S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll){E.setTimeout(T.ready)}else{S.addEventListener("DOMContentLoaded",z);E.addEventListener("load",z)}var X=function(e,t,r,i,n,a,o){var s=0,u=e.length,l=r==null;if(x(r)==="object"){n=true;for(s in r){X(e,t,s,r[s],true,a,o)}}else if(i!==undefined){n=true;if(!y(i)){o=true}if(l){if(o){t.call(e,i);t=null}else{l=t;t=function(e,t,r){return l.call(T(e),r)}}}if(t){for(;s<u;s++){t(e[s],r,o?i:i.call(e[s],s,t(e[s],r)))}}}if(n){return e}if(l){return t.call(e)}return u?t(e[0],r):a};var W=/^-ms-/,Y=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function V(e){return e.replace(W,"ms-").replace(Y,q)}var $=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function K(){this.expando=T.expando+K.uid++}K.uid=1;K.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if($(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,r){var i,n=this.cache(e);if(typeof t==="string"){n[V(t)]=r}else{for(i in t){n[V(i)]=t[i]}}return n},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,r){if(t===undefined||t&&typeof t==="string"&&r===undefined){return this.get(e,t)}this.set(e,t,r);return r!==undefined?r:t},remove:function(e,t){var r,i=e[this.expando];if(i===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map(V)}else{t=V(t);t=t in i?[t]:t.match(k)||[]}r=t.length;while(r--){delete i[t[r]]}}if(t===undefined||T.isEmptyObject(i)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!T.isEmptyObject(t)}};var Q=new K;var Z=new K;var J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(J.test(e)){return JSON.parse(e)}return e}function re(e,t,r){var i;if(r===undefined&&e.nodeType===1){i="data-"+t.replace(ee,"-$&").toLowerCase();r=e.getAttribute(i);if(typeof r==="string"){try{r=te(r)}catch(e){}Z.set(e,t,r)}else{r=undefined}}return r}T.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,r){return Z.access(e,t,r)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,r){return Q.access(e,t,r)},_removeData:function(e,t){Q.remove(e,t)}});T.fn.extend({data:function(r,e){var t,i,n,a=this[0],o=a&&a.attributes;if(r===undefined){if(this.length){n=Z.get(a);if(a.nodeType===1&&!Q.get(a,"hasDataAttrs")){t=o.length;while(t--){if(o[t]){i=o[t].name;if(i.indexOf("data-")===0){i=V(i.slice(5));re(a,i,n[i])}}}Q.set(a,"hasDataAttrs",true)}}return n}if(typeof r==="object"){return this.each(function(){Z.set(this,r)})}return X(this,function(e){var t;if(a&&e===undefined){t=Z.get(a,r);if(t!==undefined){return t}t=re(a,r);if(t!==undefined){return t}return}this.each(function(){Z.set(this,r,e)})},null,e,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}});T.extend({queue:function(e,t,r){var i;if(e){t=(t||"fx")+"queue";i=Q.get(e,t);if(r){if(!i||Array.isArray(r)){i=Q.access(e,t,T.makeArray(r))}else{i.push(r)}}return i||[]}},dequeue:function(e,t){t=t||"fx";var r=T.queue(e,t),i=r.length,n=r.shift(),a=T._queueHooks(e,t),o=function(){T.dequeue(e,t)};if(n==="inprogress"){n=r.shift();i--}if(n){if(t==="fx"){r.unshift("inprogress")}delete a.stop;n.call(e,o,a)}if(!i&&a){a.empty.fire()}},_queueHooks:function(e,t){var r=t+"queueHooks";return Q.get(e,r)||Q.access(e,r,{empty:T.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",r])})})}});T.fn.extend({queue:function(t,r){var e=2;if(typeof t!=="string"){r=t;t="fx";e--}if(arguments.length<e){return T.queue(this[0],t)}return r===undefined?this:this.each(function(){var e=T.queue(this,t,r);T._queueHooks(this,t);if(t==="fx"&&e[0]!=="inprogress"){T.dequeue(this,t)}})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=T.Deferred(),a=this,o=this.length,s=function(){if(!--i){n.resolveWith(a,[a])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(o--){r=Q.get(a[o],e+"queueHooks");if(r&&r.empty){i++;r.empty.add(s)}}s();return n.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var ne=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i");var ae=["Top","Right","Bottom","Left"];var oe=S.documentElement;var se=function(e){return T.contains(e.ownerDocument,e)},ue={composed:true};if(oe.getRootNode){se=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(ue)===e.ownerDocument}}var le=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&se(e)&&T.css(e,"display")==="none"};function he(e,t,r,i){var n,a,o=20,s=i?function(){return i.cur()}:function(){return T.css(e,t,"")},u=s(),l=r&&r[3]||(T.cssNumber[t]?"":"px"),h=e.nodeType&&(T.cssNumber[t]||l!=="px"&&+u)&&ne.exec(T.css(e,t));if(h&&h[3]!==l){u=u/2;l=l||h[3];h=+u||1;while(o--){T.style(e,t,h+l);if((1-a)*(1-(a=s()/u||.5))<=0){o=0}h=h/a}h=h*2;T.style(e,t,h+l);r=r||[]}if(r){h=+h||+u||0;n=r[1]?h+(r[1]+1)*r[2]:+r[2];if(i){i.unit=l;i.start=h;i.end=n}}return n}var ce={};function fe(e){var t,r=e.ownerDocument,i=e.nodeName,n=ce[i];if(n){return n}t=r.body.appendChild(r.createElement(i));n=T.css(t,"display");t.parentNode.removeChild(t);if(n==="none"){n="block"}ce[i]=n;return n}function de(e,t){var r,i,n=[],a=0,o=e.length;for(;a<o;a++){i=e[a];if(!i.style){continue}r=i.style.display;if(t){if(r==="none"){n[a]=Q.get(i,"display")||null;if(!n[a]){i.style.display=""}}if(i.style.display===""&&le(i)){n[a]=fe(i)}}else{if(r!=="none"){n[a]="none";Q.set(i,"display",r)}}}for(a=0;a<o;a++){if(n[a]!=null){e[a].style.display=n[a]}}return e}T.fn.extend({show:function(){return de(this,true)},hide:function(){return de(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(le(this)){T(this).show()}else{T(this).hide()}})}});var pe=/^(?:checkbox|radio)$/i;var ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var me=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=S.createDocumentFragment(),t=e.appendChild(S.createElement("div")),r=S.createElement("input");r.setAttribute("type","radio");r.setAttribute("checked","checked");r.setAttribute("name","t");t.appendChild(r);g.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";g.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue;t.innerHTML="<option></option>";g.option=!!t.lastChild})();var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead;ge.th=ge.td;if(!g.option){ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]}function ye(e,t){var r;if(typeof e.getElementsByTagName!=="undefined"){r=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){r=e.querySelectorAll(t||"*")}else{r=[]}if(t===undefined||t&&A(e,t)){return T.merge([e],r)}return r}function _e(e,t){var r=0,i=e.length;for(;r<i;r++){Q.set(e[r],"globalEval",!t||Q.get(t[r],"globalEval"))}}var be=/<|&#?\w+;/;function xe(e,t,r,i,n){var a,o,s,u,l,h,c=t.createDocumentFragment(),f=[],d=0,p=e.length;for(;d<p;d++){a=e[d];if(a||a===0){if(x(a)==="object"){T.merge(f,a.nodeType?[a]:a)}else if(!be.test(a)){f.push(t.createTextNode(a))}else{o=o||c.appendChild(t.createElement("div"));s=(ve.exec(a)||["",""])[1].toLowerCase();u=ge[s]||ge._default;o.innerHTML=u[1]+T.htmlPrefilter(a)+u[2];h=u[0];while(h--){o=o.lastChild}T.merge(f,o.childNodes);o=c.firstChild;o.textContent=""}}}c.textContent="";d=0;while(a=f[d++]){if(i&&T.inArray(a,i)>-1){if(n){n.push(a)}continue}l=se(a);o=ye(c.appendChild(a),"script");if(l){_e(o)}if(r){h=0;while(a=o[h++]){if(me.test(a.type||"")){r.push(a)}}}}return c}var we=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function Te(){return true}function Pe(){return false}function Ae(e,t){return e===Ie()===(t==="focus")}function Ie(){try{return S.activeElement}catch(e){}}function Oe(e,t,r,i,n,a){var o,s;if(typeof t==="object"){if(typeof r!=="string"){i=i||r;r=undefined}for(s in t){Oe(e,s,r,i,t[s],a)}return e}if(i==null&&n==null){n=r;i=r=undefined}else if(n==null){if(typeof r==="string"){n=i;i=undefined}else{n=i;i=r;r=undefined}}if(n===false){n=Pe}else if(!n){return e}if(a===1){o=n;n=function(e){T().off(e);return o.apply(this,arguments)};n.guid=o.guid||(o.guid=T.guid++)}return e.each(function(){T.event.add(this,t,n,i,r)})}T.event={global:{},add:function(t,e,r,i,n){var a,o,s,u,l,h,c,f,d,p,v,m=Q.get(t);if(!$(t)){return}if(r.handler){a=r;r=a.handler;n=a.selector}if(n){T.find.matchesSelector(oe,n)}if(!r.guid){r.guid=T.guid++}if(!(u=m.events)){u=m.events=Object.create(null)}if(!(o=m.handle)){o=m.handle=function(e){return typeof T!=="undefined"&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):undefined}}e=(e||"").match(k)||[""];l=e.length;while(l--){s=Se.exec(e[l])||[];d=v=s[1];p=(s[2]||"").split(".").sort();if(!d){continue}c=T.event.special[d]||{};d=(n?c.delegateType:c.bindType)||d;c=T.event.special[d]||{};h=T.extend({type:d,origType:v,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&T.expr.match.needsContext.test(n),namespace:p.join(".")},a);if(!(f=u[d])){f=u[d]=[];f.delegateCount=0;if(!c.setup||c.setup.call(t,i,p,o)===false){if(t.addEventListener){t.addEventListener(d,o)}}}if(c.add){c.add.call(t,h);if(!h.handler.guid){h.handler.guid=r.guid}}if(n){f.splice(f.delegateCount++,0,h)}else{f.push(h)}T.event.global[d]=true}},remove:function(e,t,r,i,n){var a,o,s,u,l,h,c,f,d,p,v,m=Q.hasData(e)&&Q.get(e);if(!m||!(u=m.events)){return}t=(t||"").match(k)||[""];l=t.length;while(l--){s=Se.exec(t[l])||[];d=v=s[1];p=(s[2]||"").split(".").sort();if(!d){for(d in u){T.event.remove(e,d+t[l],r,i,true)}continue}c=T.event.special[d]||{};d=(i?c.delegateType:c.bindType)||d;f=u[d]||[];s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");o=a=f.length;while(a--){h=f[a];if((n||v===h.origType)&&(!r||r.guid===h.guid)&&(!s||s.test(h.namespace))&&(!i||i===h.selector||i==="**"&&h.selector)){f.splice(a,1);if(h.selector){f.delegateCount--}if(c.remove){c.remove.call(e,h)}}}if(o&&!f.length){if(!c.teardown||c.teardown.call(e,p,m.handle)===false){T.removeEvent(e,d,m.handle)}delete u[d]}}if(T.isEmptyObject(u)){Q.remove(e,"handle events")}},dispatch:function(e){var t,r,i,n,a,o,s=new Array(arguments.length),u=T.event.fix(e),l=(Q.get(this,"events")||Object.create(null))[u.type]||[],h=T.event.special[u.type]||{};s[0]=u;for(t=1;t<arguments.length;t++){s[t]=arguments[t]}u.delegateTarget=this;if(h.preDispatch&&h.preDispatch.call(this,u)===false){return}o=T.event.handlers.call(this,u,l);t=0;while((n=o[t++])&&!u.isPropagationStopped()){u.currentTarget=n.elem;r=0;while((a=n.handlers[r++])&&!u.isImmediatePropagationStopped()){if(!u.rnamespace||a.namespace===false||u.rnamespace.test(a.namespace)){u.handleObj=a;u.data=a.data;i=((T.event.special[a.origType]||{}).handle||a.handler).apply(n.elem,s);if(i!==undefined){if((u.result=i)===false){u.preventDefault();u.stopPropagation()}}}}}if(h.postDispatch){h.postDispatch.call(this,u)}return u.result},handlers:function(e,t){var r,i,n,a,o,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(e.type==="click"&&e.button>=1)){for(;l!==this;l=l.parentNode||this){if(l.nodeType===1&&!(e.type==="click"&&l.disabled===true)){a=[];o={};for(r=0;r<u;r++){i=t[r];n=i.selector+" ";if(o[n]===undefined){o[n]=i.needsContext?T(n,this).index(l)>-1:T.find(n,this,null,[l]).length}if(o[n]){a.push(i)}}if(a.length){s.push({elem:l,handlers:a})}}}}l=this;if(u<t.length){s.push({elem:l,handlers:t.slice(u)})}return s},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:true,configurable:true,get:y(e)?function(){if(this.originalEvent){return e(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[t]}},set:function(e){Object.defineProperty(this,t,{enumerable:true,configurable:true,writable:true,value:e})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:true},click:{setup:function(e){var t=this||e;if(pe.test(t.type)&&t.click&&A(t,"input")){Me(t,"click",Te)}return false},trigger:function(e){var t=this||e;if(pe.test(t.type)&&t.click&&A(t,"input")){Me(t,"click")}return true},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};function Me(e,n,a){if(!a){if(Q.get(e,n)===undefined){T.event.add(e,n,Te)}return}Q.set(e,n,false);T.event.add(e,n,{namespace:false,handler:function(e){var t,r,i=Q.get(this,n);if(e.isTrigger&1&&this[n]){if(!i.length){i=s.call(arguments);Q.set(this,n,i);t=a(this,n);this[n]();r=Q.get(this,n);if(i!==r||t){Q.set(this,n,false)}else{r={}}if(i!==r){e.stopImmediatePropagation();e.preventDefault();return r.value}}else if((T.event.special[n]||{}).delegateType){e.stopPropagation()}}else if(i.length){Q.set(this,n,{value:T.event.trigger(T.extend(i[0],T.Event.prototype),i.slice(1),this)});e.stopImmediatePropagation()}}})}T.removeEvent=function(e,t,r){if(e.removeEventListener){e.removeEventListener(t,r)}};T.Event=function(e,t){if(!(this instanceof T.Event)){return new T.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?Te:Pe;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){T.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[T.expando]=true};T.Event.prototype={constructor:T.Event,isDefaultPrevented:Pe,isPropagationStopped:Pe,isImmediatePropagationStopped:Pe,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};T.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,code:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(e){var t=e.button;if(e.which==null&&we.test(e.type)){return e.charCode!=null?e.charCode:e.keyCode}if(!e.which&&t!==undefined&&Ee.test(e.type)){if(t&1){return 1}if(t&2){return 3}if(t&4){return 2}return 0}return e.which}},T.event.addProp);T.each({focus:"focusin",blur:"focusout"},function(e,t){T.event.special[e]={setup:function(){Me(this,e,Ae);return false},trigger:function(){Me(this,e);return true},delegateType:t}});T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,a){T.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,r=this,i=e.relatedTarget,n=e.handleObj;if(!i||i!==r&&!T.contains(r,i)){e.type=n.origType;t=n.handler.apply(this,arguments);e.type=a}return t}}});T.fn.extend({on:function(e,t,r,i){return Oe(this,e,t,r,i)},one:function(e,t,r,i){return Oe(this,e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj){i=e.handleObj;T(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof e==="object"){for(n in e){this.off(n,t,e[n])}return this}if(t===false||typeof t==="function"){r=t;t=undefined}if(r===false){r=Pe}return this.each(function(){T.event.remove(this,e,r,t)})}});var Ce=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){if(A(e,"table")&&A(t.nodeType!==11?t:t.firstChild,"tr")){return T(e).children("tbody")[0]||e}return e}function Ne(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function ke(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function Fe(e,t){var r,i,n,a,o,s,u;if(t.nodeType!==1){return}if(Q.hasData(e)){a=Q.get(e);u=a.events;if(u){Q.remove(t,"handle events");for(n in u){for(r=0,i=u[n].length;r<i;r++){T.event.add(t,n,u[n][r])}}}}if(Z.hasData(e)){o=Z.access(e);s=T.extend({},o);Z.set(t,s)}}function Be(e,t){var r=t.nodeName.toLowerCase();if(r==="input"&&pe.test(e.type)){t.checked=e.checked}else if(r==="input"||r==="textarea"){t.defaultValue=e.defaultValue}}function je(r,i,n,a){i=v(i);var e,t,o,s,u,l,h=0,c=r.length,f=c-1,d=i[0],p=y(d);if(p||c>1&&typeof d==="string"&&!g.checkClone&&De.test(d)){return r.each(function(e){var t=r.eq(e);if(p){i[0]=d.call(this,e,t.html())}je(t,i,n,a)})}if(c){e=xe(i,r[0].ownerDocument,false,r,a);t=e.firstChild;if(e.childNodes.length===1){e=t}if(t||a){o=T.map(ye(e,"script"),Ne);s=o.length;for(;h<c;h++){u=e;if(h!==f){u=T.clone(u,true,true);if(s){T.merge(o,ye(u,"script"))}}n.call(r[h],u,h)}if(s){l=o[o.length-1].ownerDocument;T.map(o,ke);for(h=0;h<s;h++){u=o[h];if(me.test(u.type||"")&&!Q.access(u,"globalEval")&&T.contains(l,u)){if(u.src&&(u.type||"").toLowerCase()!=="module"){if(T._evalUrl&&!u.noModule){T._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l)}}else{b(u.textContent.replace(Re,""),u,l)}}}}}}return r}function Ue(e,t,r){var i,n=t?T.filter(t,e):e,a=0;for(;(i=n[a])!=null;a++){if(!r&&i.nodeType===1){T.cleanData(ye(i))}if(i.parentNode){if(r&&se(i)){_e(ye(i,"script"))}i.parentNode.removeChild(i)}}return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var i,n,a,o,s=e.cloneNode(true),u=se(e);if(!g.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!T.isXMLDoc(e)){o=ye(s);a=ye(e);for(i=0,n=a.length;i<n;i++){Be(a[i],o[i])}}if(t){if(r){a=a||ye(e);o=o||ye(s);for(i=0,n=a.length;i<n;i++){Fe(a[i],o[i])}}else{Fe(e,s)}}o=ye(s,"script");if(o.length>0){_e(o,!u&&ye(e,"script"))}return s},cleanData:function(e){var t,r,i,n=T.event.special,a=0;for(;(r=e[a])!==undefined;a++){if($(r)){if(t=r[Q.expando]){if(t.events){for(i in t.events){if(n[i]){T.event.remove(r,i)}else{T.removeEvent(r,i,t.handle)}}}r[Q.expando]=undefined}if(r[Z.expando]){r[Z.expando]=undefined}}}}});T.fn.extend({detach:function(e){return Ue(this,e,true)},remove:function(e){return Ue(this,e)},text:function(e){return X(this,function(e){return e===undefined?T.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return je(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Le(this,e);t.appendChild(e)}})},prepend:function(){return je(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return je(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return je(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){T.cleanData(ye(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return T.clone(this,e,t)})},html:function(e){return X(this,function(e){var t=this[0]||{},r=0,i=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!Ce.test(e)&&!ge[(ve.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;r<i;r++){t=this[r]||{};if(t.nodeType===1){T.cleanData(ye(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var r=[];return je(this,arguments,function(e){var t=this.parentNode;if(T.inArray(this,r)<0){T.cleanData(ye(this));if(t){t.replaceChild(e,this)}}},r)}});T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){T.fn[e]=function(e){var t,r=[],i=T(e),n=i.length-1,a=0;for(;a<=n;a++){t=a===n?this:this.clone(true);T(i[a])[o](t);u.apply(r,t.get())}return this.pushStack(r)}});var He=new RegExp("^("+ie+")(?!px)[a-z%]+$","i");var Ge=function(e){var t=e.ownerDocument.defaultView;if(!t||!t.opener){t=E}return t.getComputedStyle(e)};var ze=function(e,t,r){var i,n,a={};for(n in t){a[n]=e.style[n];e.style[n]=t[n]}i=r.call(e);for(n in t){e.style[n]=a[n]}return i};var Xe=new RegExp(ae.join("|"),"i");(function(){function e(){if(!l){return}u.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";oe.appendChild(u).appendChild(l);var e=E.getComputedStyle(l);r=e.top!=="1%";s=t(e.marginLeft)===12;l.style.right="60%";a=t(e.right)===36;i=t(e.width)===36;l.style.position="absolute";n=t(l.offsetWidth/3)===12;oe.removeChild(u);l=null}function t(e){return Math.round(parseFloat(e))}var r,i,n,a,o,s,u=S.createElement("div"),l=S.createElement("div");if(!l.style){return}l.style.backgroundClip="content-box";l.cloneNode(true).style.backgroundClip="";g.clearCloneStyle=l.style.backgroundClip==="content-box";T.extend(g,{boxSizingReliable:function(){e();return i},pixelBoxStyles:function(){e();return a},pixelPosition:function(){e();return r},reliableMarginLeft:function(){e();return s},scrollboxSize:function(){e();return n},reliableTrDimensions:function(){var e,t,r,i;if(o==null){e=S.createElement("table");t=S.createElement("tr");r=S.createElement("div");e.style.cssText="position:absolute;left:-11111px";t.style.height="1px";r.style.height="9px";oe.appendChild(e).appendChild(t).appendChild(r);i=E.getComputedStyle(t);o=parseInt(i.height)>3;oe.removeChild(e)}return o}})})();function We(e,t,r){var i,n,a,o,s=e.style;r=r||Ge(e);if(r){o=r.getPropertyValue(t)||r[t];if(o===""&&!se(e)){o=T.style(e,t)}if(!g.pixelBoxStyles()&&He.test(o)&&Xe.test(t)){i=s.width;n=s.minWidth;a=s.maxWidth;s.minWidth=s.maxWidth=s.width=o;o=r.width;s.width=i;s.minWidth=n;s.maxWidth=a}}return o!==undefined?o+"":o}function Ye(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var qe=["Webkit","Moz","ms"],Ve=S.createElement("div").style,$e={};function Ke(e){var t=e[0].toUpperCase()+e.slice(1),r=qe.length;while(r--){e=qe[r]+t;if(e in Ve){return e}}}function Qe(e){var t=T.cssProps[e]||$e[e];if(t){return t}if(e in Ve){return e}return $e[e]=Ke(e)||e}var Ze=/^(none|table(?!-c[ea]).+)/,Je=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,r){var i=ne.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function it(e,t,r,i,n,a){var o=t==="width"?1:0,s=0,u=0;if(r===(i?"border":"content")){return 0}for(;o<4;o+=2){if(r==="margin"){u+=T.css(e,r+ae[o],true,n)}if(!i){u+=T.css(e,"padding"+ae[o],true,n);if(r!=="padding"){u+=T.css(e,"border"+ae[o]+"Width",true,n)}else{s+=T.css(e,"border"+ae[o]+"Width",true,n)}}else{if(r==="content"){u-=T.css(e,"padding"+ae[o],true,n)}if(r!=="margin"){u-=T.css(e,"border"+ae[o]+"Width",true,n)}}}if(!i&&a>=0){u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-s-.5))||0}return u}function nt(e,t,r){var i=Ge(e),n=!g.boxSizingReliable()||r,a=n&&T.css(e,"boxSizing",false,i)==="border-box",o=a,s=We(e,t,i),u="offset"+t[0].toUpperCase()+t.slice(1);if(He.test(s)){if(!r){return s}s="auto"}if((!g.boxSizingReliable()&&a||!g.reliableTrDimensions()&&A(e,"tr")||s==="auto"||!parseFloat(s)&&T.css(e,"display",false,i)==="inline")&&e.getClientRects().length){a=T.css(e,"boxSizing",false,i)==="border-box";o=u in e;if(o){s=e[u]}}s=parseFloat(s)||0;return s+it(e,t,r||(a?"border":"content"),o,i,s)+"px"}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=We(e,"opacity");return r===""?"1":r}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,gridArea:true,gridColumn:true,gridColumnEnd:true,gridColumnStart:true,gridRow:true,gridRowEnd:true,gridRowStart:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var n,a,o,s=V(t),u=Je.test(t),l=e.style;if(!u){t=Qe(s)}o=T.cssHooks[t]||T.cssHooks[s];if(r!==undefined){a=typeof r;if(a==="string"&&(n=ne.exec(r))&&n[1]){r=he(e,t,n);a="number"}if(r==null||r!==r){return}if(a==="number"&&!u){r+=n&&n[3]||(T.cssNumber[s]?"":"px")}if(!g.clearCloneStyle&&r===""&&t.indexOf("background")===0){l[t]="inherit"}if(!o||!("set"in o)||(r=o.set(e,r,i))!==undefined){if(u){l.setProperty(t,r)}else{l[t]=r}}}else{if(o&&"get"in o&&(n=o.get(e,false,i))!==undefined){return n}return l[t]}},css:function(e,t,r,i){var n,a,o,s=V(t),u=Je.test(t);if(!u){t=Qe(s)}o=T.cssHooks[t]||T.cssHooks[s];if(o&&"get"in o){n=o.get(e,true,r)}if(n===undefined){n=We(e,t,i)}if(n==="normal"&&t in tt){n=tt[t]}if(r===""||r){a=parseFloat(n);return r===true||isFinite(a)?a||0:n}return n}});T.each(["height","width"],function(e,l){T.cssHooks[l]={get:function(e,t,r){if(t){return Ze.test(T.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?ze(e,et,function(){return nt(e,l,r)}):nt(e,l,r)}},set:function(e,t,r){var i,n=Ge(e),a=!g.scrollboxSize()&&n.position==="absolute",o=a||r,s=o&&T.css(e,"boxSizing",false,n)==="border-box",u=r?it(e,l,r,s,n):0;if(s&&a){u-=Math.ceil(e["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(n[l])-it(e,l,"border",false,n)-.5)}if(u&&(i=ne.exec(t))&&(i[3]||"px")!=="px"){e.style[l]=t;t=T.css(e,l)}return rt(e,t,u)}}});T.cssHooks.marginLeft=Ye(g.reliableMarginLeft,function(e,t){if(t){return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});T.each({margin:"",padding:"",border:"Width"},function(n,a){T.cssHooks[n+a]={expand:function(e){var t=0,r={},i=typeof e==="string"?e.split(" "):[e];for(;t<4;t++){r[n+ae[t]+a]=i[t]||i[t-2]||i[0]}return r}};if(n!=="margin"){T.cssHooks[n+a].set=rt}});T.fn.extend({css:function(e,t){return X(this,function(e,t,r){var i,n,a={},o=0;if(Array.isArray(t)){i=Ge(e);n=t.length;for(;o<n;o++){a[t[o]]=T.css(e,t[o],false,i)}return a}return r!==undefined?T.style(e,t,r):T.css(e,t)},e,t,arguments.length>1)}});function at(e,t,r,i,n){return new at.prototype.init(e,t,r,i,n)}T.Tween=at;at.prototype={constructor:at,init:function(e,t,r,i,n,a){this.elem=e;this.prop=r;this.easing=n||T.easing._default;this.options=t;this.start=this.now=this.cur();this.end=i;this.unit=a||(T.cssNumber[r]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,r=at.propHooks[this.prop];if(this.options.duration){this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(r&&r.set){r.set(this)}else{at.propHooks._default.set(this)}return this}};at.prototype.init.prototype=at.prototype;at.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=T.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(T.fx.step[e.prop]){T.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(T.cssHooks[e.prop]||e.elem.style[Qe(e.prop)]!=null)){T.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};at.propHooks.scrollTop=at.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};T.fx=at.prototype.init;T.fx.step={};var ot,st,ut=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function ht(){if(st){if(S.hidden===false&&E.requestAnimationFrame){E.requestAnimationFrame(ht)}else{E.setTimeout(ht,T.fx.interval)}T.fx.tick()}}function ct(){E.setTimeout(function(){ot=undefined});return ot=Date.now()}function ft(e,t){var r,i=0,n={height:e};t=t?1:0;for(;i<4;i+=2-t){r=ae[i];n["margin"+r]=n["padding"+r]=e}if(t){n.opacity=n.width=e}return n}function dt(e,t,r){var i,n=(mt.tweeners[t]||[]).concat(mt.tweeners["*"]),a=0,o=n.length;for(;a<o;a++){if(i=n[a].call(r,t,e)){return i}}}function pt(e,t,r){var i,n,a,o,s,u,l,h,c="width"in t||"height"in t,f=this,d={},p=e.style,v=e.nodeType&&le(e),m=Q.get(e,"fxshow");if(!r.queue){o=T._queueHooks(e,"fx");if(o.unqueued==null){o.unqueued=0;s=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){s()}}}o.unqueued++;f.always(function(){f.always(function(){o.unqueued--;if(!T.queue(e,"fx").length){o.empty.fire()}})})}for(i in t){n=t[i];if(ut.test(n)){delete t[i];a=a||n==="toggle";if(n===(v?"hide":"show")){if(n==="show"&&m&&m[i]!==undefined){v=true}else{continue}}d[i]=m&&m[i]||T.style(e,i)}}u=!T.isEmptyObject(t);if(!u&&T.isEmptyObject(d)){return}if(c&&e.nodeType===1){r.overflow=[p.overflow,p.overflowX,p.overflowY];l=m&&m.display;if(l==null){l=Q.get(e,"display")}h=T.css(e,"display");if(h==="none"){if(l){h=l}else{de([e],true);l=e.style.display||l;h=T.css(e,"display");de([e])}}if(h==="inline"||h==="inline-block"&&l!=null){if(T.css(e,"float")==="none"){if(!u){f.done(function(){p.display=l});if(l==null){h=p.display;l=h==="none"?"":h}}p.display="inline-block"}}}if(r.overflow){p.overflow="hidden";f.always(function(){p.overflow=r.overflow[0];p.overflowX=r.overflow[1];p.overflowY=r.overflow[2]})}u=false;for(i in d){if(!u){if(m){if("hidden"in m){v=m.hidden}}else{m=Q.access(e,"fxshow",{display:l})}if(a){m.hidden=!v}if(v){de([e],true)}f.done(function(){if(!v){de([e])}Q.remove(e,"fxshow");for(i in d){T.style(e,i,d[i])}})}u=dt(v?m[i]:0,i,f);if(!(i in m)){m[i]=u.start;if(v){u.end=u.start;u.start=0}}}}function vt(e,t){var r,i,n,a,o;for(r in e){i=V(r);n=t[i];a=e[r];if(Array.isArray(a)){n=a[1];a=e[r]=a[0]}if(r!==i){e[i]=a;delete e[r]}o=T.cssHooks[i];if(o&&"expand"in o){a=o.expand(a);delete e[i];for(r in a){if(!(r in e)){e[r]=a[r];t[r]=n}}}else{t[i]=n}}}function mt(o,e,t){var r,s,i=0,n=mt.prefilters.length,u=T.Deferred().always(function(){delete a.elem}),a=function(){if(s){return false}var e=ot||ct(),t=Math.max(0,l.startTime+l.duration-e),r=t/l.duration||0,i=1-r,n=0,a=l.tweens.length;for(;n<a;n++){l.tweens[n].run(i)}u.notifyWith(o,[l,i,t]);if(i<1&&a){return t}if(!a){u.notifyWith(o,[l,1,0])}u.resolveWith(o,[l]);return false},l=u.promise({elem:o,props:T.extend({},e),opts:T.extend(true,{specialEasing:{},easing:T.easing._default},t),originalProperties:e,originalOptions:t,startTime:ot||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var r=T.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);l.tweens.push(r);return r},stop:function(e){var t=0,r=e?l.tweens.length:0;if(s){return this}s=true;for(;t<r;t++){l.tweens[t].run(1)}if(e){u.notifyWith(o,[l,1,0]);u.resolveWith(o,[l,e])}else{u.rejectWith(o,[l,e])}return this}}),h=l.props;vt(h,l.opts.specialEasing);for(;i<n;i++){r=mt.prefilters[i].call(l,o,h,l.opts);if(r){if(y(r.stop)){T._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)}return r}}T.map(h,dt,l);if(y(l.opts.start)){l.opts.start.call(o,l)}l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always);T.fx.timer(T.extend(a,{elem:o,anim:l,queue:l.opts.queue}));return l}T.Animation=T.extend(mt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);he(r.elem,e,ne.exec(t),r);return r}]},tweener:function(e,t){if(y(e)){t=e;e=["*"]}else{e=e.match(k)}var r,i=0,n=e.length;for(;i<n;i++){r=e[i];mt.tweeners[r]=mt.tweeners[r]||[];mt.tweeners[r].unshift(t)}},prefilters:[pt],prefilter:function(e,t){if(t){mt.prefilters.unshift(e)}else{mt.prefilters.push(e)}}});T.speed=function(e,t,r){var i=e&&typeof e==="object"?T.extend({},e):{complete:r||!r&&t||y(e)&&e,duration:e,easing:r&&t||t&&!y(t)&&t};if(T.fx.off){i.duration=0}else{if(typeof i.duration!=="number"){if(i.duration in T.fx.speeds){i.duration=T.fx.speeds[i.duration]}else{i.duration=T.fx.speeds._default}}}if(i.queue==null||i.queue===true){i.queue="fx"}i.old=i.complete;i.complete=function(){if(y(i.old)){i.old.call(this)}if(i.queue){T.dequeue(this,i.queue)}};return i};T.fn.extend({fadeTo:function(e,t,r,i){return this.filter(le).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(t,e,r,i){var n=T.isEmptyObject(t),a=T.speed(e,r,i),o=function(){var e=mt(this,T.extend({},t),a);if(n||Q.get(this,"finish")){e.stop(true)}};o.finish=o;return n||a.queue===false?this.each(o):this.queue(a.queue,o)},stop:function(n,e,a){var o=function(e){var t=e.stop;delete e.stop;t(a)};if(typeof n!=="string"){a=e;e=n;n=undefined}if(e){this.queue(n||"fx",[])}return this.each(function(){var e=true,t=n!=null&&n+"queueHooks",r=T.timers,i=Q.get(this);if(t){if(i[t]&&i[t].stop){o(i[t])}}else{for(t in i){if(i[t]&&i[t].stop&&lt.test(t)){o(i[t])}}}for(t=r.length;t--;){if(r[t].elem===this&&(n==null||r[t].queue===n)){r[t].anim.stop(a);e=false;r.splice(t,1)}}if(e||!a){T.dequeue(this,n)}})},finish:function(o){if(o!==false){o=o||"fx"}return this.each(function(){var e,t=Q.get(this),r=t[o+"queue"],i=t[o+"queueHooks"],n=T.timers,a=r?r.length:0;t.finish=true;T.queue(this,o,[]);if(i&&i.stop){i.stop.call(this,true)}for(e=n.length;e--;){if(n[e].elem===this&&n[e].queue===o){n[e].anim.stop(true);n.splice(e,1)}}for(e=0;e<a;e++){if(r[e]&&r[e].finish){r[e].finish.call(this)}}delete t.finish})}});T.each(["toggle","show","hide"],function(e,i){var n=T.fn[i];T.fn[i]=function(e,t,r){return e==null||typeof e==="boolean"?n.apply(this,arguments):this.animate(ft(i,true),e,t,r)}});T.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){T.fn[e]=function(e,t,r){return this.animate(i,e,t,r)}});T.timers=[];T.fx.tick=function(){var e,t=0,r=T.timers;ot=Date.now();for(;t<r.length;t++){e=r[t];if(!e()&&r[t]===e){r.splice(t--,1)}}if(!r.length){T.fx.stop()}ot=undefined};T.fx.timer=function(e){T.timers.push(e);T.fx.start()};T.fx.interval=13;T.fx.start=function(){if(st){return}st=true;ht()};T.fx.stop=function(){st=null};T.fx.speeds={slow:600,fast:200,_default:400};T.fn.delay=function(i,e){i=T.fx?T.fx.speeds[i]||i:i;e=e||"fx";return this.queue(e,function(e,t){var r=E.setTimeout(e,i);t.stop=function(){E.clearTimeout(r)}})};(function(){var e=S.createElement("input"),t=S.createElement("select"),r=t.appendChild(S.createElement("option"));e.type="checkbox";g.checkOn=e.value!=="";g.optSelected=r.selected;e=S.createElement("input");e.value="t";e.type="radio";g.radioValue=e.value==="t"})();var gt,yt=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return X(this,T.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){T.removeAttr(this,e)})}});T.extend({attr:function(e,t,r){var i,n,a=e.nodeType;if(a===3||a===8||a===2){return}if(typeof e.getAttribute==="undefined"){return T.prop(e,t,r)}if(a!==1||!T.isXMLDoc(e)){n=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?gt:undefined)}if(r!==undefined){if(r===null){T.removeAttr(e,t);return}if(n&&"set"in n&&(i=n.set(e,r,t))!==undefined){return i}e.setAttribute(t,r+"");return r}if(n&&"get"in n&&(i=n.get(e,t))!==null){return i}i=T.find.attr(e,t);return i==null?undefined:i},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&t==="radio"&&A(e,"input")){var r=e.value;e.setAttribute("type",t);if(r){e.value=r}return t}}}},removeAttr:function(e,t){var r,i=0,n=t&&t.match(k);if(n&&e.nodeType===1){while(r=n[i++]){e.removeAttribute(r)}}}});gt={set:function(e,t,r){if(t===false){T.removeAttr(e,r)}else{e.setAttribute(r,r)}return r}};T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var o=yt[t]||T.find.attr;yt[t]=function(e,t,r){var i,n,a=t.toLowerCase();if(!r){n=yt[a];yt[a]=i;i=o(e,t,r)!=null?a:null;yt[a]=n}return i}});var _t=/^(?:input|select|textarea|button)$/i,bt=/^(?:a|area)$/i;T.fn.extend({prop:function(e,t){return X(this,T.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[T.propFix[e]||e]})}});T.extend({prop:function(e,t,r){var i,n,a=e.nodeType;if(a===3||a===8||a===2){return}if(a!==1||!T.isXMLDoc(e)){t=T.propFix[t]||t;n=T.propHooks[t]}if(r!==undefined){if(n&&"set"in n&&(i=n.set(e,r,t))!==undefined){return i}return e[t]=r}if(n&&"get"in n&&(i=n.get(e,t))!==null){return i}return e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(_t.test(e.nodeName)||bt.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!g.optSelected){T.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this});function xt(e){var t=e.match(k)||[];return t.join(" ")}function wt(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(k)||[]}return[]}T.fn.extend({addClass:function(t){var e,r,i,n,a,o,s,u=0;if(y(t)){return this.each(function(e){T(this).addClass(t.call(this,e,wt(this)))})}e=Et(t);if(e.length){while(r=this[u++]){n=wt(r);i=r.nodeType===1&&" "+xt(n)+" ";if(i){o=0;while(a=e[o++]){if(i.indexOf(" "+a+" ")<0){i+=a+" "}}s=xt(i);if(n!==s){r.setAttribute("class",s)}}}}return this},removeClass:function(t){var e,r,i,n,a,o,s,u=0;if(y(t)){return this.each(function(e){T(this).removeClass(t.call(this,e,wt(this)))})}if(!arguments.length){return this.attr("class","")}e=Et(t);if(e.length){while(r=this[u++]){n=wt(r);i=r.nodeType===1&&" "+xt(n)+" ";if(i){o=0;while(a=e[o++]){while(i.indexOf(" "+a+" ")>-1){i=i.replace(" "+a+" "," ")}}s=xt(i);if(n!==s){r.setAttribute("class",s)}}}}return this},toggleClass:function(n,t){var a=typeof n,o=a==="string"||Array.isArray(n);if(typeof t==="boolean"&&o){return t?this.addClass(n):this.removeClass(n)}if(y(n)){return this.each(function(e){T(this).toggleClass(n.call(this,e,wt(this),t),t)})}return this.each(function(){var e,t,r,i;if(o){t=0;r=T(this);i=Et(n);while(e=i[t++]){if(r.hasClass(e)){r.removeClass(e)}else{r.addClass(e)}}}else if(n===undefined||a==="boolean"){e=wt(this);if(e){Q.set(this,"__className__",e)}if(this.setAttribute){this.setAttribute("class",e||n===false?"":Q.get(this,"__className__")||"")}}})},hasClass:function(e){var t,r,i=0;t=" "+e+" ";while(r=this[i++]){if(r.nodeType===1&&(" "+xt(wt(r))+" ").indexOf(t)>-1){return true}}return false}});var St=/\r/g;T.fn.extend({val:function(r){var i,e,n,t=this[0];if(!arguments.length){if(t){i=T.valHooks[t.type]||T.valHooks[t.nodeName.toLowerCase()];if(i&&"get"in i&&(e=i.get(t,"value"))!==undefined){return e}e=t.value;if(typeof e==="string"){return e.replace(St,"")}return e==null?"":e}return}n=y(r);return this.each(function(e){var t;if(this.nodeType!==1){return}if(n){t=r.call(this,e,T(this).val())}else{t=r}if(t==null){t=""}else if(typeof t==="number"){t+=""}else if(Array.isArray(t)){t=T.map(t,function(e){return e==null?"":e+""})}i=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()];if(!i||!("set"in i)||i.set(this,t,"value")===undefined){this.value=t}})}});T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return t!=null?t:xt(T.text(e))}},select:{get:function(e){var t,r,i,n=e.options,a=e.selectedIndex,o=e.type==="select-one",s=o?null:[],u=o?a+1:n.length;if(a<0){i=u}else{i=o?a:0}for(;i<u;i++){r=n[i];if((r.selected||i===a)&&!r.disabled&&(!r.parentNode.disabled||!A(r.parentNode,"optgroup"))){t=T(r).val();if(o){return t}s.push(t)}}return s},set:function(e,t){var r,i,n=e.options,a=T.makeArray(t),o=n.length;while(o--){i=n[o];if(i.selected=T.inArray(T.valHooks.option.get(i),a)>-1){r=true}}if(!r){e.selectedIndex=-1}return a}}}});T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=T.inArray(T(e).val(),t)>-1}}};if(!g.checkOn){T.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});g.focusin="onfocusin"in E;var Tt=/^(?:focusinfocus|focusoutblur)$/,Pt=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(e,t,r,i){var n,a,o,s,u,l,h,c,f=[r||S],d=m.call(e,"type")?e.type:e,p=m.call(e,"namespace")?e.namespace.split("."):[];a=c=o=r=r||S;if(r.nodeType===3||r.nodeType===8){return}if(Tt.test(d+T.event.triggered)){return}if(d.indexOf(".")>-1){p=d.split(".");d=p.shift();p.sort()}u=d.indexOf(":")<0&&"on"+d;e=e[T.expando]?e:new T.Event(d,typeof e==="object"&&e);e.isTrigger=i?2:3;e.namespace=p.join(".");e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=r}t=t==null?[e]:T.makeArray(t,[e]);h=T.event.special[d]||{};if(!i&&h.trigger&&h.trigger.apply(r,t)===false){return}if(!i&&!h.noBubble&&!_(r)){s=h.delegateType||d;if(!Tt.test(s+d)){a=a.parentNode}for(;a;a=a.parentNode){f.push(a);o=a}if(o===(r.ownerDocument||S)){f.push(o.defaultView||o.parentWindow||E)}}n=0;while((a=f[n++])&&!e.isPropagationStopped()){c=a;e.type=n>1?s:h.bindType||d;l=(Q.get(a,"events")||Object.create(null))[e.type]&&Q.get(a,"handle");if(l){l.apply(a,t)}l=u&&a[u];if(l&&l.apply&&$(a)){e.result=l.apply(a,t);if(e.result===false){e.preventDefault()}}}e.type=d;if(!i&&!e.isDefaultPrevented()){if((!h._default||h._default.apply(f.pop(),t)===false)&&$(r)){if(u&&y(r[d])&&!_(r)){o=r[u];if(o){r[u]=null}T.event.triggered=d;if(e.isPropagationStopped()){c.addEventListener(d,Pt)}r[d]();if(e.isPropagationStopped()){c.removeEventListener(d,Pt)}T.event.triggered=undefined;if(o){r[u]=o}}}}return e.result},simulate:function(e,t,r){var i=T.extend(new T.Event,r,{type:e,isSimulated:true});T.event.trigger(i,null,t)}});T.fn.extend({trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r){return T.event.trigger(e,t,r,true)}}});if(!g.focusin){T.each({focus:"focusin",blur:"focusout"},function(r,i){var n=function(e){T.event.simulate(i,e.target,T.event.fix(e))};T.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=Q.access(e,i);if(!t){e.addEventListener(r,n,true)}Q.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Q.access(e,i)-1;if(!t){e.removeEventListener(r,n,true);Q.remove(e,i)}else{Q.access(e,i,t)}}}})}var At=E.location;var It={guid:Date.now()};var Ot=/\?/;T.parseXML=function(e){var t;if(!e||typeof e!=="string"){return null}try{t=(new E.DOMParser).parseFromString(e,"text/xml")}catch(e){t=undefined}if(!t||t.getElementsByTagName("parsererror").length){T.error("Invalid XML: "+e)}return t};var Mt=/\[\]$/,Ct=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;function Lt(r,e,i,n){var t;if(Array.isArray(e)){T.each(e,function(e,t){if(i||Mt.test(r)){n(r,t)}else{Lt(r+"["+(typeof t==="object"&&t!=null?e:"")+"]",t,i,n)}})}else if(!i&&x(e)==="object"){for(t in e){Lt(r+"["+t+"]",e[t],i,n)}}else{n(r,e)}}T.param=function(e,t){var r,i=[],n=function(e,t){var r=y(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(r==null?"":r)};if(e==null){return""}if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e)){T.each(e,function(){n(this.name,this.value)})}else{for(r in e){Lt(r,e[r],t,n)}}return i.join("&")};T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Rt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var r=T(this).val();if(r==null){return null}if(Array.isArray(r)){return T.map(r,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}})}return{name:t.name,value:r.replace(Ct,"\r\n")}}).get()}});var Nt=/%20/g,kt=/#.*$/,Ft=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)$/gm,jt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ut=/^(?:GET|HEAD)$/,Ht=/^\/\//,Gt={},zt={},Xt="*/".concat("*"),Wt=S.createElement("a");Wt.href=At.href;function Yt(a){return function(e,t){if(typeof e!=="string"){t=e;e="*"}var r,i=0,n=e.toLowerCase().match(k)||[];if(y(t)){while(r=n[i++]){if(r[0]==="+"){r=r.slice(1)||"*";(a[r]=a[r]||[]).unshift(t)}else{(a[r]=a[r]||[]).push(t)}}}}}function qt(t,n,a,o){var s={},u=t===zt;function l(e){var i;s[e]=true;T.each(t[e]||[],function(e,t){var r=t(n,a,o);if(typeof r==="string"&&!u&&!s[r]){n.dataTypes.unshift(r);l(r);return false}else if(u){return!(i=r)}});return i}return l(n.dataTypes[0])||!s["*"]&&l("*")}function Vt(e,t){var r,i,n=T.ajaxSettings.flatOptions||{};for(r in t){if(t[r]!==undefined){(n[r]?e:i||(i={}))[r]=t[r]}}if(i){T.extend(true,e,i)}return e}function $t(e,t,r){var i,n,a,o,s=e.contents,u=e.dataTypes;while(u[0]==="*"){u.shift();if(i===undefined){i=e.mimeType||t.getResponseHeader("Content-Type")}}if(i){for(n in s){if(s[n]&&s[n].test(i)){u.unshift(n);break}}}if(u[0]in r){a=u[0]}else{for(n in r){if(!u[0]||e.converters[n+" "+u[0]]){a=n;break}if(!o){o=n}}a=a||o}if(a){if(a!==u[0]){u.unshift(a)}return r[a]}}function Kt(e,t,r,i){var n,a,o,s,u,l={},h=e.dataTypes.slice();if(h[1]){for(o in e.converters){l[o.toLowerCase()]=e.converters[o]}}a=h.shift();while(a){if(e.responseFields[a]){r[e.responseFields[a]]=t}if(!u&&i&&e.dataFilter){t=e.dataFilter(t,e.dataType)}u=a;a=h.shift();if(a){if(a==="*"){a=u}else if(u!=="*"&&u!==a){o=l[u+" "+a]||l["* "+a];if(!o){for(n in l){s=n.split(" ");if(s[1]===a){o=l[u+" "+s[0]]||l["* "+s[0]];if(o){if(o===true){o=l[n]}else if(l[n]!==true){a=s[0];h.unshift(s[1])}break}}}}if(o!==true){if(o&&e.throws){t=o(t)}else{try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+u+" to "+a}}}}}}}return{state:"success",data:t}}T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:jt.test(At.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?Vt(Vt(e,T.ajaxSettings),t):Vt(T.ajaxSettings,e)},ajaxPrefilter:Yt(Gt),ajaxTransport:Yt(zt),ajax:function(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var h,c,f,r,d,i,p,v,n,a,m=T.ajaxSetup({},t),g=m.context||m,y=m.context&&(g.nodeType||g.jquery)?T(g):T.event,_=T.Deferred(),b=T.Callbacks("once memory"),x=m.statusCode||{},o={},s={},u="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(p){if(!r){r={};while(t=Bt.exec(f)){r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2])}}t=r[e.toLowerCase()+" "]}return t==null?null:t.join(", ")},getAllResponseHeaders:function(){return p?f:null},setRequestHeader:function(e,t){if(p==null){e=s[e.toLowerCase()]=s[e.toLowerCase()]||e;o[e]=t}return this},overrideMimeType:function(e){if(p==null){m.mimeType=e}return this},statusCode:function(e){var t;if(e){if(p){w.always(e[w.status])}else{for(t in e){x[t]=[x[t],e[t]]}}}return this},abort:function(e){var t=e||u;if(h){h.abort(t)}l(0,t);return this}};_.promise(w);m.url=((e||m.url||At.href)+"").replace(Ht,At.protocol+"//");m.type=t.method||t.type||m.method||m.type;m.dataTypes=(m.dataType||"*").toLowerCase().match(k)||[""];if(m.crossDomain==null){i=S.createElement("a");try{i.href=m.url;i.href=i.href;m.crossDomain=Wt.protocol+"//"+Wt.host!==i.protocol+"//"+i.host}catch(e){m.crossDomain=true}}if(m.data&&m.processData&&typeof m.data!=="string"){m.data=T.param(m.data,m.traditional)}qt(Gt,m,t,w);if(p){return w}v=T.event&&m.global;if(v&&T.active++===0){T.event.trigger("ajaxStart")}m.type=m.type.toUpperCase();m.hasContent=!Ut.test(m.type);c=m.url.replace(kt,"");if(!m.hasContent){a=m.url.slice(c.length);if(m.data&&(m.processData||typeof m.data==="string")){c+=(Ot.test(c)?"&":"?")+m.data;delete m.data}if(m.cache===false){c=c.replace(Ft,"$1");a=(Ot.test(c)?"&":"?")+"_="+It.guid+++a}m.url=c+a}else if(m.data&&m.processData&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0){m.data=m.data.replace(Nt,"+")}if(m.ifModified){if(T.lastModified[c]){w.setRequestHeader("If-Modified-Since",T.lastModified[c])}if(T.etag[c]){w.setRequestHeader("If-None-Match",T.etag[c])}}if(m.data&&m.hasContent&&m.contentType!==false||t.contentType){w.setRequestHeader("Content-Type",m.contentType)}w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+(m.dataTypes[0]!=="*"?", "+Xt+"; q=0.01":""):m.accepts["*"]);for(n in m.headers){w.setRequestHeader(n,m.headers[n])}if(m.beforeSend&&(m.beforeSend.call(g,w,m)===false||p)){return w.abort()}u="abort";b.add(m.complete);w.done(m.success);w.fail(m.error);h=qt(zt,m,t,w);if(!h){l(-1,"No Transport")}else{w.readyState=1;if(v){y.trigger("ajaxSend",[w,m])}if(p){return w}if(m.async&&m.timeout>0){d=E.setTimeout(function(){w.abort("timeout")},m.timeout)}try{p=false;h.send(o,l)}catch(e){if(p){throw e}l(-1,e)}}function l(e,t,r,i){var n,a,o,s,u,l=t;if(p){return}p=true;if(d){E.clearTimeout(d)}h=undefined;f=i||"";w.readyState=e>0?4:0;n=e>=200&&e<300||e===304;if(r){s=$t(m,w,r)}if(!n&&T.inArray("script",m.dataTypes)>-1){m.converters["text script"]=function(){}}s=Kt(m,s,w,n);if(n){if(m.ifModified){u=w.getResponseHeader("Last-Modified");if(u){T.lastModified[c]=u}u=w.getResponseHeader("etag");if(u){T.etag[c]=u}}if(e===204||m.type==="HEAD"){l="nocontent"}else if(e===304){l="notmodified"}else{l=s.state;a=s.data;o=s.error;n=!o}}else{o=l;if(e||!l){l="error";if(e<0){e=0}}}w.status=e;w.statusText=(t||l)+"";if(n){_.resolveWith(g,[a,l,w])}else{_.rejectWith(g,[w,l,o])}w.statusCode(x);x=undefined;if(v){y.trigger(n?"ajaxSuccess":"ajaxError",[w,m,n?a:o])}b.fireWith(g,[w,l]);if(v){y.trigger("ajaxComplete",[w,m]);if(!--T.active){T.event.trigger("ajaxStop")}}}return w},getJSON:function(e,t,r){return T.get(e,t,r,"json")},getScript:function(e,t){return T.get(e,undefined,t,"script")}});T.each(["get","post"],function(e,n){T[n]=function(e,t,r,i){if(y(t)){i=i||r;r=t;t=undefined}return T.ajax(T.extend({url:e,type:n,dataType:i,data:t,success:r},T.isPlainObject(e)&&e))}});T.ajaxPrefilter(function(e){var t;for(t in e.headers){if(t.toLowerCase()==="content-type"){e.contentType=e.headers[t]||""}}});T._evalUrl=function(e,t,r){return T.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,r)}})};T.fn.extend({wrapAll:function(e){var t;if(this[0]){if(y(e)){e=e.call(this[0])}t=T(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(r){if(y(r)){return this.each(function(e){T(this).wrapInner(r.call(this,e))})}return this.each(function(){var e=T(this),t=e.contents();if(t.length){t.wrapAll(r)}else{e.append(r)}})},wrap:function(t){var r=y(t);return this.each(function(e){T(this).wrapAll(r?t.call(this,e):t)})},unwrap:function(e){this.parent(e).not("body").each(function(){T(this).replaceWith(this.childNodes)});return this}});T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)};T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};T.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},Zt=T.ajaxSettings.xhr();g.cors=!!Zt&&"withCredentials"in Zt;g.ajax=Zt=!!Zt;T.ajaxTransport(function(n){var a,o;if(g.cors||Zt&&!n.crossDomain){return{send:function(e,t){var r,i=n.xhr();i.open(n.type,n.url,n.async,n.username,n.password);if(n.xhrFields){for(r in n.xhrFields){i[r]=n.xhrFields[r]}}if(n.mimeType&&i.overrideMimeType){i.overrideMimeType(n.mimeType)}if(!n.crossDomain&&!e["X-Requested-With"]){e["X-Requested-With"]="XMLHttpRequest"}for(r in e){i.setRequestHeader(r,e[r])}a=function(e){return function(){if(a){a=o=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null;if(e==="abort"){i.abort()}else if(e==="error"){if(typeof i.status!=="number"){t(0,"error")}else{t(i.status,i.statusText)}}else{t(Qt[i.status]||i.status,i.statusText,(i.responseType||"text")!=="text"||typeof i.responseText!=="string"?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders())}}}};i.onload=a();o=i.onerror=i.ontimeout=a("error");if(i.onabort!==undefined){i.onabort=o}else{i.onreadystatechange=function(){if(i.readyState===4){E.setTimeout(function(){if(a){o()}})}}}a=a("abort");try{i.send(n.hasContent&&n.data||null)}catch(e){if(a){throw e}}},abort:function(){if(a){a()}}}}});T.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){T.globalEval(e);return e}}});T.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});T.ajaxTransport("script",function(r){if(r.crossDomain||r.scriptAttrs){var i,n;return{send:function(e,t){i=T("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",n=function(e){i.remove();n=null;if(e){t(e.type==="error"?404:200,e.type)}});S.head.appendChild(i[0])},abort:function(){if(n){n()}}}}});var Jt=[],er=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||T.expando+"_"+It.guid++;this[e]=true;return e}});T.ajaxPrefilter("json jsonp",function(e,t,r){var i,n,a,o=e.jsonp!==false&&(er.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&er.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp"){i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(o){e[o]=e[o].replace(er,"$1"+i)}else if(e.jsonp!==false){e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+i}e.converters["script json"]=function(){if(!a){T.error(i+" was not called")}return a[0]};e.dataTypes[0]="json";n=E[i];E[i]=function(){a=arguments};r.always(function(){if(n===undefined){T(E).removeProp(i)}else{E[i]=n}if(e[i]){e.jsonpCallback=t.jsonpCallback;Jt.push(i)}if(a&&y(n)){n(a[0])}a=n=undefined});return"script"}});g.createHTMLDocument=function(){var e=S.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();T.parseHTML=function(e,t,r){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){r=t;t=false}var i,n,a;if(!t){if(g.createHTMLDocument){t=S.implementation.createHTMLDocument("");i=t.createElement("base");i.href=S.location.href;t.head.appendChild(i)}else{t=S}}n=I.exec(e);a=!r&&[];if(n){return[t.createElement(n[1])]}n=xe([e],t,a);if(a&&a.length){T(a).remove()}return T.merge([],n.childNodes)};T.fn.load=function(e,t,r){var i,n,a,o=this,s=e.indexOf(" ");if(s>-1){i=xt(e.slice(s));e=e.slice(0,s)}if(y(t)){r=t;t=undefined}else if(t&&typeof t==="object"){n="POST"}if(o.length>0){T.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){a=arguments;o.html(i?T("<div>").append(T.parseHTML(e)).find(i):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,a||[e.responseText,t,e])})})}return this};T.expr.pseudos.animated=function(t){return T.grep(T.timers,function(e){return t===e.elem}).length};T.offset={setOffset:function(e,t,r){var i,n,a,o,s,u,l,h=T.css(e,"position"),c=T(e),f={};if(h==="static"){e.style.position="relative"}s=c.offset();a=T.css(e,"top");u=T.css(e,"left");l=(h==="absolute"||h==="fixed")&&(a+u).indexOf("auto")>-1;if(l){i=c.position();o=i.top;n=i.left}else{o=parseFloat(a)||0;n=parseFloat(u)||0}if(y(t)){t=t.call(e,r,T.extend({},s))}if(t.top!=null){f.top=t.top-s.top+o}if(t.left!=null){f.left=t.left-s.left+n}if("using"in t){t.using.call(e,f)}else{if(typeof f.top==="number"){f.top+="px"}if(typeof f.left==="number"){f.left+="px"}c.css(f)}}};T.fn.extend({offset:function(t){if(arguments.length){return t===undefined?this:this.each(function(e){T.offset.setOffset(this,t,e)})}var e,r,i=this[0];if(!i){return}if(!i.getClientRects().length){return{top:0,left:0}}e=i.getBoundingClientRect();r=i.ownerDocument.defaultView;return{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}},position:function(){if(!this[0]){return}var e,t,r,i=this[0],n={top:0,left:0};if(T.css(i,"position")==="fixed"){t=i.getBoundingClientRect()}else{t=this.offset();r=i.ownerDocument;e=i.offsetParent||r.documentElement;while(e&&(e===r.body||e===r.documentElement)&&T.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==i&&e.nodeType===1){n=T(e).offset();n.top+=T.css(e,"borderTopWidth",true);n.left+=T.css(e,"borderLeftWidth",true)}}return{top:t.top-n.top-T.css(i,"marginTop",true),left:t.left-n.left-T.css(i,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&T.css(e,"position")==="static"){e=e.offsetParent}return e||oe})}});T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var a="pageYOffset"===n;T.fn[t]=function(e){return X(this,function(e,t,r){var i;if(_(e)){i=e}else if(e.nodeType===9){i=e.defaultView}if(r===undefined){return i?i[n]:e[t]}if(i){i.scrollTo(!a?r:i.pageXOffset,a?r:i.pageYOffset)}else{e[t]=r}},t,e,arguments.length)}});T.each(["top","left"],function(e,r){T.cssHooks[r]=Ye(g.pixelPosition,function(e,t){if(t){t=We(e,r);return He.test(t)?T(e).position()[r]+"px":t}})});T.each({Height:"height",Width:"width"},function(o,s){T.each({padding:"inner"+o,content:s,"":"outer"+o},function(i,a){T.fn[a]=function(e,t){var r=arguments.length&&(i||typeof e!=="boolean"),n=i||(e===true||t===true?"margin":"border");return X(this,function(e,t,r){var i;if(_(e)){return a.indexOf("outer")===0?e["inner"+o]:e.document.documentElement["client"+o]}if(e.nodeType===9){i=e.documentElement;return Math.max(e.body["scroll"+o],i["scroll"+o],e.body["offset"+o],i["offset"+o],i["client"+o])}return r===undefined?T.css(e,t,n):T.style(e,t,r,n)},s,r?e:undefined,r)}})});T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}});T.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});T.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,r){T.fn[r]=function(e,t){return arguments.length>0?this.on(r,null,e,t):this.trigger(r)}});var tr=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.proxy=function(e,t){var r,i,n;if(typeof t==="string"){r=e[t];t=e;e=r}if(!y(e)){return undefined}i=s.call(arguments,2);n=function(){return e.apply(t||this,i.concat(s.call(arguments)))};n.guid=e.guid=e.guid||T.guid++;return n};T.holdReady=function(e){if(e){T.readyWait++}else{T.ready(true)}};T.isArray=Array.isArray;T.parseJSON=JSON.parse;T.nodeName=A;T.isFunction=y;T.isWindow=_;T.camelCase=V;T.type=x;T.now=Date.now;T.isNumeric=function(e){var t=T.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};T.trim=function(e){return e==null?"":(e+"").replace(tr,"")};if(typeof define==="function"&&define.amd){define("jquery",[],function(){return T})}var rr=E.jQuery,ir=E.$;T.noConflict=function(e){if(E.$===T){E.$=ir}if(e&&E.jQuery===T){E.jQuery=rr}return T};if(typeof e==="undefined"){E.jQuery=E.$=T}return T})},{}],42:[function(e,t,r){t.exports=function(n){var a=function(e,t,r){var i=e.splice(0,50);r=r||[];r=r.concat(n.add(i));if(e.length>0){setTimeout(function(){a(e,t,r)},1)}else{n.update();t(r)}};return a}},{}],43:[function(e,t,r){t.exports=function(a){a.handlers.filterStart=a.handlers.filterStart||[];a.handlers.filterComplete=a.handlers.filterComplete||[];return function(e){a.trigger("filterStart");a.i=1;a.reset.filter();if(e===undefined){a.filtered=false}else{a.filtered=true;var t=a.items;for(var r=0,i=t.length;r<i;r++){var n=t[r];if(e(n)){n.filtered=true}else{n.filtered=false}}}a.update();a.trigger("filterComplete");return a.visibleItems}}},{}],44:[function(e,t,r){var i=e("./utils/classes"),n=e("./utils/events"),s=e("./utils/extend"),l=e("./utils/to-string"),h=e("./utils/get-by-class"),c=e("./utils/fuzzy");t.exports=function(a,o){o=o||{};o=s({location:0,distance:100,threshold:.4,multiSearch:true,searchClass:"fuzzy-search"},o);var u={search:function(e,t){var r=o.multiSearch?e.replace(/ +$/,"").split(/ +/):[e];for(var i=0,n=a.items.length;i<n;i++){u.item(a.items[i],t,r)}},item:function(e,t,r){var i=true;for(var n=0;n<r.length;n++){var a=false;for(var o=0,s=t.length;o<s;o++){if(u.values(e.values(),t[o],r[n])){a=true}}if(!a){i=false}}e.found=i},values:function(e,t,r){if(e.hasOwnProperty(t)){var i=l(e[t]).toLowerCase();if(c(i,r,o)){return true}}return false}};n.bind(h(a.listContainer,o.searchClass),"keyup",a.utils.events.debounce(function(e){var t=e.target||e.srcElement;a.search(t.value,u.search)},a.searchDelay));return function(e,t){a.search(e,t,u.search)}}},{"./utils/classes":52,"./utils/events":53,"./utils/extend":54,"./utils/fuzzy":55,"./utils/get-by-class":57,"./utils/to-string":60}],45:[function(a,e,t){var o=a("string-natural-compare"),h=a("./utils/get-by-class"),c=a("./utils/extend"),f=a("./utils/index-of"),d=a("./utils/events"),p=a("./utils/to-string"),v=a("./utils/classes"),m=a("./utils/get-attribute"),g=a("./utils/to-array");e.exports=function(e,r,t){var s=this,i,u=a("./item")(s),l=a("./add-async")(s),n=a("./pagination")(s);i={start:function(){s.listClass="list";s.searchClass="search";s.sortClass="sort";s.page=1e4;s.i=1;s.items=[];s.visibleItems=[];s.matchingItems=[];s.searched=false;s.filtered=false;s.searchColumns=undefined;s.searchDelay=0;s.handlers={updated:[]};s.valueNames=[];s.utils={getByClass:h,extend:c,indexOf:f,events:d,toString:p,naturalSort:o,classes:v,getAttribute:m,toArray:g};s.utils.extend(s,r);s.listContainer=typeof e==="string"?document.getElementById(e):e;if(!s.listContainer){return}s.list=h(s.listContainer,s.listClass,true);s.parse=a("./parse")(s);s.templater=a("./templater")(s);s.search=a("./search")(s);s.filter=a("./filter")(s);s.sort=a("./sort")(s);s.fuzzySearch=a("./fuzzy-search")(s,r.fuzzySearch);this.handlers();this.items();this.pagination();s.update()},handlers:function(){for(var e in s.handlers){if(s[e]&&s.handlers.hasOwnProperty(e)){s.on(e,s[e])}}},items:function(){s.parse(s.list);if(t!==undefined){s.add(t)}},pagination:function(){if(r.pagination!==undefined){if(r.pagination===true){r.pagination=[{}]}if(r.pagination[0]===undefined){r.pagination=[r.pagination]}for(var e=0,t=r.pagination.length;e<t;e++){n(r.pagination[e])}}}};this.reIndex=function(){s.items=[];s.visibleItems=[];s.matchingItems=[];s.searched=false;s.filtered=false;s.parse(s.list)};this.toJSON=function(){var e=[];for(var t=0,r=s.items.length;t<r;t++){e.push(s.items[t].values())}return e};this.add=function(e,t){if(e.length===0){return}if(t){l(e.slice(0),t);return}var r=[],i=false;if(e[0]===undefined){e=[e]}for(var n=0,a=e.length;n<a;n++){var o=null;i=s.items.length>s.page?true:false;o=new u(e[n],undefined,i);s.items.push(o);r.push(o)}s.update();return r};this.show=function(e,t){this.i=e;this.page=t;s.update();return s};this.remove=function(e,t,r){var i=0;for(var n=0,a=s.items.length;n<a;n++){if(s.items[n].values()[e]==t){s.templater.remove(s.items[n],r);s.items.splice(n,1);a--;n--;i++}}s.update();return i};this.get=function(e,t){var r=[];for(var i=0,n=s.items.length;i<n;i++){var a=s.items[i];if(a.values()[e]==t){r.push(a)}}return r};this.size=function(){return s.items.length};this.clear=function(){s.templater.clear();s.items=[];return s};this.on=function(e,t){s.handlers[e].push(t);return s};this.off=function(e,t){var r=s.handlers[e];var i=f(r,t);if(i>-1){r.splice(i,1)}return s};this.trigger=function(e){var t=s.handlers[e].length;while(t--){s.handlers[e][t](s)}return s};this.reset={filter:function(){var e=s.items,t=e.length;while(t--){e[t].filtered=false}return s},search:function(){var e=s.items,t=e.length;while(t--){e[t].found=false}return s}};this.update=function(){var e=s.items,t=e.length;s.visibleItems=[];s.matchingItems=[];s.templater.clear();for(var r=0;r<t;r++){if(e[r].matching()&&s.matchingItems.length+1>=s.i&&s.visibleItems.length<s.page){e[r].show();s.visibleItems.push(e[r]);s.matchingItems.push(e[r])}else if(e[r].matching()){s.matchingItems.push(e[r]);e[r].hide()}else{e[r].hide()}}s.trigger("updated");return s};i.start()}},{"./add-async":42,"./filter":43,"./fuzzy-search":44,"./item":46,"./pagination":47,"./parse":48,"./search":49,"./sort":50,"./templater":51,"./utils/classes":52,"./utils/events":53,"./utils/extend":54,"./utils/get-attribute":56,"./utils/get-by-class":57,"./utils/index-of":58,"./utils/to-array":59,"./utils/to-string":60,"string-natural-compare":74}],46:[function(e,t,r){t.exports=function(a){return function(e,t,r){var n=this;this._values={};this.found=false;this.filtered=false;var i=function(e,t,r){if(t===undefined){if(r){n.values(e,r)}else{n.values(e)}}else{n.elm=t;var i=a.templater.get(n,e);n.values(i)}};this.values=function(e,t){if(e!==undefined){for(var r in e){n._values[r]=e[r]}if(t!==true){a.templater.set(n,n.values())}}else{return n._values}};this.show=function(){a.templater.show(n)};this.hide=function(){a.templater.hide(n)};this.matching=function(){return a.filtered&&a.searched&&n.found&&n.filtered||a.filtered&&!a.searched&&n.filtered||!a.filtered&&a.searched&&n.found||!a.filtered&&!a.searched};this.visible=function(){return n.elm&&n.elm.parentNode==a.list?true:false};i(e,t,r)}}},{}],47:[function(e,t,r){var m=e("./utils/classes"),i=e("./utils/events"),n=e("./index");t.exports=function(d){var p=false;var r=function(e,t){if(d.page<1){d.listContainer.style.display="none";p=true;return}else if(p){d.listContainer.style.display="block"}var r,i=d.matchingItems.length,n=d.i,a=d.page,o=Math.ceil(i/a),s=Math.ceil(n/a),u=t.innerWindow||2,l=t.left||t.outerWindow||0,h=t.right||t.outerWindow||0;h=o-h;e.clear();for(var c=1;c<=o;c++){var f=s===c?"active":"";if(v.number(c,l,h,s,u)){r=e.add({page:c,dotted:false})[0];if(f){m(r.elm).add(f)}r.elm.firstChild.setAttribute("data-i",c);r.elm.firstChild.setAttribute("data-page",a)}else if(v.dotted(e,c,l,h,s,u,e.size())){r=e.add({page:"...",dotted:true})[0];m(r.elm).add("disabled")}}};var v={number:function(e,t,r,i,n){return this.left(e,t)||this.right(e,r)||this.innerWindow(e,i,n)},left:function(e,t){return e<=t},right:function(e,t){return e>t},innerWindow:function(e,t,r){return e>=t-r&&e<=t+r},dotted:function(e,t,r,i,n,a,o){return this.dottedLeft(e,t,r,i,n,a)||this.dottedRight(e,t,r,i,n,a,o)},dottedLeft:function(e,t,r,i,n,a){return t==r+1&&!this.innerWindow(t,n,a)&&!this.right(t,i)},dottedRight:function(e,t,r,i,n,a,o){if(e.items[o-1].values().dotted){return false}else{return t==i&&!this.innerWindow(t,n,a)&&!this.right(t,i)}}};return function(e){var t=new n(d.listContainer.id,{listClass:e.paginationClass||"pagination",item:e.item||"<li><a class='page' href='#'></a></li>",valueNames:["page","dotted"],searchClass:"pagination-search-that-is-not-supposed-to-exist",sortClass:"pagination-sort-that-is-not-supposed-to-exist"});i.bind(t.listContainer,"click",function(e){var t=e.target||e.srcElement,r=d.utils.getAttribute(t,"data-page"),i=d.utils.getAttribute(t,"data-i");if(i){d.show((i-1)*r+1,r)}});d.on("updated",function(){r(t,e)});r(t,e)}}},{"./index":45,"./utils/classes":52,"./utils/events":53}],48:[function(e,t,r){t.exports=function(n){var a=e("./item")(n);var r=function(e){var t=e.childNodes,r=[];for(var i=0,n=t.length;i<n;i++){if(t[i].data===undefined){r.push(t[i])}}return r};var i=function(e,t){for(var r=0,i=e.length;r<i;r++){n.items.push(new a(t,e[r]))}};var o=function(e,t){var r=e.splice(0,50);i(r,t);if(e.length>0){setTimeout(function(){o(e,t)},1)}else{n.update();n.trigger("parseComplete")}};n.handlers.parseComplete=n.handlers.parseComplete||[];return function(){var e=r(n.list),t=n.valueNames;if(n.indexAsync){o(e,t)}else{i(e,t)}}}},{"./item":46}],49:[function(e,t,r){t.exports=function(p){var e,t,v,m,r;var i={resetList:function(){p.i=1;p.templater.clear();r=undefined},setOptions:function(e){if(e.length==2&&e[1]instanceof Array){v=e[1]}else if(e.length==2&&typeof e[1]=="function"){v=undefined;r=e[1]}else if(e.length==3){v=e[1];r=e[2]}else{v=undefined}},setColumns:function(){if(p.items.length===0)return;if(v===undefined){v=p.searchColumns===undefined?i.toArray(p.items[0].values()):p.searchColumns}},setSearchString:function(e){e=p.utils.toString(e).toLowerCase();e=e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");m=e},toArray:function(e){var t=[];for(var r in e){t.push(r)}return t}};var n={list:function(){var e=[],t,r=m;while((t=r.match(/"([^"]+)"/))!==null){e.push(t[1]);r=r.substring(0,t.index)+r.substring(t.index+t[0].length)}r=r.trim();if(r.length)e=e.concat(r.split(/\s+/));for(var i=0,n=p.items.length;i<n;i++){var a=p.items[i];a.found=false;if(!e.length)continue;for(var o=0,s=e.length;o<s;o++){var u=false;for(var l=0,h=v.length;l<h;l++){var c=a.values(),f=v[l];if(c.hasOwnProperty(f)&&c[f]!==undefined&&c[f]!==null){var d=typeof c[f]!=="string"?c[f].toString():c[f];if(d.toLowerCase().indexOf(e[o])!==-1){u=true;break}}}if(!u)break}a.found=u}},reset:function(){p.reset.search();p.searched=false}};var a=function(e){p.trigger("searchStart");i.resetList();i.setSearchString(e);i.setOptions(arguments);i.setColumns();if(m===""){n.reset()}else{p.searched=true;if(r){r(m,v)}else{n.list()}}p.update();p.trigger("searchComplete");return p.visibleItems};p.handlers.searchStart=p.handlers.searchStart||[];p.handlers.searchComplete=p.handlers.searchComplete||[];p.utils.events.bind(p.utils.getByClass(p.listContainer,p.searchClass),"keyup",p.utils.events.debounce(function(e){var t=e.target||e.srcElement,r=t.value===""&&!p.searched;if(!r){a(t.value)}},p.searchDelay));p.utils.events.bind(p.utils.getByClass(p.listContainer,p.searchClass),"input",function(e){var t=e.target||e.srcElement;if(t.value===""){a("")}});return a}},{}],50:[function(e,t,r){t.exports=function(a){var o={els:undefined,clear:function(){for(var e=0,t=o.els.length;e<t;e++){a.utils.classes(o.els[e]).remove("asc");a.utils.classes(o.els[e]).remove("desc")}},getOrder:function(e){var t=a.utils.getAttribute(e,"data-order");if(t=="asc"||t=="desc"){return t}else if(a.utils.classes(e).has("desc")){return"asc"}else if(a.utils.classes(e).has("asc")){return"desc"}else{return"asc"}},getInSensitive:function(e,t){var r=a.utils.getAttribute(e,"data-insensitive");if(r==="false"){t.insensitive=false}else{t.insensitive=true}},setOrder:function(e){for(var t=0,r=o.els.length;t<r;t++){var i=o.els[t];if(a.utils.getAttribute(i,"data-sort")!==e.valueName){continue}var n=a.utils.getAttribute(i,"data-order");if(n=="asc"||n=="desc"){if(n==e.order){a.utils.classes(i).add(e.order)}}else{a.utils.classes(i).add(e.order)}}}};var e=function(){a.trigger("sortStart");var i={};var e=arguments[0].currentTarget||arguments[0].srcElement||undefined;if(e){i.valueName=a.utils.getAttribute(e,"data-sort");o.getInSensitive(e,i);i.order=o.getOrder(e)}else{i=arguments[1]||i;i.valueName=arguments[0];i.order=i.order||"asc";i.insensitive=typeof i.insensitive=="undefined"?true:i.insensitive}o.clear();o.setOrder(i);var r=i.sortFunction||a.sortFunction||null,n=i.order==="desc"?-1:1,t;if(r){t=function(e,t){return r(e,t,i)*n}}else{t=function(e,t){var r=a.utils.naturalSort;r.alphabet=a.alphabet||i.alphabet||undefined;if(!r.alphabet&&i.insensitive){r=a.utils.naturalSort.caseInsensitive}return r(e.values()[i.valueName],t.values()[i.valueName])*n}}a.items.sort(t);a.update();a.trigger("sortComplete")};a.handlers.sortStart=a.handlers.sortStart||[];a.handlers.sortComplete=a.handlers.sortComplete||[];o.els=a.utils.getByClass(a.listContainer,a.sortClass);a.utils.events.bind(o.els,"click",e);a.on("searchStart",o.clear);a.on("filterStart",o.clear);return e}},{}],51:[function(e,t,r){var i=function(l){var t,h=this;var e=function(){var e;if(typeof l.item==="function"){t=function(e){var t=l.item(e);return n(t)};return}if(typeof l.item==="string"){if(l.item.indexOf("<")===-1){e=document.getElementById(l.item)}else{e=n(l.item)}}else{e=i()}if(!e){throw new Error("The list needs to have at least one item on init otherwise you'll have to add a template.")}e=r(e,l.valueNames);t=function(){return e.cloneNode(true)}};var r=function(e,t){var r=e.cloneNode(true);r.removeAttribute("id");for(var i=0,n=t.length;i<n;i++){var a=undefined,o=t[i];if(o.data){for(var s=0,u=o.data.length;s<u;s++){r.setAttribute("data-"+o.data[s],"")}}else if(o.attr&&o.name){a=l.utils.getByClass(r,o.name,true);if(a){a.setAttribute(o.attr,"")}}else{a=l.utils.getByClass(r,o,true);if(a){a.innerHTML=""}}}return r};var i=function(){var e=l.list.childNodes;for(var t=0,r=e.length;t<r;t++){if(e[t].data===undefined){return e[t].cloneNode(true)}}return undefined};var n=function(e){if(typeof e!=="string")return undefined;if(/<tr[\s>]/g.exec(e)){var t=document.createElement("tbody");t.innerHTML=e;return t.firstElementChild}else if(e.indexOf("<")!==-1){var r=document.createElement("div");r.innerHTML=e;return r.firstElementChild}return undefined};var a=function(e){for(var t=0,r=l.valueNames.length;t<r;t++){var i=l.valueNames[t];if(i.data){var n=i.data;for(var a=0,o=n.length;a<o;a++){if(n[a]===e){return{data:e}}}}else if(i.attr&&i.name&&i.name==e){return i}else if(i===e){return e}}};var o=function(e,t,r){var i=undefined,n=a(t);if(!n)return;if(n.data){e.elm.setAttribute("data-"+n.data,r)}else if(n.attr&&n.name){i=l.utils.getByClass(e.elm,n.name,true);if(i){i.setAttribute(n.attr,r)}}else{i=l.utils.getByClass(e.elm,n,true);if(i){i.innerHTML=r}}};this.get=function(e,t){h.create(e);var r={};for(var i=0,n=t.length;i<n;i++){var a=undefined,o=t[i];if(o.data){for(var s=0,u=o.data.length;s<u;s++){r[o.data[s]]=l.utils.getAttribute(e.elm,"data-"+o.data[s])}}else if(o.attr&&o.name){a=l.utils.getByClass(e.elm,o.name,true);r[o.name]=a?l.utils.getAttribute(a,o.attr):""}else{a=l.utils.getByClass(e.elm,o,true);r[o]=a?a.innerHTML:""}}return r};this.set=function(e,t){if(!h.create(e)){for(var r in t){if(t.hasOwnProperty(r)){o(e,r,t[r])}}}};this.create=function(e){if(e.elm!==undefined){return false}e.elm=t(e.values());h.set(e,e.values());return true};this.remove=function(e){if(e.elm.parentNode===l.list){l.list.removeChild(e.elm)}};this.show=function(e){h.create(e);l.list.appendChild(e.elm)};this.hide=function(e){if(e.elm!==undefined&&e.elm.parentNode===l.list){l.list.removeChild(e.elm)}};this.clear=function(){if(l.list.hasChildNodes()){while(l.list.childNodes.length>=1){l.list.removeChild(l.list.firstChild)}}};e()};t.exports=function(e){return new i(e)}},{}],52:[function(e,t,r){var i=e("./index-of");var n=/\s+/;var a=Object.prototype.toString;t.exports=function(e){return new o(e)};function o(e){if(!e||!e.nodeType){throw new Error("A DOM element reference is required")}this.el=e;this.list=e.classList}o.prototype.add=function(e){if(this.list){this.list.add(e);return this}var t=this.array();var r=i(t,e);if(!~r)t.push(e);this.el.className=t.join(" ");return this};o.prototype.remove=function(e){if(this.list){this.list.remove(e);return this}var t=this.array();var r=i(t,e);if(~r)t.splice(r,1);this.el.className=t.join(" ");return this};o.prototype.toggle=function(e,t){if(this.list){if("undefined"!==typeof t){if(t!==this.list.toggle(e,t)){this.list.toggle(e)}}else{this.list.toggle(e)}return this}if("undefined"!==typeof t){if(!t){this.remove(e)}else{this.add(e)}}else{if(this.has(e)){this.remove(e)}else{this.add(e)}}return this};o.prototype.array=function(){var e=this.el.getAttribute("class")||"";var t=e.replace(/^\s+|\s+$/g,"");var r=t.split(n);if(""===r[0])r.shift();return r};o.prototype.has=o.prototype.contains=function(e){return this.list?this.list.contains(e):!!~i(this.array(),e)}},{"./index-of":58}],53:[function(e,t,r){var o=window.addEventListener?"addEventListener":"attachEvent",s=window.removeEventListener?"removeEventListener":"detachEvent",u=o!=="addEventListener"?"on":"",l=e("./to-array");r.bind=function(e,t,r,i){e=l(e);for(var n=0,a=e.length;n<a;n++){e[n][o](u+t,r,i||false)}};r.unbind=function(e,t,r,i){e=l(e);for(var n=0,a=e.length;n<a;n++){e[n][s](u+t,r,i||false)}};r.debounce=function(n,a,o){var s;return a?function(){var e=this,t=arguments;var r=function(){s=null;if(!o)n.apply(e,t)};var i=o&&!s;clearTimeout(s);s=setTimeout(r,a);if(i)n.apply(e,t)}:n}},{"./to-array":59}],54:[function(e,t,r){t.exports=function e(t){var r=Array.prototype.slice.call(arguments,1);for(var i=0,n;n=r[i];i++){if(!n)continue;for(var a in n){t[a]=n[a]}}return t}},{}],55:[function(e,t,r){t.exports=function(e,n,t){var r=t.location||0;var a=t.distance||100;var i=t.threshold||.4;if(n===e)return true;if(n.length>32)return false;var o=r,s=function(){var e={},t;for(t=0;t<n.length;t++){e[n.charAt(t)]=0}for(t=0;t<n.length;t++){e[n.charAt(t)]|=1<<n.length-t-1}return e}();function u(e,t){var r=e/n.length,i=Math.abs(o-t);if(!a){return i?1:r}return r+i/a}var l=i,h=e.indexOf(n,o);if(h!=-1){l=Math.min(u(0,h),l);h=e.lastIndexOf(n,o+n.length);if(h!=-1){l=Math.min(u(0,h),l)}}var c=1<<n.length-1;h=-1;var f,d;var p=n.length+e.length;var v;for(var m=0;m<n.length;m++){f=0;d=p;while(f<d){if(u(m,o+d)<=l){f=d}else{p=d}d=Math.floor((p-f)/2+f)}p=d;var g=Math.max(1,o-d+1);var y=Math.min(o+d,e.length)+n.length;var _=Array(y+2);_[y+1]=(1<<m)-1;for(var b=y;b>=g;b--){var x=s[e.charAt(b-1)];if(m===0){_[b]=(_[b+1]<<1|1)&x}else{_[b]=(_[b+1]<<1|1)&x|((v[b+1]|v[b])<<1|1)|v[b+1]}if(_[b]&c){var w=u(m,b-1);if(w<=l){l=w;h=b-1;if(h>o){g=Math.max(1,2*o-h)}else{break}}}}if(u(m+1,o)>l){break}v=_}return h<0?false:true}},{}],56:[function(e,t,r){t.exports=function(e,t){var r=e.getAttribute&&e.getAttribute(t)||null;if(!r){var i=e.attributes;var n=i.length;for(var a=0;a<n;a++){if(i[a]!==undefined){if(i[a].nodeName===t){r=i[a].nodeValue}}}}return r}},{}],57:[function(e,t,r){var n=function(e,t,r){if(r){return e.getElementsByClassName(t)[0]}else{return e.getElementsByClassName(t)}};var a=function(e,t,r){t="."+t;if(r){return e.querySelector(t)}else{return e.querySelectorAll(t)}};var o=function(e,t,r){var i=[],n="*";var a=e.getElementsByTagName(n);var o=a.length;var s=new RegExp("(^|\\s)"+t+"(\\s|$)");for(var u=0,l=0;u<o;u++){if(s.test(a[u].className)){if(r){return a[u]}else{i[l]=a[u];l++}}}return i};t.exports=function(){return function(e,t,r,i){i=i||{};if(i.test&&i.getElementsByClassName||!i.test&&document.getElementsByClassName){return n(e,t,r)}else if(i.test&&i.querySelector||!i.test&&document.querySelector){return a(e,t,r)}else{return o(e,t,r)}}}()},{}],58:[function(e,t,r){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0,i=e.length;r<i;++r){if(e[r]===t)return r}return-1}},{}],59:[function(e,t,r){t.exports=function e(t){if(typeof t==="undefined")return[];if(t===null)return[null];if(t===window)return[window];if(typeof t==="string")return[t];if(a(t))return t;if(typeof t.length!="number")return[t];if(typeof t==="function"&&t instanceof Function)return[t];var r=[];for(var i=0,n=t.length;i<n;i++){if(Object.prototype.hasOwnProperty.call(t,i)||i in t){r.push(t[i])}}if(!r.length)return[];return r};function a(e){return Object.prototype.toString.call(e)==="[object Array]"}},{}],60:[function(e,t,r){t.exports=function(e){e=e===undefined?"":e;e=e===null?"":e;e=e.toString();return e}},{}],61:[function(c,r,n){(function(i){(function(){(function(e){if(typeof n==="object"&&typeof r!=="undefined"){r.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof i!=="undefined"){t=i}else if(typeof self!=="undefined"){t=self}else{t=this}t.localforage=e()}})(function(){var e,t,r;return function a(o,s,u){function l(r,e){if(!s[r]){if(!o[r]){var t=typeof c=="function"&&c;if(!e&&t)return t(r,!0);if(h)return h(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var n=s[r]={exports:{}};o[r][0].call(n.exports,function(e){var t=o[r][1][e];return l(t?t:e)},n,n.exports,a,o,s,u)}return s[r].exports}var h=typeof c=="function"&&c;for(var e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,c,t){(function(t){"use strict";var e=t.MutationObserver||t.WebKitMutationObserver;var r;{if(e){var i=0;var n=new e(l);var a=t.document.createTextNode("");n.observe(a,{characterData:true});r=function(){a.data=i=++i%2}}else if(!t.setImmediate&&typeof t.MessageChannel!=="undefined"){var o=new t.MessageChannel;o.port1.onmessage=l;r=function(){o.port2.postMessage(0)}}else if("document"in t&&"onreadystatechange"in t.document.createElement("script")){r=function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l();e.onreadystatechange=null;e.parentNode.removeChild(e);e=null};t.document.documentElement.appendChild(e)}}else{r=function(){setTimeout(l,0)}}}var s;var u=[];function l(){s=true;var e,t;var r=u.length;while(r){t=u;u=[];e=-1;while(++e<r){t[e]()}r=u.length}s=false}c.exports=h;function h(e){if(u.push(e)===1&&!s){r()}}}).call(this,typeof i!=="undefined"?i:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function l(){}var h={};var a=["REJECTED"];var o=["FULFILLED"];var s=["PENDING"];t.exports=i;function i(e){if(typeof e!=="function"){throw new TypeError("resolver must be a function")}this.state=s;this.queue=[];this.outcome=void 0;if(e!==l){d(this,e)}}i.prototype["catch"]=function(e){return this.then(null,e)};i.prototype.then=function(e,t){if(typeof e!=="function"&&this.state===o||typeof t!=="function"&&this.state===a){return this}var r=new this.constructor(l);if(this.state!==s){var i=this.state===o?e:t;c(r,i,this.outcome)}else{this.queue.push(new u(r,e,t))}return r};function u(e,t,r){this.promise=e;if(typeof t==="function"){this.onFulfilled=t;this.callFulfilled=this.otherCallFulfilled}if(typeof r==="function"){this.onRejected=r;this.callRejected=this.otherCallRejected}}u.prototype.callFulfilled=function(e){h.resolve(this.promise,e)};u.prototype.otherCallFulfilled=function(e){c(this.promise,this.onFulfilled,e)};u.prototype.callRejected=function(e){h.reject(this.promise,e)};u.prototype.otherCallRejected=function(e){c(this.promise,this.onRejected,e)};function c(t,r,i){n(function(){var e;try{e=r(i)}catch(e){return h.reject(t,e)}if(e===t){h.reject(t,new TypeError("Cannot resolve promise with itself"))}else{h.resolve(t,e)}})}h.resolve=function(e,t){var r=p(f,t);if(r.status==="error"){return h.reject(e,r.value)}var i=r.value;if(i){d(e,i)}else{e.state=o;e.outcome=t;var n=-1;var a=e.queue.length;while(++n<a){e.queue[n].callFulfilled(t)}}return e};h.reject=function(e,t){e.state=a;e.outcome=t;var r=-1;var i=e.queue.length;while(++r<i){e.queue[r].callRejected(t)}return e};function f(t){var r=t&&t.then;if(t&&(typeof t==="object"||typeof t==="function")&&typeof r==="function"){return function e(){r.apply(t,arguments)}}}function d(t,e){var r=false;function i(e){if(r){return}r=true;h.reject(t,e)}function n(e){if(r){return}r=true;h.resolve(t,e)}function a(){e(n,i)}var o=p(a);if(o.status==="error"){i(o.value)}}function p(e,t){var r={};try{r.value=e(t);r.status="success"}catch(e){r.status="error";r.value=e}return r}i.resolve=v;function v(e){if(e instanceof this){return e}return h.resolve(new this(l),e)}i.reject=m;function m(e){var t=new this(l);return h.reject(t,e)}i.all=g;function g(e){var i=this;if(Object.prototype.toString.call(e)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var n=e.length;var a=false;if(!n){return this.resolve([])}var o=new Array(n);var s=0;var t=-1;var u=new this(l);while(++t<n){r(e[t],t)}return u;function r(e,t){i.resolve(e).then(r,function(e){if(!a){a=true;h.reject(u,e)}});function r(e){o[t]=e;if(++s===n&&!a){a=true;h.resolve(u,o)}}}}i.race=y;function y(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var r=e.length;var i=false;if(!r){return this.resolve([])}var n=-1;var a=new this(l);while(++n<r){o(e[n])}return a;function o(e){t.resolve(e).then(function(e){if(!i){i=true;h.resolve(a,e)}},function(e){if(!i){i=true;h.reject(a,e)}})}}},{1:1}],3:[function(t,e,r){(function(e){"use strict";if(typeof e.Promise!=="function"){e.Promise=t(2)}}).call(this,typeof i!=="undefined"?i:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{2:2}],4:[function(e,t,r){"use strict";var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function n(){try{if(typeof indexedDB!=="undefined"){return indexedDB}if(typeof webkitIndexedDB!=="undefined"){return webkitIndexedDB}if(typeof mozIndexedDB!=="undefined"){return mozIndexedDB}if(typeof OIndexedDB!=="undefined"){return OIndexedDB}if(typeof msIndexedDB!=="undefined"){return msIndexedDB}}catch(e){return}}var u=n();function o(){try{if(!u||!u.open){return false}var e=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);var t=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||t)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(e){return false}}function s(t,r){t=t||[];r=r||{};try{return new Blob(t,r)}catch(e){if(e.name!=="TypeError"){throw e}var i=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder;var n=new i;for(var a=0;a<t.length;a+=1){n.append(t[a])}return n.getBlob(r.type)}}if(typeof Promise==="undefined"){e(3)}var f=Promise;function d(e,t){if(t){e.then(function(e){t(null,e)},function(e){t(e)})}}function h(e,t,r){if(typeof t==="function"){e.then(t)}if(typeof r==="function"){e["catch"](r)}}function c(e){if(typeof e!=="string"){console.warn(e+" used as a key, but it is not a string.");e=String(e)}return e}function l(){if(arguments.length&&typeof arguments[arguments.length-1]==="function"){return arguments[arguments.length-1]}}var p="local-forage-detect-blob-support";var v=void 0;var m={};var g=Object.prototype.toString;var y="readonly";var _="readwrite";function b(e){var t=e.length;var r=new ArrayBuffer(t);var i=new Uint8Array(r);for(var n=0;n<t;n++){i[n]=e.charCodeAt(n)}return r}function x(i){return new f(function(r){var e=i.transaction(p,_);var t=s([""]);e.objectStore(p).put(t,"key");e.onabort=function(e){e.preventDefault();e.stopPropagation();r(false)};e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);var t=navigator.userAgent.match(/Edge\//);r(t||!e||parseInt(e[1],10)>=43)}})["catch"](function(){return false})}function w(e){if(typeof v==="boolean"){return f.resolve(v)}return x(e).then(function(e){v=e;return v})}function E(e){var t=m[e.name];var r={};r.promise=new f(function(e,t){r.resolve=e;r.reject=t});t.deferredOperations.push(r);if(!t.dbReady){t.dbReady=r.promise}else{t.dbReady=t.dbReady.then(function(){return r.promise})}}function S(e){var t=m[e.name];var r=t.deferredOperations.pop();if(r){r.resolve();return r.promise}}function T(e,t){var r=m[e.name];var i=r.deferredOperations.pop();if(i){i.reject(t);return i.promise}}function P(n,a){return new f(function(e,t){m[n.name]=m[n.name]||k();if(n.db){if(a){E(n);n.db.close()}else{return e(n.db)}}var r=[n.name];if(a){r.push(n.version)}var i=u.open.apply(u,r);if(a){i.onupgradeneeded=function(t){var e=i.result;try{e.createObjectStore(n.storeName);if(t.oldVersion<=1){e.createObjectStore(p)}}catch(e){if(e.name==="ConstraintError"){console.warn('The database "'+n.name+'"'+" has been upgraded from version "+t.oldVersion+" to version "+t.newVersion+', but the storage "'+n.storeName+'" already exists.')}else{throw e}}}}i.onerror=function(e){e.preventDefault();t(i.error)};i.onsuccess=function(){e(i.result);S(n)}})}function A(e){return P(e,false)}function I(e){return P(e,true)}function O(e,t){if(!e.db){return true}var r=!e.db.objectStoreNames.contains(e.storeName);var i=e.version<e.db.version;var n=e.version>e.db.version;if(i){if(e.version!==t){console.warn('The database "'+e.name+'"'+" can't be downgraded from version "+e.db.version+" to version "+e.version+".")}e.version=e.db.version}if(n||r){if(r){var a=e.db.version+1;if(a>e.version){e.version=a}}return true}return false}function M(i){return new f(function(r,e){var t=new FileReader;t.onerror=e;t.onloadend=function(e){var t=btoa(e.target.result||"");r({__local_forage_encoded_blob:true,data:t,type:i.type})};t.readAsBinaryString(i)})}function C(e){var t=b(atob(e.data));return s([t],{type:e.type})}function D(e){return e&&e.__local_forage_encoded_blob}function R(e){var t=this;var r=t._initReady().then(function(){var e=m[t._dbInfo.name];if(e&&e.dbReady){return e.dbReady}});h(r,e,e);return r}function L(r){E(r);var i=m[r.name];var n=i.forages;for(var e=0;e<n.length;e++){var t=n[e];if(t._dbInfo.db){t._dbInfo.db.close();t._dbInfo.db=null}}r.db=null;return A(r).then(function(e){r.db=e;if(O(r)){return I(r)}return e}).then(function(e){r.db=i.db=e;for(var t=0;t<n.length;t++){n[t]._dbInfo.db=e}})["catch"](function(e){T(r,e);throw e})}function N(t,r,i,n){if(n===undefined){n=1}try{var e=t.db.transaction(t.storeName,r);i(null,e)}catch(e){if(n>0&&(!t.db||e.name==="InvalidStateError"||e.name==="NotFoundError")){return f.resolve().then(function(){if(!t.db||e.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version){if(t.db){t.version=t.db.version+1}return I(t)}}).then(function(){return L(t).then(function(){N(t,r,i,n-1)})})["catch"](i)}i(e)}}function k(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(e){var i=this;var n={db:null};if(e){for(var t in e){n[t]=e[t]}}var a=m[n.name];if(!a){a=k();m[n.name]=a}a.forages.push(i);if(!i._initReady){i._initReady=i.ready;i.ready=R}var r=[];function o(){return f.resolve()}for(var s=0;s<a.forages.length;s++){var u=a.forages[s];if(u!==i){r.push(u._initReady()["catch"](o))}}var l=a.forages.slice(0);return f.all(r).then(function(){n.db=a.db;return A(n)}).then(function(e){n.db=e;if(O(n,i._defaultConfig.version)){return I(n)}return e}).then(function(e){n.db=a.db=e;i._dbInfo=n;for(var t=0;t<l.length;t++){var r=l[t];if(r!==i){r._dbInfo.db=n.db;r._dbInfo.version=n.version}}})}function B(o,e){var s=this;o=c(o);var t=new f(function(n,a){s.ready().then(function(){N(s._dbInfo,y,function(e,t){if(e){return a(e)}try{var r=t.objectStore(s._dbInfo.storeName);var i=r.get(o);i.onsuccess=function(){var e=i.result;if(e===undefined){e=null}if(D(e)){e=C(e)}n(e)};i.onerror=function(){a(i.error)}}catch(e){a(e)}})})["catch"](a)});d(t,e);return t}function j(s,e){var u=this;var t=new f(function(a,o){u.ready().then(function(){N(u._dbInfo,y,function(e,t){if(e){return o(e)}try{var r=t.objectStore(u._dbInfo.storeName);var i=r.openCursor();var n=1;i.onsuccess=function(){var e=i.result;if(e){var t=e.value;if(D(t)){t=C(t)}var r=s(t,e.key,n++);if(r!==void 0){a(r)}else{e["continue"]()}}else{a()}};i.onerror=function(){o(i.error)}}catch(e){o(e)}})})["catch"](o)});d(t,e);return t}function U(s,t,e){var u=this;s=c(s);var r=new f(function(a,o){var e;u.ready().then(function(){e=u._dbInfo;if(g.call(t)==="[object Blob]"){return w(e.db).then(function(e){if(e){return t}return M(t)})}return t}).then(function(n){N(u._dbInfo,_,function(e,t){if(e){return o(e)}try{var r=t.objectStore(u._dbInfo.storeName);if(n===null){n=undefined}var i=r.put(n,s);t.oncomplete=function(){if(n===undefined){n=null}a(n)};t.onabort=t.onerror=function(){var e=i.error?i.error:i.transaction.error;o(e)}}catch(e){o(e)}})})["catch"](o)});d(r,e);return r}function H(o,e){var s=this;o=c(o);var t=new f(function(n,a){s.ready().then(function(){N(s._dbInfo,_,function(e,t){if(e){return a(e)}try{var r=t.objectStore(s._dbInfo.storeName);var i=r["delete"](o);t.oncomplete=function(){n()};t.onerror=function(){a(i.error)};t.onabort=function(){var e=i.error?i.error:i.transaction.error;a(e)}}catch(e){a(e)}})})["catch"](a)});d(t,e);return t}function G(e){var o=this;var t=new f(function(n,a){o.ready().then(function(){N(o._dbInfo,_,function(e,t){if(e){return a(e)}try{var r=t.objectStore(o._dbInfo.storeName);var i=r.clear();t.oncomplete=function(){n()};t.onabort=t.onerror=function(){var e=i.error?i.error:i.transaction.error;a(e)}}catch(e){a(e)}})})["catch"](a)});d(t,e);return t}function z(e){var o=this;var t=new f(function(n,a){o.ready().then(function(){N(o._dbInfo,y,function(e,t){if(e){return a(e)}try{var r=t.objectStore(o._dbInfo.storeName);var i=r.count();i.onsuccess=function(){n(i.result)};i.onerror=function(){a(i.error)}}catch(e){a(e)}})})["catch"](a)});d(t,e);return t}function X(s,e){var u=this;var t=new f(function(a,o){if(s<0){a(null);return}u.ready().then(function(){N(u._dbInfo,y,function(e,t){if(e){return o(e)}try{var r=t.objectStore(u._dbInfo.storeName);var i=false;var n=r.openKeyCursor();n.onsuccess=function(){var e=n.result;if(!e){a(null);return}if(s===0){a(e.key)}else{if(!i){i=true;e.advance(s)}else{a(e.key)}}};n.onerror=function(){o(n.error)}}catch(e){o(e)}})})["catch"](o)});d(t,e);return t}function W(e){var s=this;var t=new f(function(a,o){s.ready().then(function(){N(s._dbInfo,y,function(e,t){if(e){return o(e)}try{var r=t.objectStore(s._dbInfo.storeName);var i=r.openKeyCursor();var n=[];i.onsuccess=function(){var e=i.result;if(!e){a(n);return}n.push(e.key);e["continue"]()};i.onerror=function(){o(i.error)}}catch(e){o(e)}})})["catch"](o)});d(t,e);return t}function Y(s,e){e=l.apply(this,arguments);var t=this.config();s=typeof s!=="function"&&s||{};if(!s.name){s.name=s.name||t.name;s.storeName=s.storeName||t.storeName}var r=this;var i;if(!s.name){i=f.reject("Invalid arguments")}else{var n=s.name===t.name&&r._dbInfo.db;var a=n?f.resolve(r._dbInfo.db):A(s).then(function(e){var t=m[s.name];var r=t.forages;t.db=e;for(var i=0;i<r.length;i++){r[i]._dbInfo.db=e}return e});if(!s.storeName){i=a.then(function(e){E(s);var i=m[s.name];var n=i.forages;e.close();for(var t=0;t<n.length;t++){var r=n[t];r._dbInfo.db=null}var a=new f(function(t,r){var i=u.deleteDatabase(s.name);i.onerror=i.onblocked=function(e){var t=i.result;if(t){t.close()}r(e)};i.onsuccess=function(){var e=i.result;if(e){e.close()}t(e)}});return a.then(function(e){i.db=e;for(var t=0;t<n.length;t++){var r=n[t];S(r._dbInfo)}})["catch"](function(e){(T(s,e)||f.resolve())["catch"](function(){});throw e})})}else{i=a.then(function(e){if(!e.objectStoreNames.contains(s.storeName)){return}var n=e.version+1;E(s);var i=m[s.name];var a=i.forages;e.close();for(var t=0;t<a.length;t++){var r=a[t];r._dbInfo.db=null;r._dbInfo.version=n}var o=new f(function(t,r){var i=u.open(s.name,n);i.onerror=function(e){var t=i.result;t.close();r(e)};i.onupgradeneeded=function(){var e=i.result;e.deleteObjectStore(s.storeName)};i.onsuccess=function(){var e=i.result;e.close();t(e)}});return o.then(function(e){i.db=e;for(var t=0;t<a.length;t++){var r=a[t];r._dbInfo.db=e;S(r._dbInfo)}})["catch"](function(e){(T(s,e)||f.resolve())["catch"](function(){});throw e})})}}d(i,e);return i}var q={_driver:"asyncStorage",_initStorage:F,_support:o(),iterate:j,getItem:B,setItem:U,removeItem:H,clear:G,length:z,key:X,keys:W,dropInstance:Y};function V(){return typeof openDatabase==="function"}var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var K="~~local_forage_type~";var Q=/^~~local_forage_type~([^~]+)~/;var Z="__lfsc__:";var J=Z.length;var ee="arbf";var te="blob";var re="si08";var ie="ui08";var ne="uic8";var ae="si16";var oe="si32";var se="ur16";var ue="ui32";var le="fl32";var he="fl64";var ce=J+ee.length;var fe=Object.prototype.toString;function de(e){var t=e.length*.75;var r=e.length;var i;var n=0;var a,o,s,u;if(e[e.length-1]==="="){t--;if(e[e.length-2]==="="){t--}}var l=new ArrayBuffer(t);var h=new Uint8Array(l);for(i=0;i<r;i+=4){a=$.indexOf(e[i]);o=$.indexOf(e[i+1]);s=$.indexOf(e[i+2]);u=$.indexOf(e[i+3]);h[n++]=a<<2|o>>4;h[n++]=(o&15)<<4|s>>2;h[n++]=(s&3)<<6|u&63}return l}function pe(e){var t=new Uint8Array(e);var r="";var i;for(i=0;i<t.length;i+=3){r+=$[t[i]>>2];r+=$[(t[i]&3)<<4|t[i+1]>>4];r+=$[(t[i+1]&15)<<2|t[i+2]>>6];r+=$[t[i+2]&63]}if(t.length%3===2){r=r.substring(0,r.length-1)+"="}else if(t.length%3===1){r=r.substring(0,r.length-2)+"=="}return r}function ve(t,r){var e="";if(t){e=fe.call(t)}if(t&&(e==="[object ArrayBuffer]"||t.buffer&&fe.call(t.buffer)==="[object ArrayBuffer]")){var i;var n=Z;if(t instanceof ArrayBuffer){i=t;n+=ee}else{i=t.buffer;if(e==="[object Int8Array]"){n+=re}else if(e==="[object Uint8Array]"){n+=ie}else if(e==="[object Uint8ClampedArray]"){n+=ne}else if(e==="[object Int16Array]"){n+=ae}else if(e==="[object Uint16Array]"){n+=se}else if(e==="[object Int32Array]"){n+=oe}else if(e==="[object Uint32Array]"){n+=ue}else if(e==="[object Float32Array]"){n+=le}else if(e==="[object Float64Array]"){n+=he}else{r(new Error("Failed to get type for BinaryArray"))}}r(n+pe(i))}else if(e==="[object Blob]"){var a=new FileReader;a.onload=function(){var e=K+t.type+"~"+pe(this.result);r(Z+te+e)};a.readAsArrayBuffer(t)}else{try{r(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t);r(null,e)}}}function me(e){if(e.substring(0,J)!==Z){return JSON.parse(e)}var t=e.substring(ce);var r=e.substring(J,ce);var i;if(r===te&&Q.test(t)){var n=t.match(Q);i=n[1];t=t.substring(n[0].length)}var a=de(t);switch(r){case ee:return a;case te:return s([a],{type:i});case re:return new Int8Array(a);case ie:return new Uint8Array(a);case ne:return new Uint8ClampedArray(a);case ae:return new Int16Array(a);case se:return new Uint16Array(a);case oe:return new Int32Array(a);case ue:return new Uint32Array(a);case le:return new Float32Array(a);case he:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}}var ge={serialize:ve,deserialize:me,stringToBuffer:de,bufferToString:pe};function ye(e,t,r,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" "+"(id INTEGER PRIMARY KEY, key unique, value)",[],r,i)}function _e(e){var i=this;var n={db:null};if(e){for(var t in e){n[t]=typeof e[t]!=="string"?e[t].toString():e[t]}}var r=new f(function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(e){ye(e,n,function(){i._dbInfo=n;t()},function(e,t){r(t)})},r)});n.serializer=ge;return r}function be(e,i,n,a,o,s){e.executeSql(n,a,o,function(e,r){if(r.code===r.SYNTAX_ERR){e.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name = ?",[i.storeName],function(e,t){if(!t.rows.length){ye(e,i,function(){e.executeSql(n,a,o,s)},s)}else{s(e,r)}},s)}else{s(e,r)}},s)}function xe(t,e){var a=this;t=c(t);var r=new f(function(n,r){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(e){be(e,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){var r=t.rows.length?t.rows.item(0).value:null;if(r){r=i.serializer.deserialize(r)}n(r)},function(e,t){r(t)})})})["catch"](r)});d(r,e);return r}function we(l,e){var t=this;var r=new f(function(u,r){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(e){be(e,s,"SELECT * FROM "+s.storeName,[],function(e,t){var r=t.rows;var i=r.length;for(var n=0;n<i;n++){var a=r.item(n);var o=a.value;if(o){o=s.serializer.deserialize(o)}o=l(o,a.key,n+1);if(o!==void 0){u(o);return}}u()},function(e,t){r(t)})})})["catch"](r)});d(r,e);return r}function Ee(o,e,s,u){var l=this;o=c(o);var t=new f(function(n,a){l.ready().then(function(){if(e===undefined){e=null}var r=e;var i=l._dbInfo;i.serializer.serialize(e,function(t,e){if(e){a(e)}else{i.db.transaction(function(e){be(e,i,"INSERT OR REPLACE INTO "+i.storeName+" "+"(key, value) VALUES (?, ?)",[o,t],function(){n(r)},function(e,t){a(t)})},function(e){if(e.code===e.QUOTA_ERR){if(u>0){n(Ee.apply(l,[o,r,s,u-1]));return}a(e)}})}})})["catch"](a)});d(t,s);return t}function Se(e,t,r){return Ee.apply(this,[e,t,r,1])}function Te(n,e){var a=this;n=c(n);var t=new f(function(r,i){a.ready().then(function(){var t=a._dbInfo;t.db.transaction(function(e){be(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[n],function(){r()},function(e,t){i(t)})})})["catch"](i)});d(t,e);return t}function Pe(e){var n=this;var t=new f(function(r,i){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(e){be(e,t,"DELETE FROM "+t.storeName,[],function(){r()},function(e,t){i(t)})})})["catch"](i)});d(t,e);return t}function Ae(e){var n=this;var t=new f(function(i,r){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(e){be(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){var r=t.rows.item(0).c;i(r)},function(e,t){r(t)})})})["catch"](r)});d(t,e);return t}function Ie(n,e){var a=this;var t=new f(function(i,r){a.ready().then(function(){var t=a._dbInfo;t.db.transaction(function(e){be(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[n+1],function(e,t){var r=t.rows.length?t.rows.item(0).key:null;i(r)},function(e,t){r(t)})})})["catch"](r)});d(t,e);return t}function Oe(e){var i=this;var t=new f(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){be(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){var r=[];for(var i=0;i<t.rows.length;i++){r.push(t.rows.item(i).key)}n(r)},function(e,t){r(t)})})})["catch"](r)});d(t,e);return t}function Me(a){return new f(function(n,r){a.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){var r=[];for(var i=0;i<t.rows.length;i++){r.push(t.rows.item(i).name)}n({db:a,storeNames:r})},function(e,t){r(t)})},function(e){r(e)})})}function Ce(r,e){e=l.apply(this,arguments);var i=this.config();r=typeof r!=="function"&&r||{};if(!r.name){r.name=r.name||i.name;r.storeName=r.storeName||i.storeName}var n=this;var t;if(!r.name){t=f.reject("Invalid arguments")}else{t=new f(function(e){var t;if(r.name===i.name){t=n._dbInfo.db}else{t=openDatabase(r.name,"","",0)}if(!r.storeName){e(Me(t))}else{e({db:t,storeNames:[r.storeName]})}}).then(function(s){return new f(function(a,o){s.db.transaction(function(i){function e(t){return new f(function(e,r){i.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){r(t)})})}var t=[];for(var r=0,n=s.storeNames.length;r<n;r++){t.push(e(s.storeNames[r]))}f.all(t).then(function(){a()})["catch"](function(e){o(e)})},function(e){o(e)})})})}d(t,e);return t}var De={_driver:"webSQLStorage",_initStorage:_e,_support:V(),iterate:we,getItem:xe,setItem:Se,removeItem:Te,clear:Pe,length:Ae,key:Ie,keys:Oe,dropInstance:Ce};function Re(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return false}}function Le(e,t){var r=e.name+"/";if(e.storeName!==t.storeName){r+=e.storeName+"/"}return r}function Ne(){var e="_localforage_support_test";try{localStorage.setItem(e,true);localStorage.removeItem(e);return false}catch(e){return true}}function ke(){return!Ne()||localStorage.length>0}function Fe(e){var t=this;var r={};if(e){for(var i in e){r[i]=e[i]}}r.keyPrefix=Le(e,t._defaultConfig);if(!ke()){return f.reject()}t._dbInfo=r;r.serializer=ge;return f.resolve()}function Be(e){var i=this;var t=i.ready().then(function(){var e=i._dbInfo.keyPrefix;for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);if(r.indexOf(e)===0){localStorage.removeItem(r)}}});d(t,e);return t}function je(r,e){var i=this;r=c(r);var t=i.ready().then(function(){var e=i._dbInfo;var t=localStorage.getItem(e.keyPrefix+r);if(t){t=e.serializer.deserialize(t)}return t});d(t,e);return t}function Ue(u,e){var l=this;var t=l.ready().then(function(){var e=l._dbInfo;var t=e.keyPrefix;var r=t.length;var i=localStorage.length;var n=1;for(var a=0;a<i;a++){var o=localStorage.key(a);if(o.indexOf(t)!==0){continue}var s=localStorage.getItem(o);if(s){s=e.serializer.deserialize(s)}s=u(s,o.substring(r),n++);if(s!==void 0){return s}}});d(t,e);return t}function He(r,e){var i=this;var t=i.ready().then(function(){var e=i._dbInfo;var t;try{t=localStorage.key(r)}catch(e){t=null}if(t){t=t.substring(e.keyPrefix.length)}return t});d(t,e);return t}function Ge(e){var a=this;var t=a.ready().then(function(){var e=a._dbInfo;var t=localStorage.length;var r=[];for(var i=0;i<t;i++){var n=localStorage.key(i);if(n.indexOf(e.keyPrefix)===0){r.push(n.substring(e.keyPrefix.length))}}return r});d(t,e);return t}function ze(e){var t=this;var r=t.keys().then(function(e){return e.length});d(r,e);return r}function Xe(t,e){var r=this;t=c(t);var i=r.ready().then(function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)});d(i,e);return i}function We(o,e,t){var s=this;o=c(o);var r=s.ready().then(function(){if(e===undefined){e=null}var a=e;return new f(function(r,i){var n=s._dbInfo;n.serializer.serialize(e,function(e,t){if(t){i(t)}else{try{localStorage.setItem(n.keyPrefix+o,e);r(a)}catch(e){if(e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED"){i(e)}i(e)}}})})});d(r,t);return r}function Ye(t,e){e=l.apply(this,arguments);t=typeof t!=="function"&&t||{};if(!t.name){var r=this.config();t.name=t.name||r.name;t.storeName=t.storeName||r.storeName}var i=this;var n;if(!t.name){n=f.reject("Invalid arguments")}else{n=new f(function(e){if(!t.storeName){e(t.name+"/")}else{e(Le(t,i._defaultConfig))}}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);if(r.indexOf(e)===0){localStorage.removeItem(r)}}})}d(n,e);return n}var qe={_driver:"localStorageWrapper",_initStorage:Fe,_support:Re(),iterate:Ue,getItem:je,setItem:We,removeItem:Xe,clear:Be,length:ze,key:He,keys:Ge,dropInstance:Ye};var Ve=function e(t,r){return t===r||typeof t==="number"&&typeof r==="number"&&isNaN(t)&&isNaN(r)};var $e=function e(t,r){var i=t.length;var n=0;while(n<i){if(Ve(t[n],r)){return true}n++}return false};var Ke=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var Qe={};var Ze={};var Je={INDEXEDDB:q,WEBSQL:De,LOCALSTORAGE:qe};var et=[Je.INDEXEDDB._driver,Je.WEBSQL._driver,Je.LOCALSTORAGE._driver];var tt=["dropInstance"];var rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt);var it={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function nt(t,r){t[r]=function(){var e=arguments;return t.ready().then(function(){return t[r].apply(t,e)})}}function at(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t){for(var r in t){if(t.hasOwnProperty(r)){if(Ke(t[r])){arguments[0][r]=t[r].slice()}else{arguments[0][r]=t[r]}}}}}return arguments[0]}var ot=function(){function n(e){a(this,n);for(var t in Je){if(Je.hasOwnProperty(t)){var r=Je[t];var i=r._driver;this[t]=i;if(!Qe[i]){this.defineDriver(r)}}}this._defaultConfig=at({},it);this._config=at({},this._defaultConfig,e);this._driverSet=null;this._initDriver=null;this._ready=false;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver)["catch"](function(){})}n.prototype.config=function e(t){if((typeof t==="undefined"?"undefined":i(t))==="object"){if(this._ready){return new Error("Can't call config() after localforage "+"has been used.")}for(var r in t){if(r==="storeName"){t[r]=t[r].replace(/\W/g,"_")}if(r==="version"&&typeof t[r]!=="number"){return new Error("Database version must be a number.")}this._config[r]=t[r]}if("driver"in t&&t.driver){return this.setDriver(this._config.driver)}return true}else if(typeof t==="string"){return this._config[t]}else{return this._config}};n.prototype.defineDriver=function e(c,t,r){var i=new f(function(r,t){try{var i=c._driver;var e=new Error("Custom driver not compliant; see "+"https://mozilla.github.io/localForage/#definedriver");if(!c._driver){t(e);return}var n=rt.concat("_initStorage");for(var a=0,o=n.length;a<o;a++){var s=n[a];var u=!$e(tt,s);if((u||c[s])&&typeof c[s]!=="function"){t(e);return}}var l=function e(){var t=function e(r){return function(){var e=new Error("Method "+r+" is not implemented by the current driver");var t=f.reject(e);d(t,arguments[arguments.length-1]);return t}};for(var r=0,i=tt.length;r<i;r++){var n=tt[r];if(!c[n]){c[n]=t(n)}}};l();var h=function e(t){if(Qe[i]){console.info("Redefining LocalForage driver: "+i)}Qe[i]=c;Ze[i]=t;r()};if("_support"in c){if(c._support&&typeof c._support==="function"){c._support().then(h,t)}else{h(!!c._support)}}else{h(true)}}catch(e){t(e)}});h(i,t,r);return i};n.prototype.driver=function e(){return this._driver||null};n.prototype.getDriver=function e(t,r,i){var n=Qe[t]?f.resolve(Qe[t]):f.reject(new Error("Driver not found."));h(n,r,i);return n};n.prototype.getSerializer=function e(t){var r=f.resolve(ge);h(r,t);return r};n.prototype.ready=function e(t){var r=this;var i=r._driverSet.then(function(){if(r._ready===null){r._ready=r._initDriver()}return r._ready});h(i,t,t);return i};n.prototype.setDriver=function e(t,r,i){var a=this;if(!Ke(t)){t=[t]}var n=this._getSupportedDrivers(t);function o(){a._config.driver=a.driver()}function s(e){a._extend(e);o();a._ready=a._initStorage(a._config);return a._ready}function u(n){return function(){var r=0;function i(){while(r<n.length){var e=n[r];r++;a._dbInfo=null;a._ready=null;return a.getDriver(e).then(s)["catch"](i)}o();var t=new Error("No available storage method found.");a._driverSet=f.reject(t);return a._driverSet}return i()}}var l=this._driverSet!==null?this._driverSet["catch"](function(){return f.resolve()}):f.resolve();this._driverSet=l.then(function(){var e=n[0];a._dbInfo=null;a._ready=null;return a.getDriver(e).then(function(e){a._driver=e._driver;o();a._wrapLibraryMethodsWithReady();a._initDriver=u(n)})})["catch"](function(){o();var e=new Error("No available storage method found.");a._driverSet=f.reject(e);return a._driverSet});h(this._driverSet,r,i);return this._driverSet};n.prototype.supports=function e(t){return!!Ze[t]};n.prototype._extend=function e(t){at(this,t)};n.prototype._getSupportedDrivers=function e(t){var r=[];for(var i=0,n=t.length;i<n;i++){var a=t[i];if(this.supports(a)){r.push(a)}}return r};n.prototype._wrapLibraryMethodsWithReady=function e(){for(var t=0,r=rt.length;t<r;t++){nt(this,rt[t])}};n.prototype.createInstance=function e(t){return new n(t)};return n}();var st=new ot;t.exports=st},{3:3}]},{},[4])(4)})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],62:[function(e,t,r){"use strict";function i(){var l=Object.create(null);var r=0;var i=0;var o=0;var h=false;this.put=function(e,t,r,i){if(h){console.log("caching: %s = %j (@%s)",e,t,r)}if(typeof r!=="undefined"&&(typeof r!=="number"||isNaN(r)||r<=0)){throw new Error("Cache timeout must be a positive number")}else if(typeof i!=="undefined"&&typeof i!=="function"){throw new Error("Cache timeout callback must be a function")}var n=l[e];if(n){clearTimeout(n.timeout)}else{o++}var a={value:t,expire:r+Date.now()};if(!isNaN(a.expire)){a.timeout=setTimeout(function(){s(e);if(i){i(e,t)}}.bind(this),r)}l[e]=a;return t};this.del=function(e){var t=true;var r=l[e];if(r){clearTimeout(r.timeout);if(!isNaN(r.expire)&&r.expire<Date.now()){t=false}}else{t=false}if(t){s(e)}return t};function s(e){o--;delete l[e]}this.clear=function(){for(var e in l){clearTimeout(l[e].timeout)}o=0;l=Object.create(null);if(h){r=0;i=0}};this.get=function(e){var t=l[e];if(typeof t!="undefined"){if(isNaN(t.expire)||t.expire>=Date.now()){if(h)r++;return t.value}else{if(h)i++;o--;delete l[e]}}else if(h){i++}return null};this.size=function(){return o};this.memsize=function(){var e=0,t;for(t in l){e++}return e};this.debug=function(e){h=e};this.hits=function(){return r};this.misses=function(){return i};this.keys=function(){return Object.keys(l)};this.exportJson=function(){var e={};for(var t in l){var r=l[t];e[t]={value:r.value,expire:r.expire||"NaN"}}return JSON.stringify(e)};this.importJson=function(e,t){var r=JSON.parse(e);var i=Date.now();var n=t&&t.skipDuplicates;for(var a in r){if(r.hasOwnProperty(a)){if(n){var o=l[a];if(o){if(h){console.log("Skipping duplicate imported key '%s'",a)}continue}}var s=r[a];var u=s.expire-i;if(u<=0){this.del(a);continue}u=u>0?u:undefined;this.put(a,s.value,u)}}return this.size()}}t.exports=new i;t.exports.Cache=i},{}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function i(e,t,r){if(t===undefined)t=false;a(this,i);this._fn=e;this._once=t;this._thisArg=r;this._next=this._prev=this._owner=null}n(i,[{key:"detach",value:function e(){if(this._owner===null)return false;this._owner.detach(this);return true}}]);return i}();function o(e,t){if(!e._head){e._head=t;e._tail=t}else{e._tail._next=t;t._prev=e._tail;e._tail=t}t._owner=e;return t}var s=function(){function e(){a(this,e);this._head=this._tail=undefined}n(e,[{key:"handlers",value:function e(){var t=arguments.length<=0||arguments[0]===undefined?false:arguments[0];var r=this._head;if(t)return!!r;var i=[];while(r){i.push(r);r=r._next}return i}},{key:"has",value:function e(t){if(!(t instanceof i)){throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.")}return t._owner===this}},{key:"dispatch",value:function e(){var t=this._head;if(!t)return false;while(t){if(t._once)this.detach(t);t._fn.apply(t._thisArg,arguments);t=t._next}return true}},{key:"add",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(typeof t!=="function"){throw new Error("MiniSignal#add(): First arg must be a Function.")}return o(this,new i(t,false,r))}},{key:"once",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(typeof t!=="function"){throw new Error("MiniSignal#once(): First arg must be a Function.")}return o(this,new i(t,true,r))}},{key:"detach",value:function e(t){if(!(t instanceof i)){throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.")}if(t._owner!==this)return this;if(t._prev)t._prev._next=t._next;if(t._next)t._next._prev=t._prev;if(t===this._head){this._head=t._next;if(t._next===null){this._tail=null}}else if(t===this._tail){this._tail=t._prev;this._tail._next=null}t._owner=null;return this}},{key:"detachAll",value:function e(){var t=this._head;if(!t)return this;this._head=this._tail=null;while(t){t._owner=null;t=t._next}return this}}]);return e}();s.MiniSignalBinding=i;r["default"]=s;t.exports=r["default"]},{}],64:[function(e,t,r){"use strict";var u=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty;var h=Object.prototype.propertyIsEnumerable;function c(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function i(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(i.join("")!=="0123456789"){return false}var n={};"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e});if(Object.keys(Object.assign({},n)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}t.exports=i()?Object.assign:function(e,t){var r;var i=c(e);var n;for(var a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r){if(l.call(r,o)){i[o]=r[o]}}if(u){n=u(r);for(var s=0;s<n.length;s++){if(h.call(r,n[s])){i[n[s]]=r[n[s]]}}}}return i}},{}],65:[function(e,t,r){"use strict";function i(e,t){if(!e)return undefined;t=t||{};var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var r=i.parser[t.strictMode?"strict":"loose"].exec(e);var n={};var a=14;while(a--)n[i.key[a]]=r[a]||"";n[i.q.name]={};n[i.key[12]].replace(i.q.parser,function(e,t,r){if(t)n[i.q.name][t]=r});return n}t.exports=i},{}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});e("@pixi/polyfill");var c=e("@pixi/utils");var i=e("@pixi/accessibility");var n=e("@pixi/interaction");var a=e("@pixi/app");var o=e("@pixi/core");var s=e("@pixi/extract");var u=e("@pixi/loaders");var l=e("@pixi/particles");var h=e("@pixi/prepare");var f=e("@pixi/spritesheet");var d=e("@pixi/sprite-tiling");var p=e("@pixi/text-bitmap");var v=e("@pixi/ticker");var m=e("@pixi/filter-alpha");var g=e("@pixi/filter-blur");var y=e("@pixi/filter-color-matrix");var _=e("@pixi/filter-displacement");var b=e("@pixi/filter-fxaa");var x=e("@pixi/filter-noise");e("@pixi/mixin-cache-as-bitmap");e("@pixi/mixin-get-child-by-name");e("@pixi/mixin-get-global-position");var w=e("@pixi/constants");var E=e("@pixi/display");var S=e("@pixi/graphics");var T=e("@pixi/math");var P=e("@pixi/mesh");var A=e("@pixi/mesh-extras");var I=e("@pixi/runner");var O=e("@pixi/sprite");var M=e("@pixi/sprite-animated");var C=e("@pixi/text");var D=e("@pixi/settings");var R=function(e,t){R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}};return R(e,t)};function L(e,t){R(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var N="5.0.0";function k(){var a=this;Object.defineProperties(a,{SVG_SIZE:{get:function(){c.deprecation(N,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE");return a.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){c.deprecation(N,"PIXI.TransformStatic class has been removed, use PIXI.Transform");return a.Transform}},TransformBase:{get:function(){c.deprecation(N,"PIXI.TransformBase class has been removed, use PIXI.Transform");return a.Transform}},TRANSFORM_MODE:{get:function(){c.deprecation(N,"PIXI.TRANSFORM_MODE property has been removed");return{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){c.deprecation(N,"PIXI.WebGLRenderer class has moved to PIXI.Renderer");return a.Renderer}},CanvasRenderTarget:{get:function(){c.deprecation(N,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget");return a.utils.CanvasRenderTarget}},loader:{get:function(){c.deprecation(N,"PIXI.loader instance has moved to PIXI.Loader.shared");return a.Loader.shared}},FilterManager:{get:function(){c.deprecation(N,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem");return a.systems.FilterSystem}},CanvasTinter:{get:function(){c.deprecation("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils");return a.canvasUtils}},GroupD8:{get:function(){c.deprecation("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8");return a.groupD8}}});a.accessibility={};Object.defineProperties(a.accessibility,{AccessibilityManager:{get:function(){c.deprecation("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager");return a.AccessibilityManager}}});a.interaction={};Object.defineProperties(a.interaction,{InteractionManager:{get:function(){c.deprecation("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager");return a.InteractionManager}},InteractionData:{get:function(){c.deprecation("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData");return a.InteractionData}},InteractionEvent:{get:function(){c.deprecation("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent");return a.InteractionEvent}}});a.prepare={};Object.defineProperties(a.prepare,{BasePrepare:{get:function(){c.deprecation("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare");return a.BasePrepare}},Prepare:{get:function(){c.deprecation("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare");return a.Prepare}},CanvasPrepare:{get:function(){c.deprecation("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare");return a.CanvasPrepare}}});a.extract={};Object.defineProperties(a.extract,{Extract:{get:function(){c.deprecation("5.2.1","PIXI.extract.Extract moved to PIXI.Extract");return a.Extract}},CanvasExtract:{get:function(){c.deprecation("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract");return a.CanvasExtract}}});a.extras={};Object.defineProperties(a.extras,{TilingSprite:{get:function(){c.deprecation(N,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite");return a.TilingSprite}},TilingSpriteRenderer:{get:function(){c.deprecation(N,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer");return a.TilingSpriteRenderer}},AnimatedSprite:{get:function(){c.deprecation(N,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite");return a.AnimatedSprite}},BitmapText:{get:function(){c.deprecation(N,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText");return a.BitmapText}}});a.TilingSprite.fromFrame=function e(t,r,i){c.deprecation("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from");return a.TilingSprite.from(t,{width:r,height:i})};a.TilingSprite.fromImage=function e(t,r,i,n){if(n===void 0){n={}}c.deprecation("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from");if(n&&typeof n!=="object"){n={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}}n.width=r;n.height=i;return a.TilingSprite.from(t,n)};Object.defineProperties(a.utils,{getSvgSize:{get:function(){c.deprecation(N,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize");return a.resources.SVGResource.getSize}}});a.mesh={};Object.defineProperties(a.mesh,{Mesh:{get:function(){c.deprecation(N,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh");return a.SimpleMesh}},NineSlicePlane:{get:function(){c.deprecation(N,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane");return a.NineSlicePlane}},Plane:{get:function(){c.deprecation(N,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane");return a.SimplePlane}},Rope:{get:function(){c.deprecation(N,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope");return a.SimpleRope}},RawMesh:{get:function(){c.deprecation(N,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh");return a.Mesh}},CanvasMeshRenderer:{get:function(){c.deprecation(N,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer");return a.CanvasMeshRenderer}},MeshRenderer:{get:function(){c.deprecation(N,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer");return a.MeshRenderer}}});a.particles={};Object.defineProperties(a.particles,{ParticleContainer:{get:function(){c.deprecation(N,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer");return a.ParticleContainer}},ParticleRenderer:{get:function(){c.deprecation(N,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer");return a.ParticleRenderer}}});a.ticker={};Object.defineProperties(a.ticker,{Ticker:{get:function(){c.deprecation(N,"PIXI.ticker.Ticker class has moved to PIXI.Ticker");return a.Ticker}},shared:{get:function(){c.deprecation(N,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared");return a.Ticker.shared}}});a.loaders={};Object.defineProperties(a.loaders,{Loader:{get:function(){c.deprecation(N,"PIXI.loaders.Loader class has moved to PIXI.Loader");return a.Loader}},Resource:{get:function(){c.deprecation(N,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource");return a.LoaderResource}},bitmapFontParser:{get:function(){c.deprecation(N,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use");return a.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){c.deprecation(N,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){c.deprecation(N,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use");return a.SpritesheetLoader.use}},getResourcePath:{get:function(){c.deprecation(N,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath");return a.SpritesheetLoader.getResourcePath}}});a.Loader.addPixiMiddleware=function e(t){c.deprecation(N,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin");return a.loaders.Loader.registerPlugin({use:t()})};var r=function(e){return"on"+e.charAt(0).toUpperCase()+e.slice(1)};Object.assign(a.Loader.prototype,{on:function(e){var t=r(e);c.deprecation(N,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+t+".add")},once:function(e){var t=r(e);c.deprecation(N,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+t+".once")},off:function(e){var t=r(e);c.deprecation(N,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+t+".detach")}});Object.defineProperty(a.extract,"WebGLExtract",{get:function(){c.deprecation(N,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract");return a.Extract}});Object.defineProperty(a.prepare,"WebGLPrepare",{get:function(){c.deprecation(N,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare");return a.Prepare}});a.Container.prototype._renderWebGL=function e(t){c.deprecation(N,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render");this._render(t)};a.Container.prototype.renderWebGL=function e(t){c.deprecation(N,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render");this.render(t)};a.DisplayObject.prototype.renderWebGL=function e(t){c.deprecation(N,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render");this.render(t)};a.Container.prototype.renderAdvancedWebGL=function e(t){c.deprecation(N,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced");this.renderAdvanced(t)};Object.defineProperties(a.settings,{TRANSFORM_MODE:{get:function(){c.deprecation(N,"PIXI.settings.TRANSFORM_MODE property has been removed");return 0},set:function(){c.deprecation(N,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var o=a.BaseTexture;o.prototype.loadSource=function e(t){c.deprecation(N,"PIXI.BaseTexture.loadSource method has been deprecated");var r=a.resources.autoDetectResource(t);r.internal=true;this.setResource(r);this.update()};var e=false;Object.defineProperties(o.prototype,{hasLoaded:{get:function(){c.deprecation(N,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid");return this.valid}},imageUrl:{get:function(){var e;c.deprecation(N,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url");return(e=this.resource)===null||e===void 0?void 0:e.url},set:function(e){c.deprecation(N,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url");if(this.resource){this.resource.url=e}}},source:{get:function(){c.deprecation(N,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`");return this.resource.source},set:function(e){c.deprecation(N,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` "+"if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture.");if(this.resource){this.resource.source=e}}},premultiplyAlpha:{get:function(){c.deprecation("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`"+", see `PIXI.ALPHA_MODES`");return this.alphaMode!==0},set:function(e){c.deprecation("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`"+", see `PIXI.ALPHA_MODES`");this.alphaMode=Number(e)}},_id:{get:function(){if(!e){c.deprecation("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`");e=true}return this._batchLocation},set:function(e){this._batchLocation=e}}});o.fromImage=function e(t,r,i,n){c.deprecation(N,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var a={scale:n,crossorigin:r};return o.from(t,{scaleMode:i,resourceOptions:a})};o.fromCanvas=function e(t,r){c.deprecation(N,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from");return o.from(t,{scaleMode:r})};o.fromSVG=function e(t,r,i,n){c.deprecation(N,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var a={scale:n,crossorigin:r};return o.from(t,{scaleMode:i,resourceOptions:a})};Object.defineProperties(a.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){c.deprecation("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property "+"has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`");return this.alphaMode!==0},set:function(e){c.deprecation("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property "+"has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`");this.alphaMode=Number(e)}}});a.Point.prototype.copy=function e(t){c.deprecation(N,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom");return this.copyFrom(t)};a.ObservablePoint.prototype.copy=function e(t){c.deprecation(N,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom");return this.copyFrom(t)};a.Rectangle.prototype.copy=function e(t){c.deprecation(N,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom");return this.copyFrom(t)};a.Matrix.prototype.copy=function e(t){c.deprecation(N,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo");return this.copyTo(t)};a.systems.StateSystem.prototype.setState=function e(t){c.deprecation("v5.1.0","StateSystem.setState has been renamed to StateSystem.set");return this.set(t)};Object.assign(a.systems.FilterSystem.prototype,{getRenderTarget:function(e,t){c.deprecation(N,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture");return this.getFilterTexture(null,t)},returnRenderTarget:function(e){c.deprecation(N,"PIXI.FilterManager.returnRenderTarget method has been replaced with "+"PIXI.systems.FilterSystem.returnFilterTexture");this.returnFilterTexture(e)},calculateScreenSpaceMatrix:function(e){c.deprecation(N,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, "+"use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var t=e.identity();var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame;t.translate(i.x/n.width,i.y/n.height);t.scale(n.width,n.height);return t},calculateNormalizedScreenSpaceMatrix:function(e){c.deprecation(N,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, "+"use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var t=this.activeState,r=t.sourceFrame,i=t.destinationFrame;var n=e.identity();n.translate(r.x/i.width,r.y/i.height);var a=i.width/r.width;var o=i.height/r.height;n.scale(a,o);return n}});Object.defineProperties(a.RenderTexture.prototype,{sourceFrame:{get:function(){c.deprecation(N,"PIXI.RenderTexture.sourceFrame property has been removed");return this.filterFrame}},size:{get:function(){c.deprecation(N,"PIXI.RenderTexture.size property has been removed");return this._frame}}});var t=function(a){L(e,a);function e(e,t,r,i){var n=this;c.deprecation(N,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass");n=a.call(this,true,e,t,r,i)||this;return n}return e}(a.filters.BlurFilterPass);var i=function(a){L(e,a);function e(e,t,r,i){var n=this;c.deprecation(N,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass");n=a.call(this,false,e,t,r,i)||this;return n}return e}(a.filters.BlurFilterPass);Object.assign(a.filters,{BlurXFilter:t,BlurYFilter:i});var n=a.Sprite,s=a.Texture,u=a.Graphics;if(!u.prototype.generateCanvasTexture){u.prototype.generateCanvasTexture=function e(){c.deprecation(N,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}}Object.defineProperty(u.prototype,"graphicsData",{get:function(){c.deprecation(N,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData");return this.geometry.graphicsData}});function l(e,t,r,i){c.deprecation(N,"PIXI.Sprite."+e+" method is deprecated, use PIXI.Sprite.from");return n.from(t,{resourceOptions:{scale:i,crossorigin:r}})}n.fromImage=l.bind(null,"fromImage");n.fromSVG=l.bind(null,"fromSVG");n.fromCanvas=l.bind(null,"fromCanvas");n.fromVideo=l.bind(null,"fromVideo");n.fromFrame=l.bind(null,"fromFrame");function h(e,t,r,i){c.deprecation(N,"PIXI.Texture."+e+" method is deprecated, use PIXI.Texture.from");return s.from(t,{resourceOptions:{scale:i,crossorigin:r}})}s.fromImage=h.bind(null,"fromImage");s.fromSVG=h.bind(null,"fromSVG");s.fromCanvas=h.bind(null,"fromCanvas");s.fromVideo=h.bind(null,"fromVideo");s.fromFrame=h.bind(null,"fromFrame");Object.defineProperty(a.AbstractRenderer.prototype,"autoResize",{get:function(){c.deprecation(N,"PIXI.AbstractRenderer.autoResize property is deprecated, "+"use PIXI.AbstractRenderer.autoDensity");return this.autoDensity},set:function(e){c.deprecation(N,"PIXI.AbstractRenderer.autoResize property is deprecated, "+"use PIXI.AbstractRenderer.autoDensity");this.autoDensity=e}});Object.defineProperty(a.Renderer.prototype,"textureManager",{get:function(){c.deprecation(N,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture");return this.texture}});a.utils.mixins={mixin:function(){c.deprecation(N,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){c.deprecation(N,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){c.deprecation(N,"PIXI.utils.mixins.performMixins function is no longer available")}};Object.defineProperty(a.BitmapText.prototype,"font",{get:function(){c.deprecation("5.3.0","PIXI.BitmapText.font property is deprecated, "+"use fontName, fontSize, tint or align properties");return{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(e){c.deprecation("5.3.0","PIXI.BitmapText.font property is deprecated, "+"use fontName, fontSize, tint or align properties");if(!e){return}var t={font:e};this._upgradeStyle(t);t.fontSize=t.fontSize||a.BitmapFont.available[t.fontName].size;this._fontName=t.fontName;this._fontSize=t.fontSize;this.dirty=true}})}o.Renderer.registerPlugin("accessibility",i.AccessibilityManager);o.Renderer.registerPlugin("extract",s.Extract);o.Renderer.registerPlugin("interaction",n.InteractionManager);o.Renderer.registerPlugin("particle",l.ParticleRenderer);o.Renderer.registerPlugin("prepare",h.Prepare);o.Renderer.registerPlugin("batch",o.BatchRenderer);o.Renderer.registerPlugin("tilingSprite",d.TilingSpriteRenderer);u.Loader.registerPlugin(p.BitmapFontLoader);u.Loader.registerPlugin(f.SpritesheetLoader);a.Application.registerPlugin(v.TickerPlugin);a.Application.registerPlugin(u.AppLoaderPlugin);var F="5.3.6";var B={AlphaFilter:m.AlphaFilter,BlurFilter:g.BlurFilter,BlurFilterPass:g.BlurFilterPass,ColorMatrixFilter:y.ColorMatrixFilter,DisplacementFilter:_.DisplacementFilter,FXAAFilter:b.FXAAFilter,NoiseFilter:x.NoiseFilter};Object.keys(i).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return i[e]}})});Object.keys(n).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return n[e]}})});Object.keys(a).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return a[e]}})});Object.keys(o).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return o[e]}})});Object.keys(s).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return s[e]}})});Object.keys(u).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return u[e]}})});Object.keys(l).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return l[e]}})});Object.keys(h).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return h[e]}})});Object.keys(f).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return f[e]}})});Object.keys(d).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return d[e]}})});Object.keys(p).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return p[e]}})});Object.keys(v).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return v[e]}})});Object.keys(w).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return w[e]}})});Object.keys(E).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return E[e]}})});Object.keys(S).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return S[e]}})});Object.keys(T).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return T[e]}})});Object.keys(P).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return P[e]}})});Object.keys(A).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return A[e]}})});Object.keys(I).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return I[e]}})});Object.keys(O).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return O[e]}})});Object.keys(M).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return M[e]}})});Object.keys(C).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return C[e]}})});Object.keys(D).forEach(function(e){Object.defineProperty(r,e,{enumerable:true,get:function(){return D[e]}})});r.utils=c;r.VERSION=F;r.filters=B;r.useDeprecated=k},{"@pixi/accessibility":1,"@pixi/app":2,"@pixi/constants":3,"@pixi/core":4,"@pixi/display":5,"@pixi/extract":6,"@pixi/filter-alpha":7,"@pixi/filter-blur":8,"@pixi/filter-color-matrix":9,"@pixi/filter-displacement":10,"@pixi/filter-fxaa":11,"@pixi/filter-noise":12,"@pixi/graphics":13,"@pixi/interaction":14,"@pixi/loaders":15,"@pixi/math":16,"@pixi/mesh":18,"@pixi/mesh-extras":17,"@pixi/mixin-cache-as-bitmap":19,"@pixi/mixin-get-child-by-name":20,"@pixi/mixin-get-global-position":21,"@pixi/particles":22,"@pixi/polyfill":23,"@pixi/prepare":24,"@pixi/runner":25,"@pixi/settings":26,"@pixi/sprite":29,"@pixi/sprite-animated":27,"@pixi/sprite-tiling":28,"@pixi/spritesheet":30,"@pixi/text":32,"@pixi/text-bitmap":31,"@pixi/ticker":33,"@pixi/utils":34}],67:[function(e,t,r){var i=t.exports={};var n;var a;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=s}}catch(e){a=s}})();function u(t){if(n===setTimeout){return setTimeout(t,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function l(t){if(a===clearTimeout){return clearTimeout(t)}if((a===s||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(t)}try{return a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}var h=[];var c=false;var f;var d=-1;function p(){if(!c||!f){return}c=false;if(f.length){h=f.concat(h)}else{d=-1}if(h.length){v()}}function v(){if(c){return}var e=u(p);c=true;var t=h.length;while(t){f=h;h=[];while(++d<t){if(f){f[d].run()}}d=-1;t=h.length}f=null;c=false;l(e)}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}h.push(new m(e,t));if(h.length===1&&!c){u(v)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function g(){}i.on=g;i.addListener=g;i.once=g;i.off=g;i.removeListener=g;i.removeAllListeners=g;i.emit=g;i.prependListener=g;i.prependOnceListener=g;i.listeners=function(e){return[]};i.binding=function(e){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(e){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}],68:[function(e,N,k){(function(L){(function(){(function(e){var t=typeof k=="object"&&k&&!k.nodeType&&k;var r=typeof N=="object"&&N&&!N.nodeType&&N;var i=typeof L=="object"&&L;if(i.global===i||i.window===i||i.self===i){e=i}var n,g=2147483647,y=36,_=1,b=26,a=38,o=700,x=72,w=128,E="-",s=/^xn--/,u=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=y-_,S=Math.floor,T=String.fromCharCode,f;function P(e){throw RangeError(h[e])}function d(e,t){var r=e.length;var i=[];while(r--){i[r]=t(e[r])}return i}function p(e,t){var r=e.split("@");var i="";if(r.length>1){i=r[0]+"@";e=r[1]}e=e.replace(l,".");var n=e.split(".");var a=d(n,t).join(".");return i+a}function A(e){var t=[],r=0,i=e.length,n,a;while(r<i){n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){a=e.charCodeAt(r++);if((a&64512)==56320){t.push(((n&1023)<<10)+(a&1023)+65536)}else{t.push(n);r--}}else{t.push(n)}}return t}function m(e){return d(e,function(e){var t="";if(e>65535){e-=65536;t+=T(e>>>10&1023|55296);e=56320|e&1023}t+=T(e);return t}).join("")}function I(e){if(e-48<10){return e-22}if(e-65<26){return e-65}if(e-97<26){return e-97}return y}function O(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function M(e,t,r){var i=0;e=r?S(e/o):e>>1;e+=S(e/t);for(;e>c*b>>1;i+=y){e=S(e/c)}return S(i+(c+1)*e/(e+a))}function v(e){var t=[],r=e.length,i,n=0,a=w,o=x,s,u,l,h,c,f,d,p,v;s=e.lastIndexOf(E);if(s<0){s=0}for(u=0;u<s;++u){if(e.charCodeAt(u)>=128){P("not-basic")}t.push(e.charCodeAt(u))}for(l=s>0?s+1:0;l<r;){for(h=n,c=1,f=y;;f+=y){if(l>=r){P("invalid-input")}d=I(e.charCodeAt(l++));if(d>=y||d>S((g-n)/c)){P("overflow")}n+=d*c;p=f<=o?_:f>=o+b?b:f-o;if(d<p){break}v=y-p;if(c>S(g/v)){P("overflow")}c*=v}i=t.length+1;o=M(n-h,i,h==0);if(S(n/i)>g-a){P("overflow")}a+=S(n/i);n%=i;t.splice(n++,0,a)}return m(t)}function C(e){var t,r,i,n,a,o,s,u,l,h,c,f=[],d,p,v,m;e=A(e);d=e.length;t=w;r=0;a=x;for(o=0;o<d;++o){c=e[o];if(c<128){f.push(T(c))}}i=n=f.length;if(n){f.push(E)}while(i<d){for(s=g,o=0;o<d;++o){c=e[o];if(c>=t&&c<s){s=c}}p=i+1;if(s-t>S((g-r)/p)){P("overflow")}r+=(s-t)*p;t=s;for(o=0;o<d;++o){c=e[o];if(c<t&&++r>g){P("overflow")}if(c==t){for(u=r,l=y;;l+=y){h=l<=a?_:l>=a+b?b:l-a;if(u<h){break}m=u-h;v=y-h;f.push(T(O(h+m%v,0)));u=S(m/v)}f.push(T(O(u,0)));a=M(r,p,i==n);r=0;++i}}++r;++t}return f.join("")}function D(e){return p(e,function(e){return s.test(e)?v(e.slice(4).toLowerCase()):e})}function R(e){return p(e,function(e){return u.test(e)?"xn--"+C(e):e})}n={version:"1.3.2",ucs2:{decode:A,encode:m},decode:v,encode:C,toASCII:R,toUnicode:D};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return n})}else if(t&&r){if(N.exports==t){r.exports=n}else{for(f in n){n.hasOwnProperty(f)&&(t[f]=n[f])}}}else{e.punycode=n}})(this)}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],69:[function(e,t,r){"use strict";function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&";r=r||"=";var n={};if(typeof e!=="string"||e.length===0){return n}var a=/\+/g;e=e.split(t);var o=1e3;if(i&&typeof i.maxKeys==="number"){o=i.maxKeys}var s=e.length;if(o>0&&s>o){s=o}for(var u=0;u<s;++u){var l=e[u].replace(a,"%20"),h=l.indexOf(r),c,f,d,p;if(h>=0){c=l.substr(0,h);f=l.substr(h+1)}else{c=l;f=""}d=decodeURIComponent(c);p=decodeURIComponent(f);if(!v(n,d)){n[d]=p}else if(m(n[d])){n[d].push(p)}else{n[d]=[n[d],p]}}return n};var m=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},{}],70:[function(e,t,r){"use strict";var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(r,i,n,e){i=i||"&";n=n||"=";if(r===null){r=undefined}if(typeof r==="object"){return s(u(r),function(e){var t=encodeURIComponent(a(e))+n;if(o(r[e])){return s(r[e],function(e){return t+encodeURIComponent(a(e))}).join(i)}else{return t+encodeURIComponent(a(r[e]))}}).join(i)}if(!e)return"";return encodeURIComponent(a(e))+n+encodeURIComponent(a(r))};var o=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function s(e,t){if(e.map)return e.map(t);var r=[];for(var i=0;i<e.length;i++){r.push(t(e[i],i))}return r}var u=Object.keys||function(e){var t=[];for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t.push(r)}return t}},{}],71:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode");r.encode=r.stringify=e("./encode")},{"./decode":69,"./encode":70}],72:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var o=i(e("parse-uri"));var u=i(e("mini-signals"));function s(){}function n(r,i,n,a){var o=0;var s=r.length;(function e(t){if(t||o===s){if(n){n(t)}return}if(a){setTimeout(function(){i(r[o++],e)},1)}else{i(r[o++],e)}})()}function l(r){return function e(){if(r===null){throw new Error("Callback was already called.")}var t=r;r=null;t.apply(this,arguments)}}function h(r,e){if(e==null){e=1}else if(e===0){throw new Error("Concurrency must not be zero")}var i=0;var n={_tasks:[],concurrency:e,saturated:s,unsaturated:s,buffer:e/4,empty:s,drain:s,error:s,started:false,paused:false,push:function e(t,r){a(t,false,r)},kill:function e(){i=0;n.drain=s;n.started=false;n._tasks=[]},unshift:function e(t,r){a(t,true,r)},process:function e(){while(!n.paused&&i<n.concurrency&&n._tasks.length){var t=n._tasks.shift();if(n._tasks.length===0){n.empty()}i+=1;if(i===n.concurrency){n.saturated()}r(t.data,l(o(t)))}},length:function e(){return n._tasks.length},running:function e(){return i},idle:function e(){return n._tasks.length+i===0},pause:function e(){if(n.paused===true){return}n.paused=true},resume:function e(){if(n.paused===false){return}n.paused=false;for(var t=1;t<=n.concurrency;t++){n.process()}}};function a(e,t,r){if(r!=null&&typeof r!=="function"){throw new Error("task callback must be a function")}n.started=true;if(e==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var i={data:e,callback:typeof r==="function"?r:s};if(t){n._tasks.unshift(i)}else{n._tasks.push(i)}setTimeout(function(){return n.process()},1)}function o(t){return function e(){i-=1;t.callback.apply(t,arguments);if(arguments[0]!=null){n.error(arguments[0],t.data)}if(i<=n.concurrency-n.buffer){n.unsaturated()}if(n.idle()){n.drain()}n.process()}}return n}var a={eachSeries:n,queue:h};var c={};function f(e,t){var r=this;if(c[e.url]){e.data=c[e.url];e.complete()}else{e.onComplete.once(function(){return c[r.url]=r.data})}t()}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function p(e,t,r){if(t)d(e.prototype,t);if(r)d(e,r);return e}var v=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest));var m=null;var g=0;var y=200;var _=204;var b=1223;var x=2;function w(){}var E=function(){s.setExtensionLoadType=function e(t,r){S(s._loadTypeMap,t,r)};s.setExtensionXhrType=function e(t,r){S(s._xhrTypeMap,t,r)};function s(e,t,r){if(typeof e!=="string"||typeof t!=="string"){throw new Error("Both name and url are required for constructing a resource.")}r=r||{};this._flags=0;this._setFlag(s.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0);this.name=e;this.url=t;this.extension=this._getExtension();this.data=null;this.crossOrigin=r.crossOrigin===true?"anonymous":r.crossOrigin;this.timeout=r.timeout||0;this.loadType=r.loadType||this._determineLoadType();this.xhrType=r.xhrType;this.metadata=r.metadata||{};this.error=null;this.xhr=null;this.children=[];this.type=s.TYPE.UNKNOWN;this.progressChunk=0;this._dequeue=w;this._onLoadBinding=null;this._elementTimer=0;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundOnTimeout=this._onTimeout.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this.onStart=new u;this.onProgress=new u;this.onComplete=new u;this.onAfterMiddleware=new u}var e=s.prototype;e.complete=function e(){this._clearEvents();this._finish()};e.abort=function e(t){if(this.error){return}this.error=new Error(t);this._clearEvents();if(this.xhr){this.xhr.abort()}else if(this.xdr){this.xdr.abort()}else if(this.data){if(this.data.src){this.data.src=s.EMPTY_GIF}else{while(this.data.firstChild){this.data.removeChild(this.data.firstChild)}}}this._finish()};e.load=function e(t){var r=this;if(this.isLoading){return}if(this.isComplete){if(t){setTimeout(function(){return t(r)},1)}return}else if(t){this.onComplete.once(t)}this._setFlag(s.STATUS_FLAGS.LOADING,true);this.onStart.dispatch(this);if(this.crossOrigin===false||typeof this.crossOrigin!=="string"){this.crossOrigin=this._determineCrossOrigin(this.url)}switch(this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE;this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO;this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO;this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:if(v&&this.crossOrigin){this._loadXdr()}else{this._loadXhr()}break}};e._hasFlag=function e(t){return(this._flags&t)!==0};e._setFlag=function e(t,r){this._flags=r?this._flags|t:this._flags&~t};e._clearEvents=function e(){clearTimeout(this._elementTimer);if(this.data&&this.data.removeEventListener){this.data.removeEventListener("error",this._boundOnError,false);this.data.removeEventListener("load",this._boundComplete,false);this.data.removeEventListener("progress",this._boundOnProgress,false);this.data.removeEventListener("canplaythrough",this._boundComplete,false)}if(this.xhr){if(this.xhr.removeEventListener){this.xhr.removeEventListener("error",this._boundXhrOnError,false);this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,false);this.xhr.removeEventListener("abort",this._boundXhrOnAbort,false);this.xhr.removeEventListener("progress",this._boundOnProgress,false);this.xhr.removeEventListener("load",this._boundXhrOnLoad,false)}else{this.xhr.onerror=null;this.xhr.ontimeout=null;this.xhr.onprogress=null;this.xhr.onload=null}}};e._finish=function e(){if(this.isComplete){throw new Error("Complete called again for an already completed resource.")}this._setFlag(s.STATUS_FLAGS.COMPLETE,true);this._setFlag(s.STATUS_FLAGS.LOADING,false);this.onComplete.dispatch(this)};e._loadElement=function e(t){if(this.metadata.loadElement){this.data=this.metadata.loadElement}else if(t==="image"&&typeof window.Image!=="undefined"){this.data=new Image}else{this.data=document.createElement(t)}if(this.crossOrigin){this.data.crossOrigin=this.crossOrigin}if(!this.metadata.skipSource){this.data.src=this.url}this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false);if(this.timeout){this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout)}};e._loadSourceElement=function e(t){if(this.metadata.loadElement){this.data=this.metadata.loadElement}else if(t==="audio"&&typeof window.Audio!=="undefined"){this.data=new Audio}else{this.data=document.createElement(t)}if(this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin){this.data.crossOrigin=this.crossOrigin}if(!this.metadata.skipSource){if(navigator.isCocoonJS){this.data.src=Array.isArray(this.url)?this.url[0]:this.url}else if(Array.isArray(this.url)){var r=this.metadata.mimeType;for(var i=0;i<this.url.length;++i){this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(r)?r[i]:r))}}else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}}this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false);this.data.addEventListener("canplaythrough",this._boundComplete,false);this.data.load();if(this.timeout){this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout)}};e._loadXhr=function e(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,true);t.timeout=this.timeout;if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT){t.responseType=s.XHR_RESPONSE_TYPE.TEXT}else{t.responseType=this.xhrType}t.addEventListener("error",this._boundXhrOnError,false);t.addEventListener("timeout",this._boundXhrOnTimeout,false);t.addEventListener("abort",this._boundXhrOnAbort,false);t.addEventListener("progress",this._boundOnProgress,false);t.addEventListener("load",this._boundXhrOnLoad,false);t.send()};e._loadXdr=function e(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3;t.onerror=this._boundXhrOnError;t.ontimeout=this._boundXhrOnTimeout;t.onprogress=this._boundOnProgress;t.onload=this._boundXhrOnLoad;t.open("GET",this.url,true);setTimeout(function(){return t.send()},1)};e._createSource=function e(t,r,i){if(!i){i=t+"/"+this._getExtension(r)}var n=document.createElement("source");n.src=r;n.type=i;return n};e._onError=function e(t){this.abort("Failed to load element using: "+t.target.nodeName)};e._onProgress=function e(t){if(t&&t.lengthComputable){this.onProgress.dispatch(this,t.loaded/t.total)}};e._onTimeout=function e(){this.abort("Load timed out.")};e._xhrOnError=function e(){var t=this.xhr;this.abort(T(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')};e._xhrOnTimeout=function e(){var t=this.xhr;this.abort(T(t)+" Request timed out.")};e._xhrOnAbort=function e(){var t=this.xhr;this.abort(T(t)+" Request was aborted by the user.")};e._xhrOnLoad=function e(){var t=this.xhr;var r="";var i=typeof t.status==="undefined"?y:t.status;if(t.responseType===""||t.responseType==="text"||typeof t.responseType==="undefined"){r=t.responseText}if(i===g&&(r.length>0||t.responseType===s.XHR_RESPONSE_TYPE.BUFFER)){i=y}else if(i===b){i=_}var n=i/100|0;if(n===x){if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT){this.data=r;this.type=s.TYPE.TEXT}else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON){try{this.data=JSON.parse(r);this.type=s.TYPE.JSON}catch(e){this.abort("Error trying to parse loaded json: "+e);return}}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT){try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r;this.data=o}this.type=s.TYPE.XML}catch(e){this.abort("Error trying to parse loaded xml: "+e);return}}else{this.data=t.response||r}}else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()};e._determineCrossOrigin=function e(t,r){if(t.indexOf("data:")===0){return""}if(window.origin!==window.location.origin){return"anonymous"}r=r||window.location;if(!m){m=document.createElement("a")}m.href=t;t=o(m.href,{strictMode:true});var i=!t.port&&r.port===""||t.port===r.port;var n=t.protocol?t.protocol+":":"";if(t.host!==r.hostname||!i||n!==r.protocol){return"anonymous"}return""};e._determineXhrType=function e(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT};e._determineLoadType=function e(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR};e._getExtension=function e(){var t=this.url;var r="";if(this.isDataUrl){var i=t.indexOf("/");r=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?");var a=t.indexOf("#");var o=Math.min(n>-1?n:t.length,a>-1?a:t.length);t=t.substring(0,o);r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()};e._getMimeFromXhrType=function e(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}};p(s,[{key:"isDataUrl",get:function e(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function e(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function e(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]);return s}();E.STATUS_FLAGS={NONE:0,DATA_URL:1<<0,COMPLETE:1<<1,LOADING:1<<2};E.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};E.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};E.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};E._loadTypeMap={gif:E.LOAD_TYPE.IMAGE,png:E.LOAD_TYPE.IMAGE,bmp:E.LOAD_TYPE.IMAGE,jpg:E.LOAD_TYPE.IMAGE,jpeg:E.LOAD_TYPE.IMAGE,tif:E.LOAD_TYPE.IMAGE,tiff:E.LOAD_TYPE.IMAGE,webp:E.LOAD_TYPE.IMAGE,tga:E.LOAD_TYPE.IMAGE,svg:E.LOAD_TYPE.IMAGE,"svg+xml":E.LOAD_TYPE.IMAGE,mp3:E.LOAD_TYPE.AUDIO,ogg:E.LOAD_TYPE.AUDIO,wav:E.LOAD_TYPE.AUDIO,mp4:E.LOAD_TYPE.VIDEO,webm:E.LOAD_TYPE.VIDEO};E._xhrTypeMap={xhtml:E.XHR_RESPONSE_TYPE.DOCUMENT,html:E.XHR_RESPONSE_TYPE.DOCUMENT,htm:E.XHR_RESPONSE_TYPE.DOCUMENT,xml:E.XHR_RESPONSE_TYPE.DOCUMENT,tmx:E.XHR_RESPONSE_TYPE.DOCUMENT,svg:E.XHR_RESPONSE_TYPE.DOCUMENT,tsx:E.XHR_RESPONSE_TYPE.DOCUMENT,gif:E.XHR_RESPONSE_TYPE.BLOB,png:E.XHR_RESPONSE_TYPE.BLOB,bmp:E.XHR_RESPONSE_TYPE.BLOB,jpg:E.XHR_RESPONSE_TYPE.BLOB,jpeg:E.XHR_RESPONSE_TYPE.BLOB,tif:E.XHR_RESPONSE_TYPE.BLOB,tiff:E.XHR_RESPONSE_TYPE.BLOB,webp:E.XHR_RESPONSE_TYPE.BLOB,tga:E.XHR_RESPONSE_TYPE.BLOB,json:E.XHR_RESPONSE_TYPE.JSON,text:E.XHR_RESPONSE_TYPE.TEXT,txt:E.XHR_RESPONSE_TYPE.TEXT,ttf:E.XHR_RESPONSE_TYPE.BUFFER,otf:E.XHR_RESPONSE_TYPE.BUFFER};E.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function S(e,t,r){if(t&&t.indexOf(".")===0){t=t.substring(1)}if(!t){return}e[t]=r}function T(e){return e.toString().replace("object ","")}var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function A(e){var t="";var r=0;while(r<e.length){var i=[0,0,0];var n=[0,0,0,0];for(var a=0;a<i.length;++a){if(r<e.length){i[a]=e.charCodeAt(r++)&255}else{i[a]=0}}n[0]=i[0]>>2;n[1]=(i[0]&3)<<4|i[1]>>4;n[2]=(i[1]&15)<<2|i[2]>>6;n[3]=i[2]&63;var o=r-(e.length-1);switch(o){case 2:n[3]=64;n[2]=64;break;case 1:n[3]=64;break;default:break}for(var s=0;s<n.length;++s){t+=P.charAt(n[s])}}return t}var I=window.URL||window.webkitURL;function O(e,t){if(!e.data){t();return}if(e.xhr&&e.xhrType===E.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof e.data==="string"){var r=e.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){e.data=new Image;e.data.src="data:"+r+";base64,"+A(e.xhr.responseText);e.type=E.TYPE.IMAGE;e.data.onload=function(){e.data.onload=null;t()};return}}else if(e.data.type.indexOf("image")===0){var i=I.createObjectURL(e.data);e.blob=e.data;e.data=new Image;e.data.src=i;e.type=E.TYPE.IMAGE;e.data.onload=function(){I.revokeObjectURL(i);e.data.onload=null;t()};return}}t()}var M={caching:f,parsing:O};var C=100;var D=/(#[\w-]+)?$/;var R=function(){function a(e,t){var r=this;if(e===void 0){e=""}if(t===void 0){t=10}this.baseUrl=e;this.progress=0;this.loading=false;this.defaultQueryString="";this._beforeMiddleware=[];this._afterMiddleware=[];this._resourcesParsing=[];this._boundLoadResource=function(e,t){return r._loadResource(e,t)};this._queue=h(this._boundLoadResource,t);this._queue.pause();this.resources={};this.onProgress=new u;this.onError=new u;this.onLoad=new u;this.onStart=new u;this.onComplete=new u;for(var i=0;i<a._defaultBeforeMiddleware.length;++i){this.pre(a._defaultBeforeMiddleware[i])}for(var n=0;n<a._defaultAfterMiddleware.length;++n){this.use(a._defaultAfterMiddleware[n])}}var e=a.prototype;e.add=function e(t,r,i,n){if(Array.isArray(t)){for(var a=0;a<t.length;++a){this.add(t[a])}return this}if(typeof t==="object"){n=r||t.callback||t.onComplete;i=t;r=t.url;t=t.name||t.key||t.url}if(typeof r!=="string"){n=i;i=r;r=t}if(typeof r!=="string"){throw new Error("No url passed to add resource to loader.")}if(typeof i==="function"){n=i;i=null}if(this.loading&&(!i||!i.parentResource)){throw new Error("Cannot add resources while the loader is running.")}if(this.resources[t]){throw new Error('Resource named "'+t+'" already exists.')}r=this._prepareUrl(r);this.resources[t]=new E(t,r,i);if(typeof n==="function"){this.resources[t].onAfterMiddleware.once(n)}if(this.loading){var o=i.parentResource;var s=[];for(var u=0;u<o.children.length;++u){if(!o.children[u].isComplete){s.push(o.children[u])}}var l=o.progressChunk*(s.length+1);var h=l/(s.length+2);o.children.push(this.resources[t]);o.progressChunk=h;for(var c=0;c<s.length;++c){s[c].progressChunk=h}this.resources[t].progressChunk=h}this._queue.push(this.resources[t]);return this};e.pre=function e(t){this._beforeMiddleware.push(t);return this};e.use=function e(t){this._afterMiddleware.push(t);return this};e.reset=function e(){this.progress=0;this.loading=false;this._queue.kill();this._queue.pause();for(var t in this.resources){var r=this.resources[t];if(r._onLoadBinding){r._onLoadBinding.detach()}if(r.isLoading){r.abort()}}this.resources={};return this};e.load=function e(t){if(typeof t==="function"){this.onComplete.once(t)}if(this.loading){return this}if(this._queue.idle()){this._onStart();this._onComplete()}else{var r=this._queue._tasks.length;var i=C/r;for(var n=0;n<this._queue._tasks.length;++n){this._queue._tasks[n].data.progressChunk=i}this._onStart();this._queue.resume()}return this};e._prepareUrl=function e(t){var r=o(t,{strictMode:true});var i;if(r.protocol||!r.path||t.indexOf("//")===0){i=t}else if(this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"){i=this.baseUrl+"/"+t}else{i=this.baseUrl+t}if(this.defaultQueryString){var n=D.exec(i)[0];i=i.substr(0,i.length-n.length);if(i.indexOf("?")!==-1){i+="&"+this.defaultQueryString}else{i+="?"+this.defaultQueryString}i+=n}return i};e._loadResource=function e(r,t){var i=this;r._dequeue=t;n(this._beforeMiddleware,function(e,t){e.call(i,r,function(){t(r.isComplete?{}:null)})},function(){if(r.isComplete){i._onLoad(r)}else{r._onLoadBinding=r.onComplete.once(i._onLoad,i);r.load()}},true)};e._onStart=function e(){this.progress=0;this.loading=true;this.onStart.dispatch(this)};e._onComplete=function e(){this.progress=C;this.loading=false;this.onComplete.dispatch(this,this.resources)};e._onLoad=function e(r){var i=this;r._onLoadBinding=null;this._resourcesParsing.push(r);r._dequeue();n(this._afterMiddleware,function(e,t){e.call(i,r,t)},function(){r.onAfterMiddleware.dispatch(r);i.progress=Math.min(C,i.progress+r.progressChunk);i.onProgress.dispatch(i,r);if(r.error){i.onError.dispatch(r.error,i,r)}else{i.onLoad.dispatch(i,r)}i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1);if(i._queue.idle()&&i._resourcesParsing.length===0){i._onComplete()}},true)};p(a,[{key:"concurrency",get:function e(){return this._queue.concurrency},set:function e(t){this._queue.concurrency=t}}]);return a}();R._defaultBeforeMiddleware=[];R._defaultAfterMiddleware=[];R.pre=function e(t){R._defaultBeforeMiddleware.push(t);return R};R.use=function e(t){R._defaultAfterMiddleware.push(t);return R};r.Loader=R;r.Resource=E;r.async=a;r.encodeBinary=A;r.middleware=M},{"mini-signals":63,"parse-uri":65}],73:[function(i,e,t){(function(r){if(typeof define==="function"&&define.amd){define(["jquery"],r)}else if(typeof e==="object"&&e.exports){e.exports=function(e,t){if(t===undefined){if(typeof window!=="undefined"){t=i("jquery")}else{t=i("jquery")(e)}}r(t);return t}}else{r(jQuery)}})(function(r){var e=function(){if(r&&r.fn&&r.fn.select2&&r.fn.select2.amd){var t=r.fn.select2.amd}var t;(function(){if(!t||!t.requirejs){if(!t){t={}}else{n=t}var e,n,h;(function(d){var a,o,p,v,m={},g={},y={},_={},r=Object.prototype.hasOwnProperty,i=[].slice,b=/\.js$/;function x(e,t){return r.call(e,t)}function s(e,t){var r,i,n,a,o,s,u,l,h,c,f,d,p=t&&t.split("/"),v=y.map,m=v&&v["*"]||{};if(e){e=e.split("/");o=e.length-1;if(y.nodeIdCompat&&b.test(e[o])){e[o]=e[o].replace(b,"")}if(e[0].charAt(0)==="."&&p){d=p.slice(0,p.length-1);e=d.concat(e)}for(h=0;h<e.length;h++){f=e[h];if(f==="."){e.splice(h,1);h-=1}else if(f===".."){if(h===0||h===1&&e[2]===".."||e[h-1]===".."){continue}else if(h>0){e.splice(h-1,2);h-=2}}}e=e.join("/")}if((p||m)&&v){r=e.split("/");for(h=r.length;h>0;h-=1){i=r.slice(0,h).join("/");if(p){for(c=p.length;c>0;c-=1){n=v[p.slice(0,c).join("/")];if(n){n=n[i];if(n){a=n;s=h;break}}}}if(a){break}if(!u&&m&&m[i]){u=m[i];l=h}}if(!a&&u){a=u;s=l}if(a){r.splice(0,s,a);e=r.join("/")}}return e}function w(t,r){return function(){var e=i.call(arguments,0);if(typeof e[0]!=="string"&&e.length===1){e.push(null)}return o.apply(d,e.concat([t,r]))}}function u(t){return function(e){return s(e,t)}}function E(t){return function(e){m[t]=e}}function S(e){if(x(g,e)){var t=g[e];delete g[e];_[e]=true;a.apply(d,t)}if(!x(m,e)&&!x(_,e)){throw new Error("No "+e)}return m[e]}function l(e){var t,r=e?e.indexOf("!"):-1;if(r>-1){t=e.substring(0,r);e=e.substring(r+1,e.length)}return[t,e]}function T(e){return e?l(e):[]}p=function(e,t){var r,i=l(e),n=i[0],a=t[1];e=i[1];if(n){n=s(n,a);r=S(n)}if(n){if(r&&r.normalize){e=r.normalize(e,u(a))}else{e=s(e,a)}}else{e=s(e,a);i=l(e);n=i[0];e=i[1];if(n){r=S(n)}}return{f:n?n+"!"+e:e,n:e,pr:n,p:r}};function t(e){return function(){return y&&y.config&&y.config[e]||{}}}v={require:function(e){return w(e)},exports:function(e){var t=m[e];if(typeof t!=="undefined"){return t}else{return m[e]={}}},module:function(e){return{id:e,uri:"",exports:m[e],config:t(e)}}};a=function(e,t,r,i){var n,a,o,s,u,l,h=[],c=typeof r,f;i=i||e;l=T(i);if(c==="undefined"||c==="function"){t=!t.length&&r.length?["require","exports","module"]:t;for(u=0;u<t.length;u+=1){s=p(t[u],l);a=s.f;if(a==="require"){h[u]=v.require(e)}else if(a==="exports"){h[u]=v.exports(e);f=true}else if(a==="module"){n=h[u]=v.module(e)}else if(x(m,a)||x(g,a)||x(_,a)){h[u]=S(a)}else if(s.p){s.p.load(s.n,w(i,true),E(a),{});h[u]=m[a]}else{throw new Error(e+" missing "+a)}}o=r?r.apply(m[e],h):undefined;if(e){if(n&&n.exports!==d&&n.exports!==m[e]){m[e]=n.exports}else if(o!==d||!f){m[e]=o}}}else if(e){m[e]=r}};e=n=o=function(e,t,r,i,n){if(typeof e==="string"){if(v[e]){return v[e](t)}return S(p(e,T(t)).f)}else if(!e.splice){y=e;if(y.deps){o(y.deps,y.callback)}if(!t){return}if(t.splice){e=t;t=r;r=null}else{e=d}}t=t||function(){};if(typeof r==="function"){r=i;i=n}if(i){a(d,e,t,r)}else{setTimeout(function(){a(d,e,t,r)},4)}return o};o.config=function(e){return o(e)};e._defined=m;h=function(e,t,r){if(typeof e!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!t.splice){r=t;t=[]}if(!x(m,e)&&!x(g,e)){g[e]=[e,t,r]}};h.amd={jQuery:true}})();t.requirejs=e;t.require=n;t.define=h}})();t.define("almond",function(){});t.define("jquery",[],function(){var e=r||$;if(e==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return e});t.define("select2/utils",["jquery"],function(a){var n={};n.Extend=function(e,t){var r={}.hasOwnProperty;function i(){this.constructor=e}for(var n in t){if(r.call(t,n)){e[n]=t[n]}}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};function c(e){var t=e.prototype;var r=[];for(var i in t){var n=t[i];if(typeof n!=="function"){continue}if(i==="constructor"){continue}r.push(i)}return r}n.Decorate=function(i,n){var e=c(n);var t=c(i);function a(){var e=Array.prototype.unshift;var t=n.prototype.constructor.length;var r=i.prototype.constructor;if(t>0){e.call(arguments,i.prototype.constructor);r=n.prototype.constructor}r.apply(this,arguments)}n.displayName=i.displayName;function r(){this.constructor=a}a.prototype=new r;for(var o=0;o<t.length;o++){var s=t[o];a.prototype[s]=i.prototype[s]}var u=function(e){var t=function(){};if(e in a.prototype){t=a.prototype[e]}var r=n.prototype[e];return function(){var e=Array.prototype.unshift;e.call(arguments,t);return r.apply(this,arguments)}};for(var l=0;l<e.length;l++){var h=e[l];a.prototype[h]=u(h)}return a};var e=function(){this.listeners={}};e.prototype.on=function(e,t){this.listeners=this.listeners||{};if(e in this.listeners){this.listeners[e].push(t)}else{this.listeners[e]=[t]}};e.prototype.trigger=function(e){var t=Array.prototype.slice;var r=t.call(arguments,1);this.listeners=this.listeners||{};if(r==null){r=[]}if(r.length===0){r.push({})}r[0]._type=e;if(e in this.listeners){this.invoke(this.listeners[e],t.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};e.prototype.invoke=function(e,t){for(var r=0,i=e.length;r<i;r++){e[r].apply(this,t)}};n.Observable=e;n.generateChars=function(e){var t="";for(var r=0;r<e;r++){var i=Math.floor(Math.random()*36);t+=i.toString(36)}return t};n.bind=function(e,t){return function(){e.apply(t,arguments)}};n._convertData=function(e){for(var t in e){var r=t.split("-");var i=e;if(r.length===1){continue}for(var n=0;n<r.length;n++){var a=r[n];a=a.substring(0,1).toLowerCase()+a.substring(1);if(!(a in i)){i[a]={}}if(n==r.length-1){i[a]=e[t]}i=i[a]}delete e[t]}return e};n.hasScroll=function(e,t){var r=a(t);var i=t.style.overflowX;var n=t.style.overflowY;if(i===n&&(n==="hidden"||n==="visible")){return false}if(i==="scroll"||n==="scroll"){return true}return r.innerHeight()<t.scrollHeight||r.innerWidth()<t.scrollWidth};n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof e!=="string"){return e}return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})};n.appendMany=function(e,t){if(a.fn.jquery.substr(0,3)==="1.7"){var r=a();a.map(t,function(e){r=r.add(e)});t=r}e.append(t)};n.__cache={};var r=0;n.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");if(t==null){if(e.id){t=e.id;e.setAttribute("data-select2-id",t)}else{e.setAttribute("data-select2-id",++r);t=r.toString()}}return t};n.StoreData=function(e,t,r){var i=n.GetUniqueElementId(e);if(!n.__cache[i]){n.__cache[i]={}}n.__cache[i][t]=r};n.GetData=function(e,t){var r=n.GetUniqueElementId(e);if(t){if(n.__cache[r]){if(n.__cache[r][t]!=null){return n.__cache[r][t]}return a(e).data(t)}return a(e).data(t)}else{return n.__cache[r]}};n.RemoveData=function(e){var t=n.GetUniqueElementId(e);if(n.__cache[t]!=null){delete n.__cache[t]}e.removeAttribute("data-select2-id")};return n});t.define("select2/results",["jquery","./utils"],function(p,v){function i(e,t,r){this.$element=e;this.data=r;this.options=t;i.__super__.constructor.call(this)}v.Extend(i,v.Observable);i.prototype.render=function(){var e=p('<ul class="select2-results__options" role="listbox"></ul>');if(this.options.get("multiple")){e.attr("aria-multiselectable","true")}this.$results=e;return e};i.prototype.clear=function(){this.$results.empty()};i.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear();this.hideLoading();var r=p('<li role="alert" aria-live="assertive"'+' class="select2-results__option"></li>');var i=this.options.get("translations").get(e.message);r.append(t(i(e.args)));r[0].className+=" select2-results__message";this.$results.append(r)};i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};i.prototype.append=function(e){this.hideLoading();var t=[];if(e.results==null||e.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}e.results=this.sort(e.results);for(var r=0;r<e.results.length;r++){var i=e.results[r];var n=this.option(i);t.push(n)}this.$results.append(t)};i.prototype.position=function(e,t){var r=t.find(".select2-results");r.append(e)};i.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)};i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]");var t=e.filter("[aria-selected=true]");if(t.length>0){t.first().trigger("mouseenter")}else{e.first().trigger("mouseenter")}this.ensureHighlightVisible()};i.prototype.setClasses=function(){var r=this;this.data.current(function(e){var i=p.map(e,function(e){return e.id.toString()});var t=r.$results.find(".select2-results__option[aria-selected]");t.each(function(){var e=p(this);var t=v.GetData(this,"data");var r=""+t.id;if(t.element!=null&&t.element.selected||t.element==null&&p.inArray(r,i)>-1){e.attr("aria-selected","true")}else{e.attr("aria-selected","false")}})})};i.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching");var r={disabled:true,loading:true,text:t(e)};var i=this.option(r);i.className+=" loading-results";this.$results.prepend(i)};i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};i.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var r={role:"option","aria-selected":"false"};var i=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;if(e.element!=null&&i.call(e.element,":disabled")||e.element==null&&e.disabled){delete r["aria-selected"];r["aria-disabled"]="true"}if(e.id==null){delete r["aria-selected"]}if(e._resultId!=null){t.id=e._resultId}if(e.title){t.title=e.title}if(e.children){r.role="group";r["aria-label"]=e.text;delete r["aria-selected"]}for(var n in r){var a=r[n];t.setAttribute(n,a)}if(e.children){var o=p(t);var s=document.createElement("strong");s.className="select2-results__group";var u=p(s);this.template(e,s);var l=[];for(var h=0;h<e.children.length;h++){var c=e.children[h];var f=this.option(c);l.push(f)}var d=p("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(l);o.append(s);o.append(d)}else{this.template(e,t)}v.StoreData(t,"data",e);return t};i.prototype.bind=function(t,e){var u=this;var r=t.id+"-results";this.$results.attr("id",r);t.on("results:all",function(e){u.clear();u.append(e.data);if(t.isOpen()){u.setClasses();u.highlightFirstItem()}});t.on("results:append",function(e){u.append(e.data);if(t.isOpen()){u.setClasses()}});t.on("query",function(e){u.hideMessages();u.showLoading(e)});t.on("select",function(){if(!t.isOpen()){return}u.setClasses();if(u.options.get("scrollAfterSelect")){u.highlightFirstItem()}});t.on("unselect",function(){if(!t.isOpen()){return}u.setClasses();if(u.options.get("scrollAfterSelect")){u.highlightFirstItem()}});t.on("open",function(){u.$results.attr("aria-expanded","true");u.$results.attr("aria-hidden","false");u.setClasses();u.ensureHighlightVisible()});t.on("close",function(){u.$results.attr("aria-expanded","false");u.$results.attr("aria-hidden","true");u.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var e=u.getHighlightedResults();if(e.length===0){return}e.trigger("mouseup")});t.on("results:select",function(){var e=u.getHighlightedResults();if(e.length===0){return}var t=v.GetData(e[0],"data");if(e.attr("aria-selected")=="true"){u.trigger("close",{})}else{u.trigger("select",{data:t})}});t.on("results:previous",function(){var e=u.getHighlightedResults();var t=u.$results.find("[aria-selected]");var r=t.index(e);if(r<=0){return}var i=r-1;if(e.length===0){i=0}var n=t.eq(i);n.trigger("mouseenter");var a=u.$results.offset().top;var o=n.offset().top;var s=u.$results.scrollTop()+(o-a);if(i===0){u.$results.scrollTop(0)}else if(o-a<0){u.$results.scrollTop(s)}});t.on("results:next",function(){var e=u.getHighlightedResults();var t=u.$results.find("[aria-selected]");var r=t.index(e);var i=r+1;if(i>=t.length){return}var n=t.eq(i);n.trigger("mouseenter");var a=u.$results.offset().top+u.$results.outerHeight(false);var o=n.offset().top+n.outerHeight(false);var s=u.$results.scrollTop()+o-a;if(i===0){u.$results.scrollTop(0)}else if(o>a){u.$results.scrollTop(s)}});t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")});t.on("results:message",function(e){u.displayMessage(e)});if(p.fn.mousewheel){this.$results.on("mousewheel",function(e){var t=u.$results.scrollTop();var r=u.$results.get(0).scrollHeight-t+e.deltaY;var i=e.deltaY>0&&t-e.deltaY<=0;var n=e.deltaY<0&&r<=u.$results.height();if(i){u.$results.scrollTop(0);e.preventDefault();e.stopPropagation()}else if(n){u.$results.scrollTop(u.$results.get(0).scrollHeight-u.$results.height());e.preventDefault();e.stopPropagation()}})}this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=p(this);var r=v.GetData(this,"data");if(t.attr("aria-selected")==="true"){if(u.options.get("multiple")){u.trigger("unselect",{originalEvent:e,data:r})}else{u.trigger("close",{})}return}u.trigger("select",{originalEvent:e,data:r})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=v.GetData(this,"data");u.getHighlightedResults().removeClass("select2-results__option--highlighted");u.trigger("results:focus",{data:t,element:p(this)})})};i.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e};i.prototype.destroy=function(){this.$results.remove()};i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(e.length===0){return}var t=this.$results.find("[aria-selected]");var r=t.index(e);var i=this.$results.offset().top;var n=e.offset().top;var a=this.$results.scrollTop()+(n-i);var o=n-i;a-=e.outerHeight(false)*2;if(r<=2){this.$results.scrollTop(0)}else if(o>this.$results.outerHeight()||o<0){this.$results.scrollTop(a)}};i.prototype.template=function(e,t){var r=this.options.get("templateResult");var i=this.options.get("escapeMarkup");var n=r(e,t);if(n==null){t.style.display="none"}else if(typeof n==="string"){t.innerHTML=i(n)}else{p(t).append(n)}};return i});t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e});t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,a,o){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}a.Extend(r,a.Observable);r.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(a.GetData(this.$element[0],"old-tabindex")!=null){this._tabindex=a.GetData(this.$element[0],"old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}e.attr("title",this.$element.attr("title"));e.attr("tabindex",this._tabindex);e.attr("aria-disabled","false");this.$selection=e;return e};r.prototype.bind=function(e,t){var r=this;var i=e.id+"-results";this.container=e;this.$selection.on("focus",function(e){r.trigger("focus",e)});this.$selection.on("blur",function(e){r._handleBlur(e)});this.$selection.on("keydown",function(e){r.trigger("keypress",e);if(e.which===o.SPACE){e.preventDefault()}});e.on("results:focus",function(e){r.$selection.attr("aria-activedescendant",e.data._resultId)});e.on("selection:update",function(e){r.update(e.data)});e.on("open",function(){r.$selection.attr("aria-expanded","true");r.$selection.attr("aria-owns",i);r._attachCloseHandler(e)});e.on("close",function(){r.$selection.attr("aria-expanded","false");r.$selection.removeAttr("aria-activedescendant");r.$selection.removeAttr("aria-owns");r.$selection.trigger("focus");r._detachCloseHandler(e)});e.on("enable",function(){r.$selection.attr("tabindex",r._tabindex);r.$selection.attr("aria-disabled","false")});e.on("disable",function(){r.$selection.attr("tabindex","-1");r.$selection.attr("aria-disabled","true")})};r.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){if(document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)){return}t.trigger("blur",e)},1)};r.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target);var r=t.closest(".select2");var i=n(".select2.select2-container--open");i.each(function(){if(this==r[0]){return}var e=a.GetData(this,"element");e.select2("close")})})};r.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)};r.prototype.position=function(e,t){var r=t.find(".selection");r.append(e)};r.prototype.destroy=function(){this._detachCloseHandler(this.container)};r.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")};r.prototype.isEnabled=function(){return!this.isDisabled()};r.prototype.isDisabled=function(){return this.options.get("disabled")};return r});t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,r,i){function n(){n.__super__.constructor.apply(this,arguments)}r.Extend(n,t);n.prototype.render=function(){var e=n.__super__.render.call(this);e.addClass("select2-selection--single");e.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return e};n.prototype.bind=function(t,e){var r=this;n.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",i);this.$selection.on("mousedown",function(e){if(e.which!==1){return}r.trigger("toggle",{originalEvent:e})});this.$selection.on("focus",function(e){});this.$selection.on("blur",function(e){});t.on("focus",function(e){if(!t.isOpen()){r.$selection.trigger("focus")}})};n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};n.prototype.display=function(e,t){var r=this.options.get("templateSelection");var i=this.options.get("escapeMarkup");return i(r(e,t))};n.prototype.selectionContainer=function(){return e("<span></span>")};n.prototype.update=function(e){if(e.length===0){this.clear();return}var t=e[0];var r=this.$selection.find(".select2-selection__rendered");var i=this.display(t,r);r.empty().append(i);var n=t.title||t.text;if(n){r.attr("title",n)}else{r.removeAttr("title")}};return n});t.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,e,u){function r(e,t){r.__super__.constructor.apply(this,arguments)}u.Extend(r,e);r.prototype.render=function(){var e=r.__super__.render.call(this);e.addClass("select2-selection--multiple");e.html('<ul class="select2-selection__rendered"></ul>');return e};r.prototype.bind=function(e,t){var n=this;r.__super__.bind.apply(this,arguments);this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})});this.$selection.on("click",".select2-selection__choice__remove",function(e){if(n.isDisabled()){return}var t=a(this);var r=t.parent();var i=u.GetData(r[0],"data");n.trigger("unselect",{originalEvent:e,data:i})})};r.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};r.prototype.display=function(e,t){var r=this.options.get("templateSelection");var i=this.options.get("escapeMarkup");return i(r(e,t))};r.prototype.selectionContainer=function(){var e=a('<li class="select2-selection__choice">'+'<span class="select2-selection__choice__remove" role="presentation">'+"&times;"+"</span>"+"</li>");return e};r.prototype.update=function(e){this.clear();if(e.length===0){return}var t=[];for(var r=0;r<e.length;r++){var i=e[r];var n=this.selectionContainer();var a=this.display(i,n);n.append(a);var o=i.title||i.text;if(o){n.attr("title",o)}u.StoreData(n[0],"data",i);t.push(n)}var s=this.$selection.find(".select2-selection__rendered");u.appendMany(s,t)};return r});t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,r){this.placeholder=this.normalizePlaceholder(r.get("placeholder"));e.call(this,t,r)}t.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};t.prototype.createPlaceholder=function(e,t){var r=this.selectionContainer();r.html(this.display(t));r.addClass("select2-selection__placeholder").removeClass("select2-selection__choice");return r};t.prototype.update=function(e,t){var r=t.length==1&&t[0].id!=this.placeholder.id;var i=t.length>1;if(i||r){return e.call(this,t)}this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)};return t});t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(n,i,s){function e(){}e.prototype.bind=function(e,t,r){var i=this;e.call(this,t,r);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)});t.on("keypress",function(e){i._handleKeyboardClear(e,t)})};e.prototype._handleClear=function(e,t){if(this.isDisabled()){return}var r=this.$selection.find(".select2-selection__clear");if(r.length===0){return}t.stopPropagation();var i=s.GetData(r[0],"data");var n=this.$element.val();this.$element.val(this.placeholder.id);var a={data:i};this.trigger("clear",a);if(a.prevented){this.$element.val(n);return}for(var o=0;o<i.length;o++){a={data:i[o]};this.trigger("unselect",a);if(a.prevented){this.$element.val(n);return}}this.$element.trigger("input").trigger("change");this.trigger("toggle",{})};e.prototype._handleKeyboardClear=function(e,t,r){if(r.isOpen()){return}if(t.which==i.DELETE||t.which==i.BACKSPACE){this._handleClear(t)}};e.prototype.update=function(e,t){e.call(this,t);if(this.$selection.find(".select2-selection__placeholder").length>0||t.length===0){return}var r=this.options.get("translations").get("removeAllItems");var i=n('<span class="select2-selection__clear" title="'+r()+'">'+"&times;"+"</span>");s.StoreData(i[0],"data",t);this.$selection.find(".select2-selection__rendered").prepend(i)};return e});t.define("select2/selection/search",["jquery","../utils","../keys"],function(i,s,u){function e(e,t,r){e.call(this,t,r)}e.prototype.render=function(e){var t=i('<li class="select2-search select2-search--inline">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</li>");this.$searchContainer=t;this.$search=t.find("input");var r=e.call(this);this._transferTabIndex();return r};e.prototype.bind=function(e,t,r){var n=this;var i=t.id+"-results";e.call(this,t,r);t.on("open",function(){n.$search.attr("aria-controls",i);n.$search.trigger("focus")});t.on("close",function(){n.$search.val("");n.$search.removeAttr("aria-controls");n.$search.removeAttr("aria-activedescendant");n.$search.trigger("focus")});t.on("enable",function(){n.$search.prop("disabled",false);n._transferTabIndex()});t.on("disable",function(){n.$search.prop("disabled",true)});t.on("focus",function(e){n.$search.trigger("focus")});t.on("results:focus",function(e){if(e.data._resultId){n.$search.attr("aria-activedescendant",e.data._resultId)}else{n.$search.removeAttr("aria-activedescendant")}});this.$selection.on("focusin",".select2-search--inline",function(e){n.trigger("focus",e)});this.$selection.on("focusout",".select2-search--inline",function(e){n._handleBlur(e)});this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation();n.trigger("keypress",e);n._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===u.BACKSPACE&&n.$search.val()===""){var r=n.$searchContainer.prev(".select2-selection__choice");if(r.length>0){var i=s.GetData(r[0],"data");n.searchRemoveChoice(i);e.preventDefault()}}});this.$selection.on("click",".select2-search--inline",function(e){if(n.$search.val()){e.stopPropagation()}});var a=document.documentMode;var o=a&&a<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(o){n.$selection.off("input.search input.searchcheck");return}n.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(o&&e.type==="input"){n.$selection.off("input.search input.searchcheck");return}var t=e.which;if(t==u.SHIFT||t==u.CTRL||t==u.ALT){return}if(t==u.TAB){return}n.handleSearch(e)})};e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)};e.prototype.update=function(e,t){var r=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");e.call(this,t);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(r){this.$search.trigger("focus")}};e.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()};e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(this.$search.attr("placeholder")!==""){e=this.$selection.find(".select2-selection__rendered").width()}else{var t=this.$search.val().length+1;e=t*.75+"em"}this.$search.css("width",e)};return e});t.define("select2/selection/eventRelay",["jquery"],function(o){function e(){}e.prototype.bind=function(e,t,r){var i=this;var n=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"];var a=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,r);t.on("*",function(e,t){if(o.inArray(e,n)===-1){return}t=t||{};var r=o.Event("select2:"+e,{params:t});i.$element.trigger(r);if(o.inArray(e,a)===-1){return}t.prevented=r.isDefaultPrevented()})};return e});t.define("select2/translation",["jquery","require"],function(t,r){function i(e){this.dict=e||{}}i.prototype.all=function(){return this.dict};i.prototype.get=function(e){return this.dict[e]};i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)};i._cache={};i.loadPath=function(e){if(!(e in i._cache)){var t=r(e);i._cache[e]=t}return new i(i._cache[e])};return i});t.define("select2/diacritics",[],function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"};return e});t.define("select2/data/base",["../utils"],function(i){function r(e,t){r.__super__.constructor.call(this)}i.Extend(r,i.Observable);r.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")};r.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")};r.prototype.bind=function(e,t){};r.prototype.destroy=function(){};r.prototype.generateResultId=function(e,t){var r=e.id+"-result-";r+=i.generateChars(4);if(t.id!=null){r+="-"+t.id.toString()}else{r+="-"+i.generateChars(4)}return r};return r});t.define("select2/data/select",["./base","../utils","jquery"],function(e,s,u){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}s.Extend(r,e);r.prototype.current=function(e){var r=[];var i=this;this.$element.find(":selected").each(function(){var e=u(this);var t=i.item(e);r.push(t)});e(r)};r.prototype.select=function(n){var a=this;n.selected=true;if(u(n.element).is("option")){n.element.selected=true;this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple")){this.current(function(e){var t=[];n=[n];n.push.apply(n,e);for(var r=0;r<n.length;r++){var i=n[r].id;if(u.inArray(i,t)===-1){t.push(i)}}a.$element.val(t);a.$element.trigger("input").trigger("change")})}else{var e=n.id;this.$element.val(e);this.$element.trigger("input").trigger("change")}};r.prototype.unselect=function(n){var a=this;if(!this.$element.prop("multiple")){return}n.selected=false;if(u(n.element).is("option")){n.element.selected=false;this.$element.trigger("input").trigger("change");return}this.current(function(e){var t=[];for(var r=0;r<e.length;r++){var i=e[r].id;if(i!==n.id&&u.inArray(i,t)===-1){t.push(i)}}a.$element.val(t);a.$element.trigger("input").trigger("change")})};r.prototype.bind=function(e,t){var r=this;this.container=e;e.on("select",function(e){r.select(e.data)});e.on("unselect",function(e){r.unselect(e.data)})};r.prototype.destroy=function(){this.$element.find("*").each(function(){s.RemoveData(this)})};r.prototype.query=function(i,e){var n=[];var a=this;var t=this.$element.children();t.each(function(){var e=u(this);if(!e.is("option")&&!e.is("optgroup")){return}var t=a.item(e);var r=a.matches(i,t);if(r!==null){n.push(r)}});e({results:n})};r.prototype.addOptions=function(e){s.appendMany(this.$element,e)};r.prototype.option=function(e){var t;if(e.children){t=document.createElement("optgroup");t.label=e.text}else{t=document.createElement("option");if(t.textContent!==undefined){t.textContent=e.text}else{t.innerText=e.text}}if(e.id!==undefined){t.value=e.id}if(e.disabled){t.disabled=true}if(e.selected){t.selected=true}if(e.title){t.title=e.title}var r=u(t);var i=this._normalizeItem(e);i.element=t;s.StoreData(t,"data",i);return r};r.prototype.item=function(e){var t={};t=s.GetData(e[0],"data");if(t!=null){return t}if(e.is("option")){t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")}}else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};var r=e.children("option");var i=[];for(var n=0;n<r.length;n++){var a=u(r[n]);var o=this.item(a);i.push(o)}t.children=i}t=this._normalizeItem(t);t.element=e[0];s.StoreData(e[0],"data",t);return t};r.prototype._normalizeItem=function(e){if(e!==Object(e)){e={id:e,text:e}}e=u.extend({},{text:""},e);var t={selected:false,disabled:false};if(e.id!=null){e.id=e.id.toString()}if(e.text!=null){e.text=e.text.toString()}if(e._resultId==null&&e.id&&this.container!=null){e._resultId=this.generateResultId(this.container,e)}return u.extend({},t,e)};r.prototype.matches=function(e,t){var r=this.options.get("matcher");return r(e,t)};return r});t.define("select2/data/array",["./select","../utils","jquery"],function(e,p,v){function i(e,t){this._dataToConvert=t.get("data")||[];i.__super__.constructor.call(this,e,t)}p.Extend(i,e);i.prototype.bind=function(e,t){i.__super__.bind.call(this,e,t);this.addOptions(this.convertToOptions(this._dataToConvert))};i.prototype.select=function(r){var e=this.$element.find("option").filter(function(e,t){return t.value==r.id.toString()});if(e.length===0){e=this.option(r);this.addOptions(e)}i.__super__.select.call(this,r)};i.prototype.convertToOptions=function(e){var t=this;var r=this.$element.find("option");var i=r.map(function(){return t.item(v(this)).id}).get();var n=[];function a(e){return function(){return v(this).val()==e.id}}for(var o=0;o<e.length;o++){var s=this._normalizeItem(e[o]);if(v.inArray(s.id,i)>=0){var u=r.filter(a(s));var l=this.item(u);var h=v.extend(true,{},s,l);var c=this.option(h);u.replaceWith(c);continue}var f=this.option(s);if(s.children){var d=this.convertToOptions(s.children);p.appendMany(f,d)}n.push(f)}return n};return i});t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function r(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}r.__super__.constructor.call(this,e,t)}t.Extend(r,e);r.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,r){var i=o.ajax(e);i.then(t);i.fail(r);return i}};return o.extend({},t,e,true)};r.prototype.processResults=function(e){return e};r.prototype.query=function(r,i){var e=[];var n=this;if(this._request!=null){if(o.isFunction(this._request.abort)){this._request.abort()}this._request=null}var t=o.extend({type:"GET"},this.ajaxOptions);if(typeof t.url==="function"){t.url=t.url.call(this.$element,r)}if(typeof t.data==="function"){t.data=t.data.call(this.$element,r)}function a(){var e=t.transport(t,function(e){var t=n.processResults(e,r);if(n.options.get("debug")&&window.console&&console.error){if(!t||!t.results||!o.isArray(t.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}i(t)},function(){if("status"in e&&(e.status===0||e.status==="0")){return}n.trigger("results:message",{message:"errorLoading"})});n._request=e}if(this.ajaxOptions.delay&&r.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(a,this.ajaxOptions.delay)}else{a()}};return r});t.define("select2/data/tags",["jquery"],function(h){function e(e,t,r){var i=r.get("tags");var n=r.get("createTag");if(n!==undefined){this.createTag=n}var a=r.get("insertTag");if(a!==undefined){this.insertTag=a}e.call(this,t,r);if(h.isArray(i)){for(var o=0;o<i.length;o++){var s=i[o];var u=this._normalizeItem(s);var l=this.option(u);this.$element.append(l)}}}e.prototype.query=function(e,c,f){var d=this;this._removeOldTags();if(c.term==null||c.page!=null){e.call(this,c,f);return}function p(e,t){var r=e.results;for(var i=0;i<r.length;i++){var n=r[i];var a=n.children!=null&&!p({results:n.children},true);var o=(n.text||"").toUpperCase();var s=(c.term||"").toUpperCase();var u=o===s;if(u||a){if(t){return false}e.data=r;f(e);return}}if(t){return true}var l=d.createTag(c);if(l!=null){var h=d.option(l);h.attr("data-select2-tag",true);d.addOptions([h]);d.insertTag(r,l)}e.results=r;f(e)}e.call(this,c,p)};e.prototype.createTag=function(e,t){var r=h.trim(t.term);if(r===""){return null}return{id:r,text:r}};e.prototype.insertTag=function(e,t,r){t.unshift(r)};e.prototype._removeOldTags=function(e){var t=this.$element.find("option[data-select2-tag]");t.each(function(){if(this.selected){return}h(this).remove()})};return e});t.define("select2/data/tokenizer",["jquery"],function(f){function e(e,t,r){var i=r.get("tokenizer");if(i!==undefined){this.tokenizer=i}e.call(this,t,r)}e.prototype.bind=function(e,t,r){e.call(this,t,r);this.$search=t.dropdown.$search||t.selection.$search||r.find(".select2-search__field")};e.prototype.query=function(e,t,r){var n=this;function i(e){var t=n._normalizeItem(e);var r=n.$element.find("option").filter(function(){return f(this).val()===t.id});if(!r.length){var i=n.option(t);i.attr("data-select2-tag",true);n._removeOldTags();n.addOptions([i])}a(t)}function a(e){n.trigger("select",{data:e})}t.term=t.term||"";var o=this.tokenizer(t,this.options,i);if(o.term!==t.term){if(this.$search.length){this.$search.val(o.term);this.$search.trigger("focus")}t.term=o.term}e.call(this,t,r)};e.prototype.tokenizer=function(e,t,r,i){var n=r.get("tokenSeparators")||[];var a=t.term;var o=0;var s=this.createTag||function(e){return{id:e.term,text:e.term}};while(o<a.length){var u=a[o];if(f.inArray(u,n)===-1){o++;continue}var l=a.substr(0,o);var h=f.extend({},t,{term:l});var c=s(h);if(c==null){o++;continue}i(c);a=a.substr(o+1)||"";o=0}return{term:a}};return e});t.define("select2/data/minimumInputLength",[],function(){function e(e,t,r){this.minimumInputLength=r.get("minimumInputLength");e.call(this,t,r)}e.prototype.query=function(e,t,r){t.term=t.term||"";if(t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}e.call(this,t,r)};return e});t.define("select2/data/maximumInputLength",[],function(){function e(e,t,r){this.maximumInputLength=r.get("maximumInputLength");e.call(this,t,r)}e.prototype.query=function(e,t,r){t.term=t.term||"";if(this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}e.call(this,t,r)};return e});t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,r){this.maximumSelectionLength=r.get("maximumSelectionLength");e.call(this,t,r)}e.prototype.bind=function(e,t,r){var i=this;e.call(this,t,r);t.on("select",function(){i._checkIfMaximumSelected()})};e.prototype.query=function(e,t,r){var i=this;this._checkIfMaximumSelected(function(){e.call(i,t,r)})};e.prototype._checkIfMaximumSelected=function(e,r){var i=this;this.current(function(e){var t=e!=null?e.length:0;if(i.maximumSelectionLength>0&&t>=i.maximumSelectionLength){i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}});return}if(r){r()}})};return e});t.define("select2/dropdown",["jquery","./utils"],function(t,e){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}e.Extend(r,e.Observable);r.prototype.render=function(){var e=t('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");e.attr("dir",this.options.get("dir"));this.$dropdown=e;return e};r.prototype.bind=function(){};r.prototype.position=function(e,t){};r.prototype.destroy=function(){this.$dropdown.remove()};return r});t.define("select2/dropdown/search",["jquery","../utils"],function(a,e){function t(){}t.prototype.render=function(e){var t=e.call(this);var r=a('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</span>");this.$searchContainer=r;this.$search=r.find("input");t.prepend(r);return t};t.prototype.bind=function(e,t,r){var i=this;var n=t.id+"-results";e.call(this,t,r);this.$search.on("keydown",function(e){i.trigger("keypress",e);i._keyUpPrevented=e.isDefaultPrevented()});this.$search.on("input",function(e){a(this).off("keyup")});this.$search.on("keyup input",function(e){i.handleSearch(e)});t.on("open",function(){i.$search.attr("tabindex",0);i.$search.attr("aria-controls",n);i.$search.trigger("focus");window.setTimeout(function(){i.$search.trigger("focus")},0)});t.on("close",function(){i.$search.attr("tabindex",-1);i.$search.removeAttr("aria-controls");i.$search.removeAttr("aria-activedescendant");i.$search.val("");i.$search.trigger("blur")});t.on("focus",function(){if(!t.isOpen()){i.$search.trigger("focus")}});t.on("results:all",function(e){if(e.query.term==null||e.query.term===""){var t=i.showSearch(e);if(t){i.$searchContainer.removeClass("select2-search--hide")}else{i.$searchContainer.addClass("select2-search--hide")}}});t.on("results:focus",function(e){if(e.data._resultId){i.$search.attr("aria-activedescendant",e.data._resultId)}else{i.$search.removeAttr("aria-activedescendant")}})};t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};t.prototype.showSearch=function(e,t){return true};return t});t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,r,i){this.placeholder=this.normalizePlaceholder(r.get("placeholder"));e.call(this,t,r,i)}e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results);e.call(this,t)};e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.removePlaceholder=function(e,t){var r=t.slice(0);for(var i=t.length-1;i>=0;i--){var n=t[i];if(this.placeholder.id===n.id){r.splice(i,1)}}return r};return e});t.define("select2/dropdown/infiniteScroll",["jquery"],function(i){function e(e,t,r,i){this.lastParams={};e.call(this,t,r,i);this.$loadingMore=this.createLoadingMore();this.loading=false}e.prototype.append=function(e,t){this.$loadingMore.remove();this.loading=false;e.call(this,t);if(this.showLoadingMore(t)){this.$results.append(this.$loadingMore);this.loadMoreIfNeeded()}};e.prototype.bind=function(e,t,r){var i=this;e.call(this,t,r);t.on("query",function(e){i.lastParams=e;i.loading=true});t.on("query:append",function(e){i.lastParams=e;i.loading=true});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))};e.prototype.loadMoreIfNeeded=function(){var e=i.contains(document.documentElement,this.$loadingMore[0]);if(this.loading||!e){return}var t=this.$results.offset().top+this.$results.outerHeight(false);var r=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(false);if(t+50>=r){this.loadMore()}};e.prototype.loadMore=function(){this.loading=true;var e=i.extend({},{page:1},this.lastParams);e.page++;this.trigger("query:append",e)};e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more};e.prototype.createLoadingMore=function(){var e=i("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="option" aria-disabled="true"></li>');var t=this.options.get("translations").get("loadingMore");e.html(t(this.lastParams));return e};return e});t.define("select2/dropdown/attachBody",["jquery","../utils"],function(d,s){function e(e,t,r){this.$dropdownParent=d(r.get("dropdownParent")||document.body);e.call(this,t,r)}e.prototype.bind=function(e,t,r){var i=this;e.call(this,t,r);t.on("open",function(){i._showDropdown();i._attachPositioningHandler(t);i._bindContainerResultHandlers(t)});t.on("close",function(){i._hideDropdown();i._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})};e.prototype.destroy=function(e){e.call(this);this.$dropdownContainer.remove()};e.prototype.position=function(e,t,r){t.attr("class",r.attr("class"));t.removeClass("select2");t.addClass("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=r};e.prototype.render=function(e){var t=d("<span></span>");var r=e.call(this);t.append(r);this.$dropdownContainer=t;return t};e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()};e.prototype._bindContainerResultHandlers=function(e,t){if(this._containerResultsHandlersBound){return}var r=this;t.on("results:all",function(){r._positionDropdown();r._resizeDropdown()});t.on("results:append",function(){r._positionDropdown();r._resizeDropdown()});t.on("results:message",function(){r._positionDropdown();r._resizeDropdown()});t.on("select",function(){r._positionDropdown();r._resizeDropdown()});t.on("unselect",function(){r._positionDropdown();r._resizeDropdown()});this._containerResultsHandlersBound=true};e.prototype._attachPositioningHandler=function(e,t){var r=this;var i="scroll.select2."+t.id;var n="resize.select2."+t.id;var a="orientationchange.select2."+t.id;var o=this.$container.parents().filter(s.hasScroll);o.each(function(){s.StoreData(this,"select2-scroll-position",{x:d(this).scrollLeft(),y:d(this).scrollTop()})});o.on(i,function(e){var t=s.GetData(this,"select2-scroll-position");d(this).scrollTop(t.y)});d(window).on(i+" "+n+" "+a,function(e){r._positionDropdown();r._resizeDropdown()})};e.prototype._detachPositioningHandler=function(e,t){var r="scroll.select2."+t.id;var i="resize.select2."+t.id;var n="orientationchange.select2."+t.id;var a=this.$container.parents().filter(s.hasScroll);a.off(r);d(window).off(r+" "+i+" "+n)};e.prototype._positionDropdown=function(){var e=d(window);var t=this.$dropdown.hasClass("select2-dropdown--above");var r=this.$dropdown.hasClass("select2-dropdown--below");var i=null;var n=this.$container.offset();n.bottom=n.top+this.$container.outerHeight(false);var a={height:this.$container.outerHeight(false)};a.top=n.top;a.bottom=n.top+a.height;var o={height:this.$dropdown.outerHeight(false)};var s={top:e.scrollTop(),bottom:e.scrollTop()+e.height()};var u=s.top<n.top-o.height;var l=s.bottom>n.bottom+o.height;var h={left:n.left,top:a.bottom};var c=this.$dropdownParent;if(c.css("position")==="static"){c=c.offsetParent()}var f={top:0,left:0};if(d.contains(document.body,c[0])||c[0].isConnected){f=c.offset()}h.top-=f.top;h.left-=f.left;if(!t&&!r){i="below"}if(!l&&u&&!t){i="above"}else if(!u&&l&&t){i="below"}if(i=="above"||t&&i!=="below"){h.top=a.top-f.top-o.height}if(i!=null){this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i);this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)}this.$dropdownContainer.css(h)};e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){e.minWidth=e.width;e.position="relative";e.width="auto"}this.$dropdown.css(e)};e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return e});t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(e){var t=0;for(var r=0;r<e.length;r++){var i=e[r];if(i.children){t+=n(i.children)}else{t++}}return t}function e(e,t,r,i){this.minimumResultsForSearch=r.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}e.call(this,t,r,i)}e.prototype.showSearch=function(e,t){if(n(t.data.results)<this.minimumResultsForSearch){return false}return e.call(this,t)};return e});t.define("select2/dropdown/selectOnClose",["../utils"],function(a){function e(){}e.prototype.bind=function(e,t,r){var i=this;e.call(this,t,r);t.on("close",function(e){i._handleSelectOnClose(e)})};e.prototype._handleSelectOnClose=function(e,t){if(t&&t.originalSelect2Event!=null){var r=t.originalSelect2Event;if(r._type==="select"||r._type==="unselect"){return}}var i=this.getHighlightedResults();if(i.length<1){return}var n=a.GetData(i[0],"data");if(n.element!=null&&n.element.selected||n.element==null&&n.selected){return}this.trigger("select",{data:n})};return e});t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}e.prototype.bind=function(e,t,r){var i=this;e.call(this,t,r);t.on("select",function(e){i._selectTriggered(e)});t.on("unselect",function(e){i._selectTriggered(e)})};e.prototype._selectTriggered=function(e,t){var r=t.originalEvent;if(r&&(r.ctrlKey||r.metaKey)){return}this.trigger("close",{originalEvent:r,originalSelect2Event:t})};return e});t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum;var r="Please delete "+t+" character";if(t!=1){r+="s"}return r},inputTooShort:function(e){var t=e.minimum-e.input.length;var r="Please enter "+t+" or more characters";return r},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";if(e.maximum!=1){t+="s"}return t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}});t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(h,l,c,f,d,p,v,m,g,y,o,r,_,b,x,w,E,S,T,P,A,I,O,M,C,D,R,L,e){function t(){this.reset()}t.prototype.apply=function(e){e=h.extend(true,{},this.defaults,e);if(e.dataAdapter==null){if(e.ajax!=null){e.dataAdapter=x}else if(e.data!=null){e.dataAdapter=b}else{e.dataAdapter=_}if(e.minimumInputLength>0){e.dataAdapter=y.Decorate(e.dataAdapter,S)}if(e.maximumInputLength>0){e.dataAdapter=y.Decorate(e.dataAdapter,T)}if(e.maximumSelectionLength>0){e.dataAdapter=y.Decorate(e.dataAdapter,P)}if(e.tags){e.dataAdapter=y.Decorate(e.dataAdapter,w)}if(e.tokenSeparators!=null||e.tokenizer!=null){e.dataAdapter=y.Decorate(e.dataAdapter,E)}if(e.query!=null){var t=l(e.amdBase+"compat/query");e.dataAdapter=y.Decorate(e.dataAdapter,t)}if(e.initSelection!=null){var r=l(e.amdBase+"compat/initSelection");e.dataAdapter=y.Decorate(e.dataAdapter,r)}}if(e.resultsAdapter==null){e.resultsAdapter=c;if(e.ajax!=null){e.resultsAdapter=y.Decorate(e.resultsAdapter,M)}if(e.placeholder!=null){e.resultsAdapter=y.Decorate(e.resultsAdapter,O)}if(e.selectOnClose){e.resultsAdapter=y.Decorate(e.resultsAdapter,R)}}if(e.dropdownAdapter==null){if(e.multiple){e.dropdownAdapter=A}else{var i=y.Decorate(A,I);e.dropdownAdapter=i}if(e.minimumResultsForSearch!==0){e.dropdownAdapter=y.Decorate(e.dropdownAdapter,D)}if(e.closeOnSelect){e.dropdownAdapter=y.Decorate(e.dropdownAdapter,L)}if(e.dropdownCssClass!=null||e.dropdownCss!=null||e.adaptDropdownCssClass!=null){var n=l(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=y.Decorate(e.dropdownAdapter,n)}e.dropdownAdapter=y.Decorate(e.dropdownAdapter,C)}if(e.selectionAdapter==null){if(e.multiple){e.selectionAdapter=d}else{e.selectionAdapter=f}if(e.placeholder!=null){e.selectionAdapter=y.Decorate(e.selectionAdapter,p)}if(e.allowClear){e.selectionAdapter=y.Decorate(e.selectionAdapter,v)}if(e.multiple){e.selectionAdapter=y.Decorate(e.selectionAdapter,m)}if(e.containerCssClass!=null||e.containerCss!=null||e.adaptContainerCssClass!=null){var a=l(e.amdBase+"compat/containerCss");e.selectionAdapter=y.Decorate(e.selectionAdapter,a)}e.selectionAdapter=y.Decorate(e.selectionAdapter,g)}e.language=this._resolveLanguage(e.language);e.language.push("en");var o=[];for(var s=0;s<e.language.length;s++){var u=e.language[s];if(o.indexOf(u)===-1){o.push(u)}}e.language=o;e.translations=this._processTranslations(e.language,e.debug);return e};t.prototype.reset=function(){function u(e){function t(e){return r[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function l(e,t){if(h.trim(e.term)===""){return t}if(t.children&&t.children.length>0){var r=h.extend(true,{},t);for(var i=t.children.length-1;i>=0;i--){var n=t.children[i];var a=l(e,n);if(a==null){r.children.splice(i,1)}}if(r.children.length>0){return r}return l(e,r)}var o=u(t.text).toUpperCase();var s=u(e.term).toUpperCase();if(o.indexOf(s)>-1){return t}return null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:y.escapeMarkup,language:{},matcher:l,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,scrollAfterSelect:false,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}};t.prototype.applyFromElement=function(e,t){var r=e.language;var i=this.defaults.language;var n=t.prop("lang");var a=t.closest("[lang]").prop("lang");var o=Array.prototype.concat.call(this._resolveLanguage(n),this._resolveLanguage(r),this._resolveLanguage(i),this._resolveLanguage(a));e.language=o;return e};t.prototype._resolveLanguage=function(e){if(!e){return[]}if(h.isEmptyObject(e)){return[]}if(h.isPlainObject(e)){return[e]}var t;if(!h.isArray(e)){t=[e]}else{t=e}var r=[];for(var i=0;i<t.length;i++){r.push(t[i]);if(typeof t[i]==="string"&&t[i].indexOf("-")>0){var n=t[i].split("-");var a=n[0];r.push(a)}}return r};t.prototype._processTranslations=function(e,t){var r=new o;for(var i=0;i<e.length;i++){var n=new o;var a=e[i];if(typeof a==="string"){try{n=o.loadPath(a)}catch(e){try{a=this.defaults.amdLanguageBase+a;n=o.loadPath(a)}catch(e){if(t&&window.console&&console.warn){console.warn('Select2: The language file for "'+a+'" could '+"not be automatically loaded. A fallback will be used instead.")}}}}else if(h.isPlainObject(a)){n=new o(a)}else{n=a}r.extend(n)}return r};t.prototype.set=function(e,t){var r=h.camelCase(e);var i={};i[r]=t;var n=y._convertData(i);h.extend(true,this.defaults,n)};var i=new t;return i});t.define("select2/options",["require","jquery","./defaults","./utils"],function(i,f,n,d){function e(e,t){this.options=e;if(t!=null){this.fromElement(t)}if(t!=null){this.options=n.applyFromElement(this.options,t)}this.options=n.apply(this.options);if(t&&t.is("input")){var r=i(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,r)}}e.prototype.fromElement=function(e){var t=["select2"];if(this.options.multiple==null){this.options.multiple=e.prop("multiple")}if(this.options.disabled==null){this.options.disabled=e.prop("disabled")}if(this.options.dir==null){if(e.prop("dir")){this.options.dir=e.prop("dir")}else if(e.closest("[dir]").prop("dir")){this.options.dir=e.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}e.prop("disabled",this.options.disabled);e.prop("multiple",this.options.multiple);if(d.GetData(e[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}d.StoreData(e[0],"data",d.GetData(e[0],"select2Tags"));d.StoreData(e[0],"tags",true)}if(d.GetData(e[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}e.attr("ajax--url",d.GetData(e[0],"ajaxUrl"));d.StoreData(e[0],"ajax-Url",d.GetData(e[0],"ajaxUrl"))}var r={};function i(e,t){return t.toUpperCase()}for(var n=0;n<e[0].attributes.length;n++){var a=e[0].attributes[n].name;var o="data-";if(a.substr(0,o.length)==o){var s=a.substring(o.length);var u=d.GetData(e[0],s);var l=s.replace(/-([a-z])/g,i);r[l]=u}}if(f.fn.jquery&&f.fn.jquery.substr(0,2)=="1."&&e[0].dataset){r=f.extend(true,{},e[0].dataset,r)}var h=f.extend(true,{},d.GetData(e[0]),r);h=d._convertData(h);for(var c in h){if(f.inArray(c,t)>-1){continue}if(f.isPlainObject(this.options[c])){f.extend(this.options[c],h[c])}else{this.options[c]=h[c]}}return this};e.prototype.get=function(e){return this.options[e]};e.prototype.set=function(e,t){this.options[e]=t};return e});t.define("select2/core",["jquery","./options","./utils","./keys"],function(o,l,h,i){var c=function(e,t){if(h.GetData(e[0],"select2")!=null){h.GetData(e[0],"select2").destroy()}this.$element=e;this.id=this._generateId(e);t=t||{};this.options=new l(t,e);c.__super__.constructor.call(this);var r=e.attr("tabindex")||0;h.StoreData(e[0],"old-tabindex",r);e.attr("tabindex","-1");var i=this.options.get("dataAdapter");this.dataAdapter=new i(e,this.options);var n=this.render();this._placeContainer(n);var a=this.options.get("selectionAdapter");this.selection=new a(e,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,n);var o=this.options.get("dropdownAdapter");this.dropdown=new o(e,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,n);var s=this.options.get("resultsAdapter");this.results=new s(e,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(e){u.trigger("selection:update",{data:e})});e.addClass("select2-hidden-accessible");e.attr("aria-hidden","true");this._syncAttributes();h.StoreData(e[0],"select2",this);e.data("select2",this)};h.Extend(c,h.Observable);c.prototype._generateId=function(e){var t="";if(e.attr("id")!=null){t=e.attr("id")}else if(e.attr("name")!=null){t=e.attr("name")+"-"+h.generateChars(2)}else{t=h.generateChars(4)}t=t.replace(/(:|\.|\[|\]|,)/g,"");t="select2-"+t;return t};c.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));if(t!=null){e.css("width",t)}};c.prototype._resolveWidth=function(e,t){var r=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(t=="resolve"){var i=this._resolveWidth(e,"style");if(i!=null){return i}return this._resolveWidth(e,"element")}if(t=="element"){var n=e.outerWidth(false);if(n<=0){return"auto"}return n+"px"}if(t=="style"){var a=e.attr("style");if(typeof a!=="string"){return null}var o=a.split(";");for(var s=0,u=o.length;s<u;s=s+1){var l=o[s].replace(/\s/g,"");var h=l.match(r);if(h!==null&&h.length>=1){return h[1]}}return null}if(t=="computedstyle"){var c=window.getComputedStyle(e[0]);return c.width}return t};c.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};c.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})});this.$element.on("focus.select2",function(e){t.trigger("focus",e)});this._syncA=h.bind(this._syncAttributes,this);this._syncS=h.bind(this._syncSubtree,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent("onpropertychange",this._syncA)}var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(e!=null){this._observer=new e(function(e){t._syncA();t._syncS(null,e)});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})}else if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",t._syncA,false);this.$element[0].addEventListener("DOMNodeInserted",t._syncS,false);this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,false)}};c.prototype._registerDataEvents=function(){var r=this;this.dataAdapter.on("*",function(e,t){r.trigger(e,t)})};c.prototype._registerSelectionEvents=function(){var r=this;var i=["toggle","focus"];this.selection.on("toggle",function(){r.toggleDropdown()});this.selection.on("focus",function(e){r.focus(e)});this.selection.on("*",function(e,t){if(o.inArray(e,i)!==-1){return}r.trigger(e,t)})};c.prototype._registerDropdownEvents=function(){var r=this;this.dropdown.on("*",function(e,t){r.trigger(e,t)})};c.prototype._registerResultsEvents=function(){var r=this;this.results.on("*",function(e,t){r.trigger(e,t)})};c.prototype._registerEvents=function(){var r=this;this.on("open",function(){r.$container.addClass("select2-container--open")});this.on("close",function(){r.$container.removeClass("select2-container--open")});this.on("enable",function(){r.$container.removeClass("select2-container--disabled")});this.on("disable",function(){r.$container.addClass("select2-container--disabled")});this.on("blur",function(){r.$container.removeClass("select2-container--focus")});this.on("query",function(t){if(!r.isOpen()){r.trigger("open",{})}this.dataAdapter.query(t,function(e){r.trigger("results:all",{data:e,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(e){r.trigger("results:append",{data:e,query:t})})});this.on("keypress",function(e){var t=e.which;if(r.isOpen()){if(t===i.ESC||t===i.TAB||t===i.UP&&e.altKey){r.close(e);e.preventDefault()}else if(t===i.ENTER){r.trigger("results:select",{});e.preventDefault()}else if(t===i.SPACE&&e.ctrlKey){r.trigger("results:toggle",{});e.preventDefault()}else if(t===i.UP){r.trigger("results:previous",{});e.preventDefault()}else if(t===i.DOWN){r.trigger("results:next",{});e.preventDefault()}}else{if(t===i.ENTER||t===i.SPACE||t===i.DOWN&&e.altKey){r.open();e.preventDefault()}}})};c.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.isDisabled()){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};c.prototype._isChangeMutation=function(e,t){var r=false;var i=this;if(e&&e.target&&(e.target.nodeName!=="OPTION"&&e.target.nodeName!=="OPTGROUP")){return}if(!t){r=true}else if(t.addedNodes&&t.addedNodes.length>0){for(var n=0;n<t.addedNodes.length;n++){var a=t.addedNodes[n];if(a.selected){r=true}}}else if(t.removedNodes&&t.removedNodes.length>0){r=true}else if(o.isArray(t)){o.each(t,function(e,t){if(i._isChangeMutation(e,t)){r=true;return false}})}return r};c.prototype._syncSubtree=function(e,t){var r=this._isChangeMutation(e,t);var i=this;if(r){this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}};c.prototype.trigger=function(e,t){var r=c.__super__.trigger;var i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(t===undefined){t={}}if(e in i){var n=i[e];var a={prevented:false,name:e,args:t};r.call(this,n,a);if(a.prevented){t.prevented=true;return}}r.call(this,e,t)};c.prototype.toggleDropdown=function(){if(this.isDisabled()){return}if(this.isOpen()){this.close()}else{this.open()}};c.prototype.open=function(){if(this.isOpen()){return}if(this.isDisabled()){return}this.trigger("query",{})};c.prototype.close=function(e){if(!this.isOpen()){return}this.trigger("close",{originalEvent:e})};c.prototype.isEnabled=function(){return!this.isDisabled()};c.prototype.isDisabled=function(){return this.options.get("disabled")};c.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")};c.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")};c.prototype.focus=function(e){if(this.hasFocus()){return}this.$container.addClass("select2-container--focus");this.trigger("focus",{})};c.prototype.enable=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(e==null||e.length===0){e=[true]}var t=!e[0];this.$element.prop("disabled",t)};c.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var t=[];this.dataAdapter.current(function(e){t=e});return t};c.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(e==null||e.length===0){return this.$element.val()}var t=e[0];if(o.isArray(t)){t=o.map(t,function(e){return e.toString()})}this.$element.val(t).trigger("input").trigger("change")};c.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent("onpropertychange",this._syncA)}if(this._observer!=null){this._observer.disconnect();this._observer=null}else if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._syncA,false);this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,false);this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,false)}this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",h.GetData(this.$element[0],"old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");h.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};c.prototype.render=function(){var e=o('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");e.attr("dir",this.options.get("dir"));this.$container=e;this.$container.addClass("select2-container--"+this.options.get("theme"));h.StoreData(e[0],"element",this.$element);return e};return c});t.define("jquery-mousewheel",["jquery"],function(e){return e});t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(n,e,a,t,o){if(n.fn.select2==null){var s=["open","close","destroy"];n.fn.select2=function(r){r=r||{};if(typeof r==="object"){this.each(function(){var e=n.extend(true,{},r);var t=new a(n(this),e)});return this}else if(typeof r==="string"){var t;var i=Array.prototype.slice.call(arguments,1);this.each(function(){var e=o.GetData(this,"select2");if(e==null&&window.console&&console.error){console.error("The select2('"+r+"') method was called on an "+"element that is not using Select2.")}t=e[r].apply(e,i)});if(n.inArray(r,s)>-1){return this}return t}else{throw new Error("Invalid arguments for Select2: "+r)}}}if(n.fn.select2.defaults==null){n.fn.select2.defaults=t}return a});return{define:t.define,require:t.require}}();var t=e.require("jquery.select2");r.fn.select2.amd=e;return t})},{jquery:41}],74:[function(e,t,r){"use strict";var i;var d;var p=0;function v(e){return e>=48&&e<=57}function n(e,t){var r=(e+="").length;var i=(t+="").length;var n=0;var a=0;while(n<r&&a<i){var o=e.charCodeAt(n);var s=t.charCodeAt(a);if(v(o)){if(!v(s)){return o-s}var u=n;var l=a;while(o===48&&++u<r){o=e.charCodeAt(u)}while(s===48&&++l<i){s=t.charCodeAt(l)}var h=u;var c=l;while(h<r&&v(e.charCodeAt(h))){++h}while(c<i&&v(t.charCodeAt(c))){++c}var f=h-u-c+l;if(f){return f}while(u<h){f=e.charCodeAt(u++)-t.charCodeAt(l++);if(f){return f}}n=h;a=c;continue}if(o!==s){if(o<p&&s<p&&d[o]!==-1&&d[s]!==-1){return d[o]-d[s]}return o-s}++n;++a}if(n>=r&&a<i&&r>=i){return-1}if(a>=i&&n<r&&i>=r){return 1}return r-i}n.caseInsensitive=n.i=function(e,t){return n((""+e).toLowerCase(),(""+t).toLowerCase())};Object.defineProperties(n,{alphabet:{get:function(){return i},set:function(e){i=e;d=[];var t=0;if(i){for(;t<i.length;t++){d[i.charCodeAt(t)]=t}}p=d.length;for(t=0;t<p;t++){if(d[t]===undefined){d[t]=-1}}}}});t.exports=n},{}],75:[function(u,e,l){(function(i,s){(function(){var e=u("process/browser.js").nextTick;var t=Function.prototype.apply;var n=Array.prototype.slice;var a={};var o=0;l.setTimeout=function(){return new r(t.call(setTimeout,window,arguments),clearTimeout)};l.setInterval=function(){return new r(t.call(setInterval,window,arguments),clearInterval)};l.clearTimeout=l.clearInterval=function(e){e.close()};function r(e,t){this._id=e;this._clearFn=t}r.prototype.unref=r.prototype.ref=function(){};r.prototype.close=function(){this._clearFn.call(window,this._id)};l.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};l.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};l._unrefActive=l.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};l.setImmediate=typeof i==="function"?i:function(t){var r=o++;var i=arguments.length<2?false:n.call(arguments,1);a[r]=true;e(function e(){if(a[r]){if(i){t.apply(null,i)}else{t.call(null)}l.clearImmediate(r)}});return r};l.clearImmediate=typeof s==="function"?s:function(e){delete a[e]}}).call(this)}).call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":67,timers:75}],76:[function(e,V,t){(function(f){var i=/^\s+/,n=/\s+$/,a=0,o=f.round,l=f.min,h=f.max,e=f.random;function c(e,t){e=e?e:"";t=t||{};if(e instanceof c){return e}if(!(this instanceof c)){return new c(e,t)}var r=s(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=o(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=o(this._r)}if(this._g<1){this._g=o(this._g)}if(this._b<1){this._b=o(this._b)}this._ok=r.ok;this._tc_id=a++}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var t,r,i,n,a,o;t=e.r/255;r=e.g/255;i=e.b/255;if(t<=.03928){n=t/12.92}else{n=f.pow((t+.055)/1.055,2.4)}if(r<=.03928){a=r/12.92}else{a=f.pow((r+.055)/1.055,2.4)}if(i<=.03928){o=i/12.92}else{o=f.pow((i+.055)/1.055,2.4)}return.2126*n+.7152*a+.0722*o},setAlpha:function(e){this._a=L(e);this._roundA=o(100*this._a)/100;return this},toHsv:function(){var e=v(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=v(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),i=o(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=d(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=d(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),i=o(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return r(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(N(this._r,255)*100)+"%",g:o(N(this._g,255)*100)+"%",b:o(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(N(this._r,255)*100)+"%, "+o(N(this._g,255)*100)+"%, "+o(N(this._b,255)*100)+"%)":"rgba("+o(N(this._r,255)*100)+"%, "+o(N(this._g,255)*100)+"%, "+o(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return D[t(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a);var r=t;var i=this._gradientType?"GradientType = 1, ":"";if(e){var n=c(e);r="#"+g(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var i=this._a<1&&this._a>=0;var n=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(n){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(P,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}};c.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var i in e){if(e.hasOwnProperty(i)){if(i==="a"){r[i]=e[i]}else{r[i]=H(e[i])}}}e=r}return c(e,t)};function s(e){var t={r:0,g:0,b:0};var r=1;var i=null;var n=null;var a=null;var o=false;var s=false;if(typeof e=="string"){e=Y(e)}if(typeof e=="object"){if(W(e.r)&&W(e.g)&&W(e.b)){t=u(e.r,e.g,e.b);o=true;s=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(W(e.h)&&W(e.s)&&W(e.v)){i=H(e.s);n=H(e.v);t=m(e.h,i,n);o=true;s="hsv"}else if(W(e.h)&&W(e.s)&&W(e.l)){i=H(e.s);a=H(e.l);t=p(e.h,i,a);o=true;s="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=L(r);return{ok:o,format:e.format||s,r:l(255,h(t.r,0)),g:l(255,h(t.g,0)),b:l(255,h(t.b,0)),a:r}}function u(e,t,r){return{r:N(e,255)*255,g:N(t,255)*255,b:N(r,255)*255}}function d(e,t,r){e=N(e,255);t=N(t,255);r=N(r,255);var i=h(e,t,r),n=l(e,t,r);var a,o,s=(i+n)/2;if(i==n){a=o=0}else{var u=i-n;o=s>.5?u/(2-i-n):u/(i+n);switch(i){case e:a=(t-r)/u+(t<r?6:0);break;case t:a=(r-e)/u+2;break;case r:a=(e-t)/u+4;break}a/=6}return{h:a,s:o,l:s}}function p(e,t,r){var i,n,a;e=N(e,360);t=N(t,100);r=N(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){i=n=a=r}else{var s=r<.5?r*(1+t):r+t-r*t;var u=2*r-s;i=o(u,s,e+1/3);n=o(u,s,e);a=o(u,s,e-1/3)}return{r:i*255,g:n*255,b:a*255}}function v(e,t,r){e=N(e,255);t=N(t,255);r=N(r,255);var i=h(e,t,r),n=l(e,t,r);var a,o,s=i;var u=i-n;o=i===0?0:u/i;if(i==n){a=0}else{switch(i){case e:a=(t-r)/u+(t<r?6:0);break;case t:a=(r-e)/u+2;break;case r:a=(e-t)/u+4;break}a/=6}return{h:a,s:o,v:s}}function m(e,t,r){e=N(e,360)*6;t=N(t,100);r=N(r,100);var i=f.floor(e),n=e-i,a=r*(1-t),o=r*(1-n*t),s=r*(1-(1-n)*t),u=i%6,l=[r,o,a,a,s,r][u],h=[s,r,r,o,a,a][u],c=[a,a,s,r,r,o][u];return{r:l*255,g:h*255,b:c*255}}function t(e,t,r,i){var n=[U(o(e).toString(16)),U(o(t).toString(16)),U(o(r).toString(16))];if(i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)){return n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)}return n.join("")}function r(e,t,r,i,n){var a=[U(o(e).toString(16)),U(o(t).toString(16)),U(o(r).toString(16)),U(G(i))];if(n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)){return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0)}return a.join("")}function g(e,t,r,i){var n=[U(G(i)),U(o(e).toString(16)),U(o(t).toString(16)),U(o(r).toString(16))];return n.join("")}c.equals=function(e,t){if(!e||!t){return false}return c(e).toRgbString()==c(t).toRgbString()};c.random=function(){return c.fromRatio({r:e(),g:e(),b:e()})};function y(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.s-=t/100;r.s=k(r.s);return c(r)}function _(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.s+=t/100;r.s=k(r.s);return c(r)}function b(e){return c(e).desaturate(100)}function x(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.l+=t/100;r.l=k(r.l);return c(r)}function w(e,t){t=t===0?0:t||10;var r=c(e).toRgb();r.r=h(0,l(255,r.r-o(255*-(t/100))));r.g=h(0,l(255,r.g-o(255*-(t/100))));r.b=h(0,l(255,r.b-o(255*-(t/100))));return c(r)}function E(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.l-=t/100;r.l=k(r.l);return c(r)}function S(e,t){var r=c(e).toHsl();var i=(r.h+t)%360;r.h=i<0?360+i:i;return c(r)}function T(e){var t=c(e).toHsl();t.h=(t.h+180)%360;return c(t)}function P(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+120)%360,s:t.s,l:t.l}),c({h:(r+240)%360,s:t.s,l:t.l})]}function A(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+90)%360,s:t.s,l:t.l}),c({h:(r+180)%360,s:t.s,l:t.l}),c({h:(r+270)%360,s:t.s,l:t.l})]}function I(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+72)%360,s:t.s,l:t.l}),c({h:(r+216)%360,s:t.s,l:t.l})]}function O(e,t,r){t=t||6;r=r||30;var i=c(e).toHsl();var n=360/r;var a=[c(e)];for(i.h=(i.h-(n*t>>1)+720)%360;--t;){i.h=(i.h+n)%360;a.push(c(i))}return a}function M(e,t){t=t||6;var r=c(e).toHsv();var i=r.h,n=r.s,a=r.v;var o=[];var s=1/t;while(t--){o.push(c({h:i,s:n,v:a}));a=(a+s)%1}return o}c.mix=function(e,t,r){r=r===0?0:r||50;var i=c(e).toRgb();var n=c(t).toRgb();var a=r/100;var o={r:(n.r-i.r)*a+i.r,g:(n.g-i.g)*a+i.g,b:(n.b-i.b)*a+i.b,a:(n.a-i.a)*a+i.a};return c(o)};c.readability=function(e,t){var r=c(e);var i=c(t);return(f.max(r.getLuminance(),i.getLuminance())+.05)/(f.min(r.getLuminance(),i.getLuminance())+.05)};c.isReadable=function(e,t,r){var i=c.readability(e,t);var n,a;a=false;n=q(r);switch(n.level+n.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a};c.mostReadable=function(e,t,r){var i=null;var n=0;var a;var o,s,u;r=r||{};o=r.includeFallbackColors;s=r.level;u=r.size;for(var l=0;l<t.length;l++){a=c.readability(e,t[l]);if(a>n){n=a;i=c(t[l])}}if(c.isReadable(e,i,{level:s,size:u})||!o){return i}else{r.includeFallbackColors=false;return c.mostReadable(e,["#fff","#000"],r)}};var C=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var D=c.hexNames=R(C);function R(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function L(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function N(e,t){if(B(e)){e="100%"}var r=j(e);e=l(t,h(0,parseFloat(e)));if(r){e=parseInt(e*t,10)/100}if(f.abs(e-t)<1e-6){return 1}return e%t/parseFloat(t)}function k(e){return l(1,h(0,e))}function F(e){return parseInt(e,16)}function B(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function j(e){return typeof e==="string"&&e.indexOf("%")!=-1}function U(e){return e.length==1?"0"+e:""+e}function H(e){if(e<=1){e=e*100+"%"}return e}function G(e){return f.round(parseFloat(e)*255).toString(16)}function z(e){return F(e)/255}var X=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function W(e){return!!X.CSS_UNIT.exec(e)}function Y(e){e=e.replace(i,"").replace(n,"").toLowerCase();var t=false;if(C[e]){e=C[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=X.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=X.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=X.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=X.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=X.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=X.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=X.hex8.exec(e)){return{r:F(r[1]),g:F(r[2]),b:F(r[3]),a:z(r[4]),format:t?"name":"hex8"}}if(r=X.hex6.exec(e)){return{r:F(r[1]),g:F(r[2]),b:F(r[3]),format:t?"name":"hex"}}if(r=X.hex4.exec(e)){return{r:F(r[1]+""+r[1]),g:F(r[2]+""+r[2]),b:F(r[3]+""+r[3]),a:z(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=X.hex3.exec(e)){return{r:F(r[1]+""+r[1]),g:F(r[2]+""+r[2]),b:F(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function q(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(typeof V!=="undefined"&&V.exports){V.exports=c}else if(typeof define==="function"&&define.amd){define(function(){return c})}else{window.tinycolor=c}})(Math)},{}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var f=e("./level");var d=e("./loggerManager");var i=function(){function e(){}e.msg=function(e,t,r,i,n,a){if(d.LoggerManager.isProductionMode()||!d.LoggerManager.isLevelAllowed(n)||d.LoggerManager.isMuted(r))return;var o;switch(n){case f.Level.DEBUG:o="violet";break;case f.Level.ERROR:o="red";break;case f.Level.INFO:o="deepskyblue";break;case f.Level.LOG:o="gray";break;case f.Level.WARN:o="orange";break}if(a){var s=a-r.length;if(s>0){for(var u=0;u<s;u++){r+=" "}}}var l="%c "+r+"  %c "+e+" ";var h="background: "+i+";color:white; border: 1px solid "+i+"; ";var c="border: 1px solid "+o+"; ";t=t[0];t.unshift(c);t.unshift(h);t.unshift(l);switch(n){case f.Level.INFO:console.info.apply(console,t);break;case f.Level.DEBUG:console.debug.apply(console,t);break;case f.Level.LOG:console.log.apply(console,t);break;case f.Level.WARN:console.warn.apply(console,t);break;case f.Level.ERROR:console.error.apply(console,t);break}};return e}();r.Display=i},{"./level":79,"./loggerManager":81}],78:[function(e,t,r){"use strict";function i(e){for(var t in e)if(!r.hasOwnProperty(t))r[t]=e[t]}Object.defineProperty(r,"__esModule",{value:true});i(e("./display"));i(e("./level"));i(e("./logger"));i(e("./loggerManager"))},{"./display":77,"./level":79,"./logger":80,"./loggerManager":81}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i;(function(e){e[e["INFO"]=0]="INFO";e[e["LOG"]=1]="LOG";e[e["DEBUG"]=2]="DEBUG";e[e["WARN"]=3]="WARN";e[e["ERROR"]=4]="ERROR"})(i=r.Level||(r.Level={}))},{}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=e("./level");var n=e("./display");var a=function(){function e(e,t,r){this.name=e;this.color=t;this.fixedWidth=r}e.prototype.debug=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}return this._logMessage(e,i.Level.DEBUG,t)};e.prototype.log=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}return this._logMessage(e,i.Level.LOG,t)};e.prototype.error=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}return this._logMessage(e,i.Level.ERROR,t)};e.prototype.info=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}return this._logMessage(e,i.Level.INFO,t)};e.prototype.warn=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}return this._logMessage(e,i.Level.WARN,t)};e.prototype._logMessage=function(e,t){var r=[];for(var i=2;i<arguments.length;i++){r[i-2]=arguments[i]}n.Display.msg(e,r,this.name,this.color,t,this.fixedWidth);return this};return e}();r.Logger=a},{"./display":77,"./level":79}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=e("./logger");var i=function(){function i(){}i.create=function(e,t){var r;if(i.instances[e]===undefined){if(!i.instancesStateMap.hasOwnProperty(e))i.instancesStateMap[e]=false;r=new n.Logger(e,t||i.getRandomColor(),i.levels.length>0?i.fixedWidth:undefined);i.instances[e]=r}else{r=i.instances[e]}return r};i.onlyLevels=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}i.levels=e;i.saveState()};i.onlyModules=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(e.length===0)return;i.muteAllModules();e.forEach(function(e){return i.mute(e,false)})};i.mute=function(e,t){if(t===void 0){t=true}i.instancesStateMap[e]=t;i.saveState()};i.unmute=function(e){i.mute(e,false)};i.unMuteAllModules=function(){for(var e in i.instances){i.mute(e,false)}};i.muteAllModules=function(){for(var e in i.instances){i.mute(e,true)}};i.setProductionMode=function(){i.DEV_MODE=false;delete window["LoggerManager"]};i.isProductionMode=function(){return!i.DEV_MODE};i.isMuted=function(e){return i.instancesStateMap[e]};i.isLevelAllowed=function(e){return i.levels.length==0||i.levels.includes(e)};i.showConfig=function(){return{modulesState:i.instancesStateMap,levels:i.levels}};i.getRandomColor=function(){return"#"+Math.floor(Math.random()*16777215).toString(16)};i.saveState=function(){var e={map:i.instancesStateMap,levels:i.levels};localStorage.setItem(i.STORAGE_KEY,JSON.stringify(e))};i.loadState=function(){var e=localStorage.getItem(i.STORAGE_KEY);if(e){e=JSON.parse(e);i.instancesStateMap=e.map;i.levels=e.levels}};i.DEV_MODE=true;i.STORAGE_KEY="typescript-logger-state";i.instances={};i.instancesStateMap={};i.fixedWidth=0;i.levels=[];i.initializationBlock=function(){window["LoggerManager"]={onlyLevel:i.onlyLevels,onlyModules:i.onlyModules,mute:i.mute,unmute:i.unmute,unMuteAllModules:i.unMuteAllModules,muteAllModules:i.muteAllModules,showConfig:i.showConfig};i.loadState()}();return i}();r.LoggerManager=i},{"./logger":80}],82:[function(e,t,r){"use strict";var L=e("punycode");var N=e("./util");r.parse=o;r.resolve=u;r.resolveObject=l;r.format=s;r.Url=A;function A(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var k=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,F=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],a=["{","}","|","\\","^","`"].concat(n),B=["'"].concat(a),j=["%","/","?",";","#"].concat(B),U=["/","?","#"],H=255,G=/^[+a-z0-9A-Z_-]{0,63}$/,z=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,X={javascript:true,"javascript:":true},W={javascript:true,"javascript:":true},Y={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},q=e("querystring");function o(e,t,r){if(e&&N.isObject(e)&&e instanceof A)return e;var i=new A;i.parse(e,t,r);return i}A.prototype.parse=function(e,t,r){if(!N.isString(e)){throw new TypeError("Parameter 'url' must be a string, not "+typeof e)}var i=e.indexOf("?"),n=i!==-1&&i<e.indexOf("#")?"?":"#",a=e.split(n),o=/\\/g;a[0]=a[0].replace(o,"/");e=a.join(n);var s=e;s=s.trim();if(!r&&e.split("#").length===1){var u=F.exec(s);if(u){this.path=s;this.href=s;this.pathname=u[1];if(u[2]){this.search=u[2];if(t){this.query=q.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(t){this.search="";this.query={}}return this}}var l=k.exec(s);if(l){l=l[0];var h=l.toLowerCase();this.protocol=h;s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=s.substr(0,2)==="//";if(c&&!(l&&W[l])){s=s.substr(2);this.slashes=true}}if(!W[l]&&(c||l&&!Y[l])){var f=-1;for(var d=0;d<U.length;d++){var p=s.indexOf(U[d]);if(p!==-1&&(f===-1||p<f))f=p}var v,m;if(f===-1){m=s.lastIndexOf("@")}else{m=s.lastIndexOf("@",f)}if(m!==-1){v=s.slice(0,m);s=s.slice(m+1);this.auth=decodeURIComponent(v)}f=-1;for(var d=0;d<j.length;d++){var p=s.indexOf(j[d]);if(p!==-1&&(f===-1||p<f))f=p}if(f===-1)f=s.length;this.host=s.slice(0,f);s=s.slice(f);this.parseHost();this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){var y=this.hostname.split(/\./);for(var d=0,_=y.length;d<_;d++){var b=y[d];if(!b)continue;if(!b.match(G)){var x="";for(var w=0,E=b.length;w<E;w++){if(b.charCodeAt(w)>127){x+="x"}else{x+=b[w]}}if(!x.match(G)){var S=y.slice(0,d);var T=y.slice(d+1);var P=b.match(z);if(P){S.push(P[1]);T.unshift(P[2])}if(T.length){s="/"+T.join(".")+s}this.hostname=S.join(".");break}}}}if(this.hostname.length>H){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!g){this.hostname=L.toASCII(this.hostname)}var A=this.port?":"+this.port:"";var I=this.hostname||"";this.host=I+A;this.href+=this.host;if(g){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(s[0]!=="/"){s="/"+s}}}if(!X[h]){for(var d=0,_=B.length;d<_;d++){var O=B[d];if(s.indexOf(O)===-1)continue;var M=encodeURIComponent(O);if(M===O){M=escape(O)}s=s.split(O).join(M)}}var C=s.indexOf("#");if(C!==-1){this.hash=s.substr(C);s=s.slice(0,C)}var D=s.indexOf("?");if(D!==-1){this.search=s.substr(D);this.query=s.substr(D+1);if(t){this.query=q.parse(this.query)}s=s.slice(0,D)}else if(t){this.search="";this.query={}}if(s)this.pathname=s;if(Y[h]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var A=this.pathname||"";var R=this.search||"";this.path=A+R}this.href=this.format();return this};function s(e){if(N.isString(e))e=o(e);if(!(e instanceof A))return A.prototype.format.call(e);return e.format()}A.prototype.format=function(){var e=this.auth||"";if(e){e=encodeURIComponent(e);e=e.replace(/%3A/i,":");e+="@"}var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=false,a="";if(this.host){n=e+this.host}else if(this.hostname){n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){n+=":"+this.port}}if(this.query&&N.isObject(this.query)&&Object.keys(this.query).length){a=q.stringify(this.query)}var o=this.search||a&&"?"+a||"";if(t&&t.substr(-1)!==":")t+=":";if(this.slashes||(!t||Y[t])&&n!==false){n="//"+(n||"");if(r&&r.charAt(0)!=="/")r="/"+r}else if(!n){n=""}if(i&&i.charAt(0)!=="#")i="#"+i;if(o&&o.charAt(0)!=="?")o="?"+o;r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)});o=o.replace("#","%23");return t+n+r+o+i};function u(e,t){return o(e,false,true).resolve(t)}A.prototype.resolve=function(e){return this.resolveObject(o(e,false,true)).format()};function l(e,t){if(!e)return t;return o(e,false,true).resolveObject(t)}A.prototype.resolveObject=function(e){if(N.isString(e)){var t=new A;t.parse(e,false,true);e=t}var r=new A;var i=Object.keys(this);for(var n=0;n<i.length;n++){var a=i[n];r[a]=this[a]}r.hash=e.hash;if(e.href===""){r.href=r.format();return r}if(e.slashes&&!e.protocol){var o=Object.keys(e);for(var s=0;s<o.length;s++){var u=o[s];if(u!=="protocol")r[u]=e[u]}if(Y[r.protocol]&&r.hostname&&!r.pathname){r.path=r.pathname="/"}r.href=r.format();return r}if(e.protocol&&e.protocol!==r.protocol){if(!Y[e.protocol]){var l=Object.keys(e);for(var h=0;h<l.length;h++){var c=l[h];r[c]=e[c]}r.href=r.format();return r}r.protocol=e.protocol;if(!e.host&&!W[e.protocol]){var f=(e.pathname||"").split("/");while(f.length&&!(e.host=f.shift()));if(!e.host)e.host="";if(!e.hostname)e.hostname="";if(f[0]!=="")f.unshift("");if(f.length<2)f.unshift("");r.pathname=f.join("/")}else{r.pathname=e.pathname}r.search=e.search;r.query=e.query;r.host=e.host||"";r.auth=e.auth;r.hostname=e.hostname||e.host;r.port=e.port;if(r.pathname||r.search){var d=r.pathname||"";var p=r.search||"";r.path=d+p}r.slashes=r.slashes||e.slashes;r.href=r.format();return r}var v=r.pathname&&r.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",g=m||v||r.host&&e.pathname,y=g,_=r.pathname&&r.pathname.split("/")||[],f=e.pathname&&e.pathname.split("/")||[],b=r.protocol&&!Y[r.protocol];if(b){r.hostname="";r.port=null;if(r.host){if(_[0]==="")_[0]=r.host;else _.unshift(r.host)}r.host="";if(e.protocol){e.hostname=null;e.port=null;if(e.host){if(f[0]==="")f[0]=e.host;else f.unshift(e.host)}e.host=null}g=g&&(f[0]===""||_[0]==="")}if(m){r.host=e.host||e.host===""?e.host:r.host;r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname;r.search=e.search;r.query=e.query;_=f}else if(f.length){if(!_)_=[];_.pop();_=_.concat(f);r.search=e.search;r.query=e.query}else if(!N.isNullOrUndefined(e.search)){if(b){r.hostname=r.host=_.shift();var x=r.host&&r.host.indexOf("@")>0?r.host.split("@"):false;if(x){r.auth=x.shift();r.host=r.hostname=x.shift()}}r.search=e.search;r.query=e.query;if(!N.isNull(r.pathname)||!N.isNull(r.search)){r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")}r.href=r.format();return r}if(!_.length){r.pathname=null;if(r.search){r.path="/"+r.search}else{r.path=null}r.href=r.format();return r}var w=_.slice(-1)[0];var E=(r.host||e.host||_.length>1)&&(w==="."||w==="..")||w==="";var S=0;for(var T=_.length;T>=0;T--){w=_[T];if(w==="."){_.splice(T,1)}else if(w===".."){_.splice(T,1);S++}else if(S){_.splice(T,1);S--}}if(!g&&!y){for(;S--;S){_.unshift("..")}}if(g&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")){_.unshift("")}if(E&&_.join("/").substr(-1)!=="/"){_.push("")}var P=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(b){r.hostname=r.host=P?"":_.length?_.shift():"";var x=r.host&&r.host.indexOf("@")>0?r.host.split("@"):false;if(x){r.auth=x.shift();r.host=r.hostname=x.shift()}}g=g||r.host&&_.length;if(g&&!P){_.unshift("")}if(!_.length){r.pathname=null;r.path=null}else{r.pathname=_.join("/")}if(!N.isNull(r.pathname)||!N.isNull(r.search)){r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")}r.auth=e.auth||r.auth;r.slashes=r.slashes||e.slashes;r.href=r.format();return r};A.prototype.parseHost=function(){var e=this.host;var t=i.exec(e);if(t){t=t[0];if(t!==":"){this.port=t.substr(1)}e=e.substr(0,e.length-t.length)}if(e)this.hostname=e}},{"./util":83,punycode:68,querystring:71}],83:[function(e,t,r){"use strict";t.exports={isString:function(e){return typeof e==="string"},isObject:function(e){return typeof e==="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}}},{}],84:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,o,s,u){return new(s||(s=Promise))(function(r,t){function i(e){try{a(u.next(e))}catch(e){t(e)}}function n(e){try{a(u.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,n)}a((u=u.apply(e,o||[])).next())})},a=this&&this.__generator||function(r,i){var n,a,o,e,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],a=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Application=n.CANVAS_HEIGHT=n.CANVAS_WIDTH=void 0;var o=e("./data/application.data"),s=e("typescript-logger"),u=e("pixi.js"),l=e("./sprite.adapter"),h=e("./form-parts.adapter"),c=e("./site.value"),f=e("./sprites.data.helper"),d=e("./site"),p=r(e("list.js")),v=e("./observer"),m=e("./colorpalette.adapter");n.CANVAS_WIDTH=720,n.CANVAS_HEIGHT=720;var g=function(){function e(){this._appData=new o.ApplicationData,this._loader=new u.Loader,this._parts_canvas=new v.DataSubject({width:0,height:0,uint8Array:[]}),this._sprite_data_helper=new f.SpriteDataHelper,this.log=s.LoggerManager.create("Application")}return e.prototype.init=function(){var e=this;this._appData.loadFromStorage().then(function(){e.initSite()})},e.prototype.initSite=function(){return i(this,void 0,void 0,function(){var i=this;return a(this,function(e){return this.initTheme(),this.initSettings(),this._appData.currentSelectionForm||(this._appData.currentSelectionForm=this._appData.forms.length>0?this._appData.forms[0]:""),Promise.all(this._appData.forms.map(function(e){return i._sprite_data_helper.setup(e,i._appData.getPartsList(e))})).then(function(){for(var e=0,t=i._appData.forms;e<t.length;e++){var r=t[e];i._appData.initDefaultValues(r,i._sprite_data_helper.getDefaultFlagName(r))}i.initForm(),i.initCanvas()}),this.initFlagList(),this.initObservers(),[2]})})},e.prototype.initTheme=function(){switch($("body").removeAttr("data-theme"),this._appData.theme){case o.Theme.Dark:$("#chbDarkTheme").bootstrapToggle("on"),$("body").attr("data-theme","dark");break;case o.Theme.Light:default:$("#chbDarkTheme").bootstrapToggle("off"),$("body").attr("data-theme","light")}},e.prototype.initObservers=function(){},e.prototype.initSettings=function(){var t,r;return i(this,void 0,void 0,function(){var i;return a(this,function(e){return i=this,$("#btnClearSession").on("click",function(){i._appData.clearSessionStorage()}),$("#chbDarkTheme").on("change",function(){$("body").removeAttr("data-theme"),$(this).prop("checked")?($("body").attr("data-theme","dark"),i._appData.theme=o.Theme.Dark):($("body").attr("data-theme","light"),i._appData.theme=o.Theme.Light)}),$("#chbShowGrid").prop("checked",this._appData.settings.show_grid),$("#chbShowGrid").on("change",function(){$(this).is(":checked")?i._appData.showGrid():i._appData.hideGrid()}),this._appData.settings.outline_color||(this._appData.settings.outline_color=null!==(t=this._appData.getOutlineColor(this._appData.currentSelectionForm))&&void 0!==t?t:o.DEFAULT_OUTLINE_COLOR),this._appData.settings.outline_color=null!==(r=this._appData.settings.outline_color)&&void 0!==r?r:o.DEFAULT_CRAWS_COLOR,this._appData.saveSettings(),$("#txtCrawsColor").spectrum({color:this._appData.settings.craws_color,showInput:!0,showInitial:!0,allowEmpty:!0,showAlpha:!1}).on("hide.spectrum",function(e,t){var r=t.toHexString();i._appData.setCrawsColor(r)}).on("move.spectrum",function(e,t){var r=t.toHexString();i._appData.setCrawsColor(r)}),$("#txtOutlinesColor").spectrum({color:this._appData.settings.outline_color,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!1}).on("hide.spectrum",function(e,t){var r=t.toHexString();i._appData.setOutlineColor(r)}).on("move.spectrum",function(e,t){var r=t.toHexString();i._appData.setOutlineColor(r)}),[2]})})},e.prototype.initFlagList=function(){return i(this,void 0,void 0,function(){var t,r;return a(this,function(e){return(t=c.LIST_JS_PAGINATION)[0].innerWindow=3,r={valueNames:["flag_info_image","flag_info_name","flag_info_description"],page:8,pagination:t},"lstFlagInfo",this._flagList=new p.default("lstFlagInfo",r),[2]})})},e.prototype.initForm=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.initFormParts(),[2]})})},e.prototype.initFormParts=function(){var t;return i(this,void 0,void 0,function(){return a(this,function(e){return this._formPartsAdapter=new h.FormPartsAdapter(this._appData,this._sprite_data_helper),null===(t=this._formPartsAdapter)||void 0===t||t.init(),[2]})})},e.prototype.initCanvas=function(){return i(this,void 0,void 0,function(){var r,i;return a(this,function(e){return this._colorPaletteAdapter=new m.ColorPaletteAdapter(this._parts_canvas),this._pixiApp=new u.Application({width:n.CANVAS_WIDTH,height:n.CANVAS_HEIGHT,antialias:!1,transparent:!0,resizeTo:$("#spriteViewContainer")[0]}),$("#spriteViewContainer").html(this._pixiApp.view),this._spriteAdapter=new l.SpriteAdapter(this._pixiApp,this._appData,this._parts_canvas,"#btnDownload","#btnFullDownload"),r=(r=d.site.data.sprites.map(function(e){return e.sheet})).filter(function(e,t){return r.indexOf(e)===t}),i=this,this._loader.baseUrl=d.site.base_url,this._loader.onProgress.add(function(){i.loadProgressHandler()}),this._loader.add(r).load(function(e,t){i.setupSpriteAdapters(e,t)}),[2]})})},e.prototype.setupSpriteAdapters=function(e,t){var r,i,n;null===(r=this._colorPaletteAdapter)||void 0===r||r.init(),null===(i=this._spriteAdapter)||void 0===i||i.init(this._appData.currentSelectionFormData,t),null===(n=this._spriteAdapter)||void 0===n||n.updateParts(this._appData.currentSelectionFormData.form,this._appData.currentSelectionFormData.parts)},e.prototype.loadProgressHandler=function(){},e}();n.Application=g},{"./colorpalette.adapter":85,"./data/application.data":86,"./form-parts.adapter":88,"./observer":90,"./site":91,"./site.value":92,"./sprite.adapter":93,"./sprites.data.helper":94,"list.js":45,"pixi.js":66,"typescript-logger":78}],85:[function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,o,s,u){return new(s||(s=Promise))(function(r,t){function i(e){try{a(u.next(e))}catch(e){t(e)}}function n(e){try{a(u.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,n)}a((u=u.apply(e,o||[])).next())})},a=this&&this.__generator||function(r,i){var n,a,o,e,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],a=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ColorPaletteAdapter=void 0;var o=e("image-q"),s=e("typescript-logger"),u=n(e("list.js")),l=e("./site.value"),h=n(e("tinycolor2")),c=e("./site"),f=function(){function e(e){this.log=s.LoggerManager.create("ColorPaletteAdapter"),this._canvas=e}return e.prototype.init=function(){this.updatePalette(this._canvas.data),this.initObservers();var e={page:9,pagination:l.LIST_JS_PAGINATION,item:function(e){return'<li class="list-group-item color-palette-item" data-color="'+e.color+'" data-index="'+e.index+'">\n                    <div class="input-group">\n                        <input type="text" class="form-control color-palette-item-input" value="'+e.color+'" readonly disabled>\n                    </div>\n                </li>'}};this._colorPaletteList=new u.default("lstColorPalette",e).on("updated",function(e){$(e.list).find(".color-palette-item-input").spectrum({showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!1})})},e.prototype.initObservers=function(){var t=this;this._canvas.attach(new(function(){function e(){}return e.prototype.update=function(e){t.updatePalette(e.data)},e}()))},e.prototype.updatePalette=function(n){return i(this,void 0,void 0,function(){var t,r,i;return a(this,function(e){switch(e.label){case 0:return t=o.utils.PointContainer.fromUint8Array(n.uint8Array,n.width,n.height),[4,o.buildPalette([t])];case 1:return r=e.sent(),i=r.getPointContainer().getPointArray().map(function(e,t){return{color:h.default({r:e.r,g:e.g,b:e.b}).toHexString(),index:t}}),i=c.removeDuplicateObjectFromArray(i,"color"),this.log.debug("updatePalette",{palette:r},r.getPointContainer(),r.getPointContainer().getPointArray(),i),this._colorPaletteList&&(this._colorPaletteList.clear(),this._colorPaletteList.add(i)),[2]}})})},e}();r.ColorPaletteAdapter=f},{"./site":91,"./site.value":92,"image-q":38,"list.js":45,tinycolor2:76,"typescript-logger":78}],86:[function(e,t,o){"use strict";var r=this&&this.__awaiter||function(e,o,s,u){return new(s||(s=Promise))(function(r,t){function i(e){try{a(u.next(e))}catch(e){t(e)}}function n(e){try{a(u.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,n)}a((u=u.apply(e,o||[])).next())})},A=this&&this.__generator||function(r,i){var n,a,o,e,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],a=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.setProperty=o.getProperty=o.getUnsafeProperty=o.hasProperty=o.ApplicationData=o.CurrentSelectionForm=o.CurrentSelectionPart=o.Settings=o.Theme=o.ENABLE_FLIP_FEATURE=o.DEFAULT_OUTLINE_COLOR=o.DEFAULT_CRAWS_COLOR=o.WHOLE_PART=o.ALL_FILTER=o.DEFAULT_FLAG_NAME_NONE=void 0;var s,u=i(e("localforage")),l=e("../observer"),a=e("./sprite.data"),h=e("typescript-logger"),I=e("../site"),O="settings",M="theme",C="version",D="current_selection_form",R="current_selection_show_whole",n="current_selection_part",c="current_selection_filter_part",L="last_flag";o.DEFAULT_FLAG_NAME_NONE="None",o.ALL_FILTER="all",o.WHOLE_PART="whole",o.DEFAULT_CRAWS_COLOR="#FFFFFF",o.DEFAULT_OUTLINE_COLOR="#000000",o.ENABLE_FLIP_FEATURE=!1,function(e){e.Light="light",e.Dark="dark"}(s=o.Theme||(o.Theme={}));var f=function(){return function(){this.show_grid=!1,this.outline_color=o.DEFAULT_OUTLINE_COLOR,this.craws_color=o.DEFAULT_CRAWS_COLOR}}();o.Settings=f;var d=function(){return function(){this.flag_name=o.DEFAULT_FLAG_NAME_NONE,this.orientation=a.Orientation.Vertical,this.flip=!1}}();o.CurrentSelectionPart=d;var p=function(){return function(){this.form="",this.parts={}}}();o.CurrentSelectionForm=p;var v=function(){function P(){this._settings=new l.DataSubject(new f),this._theme=s.Dark,this._version=I.site.version,this._currentSelectionForm=new l.DataSubject(new p),this._currentSelectionParts={},this._currentSelectionShowWhole=new l.DataSubject(!1),this._currentSelectionPartsFilter={},this._lastFlag=new l.DataSubject(""),this._storeSession=u.default.createInstance({name:"session"}),this.log=h.LoggerManager.create("ApplicationData");for(var e=0,t=this.forms;e<t.length;e++){var r=t[e];this._currentSelectionPartsFilter[r]={},this._currentSelectionParts[r]={};for(var i=0,n=this.getPartsList(r);i<n.length;i++){var a=n[i];this._currentSelectionPartsFilter[r][a]=new l.DataSubject(o.ALL_FILTER),this._currentSelectionParts[r][a]=new l.DataSubject(new d)}}}return P.getStorageKeyCurrentSelectionPart=function(e,t){return n+"_"+e+"_"+t},P.getStorageKeyCurrentSelectionPartFilter=function(e,t){return c+"_"+e+"_"+t},P.prototype.loadFromStorage=function(){var y,_,b,x,w,E,S,T;return r(this,void 0,void 0,function(){var t,r,i,n,a,o,s,u,l,h,c,f,d,p,v,m,g;return A(this,function(e){switch(e.label){case 0:return e.trys.push([0,15,,16]),t=this,[4,this._storeSession.getItem(C)];case 1:return t._version=null!==(y=e.sent())&&void 0!==y?y:"",""===this._version?[3,14]:(r=this._settings,[4,this._storeSession.getItem(O)]);case 2:return r.data=null!==(_=e.sent())&&void 0!==_?_:this._settings.data,i=this,[4,this._storeSession.getItem(M)];case 3:return i._theme=null!==(b=e.sent())&&void 0!==b?b:this._theme,n=this._lastFlag,[4,this._storeSession.getItem(L)];case 4:return n.data=null!==(x=e.sent())&&void 0!==x?x:this._lastFlag.data,a=this._currentSelectionForm,[4,this._storeSession.getItem(D)];case 5:return a.data=null!==(w=e.sent())&&void 0!==w?w:this._currentSelectionForm.data,o=this._currentSelectionShowWhole,[4,this._storeSession.getItem(R)];case 6:o.data=null!==(E=e.sent())&&void 0!==E?E:this._currentSelectionShowWhole.data,s=0,u=this.forms,e.label=7;case 7:if(!(s<u.length))return[3,13];l=u[s],h=0,c=this.getPartsList(l),e.label=8;case 8:return h<c.length?(f=c[h],d=P.getStorageKeyCurrentSelectionPart(l,f),p=P.getStorageKeyCurrentSelectionPartFilter(l,f),v=this._currentSelectionPartsFilter[l][f],[4,this._storeSession.getItem(p)]):[3,12];case 9:return v.data=null!==(S=e.sent())&&void 0!==S?S:this._currentSelectionPartsFilter[l][f].data,m=this._currentSelectionParts[l][f],[4,this._storeSession.getItem(d)];case 10:m.data=null!==(T=e.sent())&&void 0!==T?T:this._currentSelectionParts[l][f].data,e.label=11;case 11:return h++,[3,8];case 12:return s++,[3,7];case 13:this.log.debug("loadFromStorage",this._currentSelectionForm,this._currentSelectionParts,this._currentSelectionPartsFilter,this),e.label=14;case 14:return this._version=I.site.version,this._storeSession.setItem(C,this._version),[3,16];case 15:return g=e.sent(),console.error("loadFromStorage",g),[3,16];case 16:return[2]}})})},P.prototype.clearSessionStorage=function(){this._storeSession.clear()},Object.defineProperty(P.prototype,"theme",{get:function(){return this._theme},set:function(e){this._theme=e,this._storeSession.setItem(M,e),this._storeSession.setItem(C,this._version)},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"lastFlagObservable",{get:function(){return this._lastFlag},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"lastFlag",{get:function(){return this._lastFlag.data},set:function(e){this._storeSession.setItem(L,e),this._storeSession.setItem(C,this._version),this._lastFlag.data=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"settingsObservable",{get:function(){return this._settings},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"settings",{get:function(){return this._settings.data},set:function(e){this._storeSession.setItem(O,e),this._storeSession.setItem(C,this._version),this._settings.data=e},enumerable:!1,configurable:!0}),P.prototype.updateFormData=function(t){this._currentSelectionForm.data.form=t,this._currentSelectionForm.data.parts={};var r=this;return Object.keys(this._currentSelectionParts[t]).forEach(function(e){r._currentSelectionForm.data.parts[e]=r._currentSelectionParts[t][e].data}),this._currentSelectionForm.data},Object.defineProperty(P.prototype,"currentSelectionForm",{get:function(){return this._currentSelectionForm.data.form},set:function(e){var t=this.updateFormData(e);this._storeSession.setItem(D,t),this._storeSession.setItem(C,this._version),this._currentSelectionForm.data=t},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentSelectionFormObservable",{get:function(){return this._currentSelectionForm},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentSelectionFormData",{get:function(){return this._currentSelectionForm.data},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentSelectionShowWhole",{get:function(){return this._currentSelectionShowWhole.data},set:function(e){this._storeSession.setItem(R,e),this._storeSession.setItem(C,this._version),this._currentSelectionShowWhole.data=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentSelectionShowWholeObservable",{get:function(){return this._currentSelectionShowWhole},enumerable:!1,configurable:!0}),P.prototype.getCurrentSelectionPartsData=function(t){var r=this;return this.getPartsList(t).map(function(e){return r._currentSelectionParts[t][e].data})},P.prototype.getCurrentSelectionPartsObservables=function(t){var r=this;return this.getPartsList(t).map(function(e){return{form:t,part:e,observable:r._currentSelectionParts[t][e]}})},P.prototype.getCurrentSelectionPartData=function(e,t){return e in this._currentSelectionParts&&t in this._currentSelectionParts[e]?this._currentSelectionParts[e][t].data:void 0},P.prototype.getCurrentSelectionPartsFilterObservables=function(t){var r=this;return this.getPartsList(t).map(function(e){return{form:t,part:e,observable:r._currentSelectionPartsFilter[t][e]}})},P.prototype.getCurrentSelectionPartFilter=function(e,t){return e in this._currentSelectionPartsFilter&&t in this._currentSelectionPartsFilter[e]?this._currentSelectionPartsFilter[e][t].data:void 0},P.prototype.saveCurrentSelection=function(){this._storeSession.setItem(D,this._currentSelectionForm.data),this._storeSession.setItem(R,this._currentSelectionShowWhole.data);for(var e=0,t=this.forms;e<t.length;e++)for(var r=t[e],i=0,n=this.getPartsList(r);i<n.length;i++){var a=n[i],o=P.getStorageKeyCurrentSelectionPart(r,a),s=P.getStorageKeyCurrentSelectionPartFilter(r,a);this._storeSession.setItem(o,this._currentSelectionParts[r][a].data),this._storeSession.setItem(s,this._currentSelectionPartsFilter[r][a].data)}this._storeSession.setItem(C,this._version)},P.prototype.saveSettings=function(){this._storeSession.setItem(O,this._settings.data),this._storeSession.setItem(C,this._version)},P.prototype.initDefaultValues=function(e,t){this.log.info("before initDefaultValues",this._currentSelectionParts,this);for(var r=0,i=this.getPartsList(e);r<i.length;r++){var n=i[r];""===this._currentSelectionParts[e][n].data.flag_name&&(this._currentSelectionParts[e][n].data.flag_name=t,this._currentSelectionParts[e][n].data.orientation=a.Orientation.Vertical)}this.updateFormData(e),this.log.info("after initDefaultValues",this._currentSelectionParts,this),this.saveCurrentSelection()},P.prototype.setPartFlagName=function(e,t,r){this._currentSelectionParts[e][t].data.flag_name!==r&&(this._currentSelectionParts[e][t].data.flag_name=r,this.saveCurrentSelection(),this._currentSelectionParts[e][t].notify())},P.prototype.setPartOrientation=function(e,t,r){this._currentSelectionParts[e][t].data.orientation!==r&&(this._currentSelectionParts[e][t].data.orientation=r,this.saveCurrentSelection(),this._currentSelectionParts[e][t].notify())},P.prototype.setPartFlip=function(e,t,r){this._currentSelectionParts[e][t].data.flip!==r&&(this._currentSelectionParts[e][t].data.flip=r,this.saveCurrentSelection(),this._currentSelectionParts[e][t].notify())},P.prototype.setPartFilter=function(e,t,r){this._currentSelectionPartsFilter[e][t].data!==r&&(this._currentSelectionPartsFilter[e][t].data=r,this.saveCurrentSelection())},P.prototype.setPart=function(e,t,r,i,n){void 0===n&&(n=void 0),this._currentSelectionParts[e][t].data.flag_name===r&&this._currentSelectionParts[e][t].data.orientation===i&&this._currentSelectionParts[e][t].data.flip===n||(this._currentSelectionParts[e][t].data.flag_name=r,this._currentSelectionParts[e][t].data.orientation=i,void 0!==n&&(this._currentSelectionParts[e][t].data.flip=n),this.saveCurrentSelection(),this._currentSelectionParts[e][t].notify())},P.prototype.setForm=function(e){this._currentSelectionForm.data.form!==e&&(this._currentSelectionForm.data=this.updateFormData(e),this.saveCurrentSelection())},P.prototype.setShowWhole=function(e){this._currentSelectionShowWhole.data!==e&&(this._currentSelectionShowWhole.data=e,this.saveCurrentSelection())},P.prototype.setCrawsColor=function(e){this._settings.data.craws_color=e,this.saveSettings(),this._settings.notify()},P.prototype.setOutlineColor=function(e){this._settings.data.outline_color=e,this.saveSettings(),this._settings.notify()},P.prototype.showGrid=function(){this._settings.data.show_grid=!0,this.saveSettings(),this._settings.notify()},P.prototype.hideGrid=function(){this._settings.data.show_grid=!1,this.saveSettings(),this._settings.notify()},P.prototype.getPartsList=function(e){return m(I.site.data.flags_config,e)?g(I.site.data.flags_config,e).parts:[]},P.prototype.getOutlineColor=function(e){return m(I.site.data.flags_config,e)?g(I.site.data.flags_config,e).outline:void 0},P.prototype.getCrawColors=function(e){return m(I.site.data.flags_config,e)?g(I.site.data.flags_config,e).craws:[]},Object.defineProperty(P.prototype,"forms",{get:function(){return I.site.data.flags_config.forms},enumerable:!1,configurable:!0}),P}();function m(e,t){return t in e}function g(e,t){return t in e?e[t]:void 0}function y(e,t){return e[t]}function _(e,t,r){e[t]=r}o.ApplicationData=v,o.hasProperty=m,o.getUnsafeProperty=g,o.getProperty=y,o.setProperty=_},{"../observer":90,"../site":91,"./sprite.data":87,localforage:61,"typescript-logger":78}],87:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Orientation=void 0,function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(i=r.Orientation||(r.Orientation={}))},{}],88:[function(e,t,r){"use strict";var u=this&&this.__awaiter||function(e,o,s,u){return new(s||(s=Promise))(function(r,t){function i(e){try{a(u.next(e))}catch(e){t(e)}}function n(e){try{a(u.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,n)}a((u=u.apply(e,o||[])).next())})},l=this&&this.__generator||function(r,i){var n,a,o,e,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],a=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.FormPartsAdapter=void 0;var g=e("./data/application.data"),h=e("./data/sprite.data"),n=e("typescript-logger"),y=e("./site.value"),a=i(e("list.js"));e("select2");var _=e("./site"),o=7,s=function(){function m(e,t){this._parts_lists={},this._fallbackSetFormEnableButton=void 0,this._currentForm=new g.CurrentSelectionForm,this.log=n.LoggerManager.create("FormPartsAdapter"),this._appData=e,this._sprite_data_helper=t,this._currentForm=this._appData.currentSelectionFormData}return m.prototype.init=function(){this.initObservers(),this.updateUI(this._appData.currentSelectionFormData)},m.prototype.initObservers=function(){var n=this;this._appData.currentSelectionFormObservable.attach(new(function(){function e(){}return e.prototype.update=function(e){n.updateUI(e.data),$(this).prop("disabled",!1),n._fallbackSetFormEnableButton&&(window.clearTimeout(n._fallbackSetFormEnableButton),n._fallbackSetFormEnableButton=void 0)},e}()));for(var e=0,t=this._appData.forms;e<t.length;e++){var r=t[e];this._appData.getCurrentSelectionPartsFilterObservables(r).forEach(function(e){var t=e.form,r=e.part;e.observable.attach(new(function(){function e(){}return e.prototype.update=function(e){n.current_form===t&&n.updateFilter(r,e.data)},e}()))}),this._appData.getCurrentSelectionPartsObservables(r).forEach(function(e){var r=e.form,i=e.part;e.observable.attach(new(function(){function e(){}return e.prototype.update=function(e){var t;n.updateSelectedPartUI(r,i),n.current_form===r&&(null===(t=n._parts_lists[i])||void 0===t||t.update())},e}()))})}this._appData.currentSelectionShowWholeObservable.attach(new(function(){function e(){}return e.prototype.update=function(e){var t,r=g.WHOLE_PART;null===(t=n._parts_lists[r])||void 0===t||t.update()},e}()))},m.prototype.updateUI=function(e){return this._currentForm=e,Promise.all([this.updateUISetForm(e.form),this.updateUISetParts(e),this.updateUIToolbox(e.form)])},m.prototype.updateFilter=function(e,t){var r;t===g.ALL_FILTER?this._parts_lists[e].filter():this._parts_lists[e].filter(function(e){return e.values().category===t}),null===(r=this._parts_lists[e])||void 0===r||r.update()},Object.defineProperty(m.prototype,"filter_list",{get:function(){return[g.ALL_FILTER].concat(_.site.data.flags_config.categories)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"current_form",{get:function(){return this._currentForm.form},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"parts_list",{get:function(){return Object.keys(this._currentForm.parts)},enumerable:!1,configurable:!0}),m.prototype.getListId=function(e,t){return"lstSelect"+e+t},m.prototype.getIconImgHTML=function(e,t){void 0===t&&(t="");var r=_.site.base_url+"/"+e.filename,i=[];for(var n in e.filename_set){var a=e.filename_set[n];i.push(_.site.base_url+"/"+a+" "+n)}return'<img srcset="'+i.join(",")+'" class="img-fluid '+t+'" src="'+r+'" alt="'+e.name+' Icon">'},m.prototype.getCurrentSelectedSprite=function(e,t){var r=this.getSelectedFlagName(e,t),i=this.getSelectedOrientation(e,t);return void 0!==r&&void 0!==i?this._sprite_data_helper.getSelectableSprite(e,t,r,i):void 0},m.prototype.getSelectedOrientation=function(e,t){var r;return null===(r=this._appData.getCurrentSelectionPartData(e,t))||void 0===r?void 0:r.orientation},m.prototype.getSelectedFlagName=function(e,t){var r;return null===(r=this._appData.getCurrentSelectionPartData(e,t))||void 0===r?void 0:r.flag_name},m.prototype.getSelectedFlip=function(e,t){var r;return null===(r=this._appData.getCurrentSelectionPartData(e,t))||void 0===r?void 0:r.flip},m.prototype.getSelectedFilter=function(e,t){return this._appData.getCurrentSelectionPartFilter(e,t)},m.prototype.updateUIToolbox=function(t){return u(this,void 0,void 0,function(){return l(this,function(e){return this._appData.getOutlineColor(t)?$("form-group-outlines-color").removeClass("d-none"):$("form-group-outlines-color").addClass("d-none"),this._appData.getCrawColors(t)?$("form-group-craws-color").removeClass("d-none"):$("form-group-craws-color").addClass("d-none"),[2]})})},m.prototype.updateUISetForm=function(o){return u(this,void 0,void 0,function(){var t,r,i,n,a;return l(this,function(e){for($("#lstSelectForm").empty(),t=0,r=_.site.data.flags_config.forms;t<r.length;t++)i=r[t],n=_.site.data.strings.select_form[i],a='<button type="button" class="list-group-item '+(o==i?"active":"")+'" data-form="'+i+'">\n                '+n+"\n            </button>",$("#lstSelectForm").append(a);return this.initEventSetForm(),[2]})})},m.prototype.updateUISetParts=function(s){return u(this,void 0,void 0,function(){var t,r,i,n,a,o;return l(this,function(e){for(t=s.form,$("#lstSelectContainer").empty().html(this.getSelectablePartsHTML(t)),r=0,i=Object.keys(s.parts);r<i.length;r++)o=i[r],this.getListId(t,o),this._parts_lists[o]=this.getSelectablePartsList(t,o),this.initSelectedPartEvents(t,o);for(this.initEventSetParts(),n=0,a=Object.keys(s.parts);n<a.length;n++)o=a[n],this._parts_lists[o].update();return $("#chbShowWholePart").prop("checked",this._appData.currentSelectionShowWhole),[2]})})},m.getSelectFilterId=function(e,t){return"lstSelectFilter"+e+"_"+t},m.getPartNavLinkId=function(e){return"pills-parts-"+e},m.getPartNavLinkTabId=function(e){return"pills-parts-"+e+"-tab"},m.getPartTabId=function(e){return"pills-tab-"+e+"-parts"},m.getPartTabContentId=function(e){return"pills-"+e+"-parts-tabContent"},m.prototype.getSelectablePartsHTML=function(e){for(var t=m.getPartTabId(e),r=m.getPartTabContentId(e),i=(this.parts_list.length>0?this.parts_list[0]:g.WHOLE_PART,""),n="",a=0,o=this.parts_list;a<o.length;a++){var s=o[a];i+=this.getNavLinkHTML(e,s),n+=this.genNavTabContent(e,s)}return'<ul class="nav nav-pills mb-2" id="'+t+'" role="tablist">\n            '+i+"\n        </ul>"+'\n                <div class="tab-content" id="'+r+'">\n                    '+n+"\n                </div>"},m.prototype.getNavLinkHTML=function(e,t){var r,i=this.parts_list.length>0?this.parts_list[0]:g.WHOLE_PART,n=null!==(r=_.site.data.strings.select_parts[t])&&void 0!==r?r:_.site.data.strings.select_parts.unknown,a=t==i,o=a?"active":"",s=a?"border border-light rounded":"border border-dark rounded",u=m.getPartNavLinkId(t),l=m.getPartNavLinkTabId(t),h=this._sprite_data_helper.getDefaultSprite(e,t);return'<li class="nav-item '+s+'" role="presentation">\n            <a class="nav-link nav-link-parts text-center '+o+'" id="'+l+'" data-toggle="pill" href="#'+u+'" role="tab" aria-controls="'+u+'" aria-selected="'+a+'">\n                <span class="select-part-icon-container">'+(void 0!==h?m.getSelectPartIconHTML(h):"")+"</span>\n                "+n+"\n            </a>\n        </li>\n"},m.prototype.genNavTabContent=function(e,t){var r,i=t==(this.parts_list.length>0?this.parts_list[0]:g.WHOLE_PART)?"show active":"",n=m.getPartNavLinkId(t),a=m.getPartNavLinkTabId(t),o=this.getCurrentSelectedSprite(e,t),s=null!==(r=this.getSelectedFlip(e,t))&&void 0!==r&&r,u=void 0!==o?this.getSelectedPartHTML(e,t,o,s):"",l=this.getListId(e,t),h="";t==g.WHOLE_PART&&(h='<div class="form-check form-check-inline">\n                <input class="form-check-input" type="checkbox" id="chbShowWholePart" value="'+this._appData.currentSelectionShowWhole+'">\n                <label class="form-check-label" for="chbShowWholePart">'+_.site.data.strings.parts_list.show_whole_label+"</label>\n            </div>");for(var c='<select class="custom-select" id="'+m.getSelectFilterId(e,t)+'" data-placeholder="'+_.site.data.strings.parts_list.filter_label+'" data-form="'+e+'" data-part="'+t+'">',f=0,d=this.filter_list;f<d.length;f++){var p=d[f],v=_.site.data.strings.select_filter[p];if(v)c+="<option "+(this.getSelectedFilter(e,t)==p?"selected":"")+'" data-form="'+e+'" data-part="'+t+'" data-filter="'+p+'" value="'+p+'">\n                    '+v+"\n                </option>"}return'<div class="tab-pane fade '+i+'" id="'+n+'" role="tabpanel" aria-labelledby="'+a+'">\n                <ul class="list-group mb-4">\n                    '+u+'\n                </ul>\n                <div class="my-1 mb-2 part-settings">\n                    '+h+'\n                </div>\n                <div id="'+l+'">\n                    <div class="row mb-2">\n                        <div class="col-12">\n                            <div class="input-group">\n                                '+(c+="</select>")+'\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row mb-2">\n                        <div class="col-12">\n                            <div class="input-group">\n                                <div class="input-group-prepend">\n                                    <span class="input-group-text" id="searchHelp'+l+'"><i class="fas fa-search d-inline"></i></span>\n                                </div>\n                                <input type="text" class="form-control fuzzy-search" id="search'+l+'" aria-label="'+_.site.data.strings.parts_list.search_label+'" aria-describedby="searchHelp'+l+'" placeholder="'+_.site.data.strings.parts_list.search_label+'">\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-12">\n                            <div class="list-group list"></div>\n\n                            <nav class="my-2" aria-label="'+_.site.data.strings.parts_list.pagination_label+'">\n                                <ul class="pagination '+y.PAGINATION_CLASS+' justify-content-center">\n                                </ul>\n                            </nav>\n                        </div>\n                    </div>\n                </div>\n            </div>\n'},m.prototype.getCurrentSelectedPartId=function(e,t){return"btnCurrentPart"+e+"_"+t},m.getSelectPartIconHTML=function(e){return'<img class="img-fluid select-part-icon mx-auto d-block" src="'+_.site.base_url+"/"+e.filename+'" alt="'+e.flag_name+' Part Icon">'},m.prototype.getSelectablePartsList=function(e,t){var r={item:function(e){return'<button type="button" class="list-group-item" data-form="'+e.form+'" data-part="'+e.part+'" data-flag-name="'+e.flag_name+'" data-index="'+e.index+'">\n                <div class="row no-gutters">\n                    <div class="col-2 my-auto"><span class="align-middle">'+e.icon+'</span></div>\n                    <div class="col-7 mx-2 my-auto text-left"><span class="align-middle">'+e.name+"</span></div>\n                </div>\n            </button>"},page:o,pagination:y.LIST_JS_PAGINATION},i=this.getSelectablePartListValues(e,t),n=this.getListId(e,t);return new a.default(n,r,i)},m.prototype.getSelectablePartListValues=function(r,i){var n=this;return _.removeDuplicateObjectFromArray(this._sprite_data_helper.getSelectableSpritesParts(r,i).filter(function(e){return e.flags_fits}),"flag_name").map(function(e,t){return n.getListItemPart(r,i,e,t)}).filter(function(e){return void 0!==e})},m.prototype.getListItemPart=function(e,t,r,i){var n=_.site.data.flags.find(function(e){return e.name==r.flag_name});if(void 0!==n)return this.getListItemValue(e,t,n,i)},m.prototype.getListItemValueOrientationHTML=function(e){switch(e){case h.Orientation.Horizontal:return'<span class="orientation-container">\n                    '+_.site.data.strings.orientation.horizontal_icon+"\n                </span>";case h.Orientation.Vertical:return'<span class="orientation-container">\n                    '+_.site.data.strings.orientation.vertical_icon+"\n                </span>"}},m.prototype.getListItemValueFlipHTML=function(e,t){var r=e?"flipped":"";switch(t){case h.Orientation.Horizontal:return'<span class="flip-container '+r+'">\n                    '+_.site.data.strings.orientation.horizontal_flip_icon+"\n                </span>";case h.Orientation.Vertical:return'<span class="flip-container '+r+'">\n                    '+_.site.data.strings.orientation.vertical_flip_icon+"\n                </span>"}},m.prototype.getSelectedPartHTML=function(e,t,r,i){var n=r.orientation,a=r.flag_name,o=this.getCurrentSelectedPartId(e,t),s=this.getListItemValueOrientationHTML(n),u=this.getListItemValueFlipHTML(i,n),l="",h="";t==g.WHOLE_PART&&(l=this._appData.currentSelectionShowWhole?"":"disabled",h=this._appData.currentSelectionShowWhole?"":'aria-disabled="true"');var c="";return g.ENABLE_FLIP_FEATURE&&(c='<button type="button" class="btn btn-link mx-2 current-selected-part-flip" data-form="'+e+'" data-part="'+t+'" data-flag-name="'+a+'" data-orientation="'+n+'" data-flip="'+i+'">\n                <span class="flip_icon">'+u+"</span>\n            </button>"),'<li class="list-group-item current-selected-part active form part flag_name '+l+'" '+h+' data-form="'+e+'" data-part="'+t+'" data-flag-name="'+a+'" data-orientation="'+n+'" data-flip="'+i+'" id="'+o+'">\n            <div class="row no-gutters">\n                <div class="col-10 my-auto text-left"><span class="name mx-2">'+a+'</span></div>\n                <div class="col-1 my-auto text-right">\n                    '+c+'\n                </div>\n                <div class="col-1 my-auto text-right">\n                    <button type="button" class="btn btn-link mx-2 current-selected-part-orientation" data-form="'+e+'" data-part="'+t+'" data-flag-name="'+a+'" data-orientation="'+n+'" data-flip="'+i+'">\n                        <span class="orientation_icon">'+s+"</span>\n                    </button>\n                </div>\n            </div>\n        </li>"},m.prototype.updateSelectedPartUI=function(i,n){var a,o;return u(this,void 0,void 0,function(){var t,r;return l(this,function(e){return t=null!==(a=this.getCurrentSelectedSprite(i,n))&&void 0!==a?a:this._sprite_data_helper.getDefaultSprite(i,n),r=null!==(o=this.getSelectedFlip(i,n))&&void 0!==o&&o,void 0!==t&&($("#"+this.getCurrentSelectedPartId(i,n)).replaceWith(this.getSelectedPartHTML(i,n,t,r)),this.initSelectedPartEvents(i,n)),[2]})})},m.prototype.initSelectedPartEvents=function(e,t){var r="#"+this.getCurrentSelectedPartId(e,t),o=this;g.ENABLE_FLIP_FEATURE&&$(r).find(".current-selected-part-flip").on("click",function(){var e=$(this).data("form"),t=$(this).data("part"),r=$(this).data("flag-name"),i=$(this).data("orientation"),n=o.setNewFlip(e,t,r),a=o.getListItemValueFlipHTML(n,i);$(this).data("flip",n),$(this).find(".flip_icon").html(a)}),$(r).find(".current-selected-part-orientation").on("click",function(){var e=$(this).data("form"),t=$(this).data("part"),r=$(this).data("flag-name"),i=o.setNewOrientation(e,t,r),n=o.getListItemValueOrientationHTML(i);$(this).data("orientation",i),$(this).find(".orientation_icon").html(n)})},m.prototype.getListItemValue=function(e,t,r,i){var n=void 0!==r?this.getIconImgHTML(r):"",a=r.name;return{icon:n,name:r.name,form:e,part:t,flag_name:a,index:i,category:r.category}},m.prototype.initEventSetForm=function(){var r=this;$("#lstSelectForm").find(".list-group-item").off("click").on("click",function(){var e=this,t=$(this).data("form");r._appData.currentSelectionForm!==t&&($(this).prop("disabled",!0),r._appData.setForm(t),r._fallbackSetFormEnableButton=window.setTimeout(function(){$(e).prop("disabled",!1),r._fallbackSetFormEnableButton=void 0},1e4))})},m.prototype.initEventSetParts=function(){for(var u=this,e=function(s){t._parts_lists[s].on("updated",function(o){var e=u._appData.currentSelectionForm,a=u.getSelectedFlagName(e,s);o.items.forEach(function(e,t){var r=e.values().flag_name,i=$(o.list).find('[data-index="'+t+'"]');i.data("flag-name",r);var n=s===g.WHOLE_PART&&!u._appData.currentSelectionShowWhole;i.attr("aria-disabled",n.toString()),i.prop("disabled",n),i.removeClass("active"),a===r&&i.addClass("active"),i.off("click").on("click",function(){var e=parseInt($(this).data("index")),t=o.get("index",e)[0],r=t.values(),i=r.form,n=r.flag_name,a=r.part;u.log.debug("click item",{form:i,part:a,flag_name:n,item:t,item_value:r}),u.setNewPart(i,a,n),u._appData.lastFlag=n})})}),$("#"+m.getSelectFilterId(t.current_form,s)).select2({theme:"bootstrap4"}).off("select2:select").on("select2:select",function(){var e,t=$(this).data("part"),r=null!==(e=$(this).val())&&void 0!==e?e:g.ALL_FILTER;u.log.debug("select filter",{part:t},$(this).val()),u._appData.setPartFilter(u.current_form,t,r)})},t=this,r=0,i=this.parts_list;r<i.length;r++){e(i[r])}$("#chbShowWholePart").on("change",function(){var e=$(this).is(":checked");u._appData.setShowWhole(e)}),$("#"+m.getPartTabId(this.current_form)).on("shown.bs.tab",function(e){var t=$(e.target),r=$(e.relatedTarget);t.parent(".nav-item.border").addClass("border-light").removeClass("border-dark"),r.parent(".nav-item.border").removeClass("border-light").addClass("border-dark")})},m.prototype.setNewPart=function(e,t,r){var i,n=this._sprite_data_helper.getSelectableSpritesFlag(e,t,r).filter(function(e){return e.flags_fits}),a=n.find(function(e){return e.orientation==h.Orientation.Horizontal}),o=n.find(function(e){return e.orientation==h.Orientation.Vertical}),s=null!==(i=this.getSelectedOrientation(e,t))&&void 0!==i?i:h.Orientation.Vertical,u=s;return this.getSelectedFlagName(e,t)!==r?(a&&s===h.Orientation.Horizontal?u=h.Orientation.Horizontal:o&&s===h.Orientation.Vertical?u=h.Orientation.Vertical:a?u=h.Orientation.Horizontal:o&&(u=h.Orientation.Vertical),this._appData.setPart(e,t,r,u)):(a&&s===h.Orientation.Vertical?u=h.Orientation.Horizontal:o&&s===h.Orientation.Horizontal?u=h.Orientation.Vertical:a?u=h.Orientation.Horizontal:o&&(u=h.Orientation.Vertical),s!==u&&this._appData.setPart(e,t,r,u)),u},m.prototype.setNewOrientation=function(e,t,r){var i,n=this._sprite_data_helper.getSelectableSpritesFlag(e,t,r).filter(function(e){return e.flags_fits}),a=n.find(function(e){return e.orientation==h.Orientation.Horizontal}),o=n.find(function(e){return e.orientation==h.Orientation.Vertical}),s=null!==(i=this.getSelectedOrientation(e,t))&&void 0!==i?i:h.Orientation.Vertical,u=s;return this.getSelectedFlagName(e,t)!==r?(a&&s===h.Orientation.Horizontal?u=h.Orientation.Horizontal:o&&s===h.Orientation.Vertical?u=h.Orientation.Vertical:a?u=h.Orientation.Horizontal:o&&(u=h.Orientation.Vertical),this._appData.setPartOrientation(e,t,u)):(a&&s===h.Orientation.Vertical?u=h.Orientation.Horizontal:o&&s===h.Orientation.Horizontal?u=h.Orientation.Vertical:a?u=h.Orientation.Horizontal:o&&(u=h.Orientation.Vertical),s!==u&&this._appData.setPartOrientation(e,t,u)),u},m.prototype.setNewFlip=function(e,t,r){var i,n=!(null!==(i=this.getSelectedFlip(e,t))&&void 0!==i&&i);return this._appData.setPartFlip(e,t,n),n},m}();r.FormPartsAdapter=s},{"./data/application.data":86,"./data/sprite.data":87,"./site":91,"./site.value":92,"list.js":45,select2:73,"typescript-logger":78}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("./application"),n=e("typescript-logger");$(function(){n.LoggerManager.setProductionMode(),(new i.Application).init()})},{"./application":84,"typescript-logger":78}],90:[function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,o,s,u){return new(s||(s=Promise))(function(r,t){function i(e){try{a(u.next(e))}catch(e){t(e)}}function n(e){try{a(u.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,n)}a((u=u.apply(e,o||[])).next())})},o=this&&this.__generator||function(r,i){var n,a,o,e,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],a=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.DataListSubject=r.DataSubject=void 0;var i=e("typescript-logger"),n=function(){function e(e){this.observers=[],this.log=i.LoggerManager.create("Observer:DataSubject"),this._state=e}return Object.defineProperty(e.prototype,"data",{get:function(){return this._state},set:function(e){this._state=e,this.notify()},enumerable:!1,configurable:!0}),e.prototype.let=function(e){return this._state=e(this._state),this.notify(),this._state},e.prototype.attach=function(e){this.observers.includes(e)?this.log.warn("Subject: Observer has been attached already."):(this.log.debug("Subject: Attached an observer.",e),this.observers.push(e))},e.prototype.detach=function(e){var t=this.observers.indexOf(e);-1!==t?(this.observers=this.observers.splice(t,1),this.log.debug("Subject: Detached an observer.",e)):this.log.warn("Subject: Nonexistent observer.")},e.prototype.notify=function(){var i=this;return this.log.debug("Subject: Notifying observers...",this._state),Promise.all(this.observers.map(function(r){return new Promise(function(e,t){try{e(r.update(i))}catch(e){t(e)}})}))},e}();r.DataSubject=n;var s=function(){function e(e){void 0===e&&(e=[]),this._state=[],this.observers=[],this.log=i.LoggerManager.create("Observer:ListDataSubject"),this._state=e}return Object.defineProperty(e.prototype,"data",{get:function(){return this._state},set:function(e){this._state=e,this.notify()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._state.length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.data=[]},e.prototype.last=function(){return this._state.length>0?this._state[this._state.length-1]:void 0},e.prototype.get=function(e){return this._state[e]},e.prototype.find=function(e,t){return this._state.find(e,t)},e.prototype.findIndex=function(e,t){return this._state.findIndex(e,t)},e.prototype.let=function(e,t){if(e>=0&&e<this._state.length&&void 0!==this._state[e]){var r=t(this._state[e],e);if(void 0!==r)this._state[e]=r,this.notifyItem(r,e);else{var i=this._state[e];this._state.splice(e,1),this.notifyRemovedItem(i)}}},e.prototype.lets=function(r){this._state.length>0&&(this._state=this._state.map(function(e,t){return r(e,t)}).filter(function(e){return void 0!==e}),this.notify())},e.prototype.forEach=function(e,t){this._state.forEach(e,t)},e.prototype.set=function(e,t){e>=0&&e<this._state.length&&(this._state[e]=t,this.notifyItem(t,e))},e.prototype.push=function(e){this._state.push(e),this.notifyAddedItem(this._state[this._state.length-1])},e.prototype.remove=function(e){if(e>=0&&e<this._state.length){var t=this._state[e];this._state.splice(e,1),this.notifyRemovedItem(t)}},e.prototype.attach=function(e){this.observers.includes(e)?this.log.warn("Subject: Observer has been attached already."):(this.log.debug("Subject: Attached an observer.",e),this.observers.push(e))},e.prototype.detach=function(e){var t=this.observers.indexOf(e);-1!==t?(this.observers=this.observers.splice(t,1),this.log.debug("Subject: Detached an observer.",e)):this.log.warn("Subject: Nonexistent observer.")},e.prototype.notify=function(){return a(this,void 0,void 0,function(){var t,r;return o(this,function(e){for(this.log.debug("Subject: Notifying observers...",this._state),t=0,r=this.observers;t<r.length;t++)r[t].update(this);return[2]})})},e.prototype.notifyItem=function(i,n){return a(this,void 0,void 0,function(){var t,r;return o(this,function(e){for(this.log.debug("Subject: Notifying observers, Item...",this._state,n),t=0,r=this.observers;t<r.length;t++)r[t].updateItem(this,i,n);return[2]})})},e.prototype.notifyAddedItem=function(i){return a(this,void 0,void 0,function(){var t,r;return o(this,function(e){for(this.log.debug("Subject: Notifying observers, AddedItem...",this._state,i),t=0,r=this.observers;t<r.length;t++)r[t].updateAddedItem(this,i);return[2]})})},e.prototype.notifyRemovedItem=function(i){return a(this,void 0,void 0,function(){var t,r;return o(this,function(e){for(this.log.debug("Subject: Notifying observers, RemovedItem...",this._state,i),t=0,r=this.observers;t<r.length;t++)r[t].updateRemovedItem(this,i);return[2]})})},e}();r.DataListSubject=s},{"typescript-logger":78}],91:[function(e,t,r){"use strict";String.prototype.format=function(){var i=arguments,n=0;return this.replace(/\{(\w*)\}/g,function(e,t){if(""===t&&(t=n,n++),t==+t)return"undefined"!==i[t]?i[t]:e;for(var r=0;r<i.length;r++)if("object"==typeof i[r]&&void 0!==i[r][t])return i[r][t];return e})};var i=function(e){var t,r,i=window.location.search.substring(1).split("&");for(r=0;r<i.length;r++)if((t=i[r].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])},n=function(e,t,r){void 0===t&&(t=1),void 0===r&&(r=1);var i=$(window),n={top:i.scrollTop(),left:i.scrollLeft()};n.right=n.left+i.width(),n.bottom=n.top+i.height();var a=$(e).offset();return a.right=a.left+$(e).outerWidth()*t,a.bottom=a.top+$(e).outerHeight()*r,!(a.left>=n.left&&a.top>=n.top&&a.right<=n.right&&a.bottom<=n.bottom)},a=function(e){return null!==e&&""!==e?e.split(/\r\n|\r|\n/).length:0},o=function(e,t,r){var i=0,n=!1;e.on("click",function(e){var t=this;i=setTimeout(function(){n||r(t),n=!1},250)}).on("dblclick",function(e){clearTimeout(i),n=!0,t(this)})};function s(e,t,r){return Math.min(Math.max(e,t),r)}function u(e,t){var r=new Set;return e.filter(function(e){return!r.has(e[t])&&r.add(e[t])})}Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)},t.exports={site:site,USE_CACHE:USE_CACHE,getUrlParameter:i,isOnScreen:n,countlines:a,makeDoubleClick:o,clamp:s,removeDuplicateObjectFromArray:u}},{}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LIST_JS_PAGINATION=r.PAGINATION_CLASS=void 0,r.PAGINATION_CLASS="paginationBottom",r.LIST_JS_PAGINATION=[{paginationClass:r.PAGINATION_CLASS,innerWindow:5,left:2,right:2,item:'<li class="page-item"><a class="page page-link" href="#/"></a></li>'}]},{}],93:[function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SpriteAdapter=void 0;var s=e("pixi.js"),a=e("typescript-logger"),d=e("./data/application.data"),p=e("./data/sprite.data"),u=e("./site"),l=i(e("tinycolor2")),n=function(){function e(e,t,r,i,n){void 0===i&&(i=void 0),void 0===n&&(n=void 0),this._sprites={},this._parts_container=new s.Container,this._grid_in=new PixiJSGrid(0),this._grid_out=new PixiJSGrid(0),this._grids=new s.Container,this._currentForm=new d.CurrentSelectionForm,this._show_grid=!1,this.log=a.LoggerManager.create("SpriteAdapter"),this.OUTLINE_SPRITE_NAME="outline",this.CRAWS_SPRITE_NAME="craws",this._pixiApp=e,this._appData=t,this._downloadButton=i,this._downloadFullButton=n,this._currentForm=this._appData.currentSelectionFormData,this._show_grid=this._appData.settings.show_grid,this._parts_canvas=r}return e.prototype.init=function(e,t){var r=this,i=e.form,n=e.parts;this._resources=t,this.updateParts(i,n),this._grid_out=new PixiJSGrid(this._parts_container.width),this._grid_in=new PixiJSGrid(this._parts_container.width),this._grids.addChild(this._grid_out),this._grids.addChild(this._grid_in),this._pixiApp.stage.addChild(this._parts_container),this._pixiApp.stage.addChild(this._grids),this._pixiApp.ticker.add(function(){r._pixiApp.renderer.render(r._parts_container),r._appData.settings.show_grid?(r._grid_out.drawGrid(),r._grid_in.drawGrid()):(r._grid_in.clearGrid(),r._grid_out.clearGrid())});var a=this;window.addEventListener("resize",function(){a.log.debug("resize"),a.updateSprite()}),this.updateSprite(),this.initObservers()},e.prototype.updatePart=function(e,t,r){var i;this.setPart(e,t,null!==(i=r.flag_name)&&void 0!==i?i:d.DEFAULT_FLAG_NAME_NONE,r.orientation,r.flip,!1),this.updateSprite(),this.updateDownloadButton(),this.notifyPartsCanvas()},e.prototype.updateParts=function(e,t){var r,i,n;this._parts_container.removeChildren();for(var a=0,o=Object.keys(t);a<o.length;a++){var s=o[a],u=t[s],l=null!==(r=u.orientation)&&void 0!==r?r:p.Orientation.Vertical,h=null!==(i=u.flip)&&void 0!==i&&i;if(u.flag_name||(this.log.warn("updateParts","part_data.flag_name is empty, use default None"),this.log.debug("updateParts",{form:e,parts:t},u)),void 0!==u?(this.setPart(e,s,null!==(n=u.flag_name)&&void 0!==n?n:d.DEFAULT_FLAG_NAME_NONE,l,h,!1),(s in this._sprites&&s!==d.WHOLE_PART&&!this._appData.currentSelectionShowWhole||s==d.WHOLE_PART&&this._appData.currentSelectionShowWhole)&&this._parts_container.addChild(this._sprites[s])):this.log.warn("updateParts","no sprite data for "+s),this._appData.settings.craws_color){var c=this.setCraws(e,s,l,h,this._appData.settings.craws_color,!1);c&&this._parts_container.addChild(c)}if(this._appData.settings.outline_color){var f=this.setOutline(e,s,l,h,this._appData.settings.outline_color,!1);f&&this._parts_container.addChild(f)}}this.updateSprite(),this.updateDownloadButton(),this.notifyPartsCanvas()},e.prototype.updateDownloadButton=function(){var i=this;this._pixiApp.renderer.extract.canvas(this._parts_container).toBlob(function(e){if(i._downloadButton){var t=i._appData.currentSelectionForm,r=$(i._downloadButton);r.attr("download",t),r.attr("href",URL.createObjectURL(e))}},"image/png"),this._pixiApp.renderer.extract.canvas(this._pixiApp.stage).toBlob(function(e){if(i._downloadFullButton){var t=i._appData.currentSelectionForm,r=$(i._downloadFullButton);r.attr("download",t),r.attr("href",URL.createObjectURL(e))}},"image/png")},e.prototype.notifyPartsCanvas=function(){this._parts_canvas.data={width:this._parts_container.width,height:this._parts_container.height,uint8Array:this._pixiApp.renderer.extract.pixels(this._parts_container)}},e.prototype.setPart=function(t,r,i,n,e,a){if(void 0===a&&(a=!0),void 0!==this._resources){var o=u.site.data.sprites.find(function(e){return e.flag_name==i&&e.form==t&&e.part==r&&e.orientation==n});this.setPartSprite(o,t,i,r,n,e,a)}},e.prototype.setCraws=function(t,r,i,e,n,a){if(void 0===n&&(n=d.DEFAULT_CRAWS_COLOR),void 0===a&&(a=!0),void 0!==this._resources){var o=u.site.data.sprites.find(function(e){return e.craws&&e.form==t&&e.part==r&&e.orientation==i});if(void 0!==o){var s=this.setSpriteTexture(this.CRAWS_SPRITE_NAME,o,i,e,a);return s&&(s.tint=parseInt("0x"+l.default(n).toHex())),s}this.clearSpriteTexture(this.CRAWS_SPRITE_NAME)}},e.prototype.setOutline=function(t,r,i,e,n,a){if(void 0===n&&(n=d.DEFAULT_OUTLINE_COLOR),void 0===a&&(a=!0),void 0!==this._resources){var o=u.site.data.sprites.find(function(e){return e.outlines&&e.form==t&&e.part==r&&e.orientation==i});if(void 0!==o){var s=this.setSpriteTexture(this.OUTLINE_SPRITE_NAME,o,i,e,a);return s&&(s.tint=parseInt("0x"+l.default(n).toHex())),s}this.clearSpriteTexture(this.OUTLINE_SPRITE_NAME)}},e.prototype.initObservers=function(){var i=this;this._appData.currentSelectionFormObservable.attach(new(function(){function e(){}return e.prototype.update=function(e){i._currentForm=e.data,i.updateParts(i._currentForm.form,i._currentForm.parts)},e}()));for(var e=0,t=this._appData.forms;e<t.length;e++){var r=t[e];this._appData.getCurrentSelectionPartsObservables(r).forEach(function(e){var t=e.form,r=e.part;e.observable.attach(new(function(){function e(){}return e.prototype.update=function(e){i.updatePart(t,r,e.data)},e}()))})}this._appData.settingsObservable.attach(new(function(){function e(){}return e.prototype.update=function(e){i._show_grid=e.data.show_grid,i.updateParts(i._currentForm.form,i._currentForm.parts),i.updateGrid(e.data.show_grid)},e}())),this._appData.currentSelectionShowWholeObservable.attach(new(function(){function e(){}return e.prototype.update=function(e){i.updateParts(i._currentForm.form,i._currentForm.parts)},e}()))},e.prototype.setPartSprite=function(e,t,r,i,n,a,o){if(void 0===o&&(o=!0),void 0!==this._resources){if(void 0!==e)return this.setSpriteTexture(i,e,n,a,o);this.clearSpriteTexture(i),this.log.warn("setPart",r+" "+i+" "+n+" not found in meta")}},e.prototype.clearSpriteTexture=function(e){e in this._sprites&&(this._parts_container.removeChild(this._sprites[e]),delete this._sprites[e])},e.prototype.setSpriteTexture=function(e,t,r,i,n){if(void 0===n&&(n=!0),void 0!==this._resources){var a=this._resources[t.sheet];if(null!=a&&void 0!==a.textures){var o=a.textures[t.id];if(e in this._sprites?this._sprites[e].texture=o:this._sprites[e]=new s.Sprite(o),this._sprites[e].texture.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST,d.ENABLE_FLIP_FEATURE){switch(this._sprites[e].scale.x=1,this._sprites[e].scale.y=1,this._sprites[e].anchor.x=.5,this._sprites[e].anchor.y=.5,r){case p.Orientation.Horizontal:this._sprites[e].scale.x=i?-1:1;break;case p.Orientation.Vertical:this._sprites[e].scale.y=i?-1:1}this._sprites[e].x=this._sprites[e].width/2,this._sprites[e].y=this._sprites[e].height/2}return n&&this.updateSprite(),this._sprites[e].texture.baseTexture.update(),this._sprites[e].texture.update(),this.log.debug("setSpriteTexture",{sprite_name:e,orientation:r,flip:i,update_sprite:n},this._sprites[e]),this._sprites[e]}this.log.warn("setSpriteTexture",t.sheet+" not found or no textures",this._resources[t.sheet])}},e.prototype.updateSprite=function(){var e=this._pixiApp.screen.width>=32?16:this._pixiApp.screen.width>=8?8:0,t=this._pixiApp.screen.height>=32?16:this._pixiApp.screen.height>=8?8:0,r=this._pixiApp.screen.width-e,i=this._pixiApp.screen.height-t;this._parts_container.width=Math.min(r,i),this._parts_container.height=Math.min(r,i),this._parts_container.position.set(this._pixiApp.screen.width/2-this._parts_container.width/2,this._pixiApp.screen.height/2-this._parts_container.height/2),this.log.debug("updateSprite: window",r,i),this.log.debug("updateSprite: sprites",this._parts_container.x,this._parts_container.y,this._parts_container.width,this._parts_container.height,this._parts_container),this._grid_in=new PixiJSGrid(this._parts_container.width),this._grid_out=new PixiJSGrid(this._parts_container.width),this.updateGrid(this._show_grid)},e.prototype.updateGrid=function(e){this._show_grid=e,this._grids.position=this._parts_container.position,this._grid_in.cellSize=this._parts_container.scale.x,this._grid_out.cellSize=this._parts_container.scale.x,this._grid_in.blendMode=PIXI.BLEND_MODES.SRC_OUT,this._grid_out.blendMode=PIXI.BLEND_MODES.SUBTRACT,this._grids.removeChildren(),this._show_grid?(this._grids.addChild(this._grid_out),this._grids.addChild(this._grid_in),this._grid_out.drawGrid(),this._grid_in.drawGrid()):(this._grid_in.clearGrid(),this._grid_out.clearGrid())},e}();r.SpriteAdapter=n},{"./data/application.data":86,"./data/sprite.data":87,"./site":91,"pixi.js":66,tinycolor2:76,"typescript-logger":78}],94:[function(e,t,a){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.SpriteDataHelper=a.FLAG_NAME_NONE_DEFAULT=void 0;var u=e("./site"),i=r(e("memory-cache")),l=e("./data/sprite.data");a.FLAG_NAME_NONE_DEFAULT="None";var n=function(){function e(){this._cacheFlagData=new i.default.Cache,this._cacheSpriteMetaData=new i.default.Cache,this._cacheFlagNames=new i.default.Cache,this.DEFAULT_FLAG_NAME_KEY="default_flag_name",this.MASK_SPRITE_KEY="mask_sprite",this.DEFAULT_SPRITE_KEY="default_sprite",this.SELECTABLE_SPRITES_KEY="selectable_sprites",this.SELECTABLE_PARTS_KEY="selectable_parts",this.FLAG_DATA_KEY="flag_data"}return e.prototype.setup=function(e,t){return this.warmUpCache(e,t)},e.prototype.getDefaultFlagName=function(e){var t,r,i=this.DEFAULT_FLAG_NAME_KEY+"_"+e,n=this._cacheFlagNames.get(i);return n||(n=null!==(r=null===(t=u.site.data.sprites.find(function(e){return e.default}))||void 0===t?void 0:t.flag_name)&&void 0!==r?r:a.FLAG_NAME_NONE_DEFAULT,this._cacheFlagNames.put(i,n),n)},e.prototype.getSelectableSprites=function(t){var e=this.SELECTABLE_SPRITES_KEY+"_"+t,r=this._cacheSpriteMetaData.get(e);return r||(r=u.site.data.sprites.filter(function(e){return!(e.form!=t||void 0!==e.mask&&e.mask||void 0!==e.craws&&e.craws||void 0!==e.outlines&&e.outlines)}).sort(function(e,t){return e.default?1:t.default?-1:e.flag_name>t.flag_name?-1:e.flag_name<t.flag_name?1:0}).reverse(),this._cacheSpriteMetaData.put(e,r),r)},e.prototype.getSelectableSpritesParts=function(e,t){var r=this.SELECTABLE_PARTS_KEY+"_"+e+"_"+t,i=this._cacheSpriteMetaData.get(r);return i||(i=this.getSelectableSprites(e).filter(function(e){return e.part==t}),this._cacheSpriteMetaData.put(r,i),i)},e.prototype.getSelectableSpritesFlag=function(e,t,r){var i=this.SELECTABLE_PARTS_KEY+"_"+e+"_"+t+"_"+r,n=this._cacheSpriteMetaData.get(i);return n||(n=this.getSelectableSpritesParts(e,t).filter(function(e){return e.flag_name==r}),this._cacheSpriteMetaData.put(i,n),n)},e.prototype.getSelectableSprite=function(e,t,r,i){var n=this.SELECTABLE_PARTS_KEY+"_"+e+"_"+t+"_"+r+"_"+i,a=this._cacheSpriteMetaData.get(n);return a&&a.length>0?a[0]:(a=this.getSelectableSpritesFlag(e,t,r).filter(function(e){return e.orientation==i}),this._cacheSpriteMetaData.put(n,a),a.length>0?a[0]:void 0)},e.prototype.getMaskSprite=function(t,r){var e=this.MASK_SPRITE_KEY+"_"+t+"_"+r,i=this._cacheSpriteMetaData.get(e);return i&&i.length>0?i[0]:(i=u.site.data.sprites.filter(function(e){return e.form==t&&e.part==r&&void 0!==e.mask&&e.mask}),this._cacheSpriteMetaData.put(e,i),i.length>0?i[0]:void 0)},e.prototype.getDefaultSprite=function(t,r){var e=this.DEFAULT_SPRITE_KEY+"_"+t+"_"+r,i=this._cacheSpriteMetaData.get(e);return i&&i.length>0?i[0]:(i=u.site.data.sprites.filter(function(e){return e.form==t&&e.part==r&&void 0!==e.default&&e.default}),this._cacheSpriteMetaData.put(e,i),i.length>0?i[0]:void 0)},e.prototype.getFlagData=function(t){var e,r=this.FLAG_DATA_KEY+"_"+t,i=this._cacheFlagData.get(r);return i||((i=null!==(e=u.site.data.flags.find(function(e){return e.name==t}))&&void 0!==e?e:null)&&this._cacheFlagData.put(r,i),i)},e.prototype.warmUpCache=function(o,e){var s=this,t=e.map(function(a){return new Promise(function(e,t){try{s.getSelectableSpritesParts(o,a),s.getDefaultSprite(o,a),s.getMaskSprite(o,a);for(var r=0,i=u.site.data.flags.map(function(e){return e.name});r<i.length;r++){var n=i[r];s.getFlagData(n),s.getSelectableSpritesFlag(o,a,n),s.getSelectableSprite(o,a,n,l.Orientation.Horizontal),s.getSelectableSprite(o,a,n,l.Orientation.Vertical)}e(!0)}catch(e){t(e)}})});return Promise.all(t)},e}();a.SpriteDataHelper=n},{"./data/sprite.data":87,"./site":91,"memory-cache":62}]},{},[89]);
